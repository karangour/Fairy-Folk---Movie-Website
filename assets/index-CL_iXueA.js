(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var s=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var o=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:function(){return i[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$1(i,e,s){this.props=i,this.context=e,this.refs=D$2,this.updater=s||B$2}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$2(i,e,s){this.props=i,this.context=e,this.refs=D$2,this.updater=s||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(i,e,s){var a,o={},c=null,d=null;if(e!=null)for(a in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J$1.call(e,a)&&!L$2.hasOwnProperty(a)&&(o[a]=e[a]);var h=arguments.length-2;if(h===1)o.children=s;else if(1<h){for(var b=Array(h),tt=0;tt<h;tt++)b[tt]=arguments[tt+2];o.children=b}if(i&&i.defaultProps)for(a in h=i.defaultProps,h)o[a]===void 0&&(o[a]=h[a]);return{$$typeof:l$1,type:i,key:c,ref:d,props:o,_owner:K$2.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$2(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$2(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$2(i,e,s,a,o){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var d=!1;if(i===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=i,o=o(d),i=a===""?"."+Q$2(d,0):a,I$2(o)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$2(o,e,s,"",function(tt){return tt})):o!=null&&(O$2(o)&&(o=N$1(o,s+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+i)),e.push(o)),1;if(d=0,a=a===""?".":a+":",I$2(i))for(var h=0;h<i.length;h++){c=i[h];var b=a+Q$2(c,h);d+=R$2(c,e,s,b,o)}else if(b=A$2(i),typeof b=="function")for(i=b.call(i),h=0;!(c=i.next()).done;)c=c.value,b=a+Q$2(c,h++),d+=R$2(c,e,s,b,o);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$2(i,e,s){if(i==null)return i;var a=[],o=0;return R$2(i,a,"","",function(c){return e.call(s,c,o++)}),a}function T$2(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(i,e,s){S$2(i,function(){e.apply(this,arguments)},s)},count:function(i){var e=0;return S$2(i,function(){e++}),e},toArray:function(i){return S$2(i,function(e){return e})||[]},only:function(i){if(!O$2(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$2;react_production_min.cloneElement=function(i,e,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var a=C$2({},i.props),o=i.key,c=i.ref,d=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$2.current),e.key!==void 0&&(o=""+e.key),i.type&&i.type.defaultProps)var h=i.type.defaultProps;for(b in e)J$1.call(e,b)&&!L$2.hasOwnProperty(b)&&(a[b]=e[b]===void 0&&h!==void 0?h[b]:e[b])}var b=arguments.length-2;if(b===1)a.children=s;else if(1<b){h=Array(b);for(var tt=0;tt<b;tt++)h[tt]=arguments[tt+2];a.children=h}return{$$typeof:l$1,type:i.type,key:o,ref:c,props:a,_owner:d}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$2;react_production_min.createFactory=function(i){var e=M$2.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$2,render:i}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$2}};react_production_min.memo=function(i,e){return{$$typeof:x$1,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$2.transition;V$2.transition={};try{i()}finally{V$2.transition=e}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(i,e){return U$2.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$2.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$2.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$2.current.useEffect(i,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(i,e,s){return U$2.current.useImperativeHandle(i,e,s)};react_production_min.useInsertionEffect=function(i,e){return U$2.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$2.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$2.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,s){return U$2.current.useReducer(i,e,s)};react_production_min.useRef=function(i){return U$2.current.useRef(i)};react_production_min.useState=function(i){return U$2.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,s){return U$2.current.useSyncExternalStore(i,e,s)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,e,s){var a,o={},c=null,d=null;s!==void 0&&(c=""+s),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(a in e)m$2.call(e,a)&&!p$1.hasOwnProperty(a)&&(o[a]=e[a]);if(i&&i.defaultProps)for(a in e=i.defaultProps,e)o[a]===void 0&&(o[a]=e[a]);return{$$typeof:k$1,type:i,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Mt,Ht){var zt=Mt.length;Mt.push(Ht);e:for(;0<zt;){var Yt=zt-1>>>1,Qt=Mt[Yt];if(0<o(Qt,Ht))Mt[Yt]=Ht,Mt[zt]=Qt,zt=Yt;else break e}}function s(Mt){return Mt.length===0?null:Mt[0]}function a(Mt){if(Mt.length===0)return null;var Ht=Mt[0],zt=Mt.pop();if(zt!==Ht){Mt[0]=zt;e:for(var Yt=0,Qt=Mt.length,fn=Qt>>>1;Yt<fn;){var dn=2*(Yt+1)-1,mn=Mt[dn],un=dn+1,gn=Mt[un];if(0>o(mn,zt))un<Qt&&0>o(gn,mn)?(Mt[Yt]=gn,Mt[un]=zt,Yt=un):(Mt[Yt]=mn,Mt[dn]=zt,Yt=dn);else if(un<Qt&&0>o(gn,zt))Mt[Yt]=gn,Mt[un]=zt,Yt=un;else break e}}return Ht}function o(Mt,Ht){var zt=Mt.sortIndex-Ht.sortIndex;return zt!==0?zt:Mt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var b=[],tt=[],nt=1,ft=null,yt=3,Tt=!1,gt=!1,St=!1,wt=typeof setTimeout=="function"?setTimeout:null,Et=typeof clearTimeout=="function"?clearTimeout:null,vt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Mt){for(var Ht=s(tt);Ht!==null;){if(Ht.callback===null)a(tt);else if(Ht.startTime<=Mt)a(tt),Ht.sortIndex=Ht.expirationTime,e(b,Ht);else break;Ht=s(tt)}}function At(Mt){if(St=!1,xt(Mt),!gt)if(s(b)!==null)gt=!0,Kt(kt);else{var Ht=s(tt);Ht!==null&&Jt(At,Ht.startTime-Mt)}}function kt(Mt,Ht){gt=!1,St&&(St=!1,Et(Lt),Lt=-1),Tt=!0;var zt=yt;try{for(xt(Ht),ft=s(b);ft!==null&&(!(ft.expirationTime>Ht)||Mt&&!qt());){var Yt=ft.callback;if(typeof Yt=="function"){ft.callback=null,yt=ft.priorityLevel;var Qt=Yt(ft.expirationTime<=Ht);Ht=i.unstable_now(),typeof Qt=="function"?ft.callback=Qt:ft===s(b)&&a(b),xt(Ht)}else a(b);ft=s(b)}if(ft!==null)var fn=!0;else{var dn=s(tt);dn!==null&&Jt(At,dn.startTime-Ht),fn=!1}return fn}finally{ft=null,yt=zt,Tt=!1}}var It=!1,Rt=null,Lt=-1,jt=5,Ft=-1;function qt(){return!(i.unstable_now()-Ft<jt)}function Xt(){if(Rt!==null){var Mt=i.unstable_now();Ft=Mt;var Ht=!0;try{Ht=Rt(!0,Mt)}finally{Ht?Ut():(It=!1,Rt=null)}}else It=!1}var Ut;if(typeof vt=="function")Ut=function(){vt(Xt)};else if(typeof MessageChannel<"u"){var Wt=new MessageChannel,an=Wt.port2;Wt.port1.onmessage=Xt,Ut=function(){an.postMessage(null)}}else Ut=function(){wt(Xt,0)};function Kt(Mt){Rt=Mt,It||(It=!0,Ut())}function Jt(Mt,Ht){Lt=wt(function(){Mt(i.unstable_now())},Ht)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Mt){Mt.callback=null},i.unstable_continueExecution=function(){gt||Tt||(gt=!0,Kt(kt))},i.unstable_forceFrameRate=function(Mt){0>Mt||125<Mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jt=0<Mt?Math.floor(1e3/Mt):5},i.unstable_getCurrentPriorityLevel=function(){return yt},i.unstable_getFirstCallbackNode=function(){return s(b)},i.unstable_next=function(Mt){switch(yt){case 1:case 2:case 3:var Ht=3;break;default:Ht=yt}var zt=yt;yt=Ht;try{return Mt()}finally{yt=zt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Mt,Ht){switch(Mt){case 1:case 2:case 3:case 4:case 5:break;default:Mt=3}var zt=yt;yt=Mt;try{return Ht()}finally{yt=zt}},i.unstable_scheduleCallback=function(Mt,Ht,zt){var Yt=i.unstable_now();switch(typeof zt=="object"&&zt!==null?(zt=zt.delay,zt=typeof zt=="number"&&0<zt?Yt+zt:Yt):zt=Yt,Mt){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=zt+Qt,Mt={id:nt++,callback:Ht,priorityLevel:Mt,startTime:zt,expirationTime:Qt,sortIndex:-1},zt>Yt?(Mt.sortIndex=zt,e(tt,Mt),s(b)===null&&Mt===s(tt)&&(St?(Et(Lt),Lt=-1):St=!0,Jt(At,zt-Yt))):(Mt.sortIndex=Qt,e(b,Mt),gt||Tt||(gt=!0,Kt(kt))),Mt},i.unstable_shouldYield=qt,i.unstable_wrapCallback=function(Mt){var Ht=yt;return function(){var zt=yt;yt=Ht;try{return Mt.apply(this,arguments)}finally{yt=zt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,s,a){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,s,a){if(e===null||typeof e>"u"||pa(i,e,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(i,e,s,a,o,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v$1(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z$1[e]=new v$1(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v$1(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v$1(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v$1(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v$1(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v$1(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v$1(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v$1(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v$1(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,s,a){var o=z$1.hasOwnProperty(e)?z$1[e]:null;(o!==null?o.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,o,a)&&(s=null),a||o===null?oa(e)&&(s===null?i.removeAttribute(e):i.setAttribute(e,""+s)):o.mustUseProperty?i[o.propertyName]=s===null?o.type===3?!1:"":s:(e=o.attributeName,a=o.attributeNamespace,s===null?i.removeAttribute(e):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,a?i.setAttributeNS(a,e,s):i.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(tt){var a=tt}Reflect.construct(i,[],e)}else{try{e.call()}catch(tt){a=tt}i.call(e.prototype)}else{try{throw Error()}catch(tt){a=tt}i()}}catch(tt){if(tt&&a&&typeof tt.stack=="string"){for(var o=tt.stack.split(`
`),c=a.stack.split(`
`),d=o.length-1,h=c.length-1;1<=d&&0<=h&&o[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(o[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||o[d]!==c[h]){var b=`
`+o[d].replace(" at new "," at ");return i.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",i.displayName)),b}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),a=""+i[e];if(!i.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,c=s.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(i,e,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var s=e.getValue(),a="";return i&&(a=Ta(i)?i.checked?"true":"false":i.value),i=a,i!==s?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var s=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,e){var s=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),i._wrapperState={initialChecked:a,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var s=Sa(e.value),a=e.type;if(s!=null)a==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(a==="submit"||a==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,s):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,s||e===i.value||(i.value=e),i.defaultValue=e}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,e,s){(e!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,e,s,a){if(i=i.options,e){e={};for(var o=0;o<s.length;o++)e["$"+s[o]]=!0;for(s=0;s<i.length;s++)o=e.hasOwnProperty("$"+i[s].value),i[s].selected!==o&&(i[s].selected=o),o&&a&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,o=0;o<i.length;o++){if(i[o].value===s){i[o].selected=!0,a&&(i[o].defaultSelected=!0);return}e!==null||i[o].disabled||(e=i[o])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}i._wrapperState={initialValue:Sa(s)}}function ib(i,e){var s=Sa(e.value),a=Sa(e.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),e.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),a!=null&&(i.defaultValue=""+a)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,a,o){MSApp.execUnsafeLocalFunction(function(){return i(e,s,a,o)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var s in e)if(e.hasOwnProperty(s)){var a=s.indexOf("--")===0,o=rb(s,e[s],a);s==="float"&&(s="cssFloat"),a?i.setProperty(s,o):i[s]=o}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,s){if(Ib)return i(e,s);Ib=!0;try{return Gb(i,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var s=i.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(i=i.type,a=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!a;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,s,a,o,c,d,h,b){var tt=Array.prototype.slice.call(arguments,3);try{e.apply(s,tt)}catch(nt){this.onError(nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,s,a,o,c,d,h,b){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,s,a,o,c,d,h,b){if(Tb.apply(this,arguments),Ob){if(Ob){var tt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=tt)}}function Vb(i){var e=i,s=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(s=e.return),i=e.return;while(i)}return e.tag===3?s:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var s=i,a=e;;){var o=s.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){s=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===s)return Xb(o),i;if(c===a)return Xb(o),e;c=c.sibling}throw Error(p(188))}if(s.return!==a.return)s=o,a=c;else{for(var d=!1,h=o.child;h;){if(h===s){d=!0,s=o,a=c;break}if(h===a){d=!0,a=o,s=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===s){d=!0,s=c,a=o;break}if(h===a){d=!0,a=c,s=o;break}h=h.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var s=i.pendingLanes;if(s===0)return 0;var a=0,o=i.suspendedLanes,c=i.pingedLanes,d=s&268435455;if(d!==0){var h=d&~o;h!==0?a=tc(h):(c&=d,c!==0&&(a=tc(c)))}else d=s&~o,d!==0?a=tc(d):c!==0&&(a=tc(c));if(a===0)return 0;if(e!==0&&e!==a&&!(e&o)&&(o=a&-a,c=e&-e,o>=c||o===16&&(c&4194240)!==0))return e;if(a&4&&(a|=s&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=a;0<e;)s=31-oc(e),o=1<<s,a|=i[s],e&=~o;return a}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var s=i.suspendedLanes,a=i.pingedLanes,o=i.expirationTimes,c=i.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,b=o[d];b===-1?(!(h&s)||h&a)&&(o[d]=vc(h,e)):b<=e&&(i.expiredLanes|=h),c&=~h}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],s=0;31>s;s++)e.push(i);return e}function Ac(i,e,s){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=s}function Bc(i,e){var s=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var a=i.eventTimes;for(i=i.expirationTimes;0<s;){var o=31-oc(s),c=1<<o;e[o]=0,a[o]=-1,i[o]=-1,s&=~c}}function Cc(i,e){var s=i.entangledLanes|=e;for(i=i.entanglements;s;){var a=31-oc(s),o=1<<a;o&e|i[a]&e&&(i[a]|=e),s&=~o}}var C$1=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,s,a,o,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:s,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=a,e=i.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),i)}function Uc(i,e,s,a,o){switch(e){case"focusin":return Lc=Tc(Lc,i,e,s,a,o),!0;case"dragenter":return Mc=Tc(Mc,i,e,s,a,o),!0;case"mouseover":return Nc=Tc(Nc,i,e,s,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,s,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,s,a,o)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var s=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return e=Cb(s),e!==null&&Fc(e),i.blockedOn=s,!1;e.shift()}return!0}function Zc(i,e,s){Xc(i)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(o){return ad(o,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===i&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===i&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,s,a){var o=C$1,c=cd.transition;cd.transition=null;try{C$1=1,fd(i,e,s,a)}finally{C$1=o,cd.transition=c}}function gd(i,e,s,a){var o=C$1,c=cd.transition;cd.transition=null;try{C$1=4,fd(i,e,s,a)}finally{C$1=o,cd.transition=c}}function fd(i,e,s,a){if(dd){var o=Yc(i,e,s,a);if(o===null)hd(i,e,a,id,s),Sc(i,a);else if(Uc(o,i,e,s,a))a.stopPropagation();else if(Sc(i,a),e&4&&-1<Rc.indexOf(i)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(i,e,s,a),c===null&&hd(i,e,a,id,s),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(i,e,a,null,s)}}var id=null;function Yc(i,e,s,a){if(id=null,i=xb(a),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(s=e.tag,s===13){if(i=Wb(e),i!==null)return i;i=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,s=e.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(i=0;i<s&&e[i]===o[i];i++);var d=s-i;for(a=1;a<=d&&e[s-a]===o[c-a];a++);return md=o.slice(i,1<a?1-a:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(s,a,o,c,d){this._reactName=s,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in i)i.hasOwnProperty(h)&&(s=i[h],this[h]=s?s(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie$1=!1;function je$1(i,e){switch(i){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return i=e.data,i===ee$1&&fe$1?null:i;default:return null}}function ke$1(i,e){if(ie$1)return i==="compositionend"||!ae$1&&ge$1(i,e)?(i=nd(),md=ld=kd=null,ie$1=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le$1[i.type]:e==="textarea"}function ne$1(i,e,s,a){Eb(a),e=oe$1(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,a),i.push({event:s,listeners:e}))}var pe=null,qe$1=null;function re$1(i){se$1(i,0)}function te$1(i){var e=ue$1(i);if(Wa(e))return i}function ve$1(i,e){if(i==="change")return e}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(i){if(i.propertyName==="value"&&te$1(qe$1)){var e=[];ne$1(e,qe$1,i,xb(i)),Jb(re$1,e)}}function Ce$1(i,e,s){i==="focusin"?(Ae$1(),pe=e,qe$1=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae$1()}function De$1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te$1(qe$1)}function Ee$1(i,e){if(i==="click")return te$1(e)}function Fe$1(i,e){if(i==="input"||i==="change")return te$1(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He$1=typeof Object.is=="function"?Object.is:Ge;function Ie$1(i,e){if(He$1(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var s=Object.keys(i),a=Object.keys(e);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var o=s[a];if(!ja.call(e,o)||!He$1(i[o],e[o]))return!1}return!0}function Je$1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke$1(i,e){var s=Je$1(i);i=0;for(var a;s;){if(s.nodeType===3){if(a=i+s.textContent.length,i<=e&&a>=e)return{node:s,offset:e-i};i=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je$1(s)}}function Le$1(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le$1(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me$1(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne$1(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe$1(i){var e=Me$1(),s=i.focusedElem,a=i.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le$1(s.ownerDocument.documentElement,s)){if(a!==null&&Ne$1(s)){if(e=a.start,i=a.end,i===void 0&&(i=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(i,s.value.length);else if(i=(e=s.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var o=s.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!i.extend&&c>a&&(o=a,a=c,c=o),o=Ke$1(s,c);var d=Ke$1(s,a);o&&d&&(i.rangeCount!==1||i.anchorNode!==o.node||i.anchorOffset!==o.offset||i.focusNode!==d.node||i.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),i.removeAllRanges(),c>a?(i.addRange(e),i.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),i.addRange(e)))}}for(e=[],i=s;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)i=e[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(i,e,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(a)||(a=Qe$1,"selectionStart"in a&&Ne$1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se$1&&Ie$1(Se$1,a)||(Se$1=a,a=oe$1(Re$1,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,s),i.push({event:e,listeners:a}),e.target=Qe$1)))}function Ve$1(i,e){var s={};return s[i.toLowerCase()]=e.toLowerCase(),s["Webkit"+i]="webkit"+e,s["Moz"+i]="moz"+e,s}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(i){if(Xe$1[i])return Xe$1[i];if(!We$1[i])return i;var e=We$1[i],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye$1)return Xe$1[i]=e[s];return i}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,s){var a=i.type||"unknown-event";i.currentTarget=s,Ub(a,e,void 0,i),i.currentTarget=null}function se$1(i,e){e=(e&4)!==0;for(var s=0;s<i.length;s++){var a=i[s],o=a.event;a=a.listeners;e:{var c=void 0;if(e)for(var d=a.length-1;0<=d;d--){var h=a[d],b=h.instance,tt=h.currentTarget;if(h=h.listener,b!==c&&o.isPropagationStopped())break e;nf(o,h,tt),c=b}else for(d=0;d<a.length;d++){if(h=a[d],b=h.instance,tt=h.currentTarget,h=h.listener,b!==c&&o.isPropagationStopped())break e;nf(o,h,tt),c=b}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D$1(i,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var a=i+"__bubble";s.has(a)||(pf(e,i,2,!1),s.add(a))}function qf(i,e,s){var a=0;e&&(a|=4),pf(s,i,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,s,a){switch(jd(e)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}s=o.bind(null,e,s,i),o=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),a?o!==void 0?i.addEventListener(e,s,{capture:!0,passive:o}):i.addEventListener(e,s,!0):o!==void 0?i.addEventListener(e,s,{passive:o}):i.addEventListener(e,s,!1)}function hd(i,e,s,a,o){var c=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var h=a.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===o||b.nodeType===8&&b.parentNode===o))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(b=d.tag,b===5||b===6){a=c=d;continue e}h=h.parentNode}}a=a.return}Jb(function(){var tt=c,nt=xb(s),ft=[];e:{var yt=df.get(i);if(yt!==void 0){var Tt=td,gt=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":Tt=Rd;break;case"focusin":gt="focus",Tt=Fd;break;case"focusout":gt="blur",Tt=Fd;break;case"beforeblur":case"afterblur":Tt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Vd;break;case $e$1:case af:case bf:Tt=Hd;break;case cf:Tt=Xd;break;case"scroll":Tt=vd;break;case"wheel":Tt=Zd;break;case"copy":case"cut":case"paste":Tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Td}var St=(e&4)!==0,wt=!St&&i==="scroll",Et=St?yt!==null?yt+"Capture":null:yt;St=[];for(var vt=tt,xt;vt!==null;){xt=vt;var At=xt.stateNode;if(xt.tag===5&&At!==null&&(xt=At,Et!==null&&(At=Kb(vt,Et),At!=null&&St.push(tf(vt,At,xt)))),wt)break;vt=vt.return}0<St.length&&(yt=new Tt(yt,gt,null,s,nt),ft.push({event:yt,listeners:St}))}}if(!(e&7)){e:{if(yt=i==="mouseover"||i==="pointerover",Tt=i==="mouseout"||i==="pointerout",yt&&s!==wb&&(gt=s.relatedTarget||s.fromElement)&&(Wc(gt)||gt[uf]))break e;if((Tt||yt)&&(yt=nt.window===nt?nt:(yt=nt.ownerDocument)?yt.defaultView||yt.parentWindow:window,Tt?(gt=s.relatedTarget||s.toElement,Tt=tt,gt=gt?Wc(gt):null,gt!==null&&(wt=Vb(gt),gt!==wt||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(Tt=null,gt=tt),Tt!==gt)){if(St=Bd,At="onMouseLeave",Et="onMouseEnter",vt="mouse",(i==="pointerout"||i==="pointerover")&&(St=Td,At="onPointerLeave",Et="onPointerEnter",vt="pointer"),wt=Tt==null?yt:ue$1(Tt),xt=gt==null?yt:ue$1(gt),yt=new St(At,vt+"leave",Tt,s,nt),yt.target=wt,yt.relatedTarget=xt,At=null,Wc(nt)===tt&&(St=new St(Et,vt+"enter",gt,s,nt),St.target=xt,St.relatedTarget=wt,At=St),wt=At,Tt&&gt)t:{for(St=Tt,Et=gt,vt=0,xt=St;xt;xt=vf(xt))vt++;for(xt=0,At=Et;At;At=vf(At))xt++;for(;0<vt-xt;)St=vf(St),vt--;for(;0<xt-vt;)Et=vf(Et),xt--;for(;vt--;){if(St===Et||Et!==null&&St===Et.alternate)break t;St=vf(St),Et=vf(Et)}St=null}else St=null;Tt!==null&&wf(ft,yt,Tt,St,!1),gt!==null&&wt!==null&&wf(ft,wt,gt,St,!0)}}e:{if(yt=tt?ue$1(tt):window,Tt=yt.nodeName&&yt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&yt.type==="file")var kt=ve$1;else if(me(yt))if(we$1)kt=Fe$1;else{kt=De$1;var It=Ce$1}else(Tt=yt.nodeName)&&Tt.toLowerCase()==="input"&&(yt.type==="checkbox"||yt.type==="radio")&&(kt=Ee$1);if(kt&&(kt=kt(i,tt))){ne$1(ft,kt,s,nt);break e}It&&It(i,yt,tt),i==="focusout"&&(It=yt._wrapperState)&&It.controlled&&yt.type==="number"&&cb(yt,"number",yt.value)}switch(It=tt?ue$1(tt):window,i){case"focusin":(me(It)||It.contentEditable==="true")&&(Qe$1=It,Re$1=tt,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(ft,s,nt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(ft,s,nt)}var Rt;if(ae$1)e:{switch(i){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else ie$1?ge$1(i,s)&&(Lt="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(Lt="onCompositionStart");Lt&&(de&&s.locale!=="ko"&&(ie$1||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&ie$1&&(Rt=nd()):(kd=nt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),It=oe$1(tt,Lt),0<It.length&&(Lt=new Ld(Lt,i,null,s,nt),ft.push({event:Lt,listeners:It}),Rt?Lt.data=Rt:(Rt=he$1(s),Rt!==null&&(Lt.data=Rt)))),(Rt=ce$1?je$1(i,s):ke$1(i,s))&&(tt=oe$1(tt,"onBeforeInput"),0<tt.length&&(nt=new Ld("onBeforeInput","beforeinput",null,s,nt),ft.push({event:nt,listeners:tt}),nt.data=Rt))}se$1(ft,e)})}function tf(i,e,s){return{instance:i,listener:e,currentTarget:s}}function oe$1(i,e){for(var s=e+"Capture",a=[];i!==null;){var o=i,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(i,s),c!=null&&a.unshift(tf(i,c,o)),c=Kb(i,e),c!=null&&a.push(tf(i,c,o))),i=i.return}return a}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,s,a,o){for(var c=e._reactName,d=[];s!==null&&s!==a;){var h=s,b=h.alternate,tt=h.stateNode;if(b!==null&&b===a)break;h.tag===5&&tt!==null&&(h=tt,o?(b=Kb(s,c),b!=null&&d.unshift(tf(s,b,h))):o||(b=Kb(s,c),b!=null&&d.push(tf(s,b,h)))),s=s.return}d.length!==0&&i.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,s){if(e=zf(e),zf(i)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var s=e,a=0;do{var o=s.nextSibling;if(i.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(a===0){i.removeChild(o),bd(e);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=o}while(s);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return i;e--}else s==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var s=i.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return e}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue$1(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var s=i.type.contextTypes;if(!s)return Vf;var a=i.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in s)o[c]=e[c];return a&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H$1)}function ag(i,e,s){if(H$1.current!==Vf)throw Error(p(168));G$1(H$1,e),G$1(Wf,s)}function bg(i,e,s){var a=i.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var o in a)if(!(o in e))throw Error(p(108,Ra(i)||"Unknown",o));return A$1({},s,a)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,i),G$1(Wf,Wf.current),!0}function dg(i,e,s){var a=i.stateNode;if(!a)throw Error(p(169));s?(i=bg(i,e,Xf),a.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H$1),G$1(H$1,i)):E(Wf),G$1(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C$1;try{var s=eg;for(C$1=1;i<s.length;i++){var a=s[i];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),o}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var a=rg;i=sg;var o=32-oc(a)-1;a&=~(1<<o),s+=1;var c=32-oc(e)+o;if(30<c){var d=o-o%5;c=(a&(1<<d)-1).toString(32),a>>=d,o-=d,rg=1<<32-oc(e)+o|s<<o|a,sg=c+i}else rg=1<<c|s<<o|a,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(i,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=i,e=i.deletions,e===null?(i.deletions=[s],i.flags|=16):e.push(s)}function Cg(i,e){switch(i.tag){case 5:var s=i.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I$1){var e=yg;if(e){var s=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(s.nextSibling);var a=xg;e&&Cg(i,e)?Ag(a,s):(i.flags=i.flags&-4097|2,I$1=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I$1=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I$1)return Fg(i),I$1=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,i));var o=a,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var h=o.refs;d===null?delete h[c]:h[c]=d},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,i))}return i}function Mg(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Ng(i){var e=i._init;return e(i._payload)}function Og(i){function e(Et,vt){if(i){var xt=Et.deletions;xt===null?(Et.deletions=[vt],Et.flags|=16):xt.push(vt)}}function s(Et,vt){if(!i)return null;for(;vt!==null;)e(Et,vt),vt=vt.sibling;return null}function a(Et,vt){for(Et=new Map;vt!==null;)vt.key!==null?Et.set(vt.key,vt):Et.set(vt.index,vt),vt=vt.sibling;return Et}function o(Et,vt){return Et=Pg(Et,vt),Et.index=0,Et.sibling=null,Et}function c(Et,vt,xt){return Et.index=xt,i?(xt=Et.alternate,xt!==null?(xt=xt.index,xt<vt?(Et.flags|=2,vt):xt):(Et.flags|=2,vt)):(Et.flags|=1048576,vt)}function d(Et){return i&&Et.alternate===null&&(Et.flags|=2),Et}function h(Et,vt,xt,At){return vt===null||vt.tag!==6?(vt=Qg(xt,Et.mode,At),vt.return=Et,vt):(vt=o(vt,xt),vt.return=Et,vt)}function b(Et,vt,xt,At){var kt=xt.type;return kt===ya?nt(Et,vt,xt.props.children,At,xt.key):vt!==null&&(vt.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha&&Ng(kt)===vt.type)?(At=o(vt,xt.props),At.ref=Lg(Et,vt,xt),At.return=Et,At):(At=Rg(xt.type,xt.key,xt.props,null,Et.mode,At),At.ref=Lg(Et,vt,xt),At.return=Et,At)}function tt(Et,vt,xt,At){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==xt.containerInfo||vt.stateNode.implementation!==xt.implementation?(vt=Sg(xt,Et.mode,At),vt.return=Et,vt):(vt=o(vt,xt.children||[]),vt.return=Et,vt)}function nt(Et,vt,xt,At,kt){return vt===null||vt.tag!==7?(vt=Tg(xt,Et.mode,At,kt),vt.return=Et,vt):(vt=o(vt,xt),vt.return=Et,vt)}function ft(Et,vt,xt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return vt=Qg(""+vt,Et.mode,xt),vt.return=Et,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:return xt=Rg(vt.type,vt.key,vt.props,null,Et.mode,xt),xt.ref=Lg(Et,null,vt),xt.return=Et,xt;case wa:return vt=Sg(vt,Et.mode,xt),vt.return=Et,vt;case Ha:var At=vt._init;return ft(Et,At(vt._payload),xt)}if(eb(vt)||Ka(vt))return vt=Tg(vt,Et.mode,xt,null),vt.return=Et,vt;Mg(Et,vt)}return null}function yt(Et,vt,xt,At){var kt=vt!==null?vt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return kt!==null?null:h(Et,vt,""+xt,At);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===kt?b(Et,vt,xt,At):null;case wa:return xt.key===kt?tt(Et,vt,xt,At):null;case Ha:return kt=xt._init,yt(Et,vt,kt(xt._payload),At)}if(eb(xt)||Ka(xt))return kt!==null?null:nt(Et,vt,xt,At,null);Mg(Et,xt)}return null}function Tt(Et,vt,xt,At,kt){if(typeof At=="string"&&At!==""||typeof At=="number")return Et=Et.get(xt)||null,h(vt,Et,""+At,kt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va:return Et=Et.get(At.key===null?xt:At.key)||null,b(vt,Et,At,kt);case wa:return Et=Et.get(At.key===null?xt:At.key)||null,tt(vt,Et,At,kt);case Ha:var It=At._init;return Tt(Et,vt,xt,It(At._payload),kt)}if(eb(At)||Ka(At))return Et=Et.get(xt)||null,nt(vt,Et,At,kt,null);Mg(vt,At)}return null}function gt(Et,vt,xt,At){for(var kt=null,It=null,Rt=vt,Lt=vt=0,jt=null;Rt!==null&&Lt<xt.length;Lt++){Rt.index>Lt?(jt=Rt,Rt=null):jt=Rt.sibling;var Ft=yt(Et,Rt,xt[Lt],At);if(Ft===null){Rt===null&&(Rt=jt);break}i&&Rt&&Ft.alternate===null&&e(Et,Rt),vt=c(Ft,vt,Lt),It===null?kt=Ft:It.sibling=Ft,It=Ft,Rt=jt}if(Lt===xt.length)return s(Et,Rt),I$1&&tg(Et,Lt),kt;if(Rt===null){for(;Lt<xt.length;Lt++)Rt=ft(Et,xt[Lt],At),Rt!==null&&(vt=c(Rt,vt,Lt),It===null?kt=Rt:It.sibling=Rt,It=Rt);return I$1&&tg(Et,Lt),kt}for(Rt=a(Et,Rt);Lt<xt.length;Lt++)jt=Tt(Rt,Et,Lt,xt[Lt],At),jt!==null&&(i&&jt.alternate!==null&&Rt.delete(jt.key===null?Lt:jt.key),vt=c(jt,vt,Lt),It===null?kt=jt:It.sibling=jt,It=jt);return i&&Rt.forEach(function(qt){return e(Et,qt)}),I$1&&tg(Et,Lt),kt}function St(Et,vt,xt,At){var kt=Ka(xt);if(typeof kt!="function")throw Error(p(150));if(xt=kt.call(xt),xt==null)throw Error(p(151));for(var It=kt=null,Rt=vt,Lt=vt=0,jt=null,Ft=xt.next();Rt!==null&&!Ft.done;Lt++,Ft=xt.next()){Rt.index>Lt?(jt=Rt,Rt=null):jt=Rt.sibling;var qt=yt(Et,Rt,Ft.value,At);if(qt===null){Rt===null&&(Rt=jt);break}i&&Rt&&qt.alternate===null&&e(Et,Rt),vt=c(qt,vt,Lt),It===null?kt=qt:It.sibling=qt,It=qt,Rt=jt}if(Ft.done)return s(Et,Rt),I$1&&tg(Et,Lt),kt;if(Rt===null){for(;!Ft.done;Lt++,Ft=xt.next())Ft=ft(Et,Ft.value,At),Ft!==null&&(vt=c(Ft,vt,Lt),It===null?kt=Ft:It.sibling=Ft,It=Ft);return I$1&&tg(Et,Lt),kt}for(Rt=a(Et,Rt);!Ft.done;Lt++,Ft=xt.next())Ft=Tt(Rt,Et,Lt,Ft.value,At),Ft!==null&&(i&&Ft.alternate!==null&&Rt.delete(Ft.key===null?Lt:Ft.key),vt=c(Ft,vt,Lt),It===null?kt=Ft:It.sibling=Ft,It=Ft);return i&&Rt.forEach(function(Xt){return e(Et,Xt)}),I$1&&tg(Et,Lt),kt}function wt(Et,vt,xt,At){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:e:{for(var kt=xt.key,It=vt;It!==null;){if(It.key===kt){if(kt=xt.type,kt===ya){if(It.tag===7){s(Et,It.sibling),vt=o(It,xt.props.children),vt.return=Et,Et=vt;break e}}else if(It.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha&&Ng(kt)===It.type){s(Et,It.sibling),vt=o(It,xt.props),vt.ref=Lg(Et,It,xt),vt.return=Et,Et=vt;break e}s(Et,It);break}else e(Et,It);It=It.sibling}xt.type===ya?(vt=Tg(xt.props.children,Et.mode,At,xt.key),vt.return=Et,Et=vt):(At=Rg(xt.type,xt.key,xt.props,null,Et.mode,At),At.ref=Lg(Et,vt,xt),At.return=Et,Et=At)}return d(Et);case wa:e:{for(It=xt.key;vt!==null;){if(vt.key===It)if(vt.tag===4&&vt.stateNode.containerInfo===xt.containerInfo&&vt.stateNode.implementation===xt.implementation){s(Et,vt.sibling),vt=o(vt,xt.children||[]),vt.return=Et,Et=vt;break e}else{s(Et,vt);break}else e(Et,vt);vt=vt.sibling}vt=Sg(xt,Et.mode,At),vt.return=Et,Et=vt}return d(Et);case Ha:return It=xt._init,wt(Et,vt,It(xt._payload),At)}if(eb(xt))return gt(Et,vt,xt,At);if(Ka(xt))return St(Et,vt,xt,At);Mg(Et,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,vt!==null&&vt.tag===6?(s(Et,vt.sibling),vt=o(vt,xt),vt.return=Et,Et=vt):(s(Et,vt),vt=Qg(xt,Et.mode,At),vt.return=Et,Et=vt),d(Et)):s(Et,vt)}return wt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(i){var e=Wg.current;E(Wg),i._currentValue=e}function bh(i,e,s){for(;i!==null;){var a=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),i===s)break;i=i.return}}function ch(i,e){Xg=i,Zg=Yg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(dh=!0),i.firstContext=null)}function eh(i){var e=i._currentValue;if(Zg!==i)if(i={context:i,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=i,Xg.dependencies={lanes:0,firstContext:i}}else Yg=Yg.next=i;return e}var fh=null;function gh(i){fh===null?fh=[i]:fh.push(i)}function hh(i,e,s,a){var o=e.interleaved;return o===null?(s.next=s,gh(e)):(s.next=o.next,o.next=s),e.interleaved=s,ih(i,a)}function ih(i,e){i.lanes|=e;var s=i.alternate;for(s!==null&&(s.lanes|=e),s=i,i=i.return;i!==null;)i.childLanes|=e,s=i.alternate,s!==null&&(s.childLanes|=e),s=i,i=i.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(i,e,s){var a=i.updateQueue;if(a===null)return null;if(a=a.shared,K$1&2){var o=a.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),a.pending=e,ih(i,s)}return o=a.interleaved,o===null?(e.next=e,gh(a)):(e.next=o.next,o.next=e),a.interleaved=e,ih(i,s)}function oh(i,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var a=e.lanes;a&=i.pendingLanes,s|=a,e.lanes=s,Cc(i,s)}}function ph(i,e){var s=i.updateQueue,a=i.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var o=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?o=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?o=c=e:c=c.next=e}else o=c=e;s={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=e:i.next=e,s.lastBaseUpdate=e}function qh(i,e,s,a){var o=i.updateQueue;jh=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var b=h,tt=b.next;b.next=null,d===null?c=tt:d.next=tt,d=b;var nt=i.alternate;nt!==null&&(nt=nt.updateQueue,h=nt.lastBaseUpdate,h!==d&&(h===null?nt.firstBaseUpdate=tt:h.next=tt,nt.lastBaseUpdate=b))}if(c!==null){var ft=o.baseState;d=0,nt=tt=b=null,h=c;do{var yt=h.lane,Tt=h.eventTime;if((a&yt)===yt){nt!==null&&(nt=nt.next={eventTime:Tt,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var gt=i,St=h;switch(yt=e,Tt=s,St.tag){case 1:if(gt=St.payload,typeof gt=="function"){ft=gt.call(Tt,ft,yt);break e}ft=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=St.payload,yt=typeof gt=="function"?gt.call(Tt,ft,yt):gt,yt==null)break e;ft=A$1({},ft,yt);break e;case 2:jh=!0}}h.callback!==null&&h.lane!==0&&(i.flags|=64,yt=o.effects,yt===null?o.effects=[h]:yt.push(h))}else Tt={eventTime:Tt,lane:yt,tag:h.tag,payload:h.payload,callback:h.callback,next:null},nt===null?(tt=nt=Tt,b=ft):nt=nt.next=Tt,d|=yt;if(h=h.next,h===null){if(h=o.shared.pending,h===null)break;yt=h,h=yt.next,yt.next=null,o.lastBaseUpdate=yt,o.shared.pending=null}}while(!0);if(nt===null&&(b=ft),o.baseState=b,o.firstBaseUpdate=tt,o.lastBaseUpdate=nt,e=o.shared.interleaved,e!==null){o=e;do d|=o.lane,o=o.next;while(o!==e)}else c===null&&(o.shared.lanes=0);rh|=d,i.lanes=d,i.memoizedState=ft}}function sh(i,e,s){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var a=i[e],o=a.callback;if(o!==null){if(a.callback=null,a=s,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(i){if(i===th)throw Error(p(174));return i}function yh(i,e){switch(G$1(wh,e),G$1(vh,i),G$1(uh,th),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(uh),G$1(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(i){xh(wh.current);var e=xh(uh.current),s=lb(e,i.type);e!==s&&(G$1(vh,i),G$1(uh,s))}function Bh(i){vh.current===i&&(E(uh),E(vh))}var L$1=Uf(0);function Ch(i){for(var e=i;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var i=0;i<Dh.length;i++)Dh[i]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(i,e){if(e===null)return!1;for(var s=0;s<e.length&&s<i.length;s++)if(!He$1(i[s],e[s]))return!1;return!0}function Nh(i,e,s,a,o,c){if(Hh=c,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=i===null||i.memoizedState===null?Oh:Ph,i=s(a,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O$1=N=null,e.updateQueue=null,Fh.current=Qh,i=s(a,o)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,e)throw Error(p(300));return i}function Sh(){var i=Kh!==0;return Kh=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i,O$1}function Uh(){if(N===null){var i=M$1.alternate;i=i!==null?i.memoizedState:null}else i=N.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N=i;else{if(i===null)throw Error(p(310));N=i,i={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i}return O$1}function Vh(i,e){return typeof e=="function"?e(i):e}function Wh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var a=N,o=a.baseQueue,c=s.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}a.baseQueue=o=c,s.pending=null}if(o!==null){c=o.next,a=a.baseState;var h=d=null,b=null,tt=c;do{var nt=tt.lane;if((Hh&nt)===nt)b!==null&&(b=b.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),a=tt.hasEagerState?tt.eagerState:i(a,tt.action);else{var ft={lane:nt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};b===null?(h=b=ft,d=a):b=b.next=ft,M$1.lanes|=nt,rh|=nt}tt=tt.next}while(tt!==null&&tt!==c);b===null?d=a:b.next=h,He$1(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=d,e.baseQueue=b,s.lastRenderedState=a}if(i=s.interleaved,i!==null){o=i;do c=o.lane,M$1.lanes|=c,rh|=c,o=o.next;while(o!==i)}else o===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var a=s.dispatch,o=s.pending,c=e.memoizedState;if(o!==null){s.pending=null;var d=o=o.next;do c=i(c,d.action),d=d.next;while(d!==o);He$1(c,e.memoizedState)||(dh=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),s.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(i,e){var s=M$1,a=Uh(),o=e(),c=!He$1(a.memoizedState,o);if(c&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,s,a,i),[i]),a.getSnapshot!==e||c||O$1!==null&&O$1.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,o,e),void 0,null),Q$1===null)throw Error(p(349));Hh&30||di(s,e,o)}return o}function di(i,e,s){i.flags|=16384,i={getSnapshot:e,value:s},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[i]):(s=e.stores,s===null?e.stores=[i]:s.push(i))}function ci(i,e,s,a){e.value=s,e.getSnapshot=a,ei(e)&&fi(i)}function ai(i,e,s){return s(function(){ei(e)&&fi(i)})}function ei(i){var e=i.getSnapshot;i=i.value;try{var s=e();return!He$1(i,s)}catch{return!0}}function fi(i){var e=ih(i,1);e!==null&&gi(e,i,1,-1)}function hi(i){var e=Th();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},e.queue=i,i=i.dispatch=ii.bind(null,M$1,i),[e.memoizedState,i]}function bi(i,e,s,a){return i={tag:i,create:e,destroy:s,deps:a,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=i.next=i):(s=e.lastEffect,s===null?e.lastEffect=i.next=i:(a=s.next,s.next=i,i.next=a,e.lastEffect=i)),i}function ji(){return Uh().memoizedState}function ki(i,e,s,a){var o=Th();M$1.flags|=i,o.memoizedState=bi(1|e,s,void 0,a===void 0?null:a)}function li(i,e,s,a){var o=Uh();a=a===void 0?null:a;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,a!==null&&Mh(a,d.deps)){o.memoizedState=bi(e,s,c,a);return}}M$1.flags|=i,o.memoizedState=bi(1|e,s,c,a)}function mi(i,e){return ki(8390656,8,i,e)}function $h(i,e){return li(2048,8,i,e)}function ni(i,e){return li(4,2,i,e)}function oi(i,e){return li(4,4,i,e)}function pi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function qi(i,e,s){return s=s!=null?s.concat([i]):null,li(4,4,pi.bind(null,e,i),s)}function ri(){}function si(i,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s.memoizedState=[i,e],i)}function ti(i,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(i=i(),s.memoizedState=[i,e],i)}function ui(i,e,s){return Hh&21?(He$1(s,e)||(s=yc(),M$1.lanes|=s,rh|=s,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,dh=!0),i.memoizedState=s)}function vi(i,e){var s=C$1;C$1=s!==0&&4>s?s:4,i(!0);var a=Gh.transition;Gh.transition={};try{i(!1),e()}finally{C$1=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(i,e,s){var a=yi(i);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(e,s);else if(s=hh(i,e,s,a),s!==null){var o=R$1();gi(s,i,a,o),Bi(s,e,a)}}function ii(i,e,s){var a=yi(i),o={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(e,o);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,h=c(d,s);if(o.hasEagerState=!0,o.eagerState=h,He$1(h,d)){var b=e.interleaved;b===null?(o.next=o,gh(e)):(o.next=b.next,b.next=o),e.interleaved=o;return}}catch{}finally{}s=hh(i,e,o,a),s!==null&&(o=R$1(),gi(s,i,a,o),Bi(s,e,a))}}function zi(i){var e=i.alternate;return i===M$1||e!==null&&e===M$1}function Ai(i,e){Jh=Ih=!0;var s=i.pending;s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e}function Bi(i,e,s){if(s&4194240){var a=e.lanes;a&=i.pendingLanes,s|=a,e.lanes=s,Cc(i,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(i,e){return Th().memoizedState=[i,e===void 0?null:e],i},useContext:eh,useEffect:mi,useImperativeHandle:function(i,e,s){return s=s!=null?s.concat([i]):null,ki(4194308,4,pi.bind(null,e,i),s)},useLayoutEffect:function(i,e){return ki(4194308,4,i,e)},useInsertionEffect:function(i,e){return ki(4,2,i,e)},useMemo:function(i,e){var s=Th();return e=e===void 0?null:e,i=i(),s.memoizedState=[i,e],i},useReducer:function(i,e,s){var a=Th();return e=s!==void 0?s(e):e,a.memoizedState=a.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},a.queue=i,i=i.dispatch=xi.bind(null,M$1,i),[a.memoizedState,i]},useRef:function(i){var e=Th();return i={current:i},e.memoizedState=i},useState:hi,useDebugValue:ri,useDeferredValue:function(i){return Th().memoizedState=i},useTransition:function(){var i=hi(!1),e=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,s){var a=M$1,o=Th();if(I$1){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),Q$1===null)throw Error(p(349));Hh&30||di(a,e,s)}o.memoizedState=s;var c={value:s,getSnapshot:e};return o.queue=c,mi(ai.bind(null,a,c,i),[i]),a.flags|=2048,bi(9,ci.bind(null,a,c,s,e),void 0,null),s},useId:function(){var i=Th(),e=Q$1.identifierPrefix;if(I$1){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return ui(e,N.memoizedState,i)},useTransition:function(){var i=Wh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return N===null?e.memoizedState=i:ui(e,N.memoizedState,i)},useTransition:function(){var i=Xh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,e){if(i&&i.defaultProps){e=A$1({},e),i=i.defaultProps;for(var s in i)e[s]===void 0&&(e[s]=i[s]);return e}return e}function Di(i,e,s,a){e=i.memoizedState,s=s(a,e),s=s==null?e:A$1({},e,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var Ei={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,s){i=i._reactInternals;var a=R$1(),o=yi(i),c=mh(a,o);c.payload=e,s!=null&&(c.callback=s),e=nh(i,c,o),e!==null&&(gi(e,i,o,a),oh(e,i,o))},enqueueReplaceState:function(i,e,s){i=i._reactInternals;var a=R$1(),o=yi(i),c=mh(a,o);c.tag=1,c.payload=e,s!=null&&(c.callback=s),e=nh(i,c,o),e!==null&&(gi(e,i,o,a),oh(e,i,o))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var s=R$1(),a=yi(i),o=mh(s,a);o.tag=2,e!=null&&(o.callback=e),e=nh(i,o,a),e!==null&&(gi(e,i,a,s),oh(e,i,a))}};function Fi(i,e,s,a,o,c,d){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(a,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie$1(s,a)||!Ie$1(o,c):!0}function Gi(i,e,s){var a=!1,o=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(e)?Xf:H$1.current,a=e.contextTypes,c=(a=a!=null)?Yf(i,o):Vf),e=new e(s,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,i.stateNode=e,e._reactInternals=i,a&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(i,e,s,a){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,a),e.state!==i&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(i,e,s,a){var o=i.stateNode;o.props=s,o.state=i.memoizedState,o.refs={},kh(i);var c=e.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(e)?Xf:H$1.current,o.context=Yf(i,c)),o.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(i,e,c,s),o.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(i,s,o,a),o.state=i.memoizedState),typeof o.componentDidMount=="function"&&(i.flags|=4194308)}function Ji(i,e){try{var s="",a=e;do s+=Pa(a),a=a.return;while(a);var o=s}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:o,digest:null}}function Ki(i,e,s){return{value:i,source:null,stack:s??null,digest:e??null}}function Li(i,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(i,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(i,e)},s}function Qi(i,e,s){s=mh(-1,s),s.tag=3;var a=i.type.getDerivedStateFromError;if(typeof a=="function"){var o=e.value;s.payload=function(){return a(o)},s.callback=function(){Li(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Li(i,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),s}function Si(i,e,s){var a=i.pingCache;if(a===null){a=i.pingCache=new Mi;var o=new Set;a.set(e,o)}else o=a.get(e),o===void 0&&(o=new Set,a.set(e,o));o.has(s)||(o.add(s),i=Ti.bind(null,i,e,s),e.then(i,i))}function Ui(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Vi(i,e,s,a,o){return i.mode&1?(i.flags|=65536,i.lanes=o,i):(i===e?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),i)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(i,e,s,a){e.child=i===null?Vg(e,null,s,a):Ug(e,i.child,s,a)}function Yi(i,e,s,a,o){s=s.render;var c=e.ref;return ch(e,o),a=Nh(i,e,s,a,c,o),s=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,Zi(i,e,o)):(I$1&&s&&vg(e),e.flags|=1,Xi(i,e,a,o),e.child)}function $i(i,e,s,a,o){if(i===null){var c=s.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=c,bj(i,e,c,a,o)):(i=Rg(s.type,null,a,e,e.mode,o),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&o)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie$1,s(d,a)&&i.ref===e.ref)return Zi(i,e,o)}return e.flags|=1,i=Pg(c,a),i.ref=e.ref,i.return=e,e.child=i}function bj(i,e,s,a,o){if(i!==null){var c=i.memoizedProps;if(Ie$1(c,a)&&i.ref===e.ref)if(dh=!1,e.pendingProps=a=c,(i.lanes&o)!==0)i.flags&131072&&(dh=!0);else return e.lanes=i.lanes,Zi(i,e,o)}return cj(i,e,s,a,o)}function dj(i,e,s){var a=e.pendingProps,o=a.children,c=i!==null?i.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=s;else{if(!(s&1073741824))return i=c!==null?c.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G$1(ej,fj),fj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:s,G$1(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|s,e.memoizedState=null):a=s,G$1(ej,fj),fj|=a;return Xi(i,e,o,s),e.child}function gj(i,e){var s=e.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(i,e,s,a,o){var c=Zf(s)?Xf:H$1.current;return c=Yf(e,c),ch(e,o),s=Nh(i,e,s,a,c,o),a=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,Zi(i,e,o)):(I$1&&a&&vg(e),e.flags|=1,Xi(i,e,s,o),e.child)}function hj(i,e,s,a,o){if(Zf(s)){var c=!0;cg(e)}else c=!1;if(ch(e,o),e.stateNode===null)ij(i,e),Gi(e,s,a),Ii(e,s,a,o),a=!0;else if(i===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var b=d.context,tt=s.contextType;typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(s)?Xf:H$1.current,tt=Yf(e,tt));var nt=s.getDerivedStateFromProps,ft=typeof nt=="function"||typeof d.getSnapshotBeforeUpdate=="function";ft||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==a||b!==tt)&&Hi(e,d,a,tt),jh=!1;var yt=e.memoizedState;d.state=yt,qh(e,a,d,o),b=e.memoizedState,h!==a||yt!==b||Wf.current||jh?(typeof nt=="function"&&(Di(e,s,nt,a),b=e.memoizedState),(h=jh||Fi(e,s,h,a,yt,b,tt))?(ft||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=b),d.props=a,d.state=b,d.context=tt,a=h):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{d=e.stateNode,lh(i,e),h=e.memoizedProps,tt=e.type===e.elementType?h:Ci(e.type,h),d.props=tt,ft=e.pendingProps,yt=d.context,b=s.contextType,typeof b=="object"&&b!==null?b=eh(b):(b=Zf(s)?Xf:H$1.current,b=Yf(e,b));var Tt=s.getDerivedStateFromProps;(nt=typeof Tt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==ft||yt!==b)&&Hi(e,d,a,b),jh=!1,yt=e.memoizedState,d.state=yt,qh(e,a,d,o);var gt=e.memoizedState;h!==ft||yt!==gt||Wf.current||jh?(typeof Tt=="function"&&(Di(e,s,Tt,a),gt=e.memoizedState),(tt=jh||Fi(e,s,tt,a,yt,gt,b)||!1)?(nt||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,gt,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,gt,b)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&yt===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&yt===i.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=gt),d.props=a,d.state=gt,d.context=b,a=tt):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&yt===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&yt===i.memoizedState||(e.flags|=1024),a=!1)}return jj(i,e,s,a,c,o)}function jj(i,e,s,a,o,c){gj(i,e);var d=(e.flags&128)!==0;if(!a&&!d)return o&&dg(e,s,!1),Zi(i,e,c);a=e.stateNode,Wi.current=e;var h=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,i!==null&&d?(e.child=Ug(e,i.child,null,c),e.child=Ug(e,null,h,c)):Xi(i,e,h,c),e.memoizedState=a.state,o&&dg(e,s,!0),e.child}function kj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),yh(i,e.containerInfo)}function lj(i,e,s,a,o){return Ig(),Jg(o),e.flags|=256,Xi(i,e,s,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,e,s){var a=e.pendingProps,o=L$1.current,c=!1,d=(e.flags&128)!==0,h;if((h=d)||(h=i!==null&&i.memoizedState===null?!1:(o&2)!==0),h?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(o|=1),G$1(L$1,o&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=a.children,i=a.fallback,c?(a=e.mode,c=e.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,a,0,null),i=Tg(i,a,s,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=nj(s),e.memoizedState=mj,i):qj(e,d));if(o=i.memoizedState,o!==null&&(h=o.dehydrated,h!==null))return rj(i,e,d,a,h,o,s);if(c){c=a.fallback,d=e.mode,o=i.child,h=o.sibling;var b={mode:"hidden",children:a.children};return!(d&1)&&e.child!==o?(a=e.child,a.childLanes=0,a.pendingProps=b,e.deletions=null):(a=Pg(o,b),a.subtreeFlags=o.subtreeFlags&14680064),h!==null?c=Pg(h,c):(c=Tg(c,d,s,null),c.flags|=2),c.return=e,a.return=e,a.sibling=c,e.child=a,a=c,c=e.child,d=i.child.memoizedState,d=d===null?nj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=i.childLanes&~s,e.memoizedState=mj,a}return c=i.child,i=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=s),a.return=e,a.sibling=null,i!==null&&(s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)),e.child=a,e.memoizedState=null,a}function qj(i,e){return e=pj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function sj(i,e,s,a){return a!==null&&Jg(a),Ug(e,i.child,null,s),i=qj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function rj(i,e,s,a,o,c,d){if(s)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(i,e,d,a)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=a.fallback,o=e.mode,a=pj({mode:"visible",children:a.children},o,0,null),c=Tg(c,o,d,null),c.flags|=2,a.return=e,c.return=e,a.sibling=c,e.child=a,e.mode&1&&Ug(e,i.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,c);if(!(e.mode&1))return sj(i,e,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var h=a.dgst;return a=h,c=Error(p(419)),a=Ki(c,a,void 0),sj(i,e,d,a)}if(h=(d&i.childLanes)!==0,dh||h){if(a=Q$1,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(i,o),gi(a,i,o,-1))}return tj(),a=Ki(Error(p(421))),sj(i,e,d,a)}return o.data==="$?"?(e.flags|=128,e.child=i.child,e=uj.bind(null,i),o._reactRetry=e,null):(i=c.treeContext,yg=Lf(o.nextSibling),xg=e,I$1=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(i,e,s){i.lanes|=e;var a=i.alternate;a!==null&&(a.lanes|=e),bh(i.return,e,s)}function wj(i,e,s,a,o){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:o}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=s,c.tailMode=o)}function xj(i,e,s){var a=e.pendingProps,o=a.revealOrder,c=a.tail;if(Xi(i,e,a.children,s),a=L$1.current,a&2)a=a&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vj(i,s,e);else if(i.tag===19)vj(i,s,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}a&=1}if(G$1(L$1,a),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(s=e.child,o=null;s!==null;)i=s.alternate,i!==null&&Ch(i)===null&&(o=s),s=s.sibling;s=o,s===null?(o=e.child,e.child=null):(o=s.sibling,s.sibling=null),wj(e,!1,o,s,c);break;case"backwards":for(s=null,o=e.child,e.child=null;o!==null;){if(i=o.alternate,i!==null&&Ch(i)===null){e.child=o;break}i=o.sibling,o.sibling=s,s=o,o=i}wj(e,!0,s,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Zi(i,e,s){if(i!==null&&(e.dependencies=i.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,s=Pg(i,i.pendingProps),e.child=s,s.return=e;i.sibling!==null;)i=i.sibling,s=s.sibling=Pg(i,i.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(i,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,o=e.memoizedProps.value;G$1(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G$1(L$1,L$1.current&1),e.flags|=128,null):s&e.child.childLanes?oj(i,e,s):(G$1(L$1,L$1.current&1),i=Zi(i,e,s),i!==null?i.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(a=(s&e.childLanes)!==0,i.flags&128){if(a)return xj(i,e,s);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G$1(L$1,L$1.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(i,e,s)}return Zi(i,e,s)}var zj,Aj,Bj,Cj;zj=function(i,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(i,e,s,a){var o=i.memoizedProps;if(o!==a){i=e.stateNode,xh(uh.current);var c=null;switch(s){case"input":o=Ya(i,o),a=Ya(i,a),c=[];break;case"select":o=A$1({},o,{value:void 0}),a=A$1({},a,{value:void 0}),c=[];break;case"textarea":o=gb(i,o),a=gb(i,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(i.onclick=Bf)}ub(s,a);var d;s=null;for(tt in o)if(!a.hasOwnProperty(tt)&&o.hasOwnProperty(tt)&&o[tt]!=null)if(tt==="style"){var h=o[tt];for(d in h)h.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea.hasOwnProperty(tt)?c||(c=[]):(c=c||[]).push(tt,null));for(tt in a){var b=a[tt];if(h=o!=null?o[tt]:void 0,a.hasOwnProperty(tt)&&b!==h&&(b!=null||h!=null))if(tt==="style")if(h){for(d in h)!h.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in b)b.hasOwnProperty(d)&&h[d]!==b[d]&&(s||(s={}),s[d]=b[d])}else s||(c||(c=[]),c.push(tt,s)),s=b;else tt==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,h=h?h.__html:void 0,b!=null&&h!==b&&(c=c||[]).push(tt,b)):tt==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(tt,""+b):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(tt)?(b!=null&&tt==="onScroll"&&D$1("scroll",i),c||h===b||(c=[])):(c=c||[]).push(tt,b))}s&&(c=c||[]).push("style",s);var tt=c;(e.updateQueue=tt)&&(e.flags|=4)}};Cj=function(i,e,s,a){s!==a&&(e.flags|=4)};function Dj(i,e){if(!I$1)switch(i.tailMode){case"hidden":e=i.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:a.sibling=null}}function S$1(i){var e=i.alternate!==null&&i.alternate.child===i.child,s=0,a=0;if(e)for(var o=i.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=i,o=o.sibling;else for(o=i.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=i,o=o.sibling;return i.subtreeFlags|=a,i.childLanes=s,e}function Ej(i,e,s){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H$1),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(i,e),S$1(e),null;case 5:Bh(e);var o=xh(wh.current);if(s=e.type,i!==null&&e.stateNode!=null)Bj(i,e,s,a,o),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S$1(e),null}if(i=xh(uh.current),Gg(e)){a=e.stateNode,s=e.type;var c=e.memoizedProps;switch(a[Of]=e,a[Pf]=c,i=(e.mode&1)!==0,s){case"dialog":D$1("cancel",a),D$1("close",a);break;case"iframe":case"object":case"embed":D$1("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D$1(lf[o],a);break;case"source":D$1("error",a);break;case"img":case"image":case"link":D$1("error",a),D$1("load",a);break;case"details":D$1("toggle",a);break;case"input":Za(a,c),D$1("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D$1("invalid",a);break;case"textarea":hb(a,c),D$1("invalid",a)}ub(s,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?a.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,h,i),o=["children",h]):typeof h=="number"&&a.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,h,i),o=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D$1("scroll",a)}switch(s){case"input":Va(a),db(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,e.updateQueue=a,a!==null&&(e.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof a.is=="string"?i=d.createElement(s,{is:a.is}):(i=d.createElement(s),s==="select"&&(d=i,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):i=d.createElementNS(i,s),i[Of]=e,i[Pf]=a,zj(i,e,!1,!1),e.stateNode=i;e:{switch(d=vb(s,a),s){case"dialog":D$1("cancel",i),D$1("close",i),o=a;break;case"iframe":case"object":case"embed":D$1("load",i),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D$1(lf[o],i);o=a;break;case"source":D$1("error",i),o=a;break;case"img":case"image":case"link":D$1("error",i),D$1("load",i),o=a;break;case"details":D$1("toggle",i),o=a;break;case"input":Za(i,a),o=Ya(i,a),D$1("invalid",i);break;case"option":o=a;break;case"select":i._wrapperState={wasMultiple:!!a.multiple},o=A$1({},a,{value:void 0}),D$1("invalid",i);break;case"textarea":hb(i,a),o=gb(i,a),D$1("invalid",i);break;default:o=a}ub(s,o),h=o;for(c in h)if(h.hasOwnProperty(c)){var b=h[c];c==="style"?sb(i,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nb(i,b)):c==="children"?typeof b=="string"?(s!=="textarea"||b!=="")&&ob(i,b):typeof b=="number"&&ob(i,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?b!=null&&c==="onScroll"&&D$1("scroll",i):b!=null&&ta(i,c,b,d))}switch(s){case"input":Va(i),db(i,a,!1);break;case"textarea":Va(i),jb(i);break;case"option":a.value!=null&&i.setAttribute("value",""+Sa(a.value));break;case"select":i.multiple=!!a.multiple,c=a.value,c!=null?fb(i,!!a.multiple,c,!1):a.defaultValue!=null&&fb(i,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(i&&e.stateNode!=null)Cj(i,e,i.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,s=e.memoizedProps,a[Of]=e,(c=a.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(a.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(i.mode&1)!==0)}c&&(e.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S$1(e),null;case 13:if(E(L$1),a=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),a!==null&&a.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(a=a!==null,a!==(i!==null&&i.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(i===null||L$1.current&1?T$1===0&&(T$1=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(i,e),i===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E(L$1),c=e.memoizedState,c===null)return S$1(e),null;if(a=(e.flags&128)!==0,d=c.rendering,d===null)if(a)Dj(c,!1);else{if(T$1!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(d=Ch(i),d!==null){for(e.flags|=128,Dj(c,!1),a=d.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=s,s=e.child;s!==null;)c=s,i=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,i=d.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G$1(L$1,L$1.current&1|2),e.child}i=i.sibling}c.tail!==null&&B$1()>Gj&&(e.flags|=128,a=!0,Dj(c,!1),e.lanes=4194304)}else{if(!a)if(i=Ch(d),i!==null){if(e.flags|=128,a=!0,s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I$1)return S$1(e),null}else 2*B$1()-c.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,a=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(s=c.last,s!==null?s.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B$1(),e.sibling=null,s=L$1.current,G$1(L$1,a?s&1|2:s&1),e):(S$1(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return zh(),E(Wf),E(H$1),Eh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L$1),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(i,e){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W$1(i,e,a)}else s.current=null}function Mj(i,e,s){try{s()}catch(a){W$1(i,e,a)}}var Nj=!1;function Oj(i,e){if(Cf=dd,i=Me$1(),Ne$1(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,h=-1,b=-1,tt=0,nt=0,ft=i,yt=null;t:for(;;){for(var Tt;ft!==s||o!==0&&ft.nodeType!==3||(h=d+o),ft!==c||a!==0&&ft.nodeType!==3||(b=d+a),ft.nodeType===3&&(d+=ft.nodeValue.length),(Tt=ft.firstChild)!==null;)yt=ft,ft=Tt;for(;;){if(ft===i)break t;if(yt===s&&++tt===o&&(h=d),yt===c&&++nt===a&&(b=d),(Tt=ft.nextSibling)!==null)break;ft=yt,yt=ft.parentNode}ft=Tt}s=h===-1||b===-1?null:{start:h,end:b}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V$1=e;V$1!==null;)if(e=V$1,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V$1=i;else for(;V$1!==null;){e=V$1;try{var gt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var St=gt.memoizedProps,wt=gt.memoizedState,Et=e.stateNode,vt=Et.getSnapshotBeforeUpdate(e.elementType===e.type?St:Ci(e.type,St),wt);Et.__reactInternalSnapshotBeforeUpdate=vt}break;case 3:var xt=e.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(At){W$1(e,e.return,At)}if(i=e.sibling,i!==null){i.return=e.return,V$1=i;break}V$1=e.return}return gt=Nj,Nj=!1,gt}function Pj(i,e,s){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&i)===i){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(e,s,c)}o=o.next}while(o!==a)}}function Qj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&i)===i){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}}function Rj(i){var e=i.ref;if(e!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof e=="function"?e(i):e.current=i}}function Sj(i){var e=i.alternate;e!==null&&(i.alternate=null,Sj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return i.tag===5||i.tag===3||i.tag===4}function Uj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vj(i,e,s){var a=i.tag;if(a===5||a===6)i=i.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(i,e):s.insertBefore(i,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(i,s)):(e=s,e.appendChild(i)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(i=i.child,i!==null))for(Vj(i,e,s),i=i.sibling;i!==null;)Vj(i,e,s),i=i.sibling}function Wj(i,e,s){var a=i.tag;if(a===5||a===6)i=i.stateNode,e?s.insertBefore(i,e):s.appendChild(i);else if(a!==4&&(i=i.child,i!==null))for(Wj(i,e,s),i=i.sibling;i!==null;)Wj(i,e,s),i=i.sibling}var X$1=null,Xj=!1;function Yj(i,e,s){for(s=s.child;s!==null;)Zj(i,e,s),s=s.sibling}function Zj(i,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U$1||Lj(s,e);case 6:var a=X$1,o=Xj;X$1=null,Yj(i,e,s),X$1=a,Xj=o,X$1!==null&&(Xj?(i=X$1,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X$1.removeChild(s.stateNode));break;case 18:X$1!==null&&(Xj?(i=X$1,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X$1,s.stateNode));break;case 4:a=X$1,o=Xj,X$1=s.stateNode.containerInfo,Xj=!0,Yj(i,e,s),X$1=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U$1&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(s,e,d),o=o.next}while(o!==a)}Yj(i,e,s);break;case 1:if(!U$1&&(Lj(s,e),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(h){W$1(s,e,h)}Yj(i,e,s);break;case 21:Yj(i,e,s);break;case 22:s.mode&1?(U$1=(a=U$1)||s.memoizedState!==null,Yj(i,e,s),U$1=a):Yj(i,e,s);break;default:Yj(i,e,s)}}function ak(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Kj),e.forEach(function(a){var o=bk.bind(null,i,a);s.has(a)||(s.add(a),a.then(o,o))})}}function ck(i,e){var s=e.deletions;if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];try{var c=i,d=e,h=d;e:for(;h!==null;){switch(h.tag){case 5:X$1=h.stateNode,Xj=!1;break e;case 3:X$1=h.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=h.stateNode.containerInfo,Xj=!0;break e}h=h.return}if(X$1===null)throw Error(p(160));Zj(c,d,o),X$1=null,Xj=!1;var b=o.alternate;b!==null&&(b.return=null),o.return=null}catch(tt){W$1(o,e,tt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,i),e=e.sibling}function dk(i,e){var s=i.alternate,a=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(e,i),ek(i),a&4){try{Pj(3,i,i.return),Qj(3,i)}catch(St){W$1(i,i.return,St)}try{Pj(5,i,i.return)}catch(St){W$1(i,i.return,St)}}break;case 1:ck(e,i),ek(i),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,i),ek(i),a&512&&s!==null&&Lj(s,s.return),i.flags&32){var o=i.stateNode;try{ob(o,"")}catch(St){W$1(i,i.return,St)}}if(a&4&&(o=i.stateNode,o!=null)){var c=i.memoizedProps,d=s!==null?s.memoizedProps:c,h=i.type,b=i.updateQueue;if(i.updateQueue=null,b!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(h,d);var tt=vb(h,c);for(d=0;d<b.length;d+=2){var nt=b[d],ft=b[d+1];nt==="style"?sb(o,ft):nt==="dangerouslySetInnerHTML"?nb(o,ft):nt==="children"?ob(o,ft):ta(o,nt,ft,tt)}switch(h){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var yt=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var Tt=c.value;Tt!=null?fb(o,!!c.multiple,Tt,!1):yt!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(St){W$1(i,i.return,St)}}break;case 6:if(ck(e,i),ek(i),a&4){if(i.stateNode===null)throw Error(p(162));o=i.stateNode,c=i.memoizedProps;try{o.nodeValue=c}catch(St){W$1(i,i.return,St)}}break;case 3:if(ck(e,i),ek(i),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(St){W$1(i,i.return,St)}break;case 4:ck(e,i),ek(i);break;case 13:ck(e,i),ek(i),o=i.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B$1())),a&4&&ak(i);break;case 22:if(nt=s!==null&&s.memoizedState!==null,i.mode&1?(U$1=(tt=U$1)||nt,ck(e,i),U$1=tt):ck(e,i),ek(i),a&8192){if(tt=i.memoizedState!==null,(i.stateNode.isHidden=tt)&&!nt&&i.mode&1)for(V$1=i,nt=i.child;nt!==null;){for(ft=V$1=nt;V$1!==null;){switch(yt=V$1,Tt=yt.child,yt.tag){case 0:case 11:case 14:case 15:Pj(4,yt,yt.return);break;case 1:Lj(yt,yt.return);var gt=yt.stateNode;if(typeof gt.componentWillUnmount=="function"){a=yt,s=yt.return;try{e=a,gt.props=e.memoizedProps,gt.state=e.memoizedState,gt.componentWillUnmount()}catch(St){W$1(a,s,St)}}break;case 5:Lj(yt,yt.return);break;case 22:if(yt.memoizedState!==null){gk(ft);continue}}Tt!==null?(Tt.return=yt,V$1=Tt):gk(ft)}nt=nt.sibling}e:for(nt=null,ft=i;;){if(ft.tag===5){if(nt===null){nt=ft;try{o=ft.stateNode,tt?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=ft.stateNode,b=ft.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,h.style.display=rb("display",d))}catch(St){W$1(i,i.return,St)}}}else if(ft.tag===6){if(nt===null)try{ft.stateNode.nodeValue=tt?"":ft.memoizedProps}catch(St){W$1(i,i.return,St)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===i)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===i)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===i)break e;nt===ft&&(nt=null),ft=ft.return}nt===ft&&(nt=null),ft.sibling.return=ft.return,ft=ft.sibling}}break;case 19:ck(e,i),ek(i),a&4&&ak(i);break;case 21:break;default:ck(e,i),ek(i)}}function ek(i){var e=i.flags;if(e&2){try{e:{for(var s=i.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Uj(i);Wj(i,c,o);break;case 3:case 4:var d=a.stateNode.containerInfo,h=Uj(i);Vj(i,h,d);break;default:throw Error(p(161))}}catch(b){W$1(i,i.return,b)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function hk(i,e,s){V$1=i,ik(i)}function ik(i,e,s){for(var a=(i.mode&1)!==0;V$1!==null;){var o=V$1,c=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||Jj;if(!d){var h=o.alternate,b=h!==null&&h.memoizedState!==null||U$1;h=Jj;var tt=U$1;if(Jj=d,(U$1=b)&&!tt)for(V$1=o;V$1!==null;)d=V$1,b=d.child,d.tag===22&&d.memoizedState!==null?jk(o):b!==null?(b.return=d,V$1=b):jk(o);for(;c!==null;)V$1=c,ik(c),c=c.sibling;V$1=o,Jj=h,U$1=tt}kk(i)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V$1=c):kk(i)}}function kk(i){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U$1)if(s===null)a.componentDidMount();else{var o=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);a.componentDidUpdate(o,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,a);break;case 3:var d=e.updateQueue;if(d!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,d,s)}break;case 5:var h=e.stateNode;if(s===null&&e.flags&4){s=h;var b=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&s.focus();break;case"img":b.src&&(s.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var tt=e.alternate;if(tt!==null){var nt=tt.memoizedState;if(nt!==null){var ft=nt.dehydrated;ft!==null&&bd(ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U$1||e.flags&512&&Rj(e)}catch(yt){W$1(e,e.return,yt)}}if(e===i){V$1=null;break}if(s=e.sibling,s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function gk(i){for(;V$1!==null;){var e=V$1;if(e===i){V$1=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function jk(i){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(b){W$1(e,s,b)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var o=e.return;try{a.componentDidMount()}catch(b){W$1(e,o,b)}}var c=e.return;try{Rj(e)}catch(b){W$1(e,c,b)}break;case 5:var d=e.return;try{Rj(e)}catch(b){W$1(e,d,b)}}}catch(b){W$1(e,e.return,b)}if(e===i){V$1=null;break}var h=e.sibling;if(h!==null){h.return=e.return,V$1=h;break}V$1=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(i){return i.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(i=C$1,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function gi(i,e,s,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(i,s,a),(!(K$1&2)||i!==Q$1)&&(i===Q$1&&(!(K$1&2)&&(qk|=s),T$1===4&&Ck(i,Z$1)),Dk(i,a),s===1&&K$1===0&&!(e.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(i,e){var s=i.callbackNode;wc(i,e);var a=uc(i,i===Q$1?Z$1:0);if(a===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(e=a&-a,i.callbackPriority!==e){if(s!=null&&bc(s),e===1)i.tag===0?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),Jf(function(){!(K$1&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,i))}i.callbackPriority=e,i.callbackNode=s}}function Gk(i,e){if(Ak=-1,Bk=0,K$1&6)throw Error(p(327));var s=i.callbackNode;if(Hk()&&i.callbackNode!==s)return null;var a=uc(i,i===Q$1?Z$1:0);if(a===0)return null;if(a&30||a&i.expiredLanes||e)e=Ik(i,a);else{e=a;var o=K$1;K$1|=2;var c=Jk();(Q$1!==i||Z$1!==e)&&(uk=null,Gj=B$1()+500,Kk(i,e));do try{Lk();break}catch(h){Mk(i,h)}while(!0);$g(),mk.current=c,K$1=o,Y$1!==null?e=0:(Q$1=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(o=xc(i),o!==0&&(a=o,e=Nk(i,o))),e===1)throw s=pk,Kk(i,0),Ck(i,a),Dk(i,B$1()),s;if(e===6)Ck(i,a);else{if(o=i.current.alternate,!(a&30)&&!Ok(o)&&(e=Ik(i,a),e===2&&(c=xc(i),c!==0&&(a=c,e=Nk(i,c))),e===1))throw s=pk,Kk(i,0),Ck(i,a),Dk(i,B$1()),s;switch(i.finishedWork=o,i.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(i,tk,uk);break;case 3:if(Ck(i,a),(a&130023424)===a&&(e=fk+500-B$1(),10<e)){if(uc(i,0)!==0)break;if(o=i.suspendedLanes,(o&a)!==a){R$1(),i.pingedLanes|=i.suspendedLanes&o;break}i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),e);break}Pk(i,tk,uk);break;case 4:if(Ck(i,a),(a&4194240)===a)break;for(e=i.eventTimes,o=-1;0<a;){var d=31-oc(a);c=1<<d,d=e[d],d>o&&(o=d),a&=~c}if(a=o,a=B$1()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),a);break}Pk(i,tk,uk);break;case 5:Pk(i,tk,uk);break;default:throw Error(p(329))}}}return Dk(i,B$1()),i.callbackNode===s?Gk.bind(null,i):null}function Nk(i,e){var s=sk;return i.current.memoizedState.isDehydrated&&(Kk(i,e).flags|=256),i=Ik(i,e),i!==2&&(e=tk,tk=s,e!==null&&Fj(e)),i}function Fj(i){tk===null?tk=i:tk.push.apply(tk,i)}function Ok(i){for(var e=i;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var o=s[a],c=o.getSnapshot;o=o.value;try{if(!He$1(c(),o))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(i,e){for(e&=~rk,e&=~qk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var s=31-oc(e),a=1<<s;i[s]=-1,e&=~a}}function Ek(i){if(K$1&6)throw Error(p(327));Hk();var e=uc(i,0);if(!(e&1))return Dk(i,B$1()),null;var s=Ik(i,e);if(i.tag!==0&&s===2){var a=xc(i);a!==0&&(e=a,s=Nk(i,a))}if(s===1)throw s=pk,Kk(i,0),Ck(i,e),Dk(i,B$1()),s;if(s===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Pk(i,tk,uk),Dk(i,B$1()),null}function Qk(i,e){var s=K$1;K$1|=1;try{return i(e)}finally{K$1=s,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(i){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var e=K$1;K$1|=1;var s=ok.transition,a=C$1;try{if(ok.transition=null,C$1=1,i)return i()}finally{C$1=a,ok.transition=s,K$1=e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(i,e){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y$1!==null)for(s=Y$1.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H$1),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L$1);break;case 19:E(L$1);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q$1=i,Y$1=i=Pg(i.current,null),Z$1=fj=e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],a=s.interleaved,a!==null){s.interleaved=null;var o=a.next,c=s.pending;if(c!==null){var d=c.next;c.next=o,a.next=d}s.pending=a}fh=null}return i}function Mk(i,e){do{var s=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var a=M$1.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T$1=1,pk=e,Y$1=null;break}e:{var c=i,d=s.return,h=s,b=e;if(e=Z$1,h.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var tt=b,nt=h,ft=nt.tag;if(!(nt.mode&1)&&(ft===0||ft===11||ft===15)){var yt=nt.alternate;yt?(nt.updateQueue=yt.updateQueue,nt.memoizedState=yt.memoizedState,nt.lanes=yt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var Tt=Ui(d);if(Tt!==null){Tt.flags&=-257,Vi(Tt,d,h,c,e),Tt.mode&1&&Si(c,tt,e),e=Tt,b=tt;var gt=e.updateQueue;if(gt===null){var St=new Set;St.add(b),e.updateQueue=St}else gt.add(b);break e}else{if(!(e&1)){Si(c,tt,e),tj();break e}b=Error(p(426))}}else if(I$1&&h.mode&1){var wt=Ui(d);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),Vi(wt,d,h,c,e),Jg(Ji(b,h));break e}}c=b=Ji(b,h),T$1!==4&&(T$1=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var Et=Ni(c,b,e);ph(c,Et);break e;case 1:h=b;var vt=c.type,xt=c.stateNode;if(!(c.flags&128)&&(typeof vt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Ri===null||!Ri.has(xt)))){c.flags|=65536,e&=-e,c.lanes|=e;var At=Qi(c,h,e);ph(c,At);break e}}c=c.return}while(c!==null)}Sk(s)}catch(kt){e=kt,Y$1===s&&s!==null&&(Y$1=s=s.return);continue}break}while(!0)}function Jk(){var i=mk.current;return mk.current=Rh,i===null?Rh:i}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(i,e){var s=K$1;K$1|=2;var a=Jk();(Q$1!==i||Z$1!==e)&&(uk=null,Kk(i,e));do try{Tk();break}catch(o){Mk(i,o)}while(!0);if($g(),K$1=s,mk.current=a,Y$1!==null)throw Error(p(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(i){var e=Vk(i.alternate,i,fj);i.memoizedProps=i.pendingProps,e===null?Sk(i):Y$1=e,nk.current=null}function Sk(i){var e=i;do{var s=e.alternate;if(i=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y$1=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T$1=6,Y$1=null;return}}else if(s=Ej(s,e,fj),s!==null){Y$1=s;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=i}while(e!==null);T$1===0&&(T$1=5)}function Pk(i,e,s){var a=C$1,o=ok.transition;try{ok.transition=null,C$1=1,Wk(i,e,s,a)}finally{ok.transition=o,C$1=a}return null}function Wk(i,e,s,a){do Hk();while(wk!==null);if(K$1&6)throw Error(p(327));s=i.finishedWork;var o=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc(i,c),i===Q$1&&(Y$1=Q$1=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C$1;C$1=1;var h=K$1;K$1|=4,nk.current=null,Oj(i,s),dk(s,i),Oe$1(Df),dd=!!Cf,Df=Cf=null,i.current=s,hk(s),dc(),K$1=h,C$1=d,ok.transition=c}else i.current=s;if(vk&&(vk=!1,wk=i,xk=o),c=i.pendingLanes,c===0&&(Ri=null),mc(s.stateNode),Dk(i,B$1()),e!==null)for(a=i.onRecoverableError,s=0;s<e.length;s++)o=e[s],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,i=Pi,Pi=null,i;return xk&1&&i.tag!==0&&Hk(),c=i.pendingLanes,c&1?i===zk?yk++:(yk=0,zk=i):yk=0,jg(),null}function Hk(){if(wk!==null){var i=Dc(xk),e=ok.transition,s=C$1;try{if(ok.transition=null,C$1=16>i?16:i,wk===null)var a=!1;else{if(i=wk,wk=null,xk=0,K$1&6)throw Error(p(331));var o=K$1;for(K$1|=4,V$1=i.current;V$1!==null;){var c=V$1,d=c.child;if(V$1.flags&16){var h=c.deletions;if(h!==null){for(var b=0;b<h.length;b++){var tt=h[b];for(V$1=tt;V$1!==null;){var nt=V$1;switch(nt.tag){case 0:case 11:case 15:Pj(8,nt,c)}var ft=nt.child;if(ft!==null)ft.return=nt,V$1=ft;else for(;V$1!==null;){nt=V$1;var yt=nt.sibling,Tt=nt.return;if(Sj(nt),nt===tt){V$1=null;break}if(yt!==null){yt.return=Tt,V$1=yt;break}V$1=Tt}}}var gt=c.alternate;if(gt!==null){var St=gt.child;if(St!==null){gt.child=null;do{var wt=St.sibling;St.sibling=null,St=wt}while(St!==null)}}V$1=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V$1=d;else e:for(;V$1!==null;){if(c=V$1,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var Et=c.sibling;if(Et!==null){Et.return=c.return,V$1=Et;break e}V$1=c.return}}var vt=i.current;for(V$1=vt;V$1!==null;){d=V$1;var xt=d.child;if(d.subtreeFlags&2064&&xt!==null)xt.return=d,V$1=xt;else e:for(d=vt;V$1!==null;){if(h=V$1,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(kt){W$1(h,h.return,kt)}if(h===d){V$1=null;break e}var At=h.sibling;if(At!==null){At.return=h.return,V$1=At;break e}V$1=h.return}}if(K$1=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}a=!0}return a}finally{C$1=s,ok.transition=e}}return!1}function Xk(i,e,s){e=Ji(s,e),e=Ni(i,e,1),i=nh(i,e,1),e=R$1(),i!==null&&(Ac(i,1,e),Dk(i,e))}function W$1(i,e,s){if(i.tag===3)Xk(i,i,s);else for(;e!==null;){if(e.tag===3){Xk(e,i,s);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){i=Ji(s,i),i=Qi(e,i,1),e=nh(e,i,1),i=R$1(),e!==null&&(Ac(e,1,i),Dk(e,i));break}}e=e.return}}function Ti(i,e,s){var a=i.pingCache;a!==null&&a.delete(e),e=R$1(),i.pingedLanes|=i.suspendedLanes&s,Q$1===i&&(Z$1&s)===s&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(i,0):rk|=s),Dk(i,e)}function Yk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R$1();i=ih(i,e),i!==null&&(Ac(i,e,s),Dk(i,s))}function uj(i){var e=i.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(i,s)}function bk(i,e){var s=0;switch(i.tag){case 13:var a=i.stateNode,o=i.memoizedState;o!==null&&(s=o.retryLane);break;case 19:a=i.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(i,s)}var Vk;Vk=function(i,e,s){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(i.lanes&s)&&!(e.flags&128))return dh=!1,yj(i,e,s);dh=!!(i.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(i,e),i=e.pendingProps;var o=Yf(e,H$1.current);ch(e,s),o=Nh(null,e,a,i,o,s);var c=Sh();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(c=!0,cg(e)):c=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(e),o.updater=Ei,e.stateNode=o,o._reactInternals=e,Ii(e,a,i,s),e=jj(null,e,a,!0,c,s)):(e.tag=0,I$1&&c&&vg(e),Xi(null,e,o,s),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(i,e),i=e.pendingProps,o=a._init,a=o(a._payload),e.type=a,o=e.tag=Zk(a),i=Ci(a,i),o){case 0:e=cj(null,e,a,i,s);break e;case 1:e=hj(null,e,a,i,s);break e;case 11:e=Yi(null,e,a,i,s);break e;case 14:e=$i(null,e,a,Ci(a.type,i),s);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),cj(i,e,a,o,s);case 1:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),hj(i,e,a,o,s);case 3:e:{if(kj(e),i===null)throw Error(p(387));a=e.pendingProps,c=e.memoizedState,o=c.element,lh(i,e),qh(e,a,null,s);var d=e.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){o=Ji(Error(p(423)),e),e=lj(i,e,a,s,o);break e}else if(a!==o){o=Ji(Error(p(424)),e),e=lj(i,e,a,s,o);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,s=Vg(e,null,a,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===o){e=Zi(i,e,s);break e}Xi(i,e,a,s)}e=e.child}return e;case 5:return Ah(e),i===null&&Eg(e),a=e.type,o=e.pendingProps,c=i!==null?i.memoizedProps:null,d=o.children,Ef(a,o)?d=null:c!==null&&Ef(a,c)&&(e.flags|=32),gj(i,e),Xi(i,e,d,s),e.child;case 6:return i===null&&Eg(e),null;case 13:return oj(i,e,s);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,i===null?e.child=Ug(e,null,a,s):Xi(i,e,a,s),e.child;case 11:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),Yi(i,e,a,o,s);case 7:return Xi(i,e,e.pendingProps,s),e.child;case 8:return Xi(i,e,e.pendingProps.children,s),e.child;case 12:return Xi(i,e,e.pendingProps.children,s),e.child;case 10:e:{if(a=e.type._context,o=e.pendingProps,c=e.memoizedProps,d=o.value,G$1(Wg,a._currentValue),a._currentValue=d,c!==null)if(He$1(c.value,d)){if(c.children===o.children&&!Wf.current){e=Zi(i,e,s);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var b=h.firstContext;b!==null;){if(b.context===a){if(c.tag===1){b=mh(-1,s&-s),b.tag=2;var tt=c.updateQueue;if(tt!==null){tt=tt.shared;var nt=tt.pending;nt===null?b.next=b:(b.next=nt.next,nt.next=b),tt.pending=b}}c.lanes|=s,b=c.alternate,b!==null&&(b.lanes|=s),bh(c.return,s,e),h.lanes|=s;break}b=b.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,h=d.alternate,h!==null&&(h.lanes|=s),bh(d,s,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(i,e,o.children,s),e=e.child}return e;case 9:return o=e.type,a=e.pendingProps.children,ch(e,s),o=eh(o),a=a(o),e.flags|=1,Xi(i,e,a,s),e.child;case 14:return a=e.type,o=Ci(a,e.pendingProps),o=Ci(a.type,o),$i(i,e,a,o,s);case 15:return bj(i,e,e.type,e.pendingProps,s);case 17:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),ij(i,e),e.tag=1,Zf(a)?(i=!0,cg(e)):i=!1,ch(e,s),Gi(e,a,o),Ii(e,a,o,s),jj(null,e,a,!0,i,s);case 19:return xj(i,e,s);case 22:return dj(i,e,s)}throw Error(p(156,e.tag))};function Fk(i,e){return ac(i,e)}function $k(i,e,s,a){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,s,a){return new $k(i,e,s,a)}function aj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return aj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function Pg(i,e){var s=i.alternate;return s===null?(s=Bg(i.tag,e,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=e,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function Rg(i,e,s,a,o,c){var d=2;if(a=i,typeof i=="function")aj(i)&&(d=1);else if(typeof i=="string")d=5;else e:switch(i){case ya:return Tg(s.children,o,c,e);case za:d=8,o|=8;break;case Aa:return i=Bg(12,s,e,o|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,s,e,o),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,s,e,o),i.elementType=Fa,i.lanes=c,i;case Ia:return pj(s,o,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(d,s,e,o),e.elementType=i,e.type=a,e.lanes=c,e}function Tg(i,e,s,a){return i=Bg(7,i,a,e),i.lanes=s,i}function pj(i,e,s,a){return i=Bg(22,i,a,e),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function Qg(i,e,s){return i=Bg(6,i,null,e),i.lanes=s,i}function Sg(i,e,s){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=s,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function al(i,e,s,a,o){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(i,e,s,a,o,c,d,h,b){return i=new al(i,e,s,h,b),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),i}function cl(i,e,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:i,containerInfo:e,implementation:s}}function dl(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,e)}return e}function el(i,e,s,a,o,c,d,h,b){return i=bl(s,a,!0,i,o,c,d,h,b),i.context=dl(null),s=i.current,a=R$1(),o=yi(s),c=mh(a,o),c.callback=e??null,nh(s,c,o),i.current.lanes=o,Ac(i,o,a),Dk(i,a),i}function fl(i,e,s,a){var o=e.current,c=R$1(),d=yi(o);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(c,d),e.payload={element:i},a=a===void 0?null:a,a!==null&&(e.callback=a),i=nh(o,e,d),i!==null&&(gi(i,o,d,c),oh(i,o,d)),d}function gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function hl(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<e?s:e}}function il(i,e){hl(i,e),(i=i.alternate)&&hl(i,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}ml.prototype.render=ll.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(i,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Rk(function(){fl(null,i,null,null)}),e[uf]=null}};function ml(i){this._internalRoot=i}ml.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function nl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(i,e,s,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var tt=gl(d);c.call(tt)}}var d=el(e,a,i,0,null,!1,!1,"",pl);return i._reactRootContainer=d,i[uf]=d.current,sf(i.nodeType===8?i.parentNode:i),Rk(),d}for(;o=i.lastChild;)i.removeChild(o);if(typeof a=="function"){var h=a;a=function(){var tt=gl(b);h.call(tt)}}var b=bl(i,0,!1,null,null,!1,!1,"",pl);return i._reactRootContainer=b,i[uf]=b.current,sf(i.nodeType===8?i.parentNode:i),Rk(function(){fl(e,b,s,a)}),b}function rl(i,e,s,a,o){var c=s._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var h=o;o=function(){var b=gl(d);h.call(b)}}fl(e,d,i,o)}else d=ql(s,e,i,o,a);return gl(d)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var a=ih(i,1);if(a!==null){var o=R$1();gi(a,i,1,o)}}),il(i,1)}};Fc=function(i){if(i.tag===13){var e=ih(i,134217728);if(e!==null){var s=R$1();gi(e,i,134217728,s)}il(i,134217728)}};Gc=function(i){if(i.tag===13){var e=yi(i),s=ih(i,e);if(s!==null){var a=R$1();gi(s,i,e,a)}il(i,e)}};Hc=function(){return C$1};Ic=function(i,e){var s=C$1;try{return C$1=i,e()}finally{C$1=s}};yb=function(i,e,s){switch(e){case"input":if(bb(i,s),e=s.name,s.type==="radio"&&e!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var a=s[e];if(a!==i&&a.form===i.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(i,s);break;case"select":e=s.value,e!=null&&fb(i,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(i,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(i,e,null,s)};reactDom_production_min.createRoot=function(i,e){if(!nl(i))throw Error(p(299));var s=!1,a="",o=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=bl(i,1,!1,null,null,s,!1,a,o),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ll(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Rk(i)};reactDom_production_min.hydrate=function(i,e,s){if(!ol(e))throw Error(p(200));return rl(null,i,e,!0,s)};reactDom_production_min.hydrateRoot=function(i,e,s){if(!nl(i))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,o=!1,c="",d=kl;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),e=el(e,null,i,1,s??null,o,!1,c,d),i[uf]=e.current,sf(i),a)for(i=0;i<a.length;i++)s=a[i],o=s._getVersion,o=o(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,o]:e.mutableSourceEagerHydrationData.push(s,o);return new ml(e)};reactDom_production_min.render=function(i,e,s){if(!ol(e))throw Error(p(200));return rl(null,i,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p(40));return i._reactRootContainer?(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,s,a){if(!ol(s))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return rl(i,e,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function(e,s,a){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.all(s.map(h=>{if(h=assetsURL(h),h in seen)return;seen[h]=!0;const b=h.endsWith(".css"),tt=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${tt}`))return;const nt=document.createElement("link");if(nt.rel=b?"stylesheet":scriptRel,b||(nt.as="script",nt.crossOrigin=""),nt.href=h,d&&nt.setAttribute("nonce",d),document.head.appendChild(nt),b)return new Promise((ft,yt)=>{nt.addEventListener("load",ft),nt.addEventListener("error",()=>yt(new Error(`Unable to preload CSS for ${h}`)))})}))}return o.then(()=>e()).catch(c=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c})};var modules={},Link$1={},scrollLink={},scrollSpy$2={},FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce$1(i,e,s){var a,o,c,d,h,b,tt=0,nt=!1,ft=!1,yt=!0;if(typeof i!="function")throw new TypeError(FUNC_ERROR_TEXT);e=toNumber(e)||0,isObject$3(s)&&(nt=!!s.leading,ft="maxWait"in s,c=ft?nativeMax(toNumber(s.maxWait)||0,e):c,yt="trailing"in s?!!s.trailing:yt);function Tt(It){var Rt=a,Lt=o;return a=o=void 0,tt=It,d=i.apply(Lt,Rt),d}function gt(It){return tt=It,h=setTimeout(Et,e),nt?Tt(It):d}function St(It){var Rt=It-b,Lt=It-tt,jt=e-Rt;return ft?nativeMin(jt,c-Lt):jt}function wt(It){var Rt=It-b,Lt=It-tt;return b===void 0||Rt>=e||Rt<0||ft&&Lt>=c}function Et(){var It=now();if(wt(It))return vt(It);h=setTimeout(Et,St(It))}function vt(It){return h=void 0,yt&&a?Tt(It):(a=o=void 0,d)}function xt(){h!==void 0&&clearTimeout(h),tt=0,a=b=o=h=void 0}function At(){return h===void 0?d:vt(now())}function kt(){var It=now(),Rt=wt(It);if(a=arguments,o=this,b=It,Rt){if(h===void 0)return gt(b);if(ft)return h=setTimeout(Et,e),Tt(b)}return h===void 0&&(h=setTimeout(Et,e)),d}return kt.cancel=xt,kt.flush=At,kt}function throttle$2(i,e,s){var a=!0,o=!0;if(typeof i!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$3(s)&&(a="leading"in s?!!s.leading:a,o="trailing"in s?!!s.trailing:o),debounce$1(i,e,{leading:a,maxWait:e,trailing:o})}function isObject$3(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function isObjectLike(i){return!!i&&typeof i=="object"}function isSymbol(i){return typeof i=="symbol"||isObjectLike(i)&&objectToString.call(i)==symbolTag}function toNumber(i){if(typeof i=="number")return i;if(isSymbol(i))return NAN;if(isObject$3(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=isObject$3(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace(reTrim,"");var s=reIsBinary.test(i);return s||reIsOctal.test(i)?freeParseInt(i.slice(2),s?2:8):reIsBadHex.test(i)?NAN:+i}var lodash_throttle=throttle$2,passiveEventListeners={};Object.defineProperty(passiveEventListeners,"__esModule",{value:!0});passiveEventListeners.addPassiveEventListener=function(e,s,a){var o=a.name;o||(o=s,console.warn("Listener must be a named function.")),attachedListeners.has(s)||attachedListeners.set(s,new Set);var c=attachedListeners.get(s);if(!c.has(o)){var d=function(){var h=!1;try{var b=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,b)}catch{}return h}();e.addEventListener(s,a,d?{passive:!0}:!1),c.add(o)}};passiveEventListeners.removePassiveEventListener=function(e,s,a){e.removeEventListener(s,a),attachedListeners.get(s).delete(a.name||s)};var attachedListeners=new Map;Object.defineProperty(scrollSpy$2,"__esModule",{value:!0});var _lodash=lodash_throttle,_lodash2=_interopRequireDefault$9(_lodash),_passiveEventListeners$1=passiveEventListeners;function _interopRequireDefault$9(i){return i&&i.__esModule?i:{default:i}}var eventThrottler=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,_lodash2.default)(e,s)},scrollSpy$1={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,s){if(e){var a=eventThrottler(function(o){scrollSpy$1.scrollHandler(e)},s);scrollSpy$1.scrollSpyContainers.push(e),(0,_passiveEventListeners$1.addPassiveEventListener)(e,"scroll",a)}},isMounted:function(e){return scrollSpy$1.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var s=window.pageYOffset!==void 0,a=(document.compatMode||"")==="CSS1Compat";return s?window.pageXOffset:a?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var s=window.pageXOffset!==void 0,a=(document.compatMode||"")==="CSS1Compat";return s?window.pageYOffset:a?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var s=scrollSpy$1.scrollSpyContainers[scrollSpy$1.scrollSpyContainers.indexOf(e)].spyCallbacks||[];s.forEach(function(a){return a(scrollSpy$1.currentPositionX(e),scrollSpy$1.currentPositionY(e))})},addStateHandler:function(e){scrollSpy$1.spySetState.push(e)},addSpyHandler:function(e,s){var a=scrollSpy$1.scrollSpyContainers[scrollSpy$1.scrollSpyContainers.indexOf(s)];a.spyCallbacks||(a.spyCallbacks=[]),a.spyCallbacks.push(e),e(scrollSpy$1.currentPositionX(s),scrollSpy$1.currentPositionY(s))},updateStates:function(){scrollSpy$1.spySetState.forEach(function(e){return e()})},unmount:function(e,s){scrollSpy$1.scrollSpyContainers.forEach(function(a){return a.spyCallbacks&&a.spyCallbacks.length&&a.spyCallbacks.indexOf(s)>-1&&a.spyCallbacks.splice(a.spyCallbacks.indexOf(s),1)}),scrollSpy$1.spySetState&&scrollSpy$1.spySetState.length&&scrollSpy$1.spySetState.indexOf(e)>-1&&scrollSpy$1.spySetState.splice(scrollSpy$1.spySetState.indexOf(e),1),document.removeEventListener("scroll",scrollSpy$1.scrollHandler)},update:function(){return scrollSpy$1.scrollSpyContainers.forEach(function(e){return scrollSpy$1.scrollHandler(e)})}};scrollSpy$2.default=scrollSpy$1;var scroller={},utils$3={};Object.defineProperty(utils$3,"__esModule",{value:!0});var updateHash=function(e,s){var a=e.indexOf("#")===0?e.substring(1):e,o=a?"#"+a:"",c=window&&window.location,d=o?c.pathname+c.search+o:c.pathname+c.search;s?history.pushState(history.state,"",d):history.replaceState(history.state,"",d)},getHash=function(){return window.location.hash.replace(/^#/,"")},filterElementInContainer=function(e){return function(s){return e.contains?e!=s&&e.contains(s):!!(e.compareDocumentPosition(s)&16)}},isPositioned=function(e){return getComputedStyle(e).position!=="static"},getElementOffsetInfoUntil=function(e,s){for(var a=e.offsetTop,o=e.offsetParent;o&&!s(o);)a+=o.offsetTop,o=o.offsetParent;return{offsetTop:a,offsetParent:o}},scrollOffset=function(e,s,a){if(a)return e===document?s.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?s.offsetLeft:s.offsetLeft-e.offsetLeft;if(e===document)return s.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(isPositioned(e)){if(s.offsetParent!==e){var o=function(nt){return nt===e||nt===document},c=getElementOffsetInfoUntil(s,o),d=c.offsetTop,h=c.offsetParent;if(h!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return d}return s.offsetTop}if(s.offsetParent===e.offsetParent)return s.offsetTop-e.offsetTop;var b=function(nt){return nt===document};return getElementOffsetInfoUntil(s,b).offsetTop-getElementOffsetInfoUntil(e,b).offsetTop};utils$3.default={updateHash,getHash,filterElementInContainer,scrollOffset};var animateScroll$1={},smooth={};Object.defineProperty(smooth,"__esModule",{value:!0});smooth.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var cancelEvents={};Object.defineProperty(cancelEvents,"__esModule",{value:!0});var _passiveEventListeners=passiveEventListeners,events=["mousedown","mousewheel","touchmove","keydown"];cancelEvents.default={subscribe:function(e){return typeof document<"u"&&events.forEach(function(s){return(0,_passiveEventListeners.addPassiveEventListener)(document,s,e)})}};var scrollEvents={};Object.defineProperty(scrollEvents,"__esModule",{value:!0});var Events$1={registered:{},scrollEvent:{register:function(e,s){Events$1.registered[e]=s},remove:function(e){Events$1.registered[e]=null}}};scrollEvents.default=Events$1;Object.defineProperty(animateScroll$1,"__esModule",{value:!0});var _extends$9=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_utils$2=utils$3;_interopRequireDefault$8(_utils$2);var _smooth=smooth,_smooth2=_interopRequireDefault$8(_smooth),_cancelEvents=cancelEvents,_cancelEvents2=_interopRequireDefault$8(_cancelEvents),_scrollEvents$2=scrollEvents,_scrollEvents2$2=_interopRequireDefault$8(_scrollEvents$2);function _interopRequireDefault$8(i){return i&&i.__esModule?i:{default:i}}var getAnimationType=function(e){return _smooth2.default[e.smooth]||_smooth2.default.defaultEasing},functionWrapper=function(e){return typeof e=="function"?e:function(){return e}},currentWindowProperties=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},requestAnimationFrameHelper=function(){return currentWindowProperties()||function(i,e,s){window.setTimeout(i,s||1e3/60,new Date().getTime())}}(),makeData=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},currentPositionX=function(e){var s=e.data.containerElement;if(s&&s!==document&&s!==document.body)return s.scrollLeft;var a=window.pageXOffset!==void 0,o=(document.compatMode||"")==="CSS1Compat";return a?window.pageXOffset:o?document.documentElement.scrollLeft:document.body.scrollLeft},currentPositionY=function(e){var s=e.data.containerElement;if(s&&s!==document&&s!==document.body)return s.scrollTop;var a=window.pageXOffset!==void 0,o=(document.compatMode||"")==="CSS1Compat";return a?window.pageYOffset:o?document.documentElement.scrollTop:document.body.scrollTop},scrollContainerWidth=function(e){var s=e.data.containerElement;if(s&&s!==document&&s!==document.body)return s.scrollWidth-s.offsetWidth;var a=document.body,o=document.documentElement;return Math.max(a.scrollWidth,a.offsetWidth,o.clientWidth,o.scrollWidth,o.offsetWidth)},scrollContainerHeight=function(e){var s=e.data.containerElement;if(s&&s!==document&&s!==document.body)return s.scrollHeight-s.offsetHeight;var a=document.body,o=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight)},animateScroll=function i(e,s,a){var o=s.data;if(!s.ignoreCancelEvents&&o.cancel){_scrollEvents2$2.default.registered.end&&_scrollEvents2$2.default.registered.end(o.to,o.target,o.currentPositionY);return}if(o.delta=Math.round(o.targetPosition-o.startPosition),o.start===null&&(o.start=a),o.progress=a-o.start,o.percent=o.progress>=o.duration?1:e(o.progress/o.duration),o.currentPosition=o.startPosition+Math.ceil(o.delta*o.percent),o.containerElement&&o.containerElement!==document&&o.containerElement!==document.body?s.horizontal?o.containerElement.scrollLeft=o.currentPosition:o.containerElement.scrollTop=o.currentPosition:s.horizontal?window.scrollTo(o.currentPosition,0):window.scrollTo(0,o.currentPosition),o.percent<1){var c=i.bind(null,e,s);requestAnimationFrameHelper.call(window,c);return}_scrollEvents2$2.default.registered.end&&_scrollEvents2$2.default.registered.end(o.to,o.target,o.currentPosition)},setContainer=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},animateTopScroll=function(e,s,a,o){s.data=s.data||makeData(),window.clearTimeout(s.data.delayTimeout);var c=function(){s.data.cancel=!0};if(_cancelEvents2.default.subscribe(c),setContainer(s),s.data.start=null,s.data.cancel=!1,s.data.startPosition=s.horizontal?currentPositionX(s):currentPositionY(s),s.data.targetPosition=s.absolute?e:e+s.data.startPosition,s.data.startPosition===s.data.targetPosition){_scrollEvents2$2.default.registered.end&&_scrollEvents2$2.default.registered.end(s.data.to,s.data.target,s.data.currentPosition);return}s.data.delta=Math.round(s.data.targetPosition-s.data.startPosition),s.data.duration=functionWrapper(s.duration)(s.data.delta),s.data.duration=isNaN(parseFloat(s.data.duration))?1e3:parseFloat(s.data.duration),s.data.to=a,s.data.target=o;var d=getAnimationType(s),h=animateScroll.bind(null,d,s);if(s&&s.delay>0){s.data.delayTimeout=window.setTimeout(function(){_scrollEvents2$2.default.registered.begin&&_scrollEvents2$2.default.registered.begin(s.data.to,s.data.target),requestAnimationFrameHelper.call(window,h)},s.delay);return}_scrollEvents2$2.default.registered.begin&&_scrollEvents2$2.default.registered.begin(s.data.to,s.data.target),requestAnimationFrameHelper.call(window,h)},proceedOptions=function(e){return e=_extends$9({},e),e.data=e.data||makeData(),e.absolute=!0,e},scrollToTop=function(e){animateTopScroll(0,proceedOptions(e))},scrollTo=function(e,s){animateTopScroll(e,proceedOptions(s))},scrollToBottom=function(e){e=proceedOptions(e),setContainer(e),animateTopScroll(e.horizontal?scrollContainerWidth(e):scrollContainerHeight(e),e)},scrollMore=function(e,s){s=proceedOptions(s),setContainer(s);var a=s.horizontal?currentPositionX(s):currentPositionY(s);animateTopScroll(e+a,s)};animateScroll$1.default={animateTopScroll,getAnimationType,scrollToTop,scrollToBottom,scrollTo,scrollMore};Object.defineProperty(scroller,"__esModule",{value:!0});var _extends$8=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_utils$1=utils$3,_utils2$1=_interopRequireDefault$7(_utils$1),_animateScroll$1=animateScroll$1,_animateScroll2$1=_interopRequireDefault$7(_animateScroll$1),_scrollEvents$1=scrollEvents,_scrollEvents2$1=_interopRequireDefault$7(_scrollEvents$1);function _interopRequireDefault$7(i){return i&&i.__esModule?i:{default:i}}var __mapped={},__activeLink=void 0;scroller.default={unmount:function(){__mapped={}},register:function(e,s){__mapped[e]=s},unregister:function(e){delete __mapped[e]},get:function(e){return __mapped[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return __activeLink=e},getActiveLink:function(){return __activeLink},scrollTo:function(e,s){var a=this.get(e);if(!a){console.warn("target Element not found");return}s=_extends$8({},s,{absolute:!1});var o=s.containerId,c=s.container,d=void 0;o?d=document.getElementById(o):c&&c.nodeType?d=c:d=document,s.absolute=!0;var h=s.horizontal,b=_utils2$1.default.scrollOffset(d,a,h)+(s.offset||0);if(!s.smooth){_scrollEvents2$1.default.registered.begin&&_scrollEvents2$1.default.registered.begin(e,a),d===document?s.horizontal?window.scrollTo(b,0):window.scrollTo(0,b):d.scrollTop=b,_scrollEvents2$1.default.registered.end&&_scrollEvents2$1.default.registered.end(e,a);return}_animateScroll2$1.default.animateTopScroll(b,s,e,a)}};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i(a,o,c,d,h,b){if(b!==ReactPropTypesSecret){var tt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw tt.name="Invariant Violation",tt}}i.isRequired=i;function e(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports,scrollHash$2={};Object.defineProperty(scrollHash$2,"__esModule",{value:!0});var _utils=utils$3,_utils2=_interopRequireDefault$6(_utils);function _interopRequireDefault$6(i){return i&&i.__esModule?i:{default:i}}var scrollHash$1={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,s){this.containers[e]=s},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,s=this.getHash();s?window.setTimeout(function(){e.scrollTo(s,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,s){var a=this.scroller,o=a.get(e);if(o&&(s||e!==a.getActiveLink())){var c=this.containers[e]||document;a.scrollTo(e,{container:c})}},getHash:function(){return _utils2.default.getHash()},changeHash:function(e,s){this.isInitialized()&&_utils2.default.getHash()!==e&&_utils2.default.updateHash(e,s)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};scrollHash$2.default=scrollHash$1;Object.defineProperty(scrollLink,"__esModule",{value:!0});var _extends$7=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_createClass$4=function(){function i(e,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,s,a){return s&&i(e.prototype,s),a&&i(e,a),e}}(),_react$4=reactExports,_react2$4=_interopRequireDefault$5(_react$4),_scrollSpy$1=scrollSpy$2,_scrollSpy2$1=_interopRequireDefault$5(_scrollSpy$1),_scroller$2=scroller,_scroller2$2=_interopRequireDefault$5(_scroller$2),_propTypes$2=propTypesExports,_propTypes2$2=_interopRequireDefault$5(_propTypes$2),_scrollHash=scrollHash$2,_scrollHash2=_interopRequireDefault$5(_scrollHash);function _interopRequireDefault$5(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck$5(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function _inherits$5(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var protoTypes$1={to:_propTypes2$2.default.string.isRequired,containerId:_propTypes2$2.default.string,container:_propTypes2$2.default.object,activeClass:_propTypes2$2.default.string,activeStyle:_propTypes2$2.default.object,spy:_propTypes2$2.default.bool,horizontal:_propTypes2$2.default.bool,smooth:_propTypes2$2.default.oneOfType([_propTypes2$2.default.bool,_propTypes2$2.default.string]),offset:_propTypes2$2.default.number,delay:_propTypes2$2.default.number,isDynamic:_propTypes2$2.default.bool,onClick:_propTypes2$2.default.func,duration:_propTypes2$2.default.oneOfType([_propTypes2$2.default.number,_propTypes2$2.default.func]),absolute:_propTypes2$2.default.bool,onSetActive:_propTypes2$2.default.func,onSetInactive:_propTypes2$2.default.func,ignoreCancelEvents:_propTypes2$2.default.bool,hashSpy:_propTypes2$2.default.bool,saveHashHistory:_propTypes2$2.default.bool,spyThrottle:_propTypes2$2.default.number};scrollLink.default=function(i,e){var s=e||_scroller2$2.default,a=function(c){_inherits$5(d,c);function d(h){_classCallCheck$5(this,d);var b=_possibleConstructorReturn$5(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h));return o.call(b),b.state={active:!1},b}return _createClass$4(d,[{key:"getScrollSpyContainer",value:function(){var b=this.props.containerId,tt=this.props.container;return b&&!tt?document.getElementById(b):tt&&tt.nodeType?tt:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var b=this.getScrollSpyContainer();_scrollSpy2$1.default.isMounted(b)||_scrollSpy2$1.default.mount(b,this.props.spyThrottle),this.props.hashSpy&&(_scrollHash2.default.isMounted()||_scrollHash2.default.mount(s),_scrollHash2.default.mapContainer(this.props.to,b)),_scrollSpy2$1.default.addSpyHandler(this.spyHandler,b),this.setState({container:b})}}},{key:"componentWillUnmount",value:function(){_scrollSpy2$1.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var b="";this.state&&this.state.active?b=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():b=this.props.className;var tt={};this.state&&this.state.active?tt=_extends$7({},this.props.style,this.props.activeStyle):tt=_extends$7({},this.props.style);var nt=_extends$7({},this.props);for(var ft in protoTypes$1)nt.hasOwnProperty(ft)&&delete nt[ft];return nt.className=b,nt.style=tt,nt.onClick=this.handleClick,_react2$4.default.createElement(i,nt)}}]),d}(_react2$4.default.PureComponent),o=function(){var d=this;this.scrollTo=function(h,b){s.scrollTo(h,_extends$7({},d.state,b))},this.handleClick=function(h){d.props.onClick&&d.props.onClick(h),h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault(),d.scrollTo(d.props.to,d.props)},this.spyHandler=function(h,b){var tt=d.getScrollSpyContainer();if(!(_scrollHash2.default.isMounted()&&!_scrollHash2.default.isInitialized())){var nt=d.props.horizontal,ft=d.props.to,yt=null,Tt=void 0,gt=void 0;if(nt){var St=0,wt=0,Et=0;if(tt.getBoundingClientRect){var vt=tt.getBoundingClientRect();Et=vt.left}if(!yt||d.props.isDynamic){if(yt=s.get(ft),!yt)return;var xt=yt.getBoundingClientRect();St=xt.left-Et+h,wt=St+xt.width}var At=h-d.props.offset;Tt=At>=Math.floor(St)&&At<Math.floor(wt),gt=At<Math.floor(St)||At>=Math.floor(wt)}else{var kt=0,It=0,Rt=0;if(tt.getBoundingClientRect){var Lt=tt.getBoundingClientRect();Rt=Lt.top}if(!yt||d.props.isDynamic){if(yt=s.get(ft),!yt)return;var jt=yt.getBoundingClientRect();kt=jt.top-Rt+b,It=kt+jt.height}var Ft=b-d.props.offset;Tt=Ft>=Math.floor(kt)&&Ft<Math.floor(It),gt=Ft<Math.floor(kt)||Ft>=Math.floor(It)}var qt=s.getActiveLink();if(gt){if(ft===qt&&s.setActiveLink(void 0),d.props.hashSpy&&_scrollHash2.default.getHash()===ft){var Xt=d.props.saveHashHistory,Ut=Xt===void 0?!1:Xt;_scrollHash2.default.changeHash("",Ut)}d.props.spy&&d.state.active&&(d.setState({active:!1}),d.props.onSetInactive&&d.props.onSetInactive(ft,yt))}if(Tt&&(qt!==ft||d.state.active===!1)){s.setActiveLink(ft);var Wt=d.props.saveHashHistory,an=Wt===void 0?!1:Wt;d.props.hashSpy&&_scrollHash2.default.changeHash(ft,an),d.props.spy&&(d.setState({active:!0}),d.props.onSetActive&&d.props.onSetActive(ft,yt))}}}};return a.propTypes=protoTypes$1,a.defaultProps={offset:0},a};Object.defineProperty(Link$1,"__esModule",{value:!0});var _react$3=reactExports,_react2$3=_interopRequireDefault$4(_react$3),_scrollLink$2=scrollLink,_scrollLink2$2=_interopRequireDefault$4(_scrollLink$2);function _interopRequireDefault$4(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck$4(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function _inherits$4(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var LinkElement=function(i){_inherits$4(e,i);function e(){var s,a,o,c;_classCallCheck$4(this,e);for(var d=arguments.length,h=Array(d),b=0;b<d;b++)h[b]=arguments[b];return c=(a=(o=_possibleConstructorReturn$4(this,(s=e.__proto__||Object.getPrototypeOf(e)).call.apply(s,[this].concat(h))),o),o.render=function(){return _react2$3.default.createElement("a",o.props,o.props.children)},a),_possibleConstructorReturn$4(o,c)}return e}(_react2$3.default.Component);Link$1.default=(0,_scrollLink2$2.default)(LinkElement);var Button$1={};Object.defineProperty(Button$1,"__esModule",{value:!0});var _createClass$3=function(){function i(e,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,s,a){return s&&i(e.prototype,s),a&&i(e,a),e}}(),_react$2=reactExports,_react2$2=_interopRequireDefault$3(_react$2),_scrollLink$1=scrollLink,_scrollLink2$1=_interopRequireDefault$3(_scrollLink$1);function _interopRequireDefault$3(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck$3(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function _inherits$3(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var ButtonElement=function(i){_inherits$3(e,i);function e(){return _classCallCheck$3(this,e),_possibleConstructorReturn$3(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _createClass$3(e,[{key:"render",value:function(){return _react2$2.default.createElement("button",this.props,this.props.children)}}]),e}(_react2$2.default.Component);Button$1.default=(0,_scrollLink2$1.default)(ButtonElement);var Element$1={},scrollElement={};Object.defineProperty(scrollElement,"__esModule",{value:!0});var _extends$6=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_createClass$2=function(){function i(e,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,s,a){return s&&i(e.prototype,s),a&&i(e,a),e}}(),_react$1=reactExports,_react2$1=_interopRequireDefault$2(_react$1),_reactDom=reactDomExports;_interopRequireDefault$2(_reactDom);var _scroller$1=scroller,_scroller2$1=_interopRequireDefault$2(_scroller$1),_propTypes$1=propTypesExports,_propTypes2$1=_interopRequireDefault$2(_propTypes$1);function _interopRequireDefault$2(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck$2(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function _inherits$2(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}scrollElement.default=function(i){var e=function(s){_inherits$2(a,s);function a(o){_classCallCheck$2(this,a);var c=_possibleConstructorReturn$2(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return c.childBindings={domNode:null},c}return _createClass$2(a,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(c){this.props.name!==c.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;_scroller2$1.default.unregister(this.props.name)}},{key:"registerElems",value:function(c){_scroller2$1.default.register(c,this.childBindings.domNode)}},{key:"render",value:function(){return _react2$1.default.createElement(i,_extends$6({},this.props,{parentBindings:this.childBindings}))}}]),a}(_react2$1.default.Component);return e.propTypes={name:_propTypes2$1.default.string,id:_propTypes2$1.default.string},e};Object.defineProperty(Element$1,"__esModule",{value:!0});var _extends$5=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_createClass$1=function(){function i(e,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,s,a){return s&&i(e.prototype,s),a&&i(e,a),e}}(),_react=reactExports,_react2=_interopRequireDefault$1(_react),_scrollElement$1=scrollElement,_scrollElement2$1=_interopRequireDefault$1(_scrollElement$1),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault$1(_propTypes);function _interopRequireDefault$1(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck$1(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function _inherits$1(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var ElementWrapper=function(i){_inherits$1(e,i);function e(){return _classCallCheck$1(this,e),_possibleConstructorReturn$1(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _createClass$1(e,[{key:"render",value:function(){var a=this,o=_extends$5({},this.props);return delete o.name,o.parentBindings&&delete o.parentBindings,_react2.default.createElement("div",_extends$5({},o,{ref:function(d){a.props.parentBindings.domNode=d}}),this.props.children)}}]),e}(_react2.default.Component);ElementWrapper.propTypes={name:_propTypes2.default.string,id:_propTypes2.default.string};Element$1.default=(0,_scrollElement2$1.default)(ElementWrapper);var _extends$4=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_createClass=function(){function i(e,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,s,a){return s&&i(e.prototype,s),a&&i(e,a),e}}();function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function _inherits(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var React=reactExports,scrollSpy=scrollSpy$2,defaultScroller=scroller,PropTypes=propTypesExports,scrollHash=scrollHash$2,protoTypes={to:PropTypes.string.isRequired,containerId:PropTypes.string,container:PropTypes.object,activeClass:PropTypes.string,spy:PropTypes.bool,smooth:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),offset:PropTypes.number,delay:PropTypes.number,isDynamic:PropTypes.bool,onClick:PropTypes.func,duration:PropTypes.oneOfType([PropTypes.number,PropTypes.func]),absolute:PropTypes.bool,onSetActive:PropTypes.func,onSetInactive:PropTypes.func,ignoreCancelEvents:PropTypes.bool,hashSpy:PropTypes.bool,spyThrottle:PropTypes.number},Helpers={Scroll:function(e,s){console.warn("Helpers.Scroll is deprecated since v1.7.0");var a=s||defaultScroller,o=function(d){_inherits(h,d);function h(b){_classCallCheck(this,h);var tt=_possibleConstructorReturn(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,b));return c.call(tt),tt.state={active:!1},tt}return _createClass(h,[{key:"getScrollSpyContainer",value:function(){var tt=this.props.containerId,nt=this.props.container;return tt?document.getElementById(tt):nt&&nt.nodeType?nt:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var tt=this.getScrollSpyContainer();scrollSpy.isMounted(tt)||scrollSpy.mount(tt,this.props.spyThrottle),this.props.hashSpy&&(scrollHash.isMounted()||scrollHash.mount(a),scrollHash.mapContainer(this.props.to,tt)),this.props.spy&&scrollSpy.addStateHandler(this.stateHandler),scrollSpy.addSpyHandler(this.spyHandler,tt),this.setState({container:tt})}}},{key:"componentWillUnmount",value:function(){scrollSpy.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var tt="";this.state&&this.state.active?tt=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():tt=this.props.className;var nt=_extends$4({},this.props);for(var ft in protoTypes)nt.hasOwnProperty(ft)&&delete nt[ft];return nt.className=tt,nt.onClick=this.handleClick,React.createElement(e,nt)}}]),h}(React.Component),c=function(){var h=this;this.scrollTo=function(b,tt){a.scrollTo(b,_extends$4({},h.state,tt))},this.handleClick=function(b){h.props.onClick&&h.props.onClick(b),b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault(),h.scrollTo(h.props.to,h.props)},this.stateHandler=function(){a.getActiveLink()!==h.props.to&&(h.state!==null&&h.state.active&&h.props.onSetInactive&&h.props.onSetInactive(),h.setState({active:!1}))},this.spyHandler=function(b){var tt=h.getScrollSpyContainer();if(!(scrollHash.isMounted()&&!scrollHash.isInitialized())){var nt=h.props.to,ft=null,yt=0,Tt=0,gt=0;if(tt.getBoundingClientRect){var St=tt.getBoundingClientRect();gt=St.top}if(!ft||h.props.isDynamic){if(ft=a.get(nt),!ft)return;var wt=ft.getBoundingClientRect();yt=wt.top-gt+b,Tt=yt+wt.height}var Et=b-h.props.offset,vt=Et>=Math.floor(yt)&&Et<Math.floor(Tt),xt=Et<Math.floor(yt)||Et>=Math.floor(Tt),At=a.getActiveLink();if(xt)return nt===At&&a.setActiveLink(void 0),h.props.hashSpy&&scrollHash.getHash()===nt&&scrollHash.changeHash(),h.props.spy&&h.state.active&&(h.setState({active:!1}),h.props.onSetInactive&&h.props.onSetInactive()),scrollSpy.updateStates();if(vt&&At!==nt)return a.setActiveLink(nt),h.props.hashSpy&&scrollHash.changeHash(nt),h.props.spy&&(h.setState({active:!0}),h.props.onSetActive&&h.props.onSetActive(nt)),scrollSpy.updateStates()}}};return o.propTypes=protoTypes,o.defaultProps={offset:0},o},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var s=function(a){_inherits(o,a);function o(c){_classCallCheck(this,o);var d=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,c));return d.childBindings={domNode:null},d}return _createClass(o,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(d){this.props.name!==d.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;defaultScroller.unregister(this.props.name)}},{key:"registerElems",value:function(d){defaultScroller.register(d,this.childBindings.domNode)}},{key:"render",value:function(){return React.createElement(e,_extends$4({},this.props,{parentBindings:this.childBindings}))}}]),o}(React.Component);return s.propTypes={name:PropTypes.string,id:PropTypes.string},s}},Helpers_1=Helpers;Object.defineProperty(modules,"__esModule",{value:!0});modules.Helpers=modules.ScrollElement=modules.ScrollLink=modules.animateScroll=modules.scrollSpy=modules.Events=modules.scroller=modules.Element=modules.Button=Link=modules.Link=void 0;var _Link=Link$1,_Link2=_interopRequireDefault(_Link),_Button=Button$1,_Button2=_interopRequireDefault(_Button),_Element=Element$1,_Element2=_interopRequireDefault(_Element),_scroller=scroller,_scroller2=_interopRequireDefault(_scroller),_scrollEvents=scrollEvents,_scrollEvents2=_interopRequireDefault(_scrollEvents),_scrollSpy=scrollSpy$2,_scrollSpy2=_interopRequireDefault(_scrollSpy),_animateScroll=animateScroll$1,_animateScroll2=_interopRequireDefault(_animateScroll),_scrollLink=scrollLink,_scrollLink2=_interopRequireDefault(_scrollLink),_scrollElement=scrollElement,_scrollElement2=_interopRequireDefault(_scrollElement),_Helpers=Helpers_1,_Helpers2=_interopRequireDefault(_Helpers);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var Link=modules.Link=_Link2.default;modules.Button=_Button2.default;modules.Element=_Element2.default;modules.scroller=_scroller2.default;modules.Events=_scrollEvents2.default;modules.scrollSpy=_scrollSpy2.default;modules.animateScroll=_animateScroll2.default;modules.ScrollLink=_scrollLink2.default;modules.ScrollElement=_scrollElement2.default;modules.Helpers=_Helpers2.default;modules.default={Link:_Link2.default,Button:_Button2.default,Element:_Element2.default,scroller:_scroller2.default,Events:_scrollEvents2.default,scrollSpy:_scrollSpy2.default,animateScroll:_animateScroll2.default,ScrollLink:_scrollLink2.default,ScrollElement:_scrollElement2.default,Helpers:_Helpers2.default};const insta_logo="/assets/Instagram-CwpFAfTw.png",facebook_logo="/assets/Facebook-B_K_PIGY.png",letterboxd_logo="/assets/letterboxd-CwP5Spf6.png",imdb_logo="/assets/imdb-fJM_mT7x.png",gmail_logo="/assets/Gmail-CMsCcxNN.png",mail_logo="/assets/Mail-D8Lf1dAR.png",copy_logo="/assets/Copy-rLrcNfWA.png",green_copy_logo="/assets/GreenCopy-CPnKwH8J.png",menu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAQAAAD41aSMAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfoBQILBTrjBLaiAAAC6klEQVR42u3bMW4TQRiG4XdtR0pEkRIJrgFSCCWUnAGa3AkjaOAK0FISGs4RiTIFElGIh8IrBaXZrPnX/8zqfVa04535bCLNzAeSJEmSJEmSJEmSJEmSJEmSJEmSJGkn3cRjTzn+vpT+XzO2C79kNYMItjNYsZxqLvFDdhQWdNwASx6wnHqNJnbDr34uhQ1d9G8hOoDb5X/KGac85GBfKzWRa35yznt+TBVBpA5YAEesKTN73nHUzy70Sxv7C+iAwiFfeMEN0DX+F2CrUIAlX3nF736OlepYAmsKV+nf2OjnisIa+j/HVdou/wmFTfpyTfFsKJxER7AIjgDeAJs9xr4/G+A1wf9txwbwB3gW/YrV6IDTfpZhIgPogGMeM+cAHnEcO7/YXwAsWO1xSfbvIHrFogPQSAaQzACSGUAyA0hmAMkMIFl0ABuus6c0qevobZbIAApwyQUVb9f+9/wuuIydX+wvYAV8j33BihTgvJ9lmNgACvAxfNRaLIBPVP318kBmhyWLHq1wyGdeeiSZ4fZQ/m36Nzb6WbdwKP/vtZQnnPF8JtdSvvFhqmspXswaMvHFrCl4NXHkB0z78u1r7nKuJEmSJEn1citiWHNbEW7GjfyA6BHdjh7BnvAQe8KVPPaE0zR1KO+1lPTltyc8ij3h+7MnnMyecDJ7whWwJzw3BpDMAJIZQDIDSGYAyQwgmT3hcewJJ7InnMyecDJ7wnM8kLEnPKzQ0JGkPeEdlix2PHvCo3gxa4g94Qrm0tTVxLsv377mLudKkiRJklQvtyKGNbcV4WbcyA+IHtHt6BHsCQ+xJ1zJY084TVOH8l5LSV9+e8Kj2BO+P3vCyewJJ7MnXAF7wnNjAMkMIJkBJDOAZAaQzACS2RMex55wInvCyewJJ7MnPMcDGXvCwwoNHUnaE95hyWLHsyc8ihezhtgTrmAuTV1NvPvy7Wvucq4kSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZI0S38BEFk9OADvzTkAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjQtMDUtMDJUMTE6MDU6MTQrMDA6MDB3QooRAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI0LTA1LTAyVDExOjA1OjE0KzAwOjAwBh8yrQAAAABJRU5ErkJggg==",share="/assets/Share-4-W9IeK7.png";__vitePreload(()=>Promise.resolve().then(()=>MenuElements),void 0);function MenuElements$1(i){const[e,s]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),[h,b]=reactExports.useState("");function tt(){s(St=>!St)}function nt(){o(St=>!St)}function ft(){o(!1)}function yt(){navigator.clipboard.writeText(`🎥✨ PAY-AS-YOU-LIKE and experience the magic of "Fairy Folk" as Ritika (Rasika Dugal) and Mohit (Mukul Chadda) encounter a mysterious being that transforms their lives! Directed by Karan Gour, this critically acclaimed film masterfully blends fantasy and deep emotional storytelling. Don't miss this unique cinematic journey! 🌟🧚‍♀️

#FairyFolkTheFilm #MustWatch #Magic #Fantasy #IndieFilm #Cinema

Check out the film here: https://www.fairyfolkthefilm.com`).then(()=>{d(!0),setTimeout(()=>d(!1),5e3)}).catch(wt=>{console.error("Error copying link: ",wt),d(!1)})}function Tt(St){return console.log(St),()=>b(St)}function gt(){b("")}return console.log("Inside MenuElements tracking fullScreen:",i.fullScreen),jsxRuntimeExports.jsxs("div",{className:"menu-elements",children:[jsxRuntimeExports.jsx("img",{src:share,className:"share-button",alt:"Share",onClick:tt}),jsxRuntimeExports.jsx("div",{className:"buttons-shading"}),jsxRuntimeExports.jsxs("div",{className:`${e?"share-options-menu share-options-visible":"share-options-menu"}`,children:[jsxRuntimeExports.jsx("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https://www.fairyfolkthefilm.com",target:"_blank",rel:"noopener noreferrer",children:jsxRuntimeExports.jsx("img",{src:facebook_logo,alt:"Facebook Share",className:`insta-logo ${h==="facebook"?"hovered":""}`,onMouseOver:Tt("facebook"),onMouseLeave:gt})}),jsxRuntimeExports.jsx("a",{href:`https://mail.google.com/mail/?view=cm&fs=1&tf=1&su=Watch 'Fairy Folk' - the film!&body=${encodeURIComponent(`🎥✨ PAY-AS-YOU-LIKE and experience the magic of "Fairy Folk" as Ritika (Rasika Dugal) and Mohit (Mukul Chadda) encounter a mysterious being that transforms their lives! Directed by Karan Gour, this critically acclaimed film masterfully blends fantasy and deep emotional storytelling. Don't miss this unique cinematic journey! 🌟🧚‍♀️

#FairyFolkTheFilm #MustWatch #Magic #Fantasy #IndieFilm #Cinema

Check out the film here: https://www.fairyfolkthefilm.com`)}`,target:"_blank",rel:"noopener noreferrer",children:jsxRuntimeExports.jsx("img",{src:gmail_logo,alt:"Gmail Share",className:`insta-logo ${h==="gmail"?"hovered":""}`,onMouseOver:Tt("gmail"),onMouseLeave:gt})}),jsxRuntimeExports.jsx("a",{href:`mailto:?subject=Watch 'Fairy Folk' - the film!&body=${encodeURIComponent(`🎥✨ PAY-AS-YOU-LIKE and experience the magic of "Fairy Folk" as Ritika (Rasika Dugal) and Mohit (Mukul Chadda) encounter a mysterious being that transforms their lives! Directed by Karan Gour, this critically acclaimed film masterfully blends fantasy and deep emotional storytelling. Don't miss this unique cinematic journey! 🌟🧚‍♀️

#FairyFolkTheFilm #MustWatch #Magic #Fantasy #IndieFilm #Cinema

Check out the film here: https://www.fairyfolkthefilm.com`)}`,children:jsxRuntimeExports.jsx("img",{src:mail_logo,alt:"Email Share",className:`insta-logo ${h==="mail"?"hovered":""}`,onMouseOver:Tt("mail"),onMouseLeave:gt})}),jsxRuntimeExports.jsx("img",{src:c?green_copy_logo:copy_logo,alt:"Copy Link",onClick:yt,className:`insta-logo ${h==="copy"?"hovered":""}`,onMouseOver:Tt("copy"),onMouseLeave:gt})]}),jsxRuntimeExports.jsx("img",{src:menu,className:"menu-button",alt:"Menu",onClick:()=>{nt(),e&&tt()},style:{display:i.fullScreen?"none":"block"}}),jsxRuntimeExports.jsxs("div",{className:`menu ${a?"open":""}`,children:[jsxRuntimeExports.jsx(Link,{to:"scroll-landing-home",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="home"?"highlight":""}`,onMouseOver:Tt("home"),onMouseOut:gt,onClick:ft,children:"HOME"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-payasyoulike",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="payasyoulike"?"highlight":""}`,onMouseOver:Tt("payasyoulike"),onMouseOut:gt,onClick:ft,children:"PAY-AS-YOU-LIKE"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-watchfilm",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="watchfilm"?"highlight":""}`,onMouseOver:Tt("watchfilm"),onMouseOut:gt,onClick:ft,children:"WATCH THE FILM"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-about",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="about"?"highlight":""}`,onMouseOver:Tt("about"),onMouseOut:gt,onClick:ft,children:"ABOUT"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-videos",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="videos"?"highlight":""}`,onMouseOver:Tt("videos"),onMouseOut:gt,onClick:ft,children:"VIDEOS"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-gallery",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="gallery"?"highlight":""}`,onMouseOver:Tt("gallery"),onMouseOut:gt,onClick:ft,children:"GALLERY"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-getintouch",spy:!0,smooth:!0,duration:1500,className:`menu-text ${h==="getintouch"?"highlight":""}`,onMouseOver:Tt("getintouch"),onMouseOut:gt,onClick:ft,children:"GET IN TOUCH"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("a",{href:"https://www.instagram.com/fairy_folk_thefilm/",className:"insta-button",target:"_blank",rel:"noopener noreferrer",onClick:ft,children:jsxRuntimeExports.jsx("img",{src:insta_logo,className:`insta-logo ${h==="insta"?"hovered":""}`,onMouseOver:Tt("insta"),onMouseOut:gt})})," ",jsxRuntimeExports.jsx("a",{href:"https://letterboxd.com/film/fairy-folk/",className:"letterboxd-button",target:"_blank",rel:"noopener noreferrer",onClick:ft,children:jsxRuntimeExports.jsx("img",{src:letterboxd_logo,className:`insta-logo ${h==="letterboxd"?"hovered":""}`,onMouseOver:Tt("letterboxd"),onMouseOut:gt})})," ",jsxRuntimeExports.jsx("a",{href:"https://www.imdb.com/title/tt20202992/",className:"imdb-button",target:"_blank",rel:"noopener noreferrer",onClick:ft,children:jsxRuntimeExports.jsx("img",{src:imdb_logo,className:`insta-logo ${h==="imdb"?"hovered":""}`,onMouseOver:Tt("imdb"),onMouseOut:gt})})]})]})]})}function Home(){return jsxRuntimeExports.jsxs("div",{className:"home",children:[jsxRuntimeExports.jsxs("div",{className:"watchfilm-title",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin-home",children:"WATCH"})," ",jsxRuntimeExports.jsx("h1",{className:"heading-thick-home film-text",children:" FILM"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-home"})]}),jsxRuntimeExports.jsxs("div",{className:"home-buttons",children:[jsxRuntimeExports.jsx("h3",{className:"need-text",children:"I NEED A PASSWORD"}),jsxRuntimeExports.jsx(Link,{to:"scroll-landing-payasyoulike",spy:!0,smooth:!0,duration:1500,className:"need-button button"}),jsxRuntimeExports.jsx("h3",{className:"have-text",children:"I HAVE A PASSWORD"}),jsxRuntimeExports.jsx(Link,{type:"button",className:"have-button button",to:"scroll-landing-watchfilm",spy:!0,smooth:!0,duration:1500})]})]})}const poster="/assets/FairyFolkWebsitePoster-Db2z1uOn.png",poster2="/assets/FairyFolkIntegratedPoster-BU-GMPwZ.jpg";function bind(i,e){return function(){return i.apply(e,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(i=>e=>{const s=toString$2.call(e);return i[s]||(i[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=i=>(i=i.toLowerCase(),e=>kindOf(e)===i),typeOfTest=i=>e=>typeof e===i,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(i){return i!==null&&!isUndefined(i)&&i.constructor!==null&&!isUndefined(i.constructor)&&isFunction$2(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView$1(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&isArrayBuffer(i.buffer),e}const isString=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$2=i=>i!==null&&typeof i=="object",isBoolean=i=>i===!0||i===!1,isPlainObject=i=>{if(kindOf(i)!=="object")return!1;const e=getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=i=>isObject$2(i)&&isFunction$2(i.pipe),isFormData=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||isFunction$2(i.append)&&((e=kindOf(i))==="formdata"||e==="object"&&isFunction$2(i.toString)&&i.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim$1=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(i,e,{allOwnKeys:s=!1}={}){if(i===null||typeof i>"u")return;let a,o;if(typeof i!="object"&&(i=[i]),isArray(i))for(a=0,o=i.length;a<o;a++)e.call(null,i[a],a,i);else{const c=s?Object.getOwnPropertyNames(i):Object.keys(i),d=c.length;let h;for(a=0;a<d;a++)h=c[a],e.call(null,i[h],h,i)}}function findKey(i,e){e=e.toLowerCase();const s=Object.keys(i);let a=s.length,o;for(;a-- >0;)if(o=s[a],e===o.toLowerCase())return o;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=i=>!isUndefined(i)&&i!==_global;function merge$3(){const{caseless:i}=isContextDefined(this)&&this||{},e={},s=(a,o)=>{const c=i&&findKey(e,o)||o;isPlainObject(e[c])&&isPlainObject(a)?e[c]=merge$3(e[c],a):isPlainObject(a)?e[c]=merge$3({},a):isArray(a)?e[c]=a.slice():e[c]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&forEach(arguments[a],s);return e}const extend=(i,e,s,{allOwnKeys:a}={})=>(forEach(e,(o,c)=>{s&&isFunction$2(o)?i[c]=bind(o,s):i[c]=o},{allOwnKeys:a}),i),stripBOM=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),inherits=(i,e,s,a)=>{i.prototype=Object.create(e.prototype,a),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),s&&Object.assign(i.prototype,s)},toFlatObject=(i,e,s,a)=>{let o,c,d;const h={};if(e=e||{},i==null)return e;do{for(o=Object.getOwnPropertyNames(i),c=o.length;c-- >0;)d=o[c],(!a||a(d,i,e))&&!h[d]&&(e[d]=i[d],h[d]=!0);i=s!==!1&&getPrototypeOf(i)}while(i&&(!s||s(i,e))&&i!==Object.prototype);return e},endsWith=(i,e,s)=>{i=String(i),(s===void 0||s>i.length)&&(s=i.length),s-=e.length;const a=i.indexOf(e,s);return a!==-1&&a===s},toArray=i=>{if(!i)return null;if(isArray(i))return i;let e=i.length;if(!isNumber(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=i[e];return s},isTypedArray$1=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(i,e)=>{const a=(i&&i[Symbol.iterator]).call(i);let o;for(;(o=a.next())&&!o.done;){const c=o.value;e.call(i,c[0],c[1])}},matchAll=(i,e)=>{let s;const a=[];for(;(s=i.exec(e))!==null;)a.push(s);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,o){return a.toUpperCase()+o}),hasOwnProperty=(({hasOwnProperty:i})=>(e,s)=>i.call(e,s))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(i,e)=>{const s=Object.getOwnPropertyDescriptors(i),a={};forEach(s,(o,c)=>{let d;(d=e(o,c,i))!==!1&&(a[c]=d||o)}),Object.defineProperties(i,a)},freezeMethods=i=>{reduceDescriptors(i,(e,s)=>{if(isFunction$2(i)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=i[s];if(isFunction$2(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},toObjectSet=(i,e)=>{const s={},a=o=>{o.forEach(c=>{s[c]=!0})};return isArray(i)?a(i):a(String(i).split(e)),s},noop$2=()=>{},toFiniteNumber=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(i=16,e=ALPHABET.ALPHA_DIGIT)=>{let s="";const{length:a}=e;for(;i--;)s+=e[Math.random()*a|0];return s};function isSpecCompliantForm(i){return!!(i&&isFunction$2(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const toJSONObject=i=>{const e=new Array(10),s=(a,o)=>{if(isObject$2(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[o]=a;const c=isArray(a)?[]:{};return forEach(a,(d,h)=>{const b=s(d,o+1);!isUndefined(b)&&(c[h]=b)}),e[o]=void 0,c}}return a};return s(i,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=i=>i&&(isObject$2(i)||isFunction$2(i))&&isFunction$2(i.then)&&isFunction$2(i.catch),utils$2={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView:isArrayBufferView$1,isString,isNumber,isBoolean,isObject:isObject$2,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$3,extend,trim:trim$1,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(i,e,s,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),a&&(this.request=a),o&&(this.response=o)}utils$2.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{descriptors[i]={value:i}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(i,e,s,a,o,c)=>{const d=Object.create(prototype$1);return utils$2.toFlatObject(i,d,function(b){return b!==Error.prototype},h=>h!=="isAxiosError"),AxiosError.call(d,i.message,e,s,a,o),d.cause=i,d.name=i.name,c&&Object.assign(d,c),d};const httpAdapter=null;function isVisitable(i){return utils$2.isPlainObject(i)||utils$2.isArray(i)}function removeBrackets(i){return utils$2.endsWith(i,"[]")?i.slice(0,-2):i}function renderKey(i,e,s){return i?i.concat(e).map(function(o,c){return o=removeBrackets(o),!s&&c?"["+o+"]":o}).join(s?".":""):e}function isFlatArray(i){return utils$2.isArray(i)&&!i.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData(i,e,s){if(!utils$2.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,s=utils$2.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(St,wt){return!utils$2.isUndefined(wt[St])});const a=s.metaTokens,o=s.visitor||nt,c=s.dots,d=s.indexes,b=(s.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(e);if(!utils$2.isFunction(o))throw new TypeError("visitor must be a function");function tt(gt){if(gt===null)return"";if(utils$2.isDate(gt))return gt.toISOString();if(!b&&utils$2.isBlob(gt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(gt)||utils$2.isTypedArray(gt)?b&&typeof Blob=="function"?new Blob([gt]):Buffer.from(gt):gt}function nt(gt,St,wt){let Et=gt;if(gt&&!wt&&typeof gt=="object"){if(utils$2.endsWith(St,"{}"))St=a?St:St.slice(0,-2),gt=JSON.stringify(gt);else if(utils$2.isArray(gt)&&isFlatArray(gt)||(utils$2.isFileList(gt)||utils$2.endsWith(St,"[]"))&&(Et=utils$2.toArray(gt)))return St=removeBrackets(St),Et.forEach(function(xt,At){!(utils$2.isUndefined(xt)||xt===null)&&e.append(d===!0?renderKey([St],At,c):d===null?St:St+"[]",tt(xt))}),!1}return isVisitable(gt)?!0:(e.append(renderKey(wt,St,c),tt(gt)),!1)}const ft=[],yt=Object.assign(predicates,{defaultVisitor:nt,convertValue:tt,isVisitable});function Tt(gt,St){if(!utils$2.isUndefined(gt)){if(ft.indexOf(gt)!==-1)throw Error("Circular reference detected in "+St.join("."));ft.push(gt),utils$2.forEach(gt,function(Et,vt){(!(utils$2.isUndefined(Et)||Et===null)&&o.call(e,Et,utils$2.isString(vt)?vt.trim():vt,St,yt))===!0&&Tt(Et,St?St.concat(vt):[vt])}),ft.pop()}}if(!utils$2.isObject(i))throw new TypeError("data must be an object");return Tt(i),e}function encode$1(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function AxiosURLSearchParams(i,e){this._pairs=[],i&&toFormData(i,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,s){this._pairs.push([e,s])};prototype.toString=function(e){const s=e?function(a){return e.call(this,a,encode$1)}:encode$1;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function encode(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(i,e,s){if(!e)return i;const a=s&&s.encode||encode,o=s&&s.serialize;let c;if(o?c=o(e,s):c=utils$2.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,s).toString(a),c){const d=i.indexOf("#");d!==-1&&(i=i.slice(0,d)),i+=(i.indexOf("?")===-1?"?":"&")+c}return i}class InterceptorManager{constructor(){this.handlers=[]}use(e,s,a){return this.handlers.push({fulfilled:e,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$2.forEach(this.handlers,function(a){a!==null&&e(a)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(i=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(i,e){return toFormData(i,new platform.classes.URLSearchParams,Object.assign({visitor:function(s,a,o,c){return platform.isNode&&utils$2.isBuffer(s)?(this.append(a,s.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(i){return utils$2.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(i){const e={},s=Object.keys(i);let a;const o=s.length;let c;for(a=0;a<o;a++)c=s[a],e[c]=i[c];return e}function formDataToJSON(i){function e(s,a,o,c){let d=s[c++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),b=c>=s.length;return d=!d&&utils$2.isArray(o)?o.length:d,b?(utils$2.hasOwnProp(o,d)?o[d]=[o[d],a]:o[d]=a,!h):((!o[d]||!utils$2.isObject(o[d]))&&(o[d]=[]),e(s,a,o[d],c)&&utils$2.isArray(o[d])&&(o[d]=arrayToObject(o[d])),!h)}if(utils$2.isFormData(i)&&utils$2.isFunction(i.entries)){const s={};return utils$2.forEachEntry(i,(a,o)=>{e(parsePropPath(a),o,s,0)}),s}return null}function stringifySafely(i,e,s){if(utils$2.isString(i))try{return(e||JSON.parse)(i),utils$2.trim(i)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(i)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const a=s.getContentType()||"",o=a.indexOf("application/json")>-1,c=utils$2.isObject(e);if(c&&utils$2.isHTMLForm(e)&&(e=new FormData(e)),utils$2.isFormData(e))return o?JSON.stringify(formDataToJSON(e)):e;if(utils$2.isArrayBuffer(e)||utils$2.isBuffer(e)||utils$2.isStream(e)||utils$2.isFile(e)||utils$2.isBlob(e)||utils$2.isReadableStream(e))return e;if(utils$2.isArrayBufferView(e))return e.buffer;if(utils$2.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(c){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((h=utils$2.isFileList(e))||a.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return toFormData(h?{"files[]":e}:e,b&&new b,this.formSerializer)}}return c||o?(s.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const s=this.transitional||defaults$1.transitional,a=s&&s.forcedJSONParsing,o=this.responseType==="json";if(utils$2.isResponse(e)||utils$2.isReadableStream(e))return e;if(e&&utils$2.isString(e)&&(a&&!this.responseType||o)){const d=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(h){if(d)throw h.name==="SyntaxError"?AxiosError.from(h,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],i=>{defaults$1.headers[i]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders$1=i=>{const e={};let s,a,o;return i&&i.split(`
`).forEach(function(d){o=d.indexOf(":"),s=d.substring(0,o).trim().toLowerCase(),a=d.substring(o+1).trim(),!(!s||e[s]&&ignoreDuplicateOf[s])&&(s==="set-cookie"?e[s]?e[s].push(a):e[s]=[a]:e[s]=e[s]?e[s]+", "+a:a)}),e},$internals=Symbol("internals");function normalizeHeader(i){return i&&String(i).trim().toLowerCase()}function normalizeValue(i){return i===!1||i==null?i:utils$2.isArray(i)?i.map(normalizeValue):String(i)}function parseTokens(i){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(i);)e[a[1]]=a[2];return e}const isValidHeaderName=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function matchHeaderValue(i,e,s,a,o){if(utils$2.isFunction(a))return a.call(this,e,s);if(o&&(e=s),!!utils$2.isString(e)){if(utils$2.isString(a))return e.indexOf(a)!==-1;if(utils$2.isRegExp(a))return a.test(e)}}function formatHeader(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,a)=>s.toUpperCase()+a)}function buildAccessors(i,e){const s=utils$2.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(i,a+s,{value:function(o,c,d){return this[a].call(this,e,o,c,d)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,s,a){const o=this;function c(h,b,tt){const nt=normalizeHeader(b);if(!nt)throw new Error("header name must be a non-empty string");const ft=utils$2.findKey(o,nt);(!ft||o[ft]===void 0||tt===!0||tt===void 0&&o[ft]!==!1)&&(o[ft||b]=normalizeValue(h))}const d=(h,b)=>utils$2.forEach(h,(tt,nt)=>c(tt,nt,b));if(utils$2.isPlainObject(e)||e instanceof this.constructor)d(e,s);else if(utils$2.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))d(parseHeaders$1(e),s);else if(utils$2.isHeaders(e))for(const[h,b]of e.entries())c(b,h,a);else e!=null&&c(s,e,a);return this}get(e,s){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);if(a){const o=this[a];if(!s)return o;if(s===!0)return parseTokens(o);if(utils$2.isFunction(s))return s.call(this,o,a);if(utils$2.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);return!!(a&&this[a]!==void 0&&(!s||matchHeaderValue(this,this[a],a,s)))}return!1}delete(e,s){const a=this;let o=!1;function c(d){if(d=normalizeHeader(d),d){const h=utils$2.findKey(a,d);h&&(!s||matchHeaderValue(a,a[h],h,s))&&(delete a[h],o=!0)}}return utils$2.isArray(e)?e.forEach(c):c(e),o}clear(e){const s=Object.keys(this);let a=s.length,o=!1;for(;a--;){const c=s[a];(!e||matchHeaderValue(this,this[c],c,e,!0))&&(delete this[c],o=!0)}return o}normalize(e){const s=this,a={};return utils$2.forEach(this,(o,c)=>{const d=utils$2.findKey(a,c);if(d){s[d]=normalizeValue(o),delete s[c];return}const h=e?formatHeader(c):String(c).trim();h!==c&&delete s[c],s[h]=normalizeValue(o),a[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return utils$2.forEach(this,(a,o)=>{a!=null&&a!==!1&&(s[o]=e&&utils$2.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const a=new this(e);return s.forEach(o=>a.set(o)),a}static accessor(e){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function c(d){const h=normalizeHeader(d);a[h]||(buildAccessors(o,d),a[h]=!0)}return utils$2.isArray(e)?e.forEach(c):c(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders.prototype,({value:i},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(a){this[s]=a}}});utils$2.freezeMethods(AxiosHeaders);function transformData(i,e){const s=this||defaults$1,a=e||s,o=AxiosHeaders.from(a.headers);let c=a.data;return utils$2.forEach(i,function(h){c=h.call(s,c,o.normalize(),e?e.status:void 0)}),o.normalize(),c}function isCancel(i){return!!(i&&i.__CANCEL__)}function CanceledError(i,e,s){AxiosError.call(this,i??"canceled",AxiosError.ERR_CANCELED,e,s),this.name="CanceledError"}utils$2.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(i,e,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?i(s):e(new AxiosError("Request failed with status code "+s.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function parseProtocol(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function speedometer(i,e){i=i||10;const s=new Array(i),a=new Array(i);let o=0,c=0,d;return e=e!==void 0?e:1e3,function(b){const tt=Date.now(),nt=a[c];d||(d=tt),s[o]=b,a[o]=tt;let ft=c,yt=0;for(;ft!==o;)yt+=s[ft++],ft=ft%i;if(o=(o+1)%i,o===c&&(c=(c+1)%i),tt-d<e)return;const Tt=nt&&tt-nt;return Tt?Math.round(yt*1e3/Tt):void 0}}function throttle$1(i,e){let s=0;const a=1e3/e;let o=null;return function(){const d=this===!0,h=Date.now();if(d||h-s>a)return o&&(clearTimeout(o),o=null),s=h,i.apply(null,arguments);o||(o=setTimeout(()=>(o=null,s=Date.now(),i.apply(null,arguments)),a-(h-s)))}}const progressEventReducer=(i,e,s=3)=>{let a=0;const o=speedometer(50,250);return throttle$1(c=>{const d=c.loaded,h=c.lengthComputable?c.total:void 0,b=d-a,tt=o(b),nt=d<=h;a=d;const ft={loaded:d,total:h,progress:h?d/h:void 0,bytes:b,rate:tt||void 0,estimated:tt&&h&&nt?(h-d)/tt:void 0,event:c,lengthComputable:h!=null};ft[e?"download":"upload"]=!0,i(ft)},s)},isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");let a;function o(c){let d=c;return e&&(s.setAttribute("href",d),d=s.href),s.setAttribute("href",d),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return a=o(window.location.href),function(d){const h=utils$2.isString(d)?o(d):d;return h.protocol===a.protocol&&h.host===a.host}}():function(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(i,e,s,a,o,c){const d=[i+"="+encodeURIComponent(e)];utils$2.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),utils$2.isString(a)&&d.push("path="+a),utils$2.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function combineURLs(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function buildFullPath(i,e){return i&&!isAbsoluteURL(e)?combineURLs(i,e):e}const headersToObject=i=>i instanceof AxiosHeaders?{...i}:i;function mergeConfig(i,e){e=e||{};const s={};function a(tt,nt,ft){return utils$2.isPlainObject(tt)&&utils$2.isPlainObject(nt)?utils$2.merge.call({caseless:ft},tt,nt):utils$2.isPlainObject(nt)?utils$2.merge({},nt):utils$2.isArray(nt)?nt.slice():nt}function o(tt,nt,ft){if(utils$2.isUndefined(nt)){if(!utils$2.isUndefined(tt))return a(void 0,tt,ft)}else return a(tt,nt,ft)}function c(tt,nt){if(!utils$2.isUndefined(nt))return a(void 0,nt)}function d(tt,nt){if(utils$2.isUndefined(nt)){if(!utils$2.isUndefined(tt))return a(void 0,tt)}else return a(void 0,nt)}function h(tt,nt,ft){if(ft in e)return a(tt,nt);if(ft in i)return a(void 0,tt)}const b={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(tt,nt)=>o(headersToObject(tt),headersToObject(nt),!0)};return utils$2.forEach(Object.keys(Object.assign({},i,e)),function(nt){const ft=b[nt]||o,yt=ft(i[nt],e[nt],nt);utils$2.isUndefined(yt)&&ft!==h||(s[nt]=yt)}),s}const resolveConfig=i=>{const e=mergeConfig({},i);let{data:s,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:c,headers:d,auth:h}=e;e.headers=d=AxiosHeaders.from(d),e.url=buildURL(buildFullPath(e.baseURL,e.url),i.params,i.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let b;if(utils$2.isFormData(s)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((b=d.getContentType())!==!1){const[tt,...nt]=b?b.split(";").map(ft=>ft.trim()).filter(Boolean):[];d.setContentType([tt||"multipart/form-data",...nt].join("; "))}}if(platform.hasStandardBrowserEnv&&(a&&utils$2.isFunction(a)&&(a=a(e)),a||a!==!1&&isURLSameOrigin(e.url))){const tt=o&&c&&cookies.read(c);tt&&d.set(o,tt)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(i){return new Promise(function(s,a){const o=resolveConfig(i);let c=o.data;const d=AxiosHeaders.from(o.headers).normalize();let{responseType:h}=o,b;function tt(){o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let nt=new XMLHttpRequest;nt.open(o.method.toUpperCase(),o.url,!0),nt.timeout=o.timeout;function ft(){if(!nt)return;const Tt=AxiosHeaders.from("getAllResponseHeaders"in nt&&nt.getAllResponseHeaders()),St={data:!h||h==="text"||h==="json"?nt.responseText:nt.response,status:nt.status,statusText:nt.statusText,headers:Tt,config:i,request:nt};settle(function(Et){s(Et),tt()},function(Et){a(Et),tt()},St),nt=null}"onloadend"in nt?nt.onloadend=ft:nt.onreadystatechange=function(){!nt||nt.readyState!==4||nt.status===0&&!(nt.responseURL&&nt.responseURL.indexOf("file:")===0)||setTimeout(ft)},nt.onabort=function(){nt&&(a(new AxiosError("Request aborted",AxiosError.ECONNABORTED,o,nt)),nt=null)},nt.onerror=function(){a(new AxiosError("Network Error",AxiosError.ERR_NETWORK,o,nt)),nt=null},nt.ontimeout=function(){let gt=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const St=o.transitional||transitionalDefaults;o.timeoutErrorMessage&&(gt=o.timeoutErrorMessage),a(new AxiosError(gt,St.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,o,nt)),nt=null},c===void 0&&d.setContentType(null),"setRequestHeader"in nt&&utils$2.forEach(d.toJSON(),function(gt,St){nt.setRequestHeader(St,gt)}),utils$2.isUndefined(o.withCredentials)||(nt.withCredentials=!!o.withCredentials),h&&h!=="json"&&(nt.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&nt.addEventListener("progress",progressEventReducer(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&nt.upload&&nt.upload.addEventListener("progress",progressEventReducer(o.onUploadProgress)),(o.cancelToken||o.signal)&&(b=Tt=>{nt&&(a(!Tt||Tt.type?new CanceledError(null,i,nt):Tt),nt.abort(),nt=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const yt=parseProtocol(o.url);if(yt&&platform.protocols.indexOf(yt)===-1){a(new AxiosError("Unsupported protocol "+yt+":",AxiosError.ERR_BAD_REQUEST,i));return}nt.send(c||null)})},composeSignals=(i,e)=>{let s=new AbortController,a;const o=function(b){if(!a){a=!0,d();const tt=b instanceof Error?b:this.reason;s.abort(tt instanceof AxiosError?tt:new CanceledError(tt instanceof Error?tt.message:tt))}};let c=e&&setTimeout(()=>{o(new AxiosError(`timeout ${e} of ms exceeded`,AxiosError.ETIMEDOUT))},e);const d=()=>{i&&(c&&clearTimeout(c),c=null,i.forEach(b=>{b&&(b.removeEventListener?b.removeEventListener("abort",o):b.unsubscribe(o))}),i=null)};i.forEach(b=>b&&b.addEventListener&&b.addEventListener("abort",o));const{signal:h}=s;return h.unsubscribe=d,[h,()=>{c&&clearTimeout(c),c=null}]},streamChunk=function*(i,e){let s=i.byteLength;if(!e||s<e){yield i;return}let a=0,o;for(;a<s;)o=a+e,yield i.slice(a,o),a=o},readBytes=async function*(i,e,s){for await(const a of i)yield*streamChunk(ArrayBuffer.isView(a)?a:await s(String(a)),e)},trackStream=(i,e,s,a,o)=>{const c=readBytes(i,e,o);let d=0;return new ReadableStream({type:"bytes",async pull(h){const{done:b,value:tt}=await c.next();if(b){h.close(),a();return}let nt=tt.byteLength;s&&s(d+=nt),h.enqueue(new Uint8Array(tt))},cancel(h){return a(h),c.return()}},{highWaterMark:2})},fetchProgressDecorator=(i,e)=>{const s=i!=null;return a=>setTimeout(()=>e({lengthComputable:s,total:i,loaded:a}))},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),supportsRequestStream=isReadableStreamSupported&&(()=>{let i=!1;const e=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e})(),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&!!(()=>{try{return utils$2.isReadableStream(new Response("").body)}catch{}})(),resolvers={stream:supportsResponseStream&&(i=>i.body)};isFetchSupported&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$2.isFunction(i[e])?s=>s[e]():(s,a)=>{throw new AxiosError(`Response type '${e}' is not supported`,AxiosError.ERR_NOT_SUPPORT,a)})})})(new Response);const getBodyLength=async i=>{if(i==null)return 0;if(utils$2.isBlob(i))return i.size;if(utils$2.isSpecCompliantForm(i))return(await new Request(i).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(i))return i.byteLength;if(utils$2.isURLSearchParams(i)&&(i=i+""),utils$2.isString(i))return(await encodeText(i)).byteLength},resolveBodyLength=async(i,e)=>{const s=utils$2.toFiniteNumber(i.getContentLength());return s??getBodyLength(e)},fetchAdapter=isFetchSupported&&(async i=>{let{url:e,method:s,data:a,signal:o,cancelToken:c,timeout:d,onDownloadProgress:h,onUploadProgress:b,responseType:tt,headers:nt,withCredentials:ft="same-origin",fetchOptions:yt}=resolveConfig(i);tt=tt?(tt+"").toLowerCase():"text";let[Tt,gt]=o||c||d?composeSignals([o,c],d):[],St,wt;const Et=()=>{!St&&setTimeout(()=>{Tt&&Tt.unsubscribe()}),St=!0};let vt;try{if(b&&supportsRequestStream&&s!=="get"&&s!=="head"&&(vt=await resolveBodyLength(nt,a))!==0){let It=new Request(e,{method:"POST",body:a,duplex:"half"}),Rt;utils$2.isFormData(a)&&(Rt=It.headers.get("content-type"))&&nt.setContentType(Rt),It.body&&(a=trackStream(It.body,DEFAULT_CHUNK_SIZE,fetchProgressDecorator(vt,progressEventReducer(b)),null,encodeText))}utils$2.isString(ft)||(ft=ft?"cors":"omit"),wt=new Request(e,{...yt,signal:Tt,method:s.toUpperCase(),headers:nt.normalize().toJSON(),body:a,duplex:"half",withCredentials:ft});let xt=await fetch(wt);const At=supportsResponseStream&&(tt==="stream"||tt==="response");if(supportsResponseStream&&(h||At)){const It={};["status","statusText","headers"].forEach(Lt=>{It[Lt]=xt[Lt]});const Rt=utils$2.toFiniteNumber(xt.headers.get("content-length"));xt=new Response(trackStream(xt.body,DEFAULT_CHUNK_SIZE,h&&fetchProgressDecorator(Rt,progressEventReducer(h,!0)),At&&Et,encodeText),It)}tt=tt||"text";let kt=await resolvers[utils$2.findKey(resolvers,tt)||"text"](xt,i);return!At&&Et(),gt&&gt(),await new Promise((It,Rt)=>{settle(It,Rt,{data:kt,headers:AxiosHeaders.from(xt.headers),status:xt.status,statusText:xt.statusText,config:i,request:wt})})}catch(xt){throw Et(),xt&&xt.name==="TypeError"&&/fetch/i.test(xt.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,i,wt),{cause:xt.cause||xt}):AxiosError.from(xt,xt&&xt.code,i,wt)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const renderReason=i=>`- ${i}`,isResolvedHandle=i=>utils$2.isFunction(i)||i===null||i===!1,adapters={getAdapter:i=>{i=utils$2.isArray(i)?i:[i];const{length:e}=i;let s,a;const o={};for(let c=0;c<e;c++){s=i[c];let d;if(a=s,!isResolvedHandle(s)&&(a=knownAdapters[(d=String(s)).toLowerCase()],a===void 0))throw new AxiosError(`Unknown adapter '${d}'`);if(a)break;o[d||"#"+c]=a}if(!a){const c=Object.entries(o).map(([h,b])=>`adapter ${h} `+(b===!1?"is not supported by the environment":"is not available in the build"));let d=e?c.length>1?`since :
`+c.map(renderReason).join(`
`):" "+renderReason(c[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new CanceledError(null,i)}function dispatchRequest(i){return throwIfCancellationRequested(i),i.headers=AxiosHeaders.from(i.headers),i.data=transformData.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(i.adapter||defaults$1.adapter)(i).then(function(a){return throwIfCancellationRequested(i),a.data=transformData.call(i,i.transformResponse,a),a.headers=AxiosHeaders.from(a.headers),a},function(a){return isCancel(a)||(throwIfCancellationRequested(i),a&&a.response&&(a.response.data=transformData.call(i,i.transformResponse,a.response),a.response.headers=AxiosHeaders.from(a.response.headers))),Promise.reject(a)})}const VERSION="1.7.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{validators$1[i]=function(a){return typeof a===i||"a"+(e<1?"n ":" ")+i}});const deprecatedWarnings={};validators$1.transitional=function(e,s,a){function o(c,d){return"[Axios v"+VERSION+"] Transitional option '"+c+"'"+d+(a?". "+a:"")}return(c,d,h)=>{if(e===!1)throw new AxiosError(o(d," has been removed"+(s?" in "+s:"")),AxiosError.ERR_DEPRECATED);return s&&!deprecatedWarnings[d]&&(deprecatedWarnings[d]=!0,console.warn(o(d," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(c,d,h):!0}};function assertOptions(i,e,s){if(typeof i!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(i);let o=a.length;for(;o-- >0;){const c=a[o],d=e[c];if(d){const h=i[c],b=h===void 0||d(h,c,i);if(b!==!0)throw new AxiosError("option "+c+" must be "+b,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new AxiosError("Unknown option "+c,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,s){try{return await this._request(e,s)}catch(a){if(a instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const c=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?c&&!String(a.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+c):a.stack=c}catch{}}throw a}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=mergeConfig(this.defaults,s);const{transitional:a,paramsSerializer:o,headers:c}=s;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils$2.isFunction(o)?s.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),s.method=(s.method||this.defaults.method||"get").toLowerCase();let d=c&&utils$2.merge(c.common,c[s.method]);c&&utils$2.forEach(["delete","get","head","post","put","patch","common"],gt=>{delete c[gt]}),s.headers=AxiosHeaders.concat(d,c);const h=[];let b=!0;this.interceptors.request.forEach(function(St){typeof St.runWhen=="function"&&St.runWhen(s)===!1||(b=b&&St.synchronous,h.unshift(St.fulfilled,St.rejected))});const tt=[];this.interceptors.response.forEach(function(St){tt.push(St.fulfilled,St.rejected)});let nt,ft=0,yt;if(!b){const gt=[dispatchRequest.bind(this),void 0];for(gt.unshift.apply(gt,h),gt.push.apply(gt,tt),yt=gt.length,nt=Promise.resolve(s);ft<yt;)nt=nt.then(gt[ft++],gt[ft++]);return nt}yt=h.length;let Tt=s;for(ft=0;ft<yt;){const gt=h[ft++],St=h[ft++];try{Tt=gt(Tt)}catch(wt){St.call(this,wt);break}}try{nt=dispatchRequest.call(this,Tt)}catch(gt){return Promise.reject(gt)}for(ft=0,yt=tt.length;ft<yt;)nt=nt.then(tt[ft++],tt[ft++]);return nt}getUri(e){e=mergeConfig(this.defaults,e);const s=buildFullPath(e.baseURL,e.url);return buildURL(s,e.params,e.paramsSerializer)}}utils$2.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(s,a){return this.request(mergeConfig(a||{},{method:e,url:s,data:(a||{}).data}))}});utils$2.forEach(["post","put","patch"],function(e){function s(a){return function(c,d,h){return this.request(mergeConfig(h||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}Axios.prototype[e]=s(),Axios.prototype[e+"Form"]=s(!0)});class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(c){s=c});const a=this;this.promise.then(o=>{if(!a._listeners)return;let c=a._listeners.length;for(;c-- >0;)a._listeners[c](o);a._listeners=null}),this.promise.then=o=>{let c;const d=new Promise(h=>{a.subscribe(h),c=h}).then(o);return d.cancel=function(){a.unsubscribe(c)},d},e(function(c,d,h){a.reason||(a.reason=new CanceledError(c,d,h),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}static source(){let e;return{token:new CancelToken(function(o){e=o}),cancel:e}}}function spread(i){return function(s){return i.apply(null,s)}}function isAxiosError(i){return utils$2.isObject(i)&&i.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([i,e])=>{HttpStatusCode[e]=i});function createInstance(i){const e=new Axios(i),s=bind(Axios.prototype.request,e);return utils$2.extend(s,Axios.prototype,e,{allOwnKeys:!0}),utils$2.extend(s,e,null,{allOwnKeys:!0}),s.create=function(o){return createInstance(mergeConfig(i,o))},s}const axios=createInstance(defaults$1);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=i=>formDataToJSON(utils$2.isHTMLForm(i)?new FormData(i):i);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const load_animation="/assets/loading-hyTDEExQ.gif";function PayAsYouLike(){const[userInfo,setUserInfo]=reactExports.useState({name:"",email:"",currency:"INR",amount:""}),[totalContributions,setTotalContributions]=reactExports.useState(1),[contriInrUsd,setContriInrUsd]=reactExports.useState("₹1 / $1"),[totalBudget,setTotalBudget]=reactExports.useState("₹2,10,00,000 / $1"),[razorpayKey,setRazorpayKey]=reactExports.useState(""),[usdToInr,setUsdToInr]=reactExports.useState(1),[contriFillWidth,setContriFillWidth]=reactExports.useState(0),[paid,setPaid]=reactExports.useState(!1),[showSolver,setShowSolver]=reactExports.useState(!1),[arithmeticProblem,setArithmeticProblem]=reactExports.useState(""),[userAnswer,setUserAnswer]=reactExports.useState(""),[correctAnswer,setCorrectAnswer]=reactExports.useState(null),[wrongAnswer,setWrongAnswer]=reactExports.useState(!1),[loading,setLoading]=reactExports.useState(!1),[userExists,setUserExists]=reactExports.useState(!1),[emailExists,setEmailExists]=reactExports.useState(!0);reactExports.useState(!1);const updatedUserInfoRef=reactExports.useRef(null);let updatedUserInfo={},newTotal=1;const formatINR=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}),formatUSD=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});function generateArithmeticProblem(){const num1=Math.floor(Math.random()*10)+1,num2=Math.floor(Math.random()*10)+1,operation=["+","-","*"][Math.floor(Math.random()*3)],problem=`${num1} ${operation} ${num2}`;setArithmeticProblem(problem),setCorrectAnswer(eval(problem))}function handleAnswerChange(i){setUserAnswer(i.target.value)}function checkAnswer(){parseInt(userAnswer)===correctAnswer?(console.log("UpdatedUserInfo right before sendMail:",updatedUserInfo),setLoading(!0),sendMail()):setWrongAnswer(!0)}function sendMail(){console.log("Inside PayAsYouLike -> sendMail for form:",updatedUserInfoRef.current),fetch("https://api.fairyfolkthefilm.com/email",{method:"POST",body:JSON.stringify(updatedUserInfoRef.current),headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{console.log(i.message),setUserInfo({name:"",email:"",amount:""}),setUserAnswer(""),setLoading(!1),setShowSolver(!1),setPaid(!0),setTimeout(()=>{setPaid(!1)},4e3),setUserExists(!1)}).catch(i=>console.log("Error:",i.message))}reactExports.useEffect(()=>{axios.get("https://api.fairyfolkthefilm.com/razorpay/key").then(i=>{setRazorpayKey(i.data.key)}).catch(i=>{console.error("Error fetching Razorpay key:",i)}),fetch("https://api.fairyfolkthefilm.com/contribution").then(i=>i.ok?i.json():i.json().then(e=>{throw new Error(e.message)})).then(i=>{setTotalContributions(i)}).catch(i=>{console.error(i.message)})},[]),reactExports.useEffect(()=>{fetch("https://api.fairyfolkthefilm.com/conversionrate").then(i=>i.ok?i.json():i.json().then(e=>{throw new Error(e.result)})).then(i=>{setUsdToInr(i.conversion_rates.INR);const e=formatINR.format(totalContributions),s=formatUSD.format(totalContributions/i.conversion_rates.INR),a=formatUSD.format(21e6/i.conversion_rates.INR);setContriInrUsd(`${e} / ${s}`),setTotalBudget(`₹2,01,24,526 / ${a}`),setContriFillWidth(totalContributions/20124526*100)}).catch(i=>{console.error(i.result)})},[totalContributions]);function handleChange(i){const{name:e,value:s}=i.target;setUserInfo(a=>({...a,[e]:s})),e==="amount"&&s.trim().length>0?setUserExists(!0):setUserExists(!1)}function storeContributionTotal(i){console.log(i),fetch("https://api.fairyfolkthefilm.com/contribution",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newTotal:i})}).then(e=>e.ok?e.json():e.json().then(s=>{throw new Error(s.message)})).then(e=>{console.log("Success:",e)}).catch(e=>{console.log(e)})}function passwordCreation(){fetch("https://api.fairyfolkthefilm.com/passwords/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(userInfo)}).then(i=>i.ok?i.json():i.json().then(e=>{throw new Error(e.message||"Could not reach the server!")})).then(i=>{updatedUserInfoRef.current=i,console.log("We are inside /passwords/create and updatedUserInfo is:",updatedUserInfoRef.current),setShowSolver(!0),generateArithmeticProblem()}).catch(i=>{console.log(i)})}async function handlePayment(){console.log("Inside handlePayment!");const i="https://api.fairyfolkthefilm.com/razorpay/create-order",{amount:e,currency:s}=userInfo;try{const a=await axios.post(i,{amount:e*100,currency:s}),o={key:razorpayKey,amount:a.data.amount,currency:a.data.currency,name:"Empatheia Films",description:"Test Transaction",image:"",order_id:a.data.id,handler:async function(d){if((await axios.post("https://api.fairyfolkthefilm.com/razorpay/verify-payment",{razorpay_order_id:d.razorpay_order_id,razorpay_payment_id:d.razorpay_payment_id,razorpay_signature:d.razorpay_signature})).data.status==="success"){if(passwordCreation(),s==="USD"){const tt=e*usdToInr;newTotal=totalContributions+parseInt(tt)}else newTotal=totalContributions+parseInt(e);setTotalContributions(newTotal),storeContributionTotal(newTotal),await axios.post("https://api.fairyfolkthefilm.com/razorpay/payment-details",{userInfo,...o,razorpay_payment_id:d.razorpay_payment_id,razorpay_order_id:d.razorpay_order_id,razorpay_signature:d.razorpay_signature})}else alert("Payment Verification Failed!")},prefill:{name:userInfo.name,email:userInfo.email,contact:"9999999999"},notes:{address:"Razorpay Corporate Office"},theme:{color:"#F37254"}};new window.Razorpay(o).open()}catch(a){console.error("Error creating Razorpay order:",a)}}function handleSubmit(i){i.preventDefault(),userInfo.email===""?(setEmailExists(!1),setUserInfo(e=>({...e,amount:""})),setUserExists(!1),setTimeout(()=>{setEmailExists(!0)},2e3)):userInfo.amount>0?(console.log("Inside userInfo.amount > 0!!"),handlePayment()):userInfo.amount>-1&&passwordCreation()}return jsxRuntimeExports.jsxs("div",{className:"payasyoulike-container",style:{position:paid?"relative":"static"},children:[showSolver&&jsxRuntimeExports.jsx("div",{className:"solver-overlay",children:loading?jsxRuntimeExports.jsx("img",{className:"loading-animation",src:load_animation}):jsxRuntimeExports.jsxs("div",{className:`solver ${showSolver?"solver-show":""}`,children:[jsxRuntimeExports.jsx("h1",{children:jsxRuntimeExports.jsxs("b",{children:[arithmeticProblem," =  "]})}),jsxRuntimeExports.jsx("input",{className:"input-solver",type:"text",value:userAnswer,onChange:handleAnswerChange,onClick:()=>setWrongAnswer(!1)}),jsxRuntimeExports.jsx("br",{}),wrongAnswer&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Wrong answer. Try again.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("button",{className:"solver-button oswald",onClick:checkAnswer,children:"SUBMIT"}),jsxRuntimeExports.jsx("button",{className:"solver-button-cancel oswald",onClick:()=>{setShowSolver(!1),setUserAnswer(""),setWrongAnswer(!1)},children:"CANCEL"})]})}),jsxRuntimeExports.jsx("div",{className:`msg-paid-notice ${paid?"msg-paid-notice-show":""}`,onClick:()=>setPaid(!1),children:jsxRuntimeExports.jsxs("h1",{children:[userInfo.amount>0&&"THANK YOU!<br />","You'll find your password in your email."]})}),jsxRuntimeExports.jsx("div",{className:`email-notice ${emailExists?"":"email-notice-show"}`,onClick:()=>setEmailExists(!0),children:jsxRuntimeExports.jsx("h1",{children:"Enter a valid email address."})}),jsxRuntimeExports.jsxs("div",{className:"payasyoulike",style:{filter:paid||!emailExists?"blur(3px)":"",transition:"filter 1s ease"},children:[jsxRuntimeExports.jsxs("div",{className:"all-page-headings",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin ",children:"PAY-AS-"})," ",jsxRuntimeExports.jsx("h1",{className:"heading-thick you-like-text",children:"YOU-LIKE"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-payasyoulike"})]}),jsxRuntimeExports.jsx("p",{className:"main-text",children:"As fun as our film 'Fairy Folk' was to make, the challenges we faced as a truly independent production ranged from testing to downright crippling. But we somehow made it through, only to confront the beast of all beasts - distribution. While we managed a limited theatrical release in March 2024, the film unfortunately had to be pulled from cinemas just as word of mouth was gaining momentum. Additionally (and more importantly), as of 2024, digital platforms aren’t considering independent films like ours any more. It’s not just tough getting their attention; it's impossible. So, here we are - on our own little website, distributing our film at any price YOU feel is right."}),jsxRuntimeExports.jsx("p",{className:"thanks",children:"Thank you for considering supporting our little film; it means the world to us!"}),jsxRuntimeExports.jsx("hr",{className:"division-description"}),jsxRuntimeExports.jsxs("p",{className:"password-instructions instruction-box",children:["1. Fill in the details below. ",jsxRuntimeExports.jsx("br",{}),"2. Receive a PASSWORD in your email. ",jsxRuntimeExports.jsx("br",{}),"3. Copy and use it here for 48 hours."]}),jsxRuntimeExports.jsxs("form",{className:"payasyoulike-form",onSubmit:handleSubmit,children:[jsxRuntimeExports.jsxs("div",{className:"user-details",children:[jsxRuntimeExports.jsxs("div",{className:"name-email-amount",children:[jsxRuntimeExports.jsx("p",{className:"name-text",children:"Name "}),jsxRuntimeExports.jsx("p",{className:"optional-text",children:"(optional)"}),jsxRuntimeExports.jsx("p",{className:"email-text",children:" Email "}),jsxRuntimeExports.jsx("p",{className:"amount-text",children:"Amount "})]}),jsxRuntimeExports.jsxs("div",{className:"inputs",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:userInfo.name,onChange:handleChange,className:"input-name input-format"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:userInfo.email,onChange:handleChange,className:"input-email input-format"}),jsxRuntimeExports.jsx("input",{type:"number",name:"amount",value:userInfo.amount,onChange:handleChange,className:"input-amount input-format"}),jsxRuntimeExports.jsx("p",{className:"contribution-zero",children:"(you can enter '0' if you don't feel like contributing at this stage)"})]}),jsxRuntimeExports.jsxs("select",{className:"currency-selector",name:"currency",value:userInfo.currency,onChange:handleChange,children:[jsxRuntimeExports.jsx("option",{value:"INR",children:"INR"}),jsxRuntimeExports.jsx("option",{value:"USD",children:"USD"}),jsxRuntimeExports.jsx("option",{value:"EUR",children:"EUR"}),jsxRuntimeExports.jsx("option",{value:"JPY",children:"JPY"}),jsxRuntimeExports.jsx("option",{value:"GBP",children:"GBP"}),jsxRuntimeExports.jsx("option",{value:"AUD",children:"AUD"}),jsxRuntimeExports.jsx("option",{value:"CAD",children:"CAD"}),jsxRuntimeExports.jsx("option",{value:"CHF",children:"CHF"}),jsxRuntimeExports.jsx("option",{value:"CNH",children:"CNH"}),jsxRuntimeExports.jsx("option",{value:"HKD",children:"HKD"}),jsxRuntimeExports.jsx("option",{value:"NZD",children:"NZD"})]})]}),jsxRuntimeExports.jsx("div",{className:"payasyoulike-button",children:jsxRuntimeExports.jsxs("button",{className:`oswald get-password-button ${userExists?"get-password-button-show get-password-button-active":""}`,disabled:!userExists,children:["GET PASSWORD"," "]})})]}),jsxRuntimeExports.jsxs("div",{className:"contribution-section",children:[jsxRuntimeExports.jsxs("div",{className:"budget-box",children:[jsxRuntimeExports.jsx("p",{className:"budget-text",children:"budget: "}),jsxRuntimeExports.jsx("p",{className:"budget-num",children:totalBudget})]}),jsxRuntimeExports.jsxs("div",{className:"contribution-chart",children:[jsxRuntimeExports.jsx("div",{className:"contribution-fill",style:{width:`${contriFillWidth}%`}}),jsxRuntimeExports.jsx("hr",{className:"budget-marker"}),jsxRuntimeExports.jsx("div",{className:"tube-curve-top"}),jsxRuntimeExports.jsx("div",{className:"tube-curve-bottom"}),jsxRuntimeExports.jsx("div",{className:"contri-cyl"})]}),jsxRuntimeExports.jsxs("div",{className:"contri-box",children:[jsxRuntimeExports.jsx("p",{className:"contri-text",children:"contributions: "}),jsxRuntimeExports.jsx("p",{className:"contri-num",children:contriInrUsd})]})]})]})]})}const cast="/assets/Cast-Cz2GuVwn.png";var __assign=function(){return __assign=Object.assign||function(e){for(var s,a=1,o=arguments.length;a<o;a++){s=arguments[a];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},__assign.apply(this,arguments)};function __spreadArray(i,e,s){if(s||arguments.length===2)for(var a=0,o=e.length,c;a<o;a++)(c||!(a in e))&&(c||(c=Array.prototype.slice.call(e,0,a)),c[a]=e[a]);return i.concat(c||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from$1=String.fromCharCode,assign$1=Object.assign;function hash(i,e){return charat(i,0)^45?(((e<<2^charat(i,0))<<2^charat(i,1))<<2^charat(i,2))<<2^charat(i,3):0}function trim(i){return i.trim()}function match(i,e){return(i=e.exec(i))?i[0]:i}function replace(i,e,s){return i.replace(e,s)}function indexof(i,e,s){return i.indexOf(e,s)}function charat(i,e){return i.charCodeAt(e)|0}function substr(i,e,s){return i.slice(e,s)}function strlen(i){return i.length}function sizeof(i){return i.length}function append(i,e){return e.push(i),i}function combine(i,e){return i.map(e).join("")}function filter(i,e){return i.filter(function(s){return!match(s,e)})}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(i,e,s,a,o,c,d,h){return{value:i,root:e,parent:s,type:a,props:o,children:c,line,column,length:d,return:"",siblings:h}}function copy$1(i,e){return assign$1(node("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},e)}function lift(i){for(;i.root;)i=copy$1(i.root,{children:[i]});append(i,i.siblings)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(i,e){return substr(characters,i,e)}function token(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(i){return line=column=1,length=strlen(characters=i),position$1=0,[]}function dealloc(i){return characters="",i}function delimit(i){return trim(slice(position$1-1,delimiter(i===91?i+2:i===40?i+1:i)))}function whitespace(i){for(;(character=peek())&&character<33;)next();return token(i)>2||token(character)>3?"":" "}function escaping(i,e){for(;--e&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(i,caret()+(e<6&&peek()==32&&next()==32))}function delimiter(i){for(;next();)switch(character){case i:return position$1;case 34:case 39:i!==34&&i!==39&&delimiter(character);break;case 40:i===41&&delimiter(i);break;case 92:next();break}return position$1}function commenter(i,e){for(;next()&&i+character!==57;)if(i+character===84&&peek()===47)break;return"/*"+slice(e,position$1-1)+"*"+from$1(i===47?i:next())}function identifier(i){for(;!token(peek());)next();return slice(i,position$1)}function compile(i){return dealloc(parse$2("",null,null,null,[""],i=alloc(i),0,[0],i))}function parse$2(i,e,s,a,o,c,d,h,b){for(var tt=0,nt=0,ft=d,yt=0,Tt=0,gt=0,St=1,wt=1,Et=1,vt=0,xt="",At=o,kt=c,It=a,Rt=xt;wt;)switch(gt=vt,vt=next()){case 40:if(gt!=108&&charat(Rt,ft-1)==58){indexof(Rt+=replace(delimit(vt),"&","&\f"),"&\f",abs(tt?h[tt-1]:0))!=-1&&(Et=-1);break}case 34:case 39:case 91:Rt+=delimit(vt);break;case 9:case 10:case 13:case 32:Rt+=whitespace(gt);break;case 92:Rt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),e,s,b),b);break;default:Rt+="/"}break;case 123*St:h[tt++]=strlen(Rt)*Et;case 125*St:case 59:case 0:switch(vt){case 0:case 125:wt=0;case 59+nt:Et==-1&&(Rt=replace(Rt,/\f/g,"")),Tt>0&&strlen(Rt)-ft&&append(Tt>32?declaration(Rt+";",a,s,ft-1,b):declaration(replace(Rt," ","")+";",a,s,ft-2,b),b);break;case 59:Rt+=";";default:if(append(It=ruleset(Rt,e,s,tt,nt,o,h,xt,At=[],kt=[],ft,c),c),vt===123)if(nt===0)parse$2(Rt,e,It,It,At,c,ft,h,kt);else switch(yt===99&&charat(Rt,3)===110?100:yt){case 100:case 108:case 109:case 115:parse$2(i,It,It,a&&append(ruleset(i,It,It,0,0,o,h,xt,o,At=[],ft,kt),kt),o,kt,ft,h,a?At:kt);break;default:parse$2(Rt,It,It,It,[""],kt,0,h,kt)}}tt=nt=Tt=0,St=Et=1,xt=Rt="",ft=d;break;case 58:ft=1+strlen(Rt),Tt=gt;default:if(St<1){if(vt==123)--St;else if(vt==125&&St++==0&&prev()==125)continue}switch(Rt+=from$1(vt),vt*St){case 38:Et=nt>0?1:(Rt+="\f",-1);break;case 44:h[tt++]=(strlen(Rt)-1)*Et,Et=1;break;case 64:peek()===45&&(Rt+=delimit(next())),yt=peek(),nt=ft=strlen(xt=Rt+=identifier(caret())),vt++;break;case 45:gt===45&&strlen(Rt)==2&&(St=0)}}return c}function ruleset(i,e,s,a,o,c,d,h,b,tt,nt,ft){for(var yt=o-1,Tt=o===0?c:[""],gt=sizeof(Tt),St=0,wt=0,Et=0;St<a;++St)for(var vt=0,xt=substr(i,yt+1,yt=abs(wt=d[St])),At=i;vt<gt;++vt)(At=trim(wt>0?Tt[vt]+" "+xt:replace(xt,/&\f/g,Tt[vt])))&&(b[Et++]=At);return node(i,e,s,o===0?RULESET:h,b,tt,nt,ft)}function comment(i,e,s,a){return node(i,e,s,COMMENT,from$1(char()),substr(i,2,-2),0,a)}function declaration(i,e,s,a,o){return node(i,e,s,DECLARATION,substr(i,0,a),substr(i,a+1,-1),a,o)}function prefix(i,e,s){switch(hash(i,e)){case 5103:return WEBKIT+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+i+i;case 4789:return MOZ+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+i+MOZ+i+MS+i+i;case 5936:switch(charat(i,e+11)){case 114:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return WEBKIT+i+MS+i+i;case 6165:return WEBKIT+i+MS+"flex-"+i+i;case 5187:return WEBKIT+i+replace(i,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+i;case 5443:return WEBKIT+i+MS+"flex-item-"+replace(i,/flex-|-self/g,"")+(match(i,/flex-|baseline/)?"":MS+"grid-row-"+replace(i,/flex-|-self/g,""))+i;case 4675:return WEBKIT+i+MS+"flex-line-pack"+replace(i,/align-content|flex-|-self/g,"")+i;case 5548:return WEBKIT+i+MS+replace(i,"shrink","negative")+i;case 5292:return WEBKIT+i+MS+replace(i,"basis","preferred-size")+i;case 6060:return WEBKIT+"box-"+replace(i,"-grow","")+WEBKIT+i+MS+replace(i,"grow","positive")+i;case 4554:return WEBKIT+replace(i,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+i;case 6187:return replace(replace(replace(i,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),i,"")+i;case 5495:case 3959:return replace(i,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(i,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+i+i;case 4200:if(!match(i,/flex-|baseline/))return MS+"grid-column-align"+substr(i,e)+i;break;case 2592:case 3360:return MS+replace(i,"template-","")+i;case 4384:case 3616:return s&&s.some(function(a,o){return e=o,match(a.props,/grid-\w+-end/)})?~indexof(i+(s=s[e].value),"span",0)?i:MS+replace(i,"-start","")+i+MS+"grid-row-span:"+(~indexof(s,"span",0)?match(s,/\d+/):+match(s,/\d+/)-+match(i,/\d+/))+";":MS+replace(i,"-start","")+i;case 4896:case 4128:return s&&s.some(function(a){return match(a.props,/grid-\w+-start/)})?i:MS+replace(replace(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return replace(i,/(.+)-inline(.+)/,WEBKIT+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(i)-1-e>6)switch(charat(i,e+1)){case 109:if(charat(i,e+4)!==45)break;case 102:return replace(i,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~indexof(i,"stretch",0)?prefix(replace(i,"stretch","fill-available"),e,s)+i:i}break;case 5152:case 5920:return replace(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,o,c,d,h,b,tt){return MS+o+":"+c+tt+(d?MS+o+"-span:"+(h?b:+b-+c)+tt:"")+i});case 4949:if(charat(i,e+6)===121)return replace(i,":",":"+WEBKIT)+i;break;case 6444:switch(charat(i,charat(i,14)===45?18:11)){case 120:return replace(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(i,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+i;case 100:return replace(i,":",":"+MS)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(i,"scroll-","scroll-snap-")+i}return i}function serialize(i,e){for(var s="",a=0;a<i.length;a++)s+=e(i[a],a,i,e)||"";return s}function stringify(i,e,s,a){switch(i.type){case LAYER:if(i.children.length)break;case IMPORT:case DECLARATION:return i.return=i.return||i.value;case COMMENT:return"";case KEYFRAMES:return i.return=i.value+"{"+serialize(i.children,a)+"}";case RULESET:if(!strlen(i.value=i.props.join(",")))return""}return strlen(s=serialize(i.children,a))?i.return=i.value+"{"+s+"}":""}function middleware(i){var e=sizeof(i);return function(s,a,o,c){for(var d="",h=0;h<e;h++)d+=i[h](s,a,o,c)||"";return d}}function rulesheet(i){return function(e){e.root||(e=e.return)&&i(e)}}function prefixer(i,e,s,a){if(i.length>-1&&!i.return)switch(i.type){case DECLARATION:i.return=prefix(i.value,i.length,s);return;case KEYFRAMES:return serialize([copy$1(i,{value:replace(i.value,"@","@"+WEBKIT)})],a);case RULESET:if(i.length)return combine(s=i.props,function(o){switch(match(o,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy$1(i,{props:[replace(o,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy$1(i,{props:[o]})),assign$1(i,{props:filter(s,a)});break;case"::placeholder":lift(copy$1(i,{props:[replace(o,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy$1(i,{props:[replace(o,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy$1(i,{props:[replace(o,/:(plac\w+)/,MS+"input-$1")]})),lift(copy$1(i,{props:[o]})),assign$1(i,{props:filter(s,a)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m="active",y="data-styled-version",v="6.1.11",g=`/*!sc*/
`,S=typeof window<"u"&&"HTMLElement"in window,w=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_=Object.freeze([]),C=Object.freeze({});function I(i,e,s){return s===void 0&&(s=C),i.theme!==s.theme&&i.theme||e||s.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D=/(^-|-$)/g;function R(i){return i.replace(O,"-").replace(D,"")}var T=/(a)(d)/gi,k=52,j=function(i){return String.fromCharCode(i+(i>25?39:97))};function x(i){var e,s="";for(e=Math.abs(i);e>k;e=e/k|0)s=j(e%k)+s;return(j(e%k)+s).replace(T,"$1-$2")}var V,F=5381,M=function(i,e){for(var s=e.length;s;)i=33*i^e.charCodeAt(--s);return i},$$1=function(i){return M(F,i)};function z(i){return x($$1(i)>>>0)}function B(i){return i.displayName||i.name||"Component"}function L(i){return typeof i=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(i){return("type"in(e=i)&&e.type.$$typeof)===Y?U:"$$typeof"in i?J[i.$$typeof]:q;var e}var Z=Object.defineProperty,K=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(i,e,s){if(typeof e!="string"){if(ne){var a=te(e);a&&a!==ne&&oe(i,a,s)}var o=K(e);Q&&(o=o.concat(Q(e)));for(var c=X(i),d=X(e),h=0;h<o.length;++h){var b=o[h];if(!(b in H||s&&s[b]||d&&b in d||c&&b in c)){var tt=ee(e,b);try{Z(i,b,tt)}catch{}}}}return i}function re(i){return typeof i=="function"}function se(i){return typeof i=="object"&&"styledComponentId"in i}function ie(i,e){return i&&e?"".concat(i," ").concat(e):i||e||""}function ae(i,e){if(i.length===0)return"";for(var s=i[0],a=1;a<i.length;a++)s+=i[a];return s}function ce(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function le(i,e,s){if(s===void 0&&(s=!1),!s&&!ce(i)&&!Array.isArray(i))return e;if(Array.isArray(e))for(var a=0;a<e.length;a++)i[a]=le(i[a],e[a]);else if(ce(e))for(var a in e)i[a]=le(i[a],e[a]);return i}function ue(i,e){Object.defineProperty(i,"toString",{value:e})}function he(i){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var fe=function(){function i(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return i.prototype.indexOfGroup=function(e){for(var s=0,a=0;a<e;a++)s+=this.groupSizes[a];return s},i.prototype.insertRules=function(e,s){if(e>=this.groupSizes.length){for(var a=this.groupSizes,o=a.length,c=o;e>=c;)if((c<<=1)<0)throw he(16,"".concat(e));this.groupSizes=new Uint32Array(c),this.groupSizes.set(a),this.length=c;for(var d=o;d<c;d++)this.groupSizes[d]=0}for(var h=this.indexOfGroup(e+1),b=(d=0,s.length);d<b;d++)this.tag.insertRule(h,s[d])&&(this.groupSizes[e]++,h++)},i.prototype.clearGroup=function(e){if(e<this.length){var s=this.groupSizes[e],a=this.indexOfGroup(e),o=a+s;this.groupSizes[e]=0;for(var c=a;c<o;c++)this.tag.deleteRule(a)}},i.prototype.getGroup=function(e){var s="";if(e>=this.length||this.groupSizes[e]===0)return s;for(var a=this.groupSizes[e],o=this.indexOfGroup(e),c=o+a,d=o;d<c;d++)s+="".concat(this.tag.getRule(d)).concat(g);return s},i}(),ye=new Map,ve=new Map,ge=1,Se=function(i){if(ye.has(i))return ye.get(i);for(;ve.has(ge);)ge++;var e=ge++;return ye.set(i,e),ve.set(e,i),e},we=function(i,e){ge=e+1,ye.set(i,e),ve.set(e,i)},be="style[".concat(f,"][").concat(y,'="').concat(v,'"]'),Ee=new RegExp("^".concat(f,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(i,e,s){for(var a,o=s.split(","),c=0,d=o.length;c<d;c++)(a=o[c])&&i.registerName(e,a)},Pe=function(i,e){for(var s,a=((s=e.textContent)!==null&&s!==void 0?s:"").split(g),o=[],c=0,d=a.length;c<d;c++){var h=a[c].trim();if(h){var b=h.match(Ee);if(b){var tt=0|parseInt(b[1],10),nt=b[2];tt!==0&&(we(nt,tt),Ne(i,nt,b[3]),i.getTag().insertRules(tt,o)),o.length=0}else o.push(h)}}};function _e(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ce=function(i){var e=document.head,s=i||e,a=document.createElement("style"),o=function(h){var b=Array.from(h.querySelectorAll("style[".concat(f,"]")));return b[b.length-1]}(s),c=o!==void 0?o.nextSibling:null;a.setAttribute(f,m),a.setAttribute(y,v);var d=_e();return d&&a.setAttribute("nonce",d),s.insertBefore(a,c),a},Ie=function(){function i(e){this.element=Ce(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(s){if(s.sheet)return s.sheet;for(var a=document.styleSheets,o=0,c=a.length;o<c;o++){var d=a[o];if(d.ownerNode===s)return d}throw he(17)}(this.element),this.length=0}return i.prototype.insertRule=function(e,s){try{return this.sheet.insertRule(s,e),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},i.prototype.getRule=function(e){var s=this.sheet.cssRules[e];return s&&s.cssText?s.cssText:""},i}(),Ae=function(){function i(e){this.element=Ce(e),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(e,s){if(e<=this.length&&e>=0){var a=document.createTextNode(s);return this.element.insertBefore(a,this.nodes[e]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},i.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},i}(),Oe=function(){function i(e){this.rules=[],this.length=0}return i.prototype.insertRule=function(e,s){return e<=this.length&&(this.rules.splice(e,0,s),this.length++,!0)},i.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},i.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},i}(),De=S,Re={isServer:!S,useCSSOMInjection:!w},Te=function(){function i(e,s,a){e===void 0&&(e=C),s===void 0&&(s={});var o=this;this.options=__assign(__assign({},Re),e),this.gs=s,this.names=new Map(a),this.server=!!e.isServer,!this.server&&S&&De&&(De=!1,function(c){for(var d=document.querySelectorAll(be),h=0,b=d.length;h<b;h++){var tt=d[h];tt&&tt.getAttribute(f)!==m&&(Pe(c,tt),tt.parentNode&&tt.parentNode.removeChild(tt))}}(this)),ue(this,function(){return function(c){for(var d=c.getTag(),h=d.length,b="",tt=function(ft){var yt=function(Et){return ve.get(Et)}(ft);if(yt===void 0)return"continue";var Tt=c.names.get(yt),gt=d.getGroup(ft);if(Tt===void 0||gt.length===0)return"continue";var St="".concat(f,".g").concat(ft,'[id="').concat(yt,'"]'),wt="";Tt!==void 0&&Tt.forEach(function(Et){Et.length>0&&(wt+="".concat(Et,","))}),b+="".concat(gt).concat(St,'{content:"').concat(wt,'"}').concat(g)},nt=0;nt<h;nt++)tt(nt);return b}(o)})}return i.registerId=function(e){return Se(e)},i.prototype.reconstructWithOptions=function(e,s){return s===void 0&&(s=!0),new i(__assign(__assign({},this.options),e),this.gs,s&&this.names||void 0)},i.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(e=function(s){var a=s.useCSSOMInjection,o=s.target;return s.isServer?new Oe(o):a?new Ie(o):new Ae(o)}(this.options),new fe(e)));var e},i.prototype.hasNameForId=function(e,s){return this.names.has(e)&&this.names.get(e).has(s)},i.prototype.registerName=function(e,s){if(Se(e),this.names.has(e))this.names.get(e).add(s);else{var a=new Set;a.add(s),this.names.set(e,a)}},i.prototype.insertRules=function(e,s,a){this.registerName(e,s),this.getTag().insertRules(Se(e),a)},i.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},i.prototype.clearRules=function(e){this.getTag().clearGroup(Se(e)),this.clearNames(e)},i.prototype.clearTag=function(){this.tag=void 0},i}(),ke=/&/g,je=/^\s*\/\/.*$/gm;function xe(i,e){return i.map(function(s){return s.type==="rule"&&(s.value="".concat(e," ").concat(s.value),s.value=s.value.replaceAll(",",",".concat(e," ")),s.props=s.props.map(function(a){return"".concat(e," ").concat(a)})),Array.isArray(s.children)&&s.type!=="@keyframes"&&(s.children=xe(s.children,e)),s})}function Ve(i){var e,s,a,o=C,c=o.options,d=c===void 0?C:c,h=o.plugins,b=h===void 0?_:h,tt=function(yt,Tt,gt){return gt.startsWith(s)&&gt.endsWith(s)&&gt.replaceAll(s,"").length>0?".".concat(e):yt},nt=b.slice();nt.push(function(yt){yt.type===RULESET&&yt.value.includes("&")&&(yt.props[0]=yt.props[0].replace(ke,s).replace(a,tt))}),d.prefix&&nt.push(prefixer),nt.push(stringify);var ft=function(yt,Tt,gt,St){Tt===void 0&&(Tt=""),gt===void 0&&(gt=""),St===void 0&&(St="&"),e=St,s=Tt,a=new RegExp("\\".concat(s,"\\b"),"g");var wt=yt.replace(je,""),Et=compile(gt||Tt?"".concat(gt," ").concat(Tt," { ").concat(wt," }"):wt);d.namespace&&(Et=xe(Et,d.namespace));var vt=[];return serialize(Et,middleware(nt.concat(rulesheet(function(xt){return vt.push(xt)})))),vt};return ft.hash=b.length?b.reduce(function(yt,Tt){return Tt.name||he(15),M(yt,Tt.name)},F).toString():"",ft}var Fe=new Te,Me=Ve(),$e=React$1.createContext({shouldForwardProp:void 0,styleSheet:Fe,stylis:Me});$e.Consumer;React$1.createContext(void 0);function Le(){return reactExports.useContext($e)}var Ye=function(){function i(e,s){var a=this;this.inject=function(o,c){c===void 0&&(c=Me);var d=a.name+c.hash;o.hasNameForId(a.id,d)||o.insertRules(a.id,d,c(a.rules,d,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=s,ue(this,function(){throw he(12,String(a.name))})}return i.prototype.getName=function(e){return e===void 0&&(e=Me),this.name+e.hash},i}(),We=function(i){return i>="A"&&i<="Z"};function qe(i){for(var e="",s=0;s<i.length;s++){var a=i[s];if(s===1&&a==="-"&&i[0]==="-")return i;We(a)?e+="-"+a.toLowerCase():e+=a}return e.startsWith("ms-")?"-"+e:e}var He=function(i){return i==null||i===!1||i===""},Ue=function(i){var e,s,a=[];for(var o in i){var c=i[o];i.hasOwnProperty(o)&&!He(c)&&(Array.isArray(c)&&c.isCss||re(c)?a.push("".concat(qe(o),":"),c,";"):ce(c)?a.push.apply(a,__spreadArray(__spreadArray(["".concat(o," {")],Ue(c),!1),["}"],!1)):a.push("".concat(qe(o),": ").concat((e=o,(s=c)==null||typeof s=="boolean"||s===""?"":typeof s!="number"||s===0||e in unitlessKeys||e.startsWith("--")?String(s).trim():"".concat(s,"px")),";")))}return a};function Je(i,e,s,a){if(He(i))return[];if(se(i))return[".".concat(i.styledComponentId)];if(re(i)){if(!re(c=i)||c.prototype&&c.prototype.isReactComponent||!e)return[i];var o=i(e);return Je(o,e,s,a)}var c;return i instanceof Ye?s?(i.inject(s,a),[i.getName(a)]):[i]:ce(i)?Ue(i):Array.isArray(i)?Array.prototype.concat.apply(_,i.map(function(d){return Je(d,e,s,a)})):[i.toString()]}function Xe(i){for(var e=0;e<i.length;e+=1){var s=i[e];if(re(s)&&!se(s))return!1}return!0}var Ze=$$1(v),Ke=function(){function i(e,s,a){this.rules=e,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&Xe(e),this.componentId=s,this.baseHash=M(Ze,s),this.baseStyle=a,Te.registerId(s)}return i.prototype.generateAndInjectStyles=function(e,s,a){var o=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,s,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&s.hasNameForId(this.componentId,this.staticRulesId))o=ie(o,this.staticRulesId);else{var c=ae(Je(this.rules,e,s,a)),d=x(M(this.baseHash,c)>>>0);if(!s.hasNameForId(this.componentId,d)){var h=a(c,".".concat(d),void 0,this.componentId);s.insertRules(this.componentId,d,h)}o=ie(o,d),this.staticRulesId=d}else{for(var b=M(this.baseHash,a.hash),tt="",nt=0;nt<this.rules.length;nt++){var ft=this.rules[nt];if(typeof ft=="string")tt+=ft;else if(ft){var yt=ae(Je(ft,e,s,a));b=M(b,yt+nt),tt+=yt}}if(tt){var Tt=x(b>>>0);s.hasNameForId(this.componentId,Tt)||s.insertRules(this.componentId,Tt,a(tt,".".concat(Tt),void 0,this.componentId)),o=ie(o,Tt)}}return o},i}(),Qe=React$1.createContext(void 0);Qe.Consumer;var ot={};function st(i,e,s){var a=se(i),o=i,c=!L(i),d=e.attrs,h=d===void 0?_:d,b=e.componentId,tt=b===void 0?function(At,kt){var It=typeof At!="string"?"sc":R(At);ot[It]=(ot[It]||0)+1;var Rt="".concat(It,"-").concat(z(v+It+ot[It]));return kt?"".concat(kt,"-").concat(Rt):Rt}(e.displayName,e.parentComponentId):b,nt=e.displayName,ft=nt===void 0?function(At){return L(At)?"styled.".concat(At):"Styled(".concat(B(At),")")}(i):nt,yt=e.displayName&&e.componentId?"".concat(R(e.displayName),"-").concat(e.componentId):e.componentId||tt,Tt=a&&o.attrs?o.attrs.concat(h).filter(Boolean):h,gt=e.shouldForwardProp;if(a&&o.shouldForwardProp){var St=o.shouldForwardProp;if(e.shouldForwardProp){var wt=e.shouldForwardProp;gt=function(At,kt){return St(At,kt)&&wt(At,kt)}}else gt=St}var Et=new Ke(s,yt,a?o.componentStyle:void 0);function vt(At,kt){return function(It,Rt,Lt){var jt=It.attrs,Ft=It.componentStyle,qt=It.defaultProps,Xt=It.foldedComponentIds,Ut=It.styledComponentId,Wt=It.target,an=React$1.useContext(Qe),Kt=Le(),Jt=It.shouldForwardProp||Kt.shouldForwardProp,Mt=I(Rt,an,qt)||C,Ht=function(mn,un,gn){for(var wn,En=__assign(__assign({},un),{className:void 0,theme:gn}),Mn=0;Mn<mn.length;Mn+=1){var Pn=re(wn=mn[Mn])?wn(En):wn;for(var yn in Pn)En[yn]=yn==="className"?ie(En[yn],Pn[yn]):yn==="style"?__assign(__assign({},En[yn]),Pn[yn]):Pn[yn]}return un.className&&(En.className=ie(En.className,un.className)),En}(jt,Rt,Mt),zt=Ht.as||Wt,Yt={};for(var Qt in Ht)Ht[Qt]===void 0||Qt[0]==="$"||Qt==="as"||Qt==="theme"&&Ht.theme===Mt||(Qt==="forwardedAs"?Yt.as=Ht.forwardedAs:Jt&&!Jt(Qt,zt)||(Yt[Qt]=Ht[Qt]));var fn=function(mn,un){var gn=Le(),wn=mn.generateAndInjectStyles(un,gn.styleSheet,gn.stylis);return wn}(Ft,Ht),dn=ie(Xt,Ut);return fn&&(dn+=" "+fn),Ht.className&&(dn+=" "+Ht.className),Yt[L(zt)&&!A.has(zt)?"class":"className"]=dn,Yt.ref=Lt,reactExports.createElement(zt,Yt)}(xt,At,kt)}vt.displayName=ft;var xt=React$1.forwardRef(vt);return xt.attrs=Tt,xt.componentStyle=Et,xt.displayName=ft,xt.shouldForwardProp=gt,xt.foldedComponentIds=a?ie(o.foldedComponentIds,o.styledComponentId):"",xt.styledComponentId=yt,xt.target=a?o.target:i,Object.defineProperty(xt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(At){this._foldedDefaultProps=a?function(kt){for(var It=[],Rt=1;Rt<arguments.length;Rt++)It[Rt-1]=arguments[Rt];for(var Lt=0,jt=It;Lt<jt.length;Lt++)le(kt,jt[Lt],!0);return kt}({},o.defaultProps,At):At}}),ue(xt,function(){return".".concat(xt.styledComponentId)}),c&&oe(xt,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),xt}function it(i,e){for(var s=[i[0]],a=0,o=e.length;a<o;a+=1)s.push(e[a],i[a+1]);return s}var at=function(i){return Object.assign(i,{isCss:!0})};function ct(i){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(re(i)||ce(i))return at(Je(it(_,__spreadArray([i],e,!0))));var a=i;return e.length===0&&a.length===1&&typeof a[0]=="string"?Je(a):at(Je(it(a,e)))}function lt(i,e,s){if(s===void 0&&(s=C),!e)throw he(1,e);var a=function(o){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return i(e,s,ct.apply(void 0,__spreadArray([o],c,!1)))};return a.attrs=function(o){return lt(i,e,__assign(__assign({},s),{attrs:Array.prototype.concat(s.attrs,o).filter(Boolean)}))},a.withConfig=function(o){return lt(i,e,__assign(__assign({},s),o))},a}var ut=function(i){return lt(st,i)},pt=ut;A.forEach(function(i){pt[i]=ut(i)});var win;typeof window<"u"?win=window:typeof commonjsGlobal<"u"?win=commonjsGlobal:typeof self<"u"?win=self:win={};var window_1=win;const window$1$1=getDefaultExportFromCjs(window_1),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var topLevel=typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:{},minDoc=require$$0$1,doccy;typeof document<"u"?doccy=document:(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"],doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc));var document_1=doccy;const document$2=getDefaultExportFromCjs(document_1);var keycode$1={exports:{}};(function(i,e){function s(b){if(b&&typeof b=="object"){var tt=b.which||b.keyCode||b.charCode;tt&&(b=tt)}if(typeof b=="number")return d[b];var nt=String(b),ft=a[nt.toLowerCase()];if(ft)return ft;var ft=o[nt.toLowerCase()];if(ft)return ft;if(nt.length===1)return nt.charCodeAt(0)}s.isEventKey=function(tt,nt){if(tt&&typeof tt=="object"){var ft=tt.which||tt.keyCode||tt.charCode;if(ft==null)return!1;if(typeof nt=="string"){var yt=a[nt.toLowerCase()];if(yt)return yt===ft;var yt=o[nt.toLowerCase()];if(yt)return yt===ft}else if(typeof nt=="number")return nt===ft;return!1}},e=i.exports=s;var a=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(c=97;c<123;c++)a[String.fromCharCode(c)]=c-32;for(var c=48;c<58;c++)a[c-48]=c;for(c=1;c<13;c++)a["f"+c]=c+111;for(c=0;c<10;c++)a["numpad "+c]=c+96;var d=e.names=e.title={};for(c in a)d[a[c]]=c;for(var h in o)a[h]=o[h]})(keycode$1,keycode$1.exports);var keycodeExports=keycode$1.exports;const keycode=getDefaultExportFromCjs(keycodeExports);var tuple=SafeParseTuple;function SafeParseTuple(i,e){var s,a=null;try{s=JSON.parse(i,e)}catch(o){a=o}return[a,s]}const safeParseTuple=getDefaultExportFromCjs(tuple);var lib={exports:{}};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_extends$2.apply(this,arguments)}const _extends$3=Object.freeze(Object.defineProperty({__proto__:null,default:_extends$2},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(_extends$3);var isFunction_1=isFunction$1,toString$1=Object.prototype.toString;function isFunction$1(i){if(!i)return!1;var e=toString$1.call(i);return e==="[object Function]"||typeof i=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}var window$3=window_1,httpResponseHandler=function i(e,s){return s===void 0&&(s=!1),function(a,o,c){if(a){e(a);return}if(o.statusCode>=400&&o.statusCode<=599){var d=c;if(s)if(window$3.TextDecoder){var h=getCharset(o.headers&&o.headers["content-type"]);try{d=new TextDecoder(h).decode(c)}catch{}}else d=String.fromCharCode.apply(null,new Uint8Array(c));e({cause:d});return}e(null,c)}};function getCharset(i){return i===void 0&&(i=""),i.toLowerCase().split(";").reduce(function(e,s){var a=s.split("="),o=a[0],c=a[1];return o.trim()==="charset"?c.trim():e},"utf-8")}var httpHandler=httpResponseHandler,window$2=window_1,_extends$1=require$$1,isFunction=isFunction_1;createXHR.httpHandler=httpHandler;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var parseHeaders=function i(e){var s={};return e&&e.trim().split(`
`).forEach(function(a){var o=a.indexOf(":"),c=a.slice(0,o).trim().toLowerCase(),d=a.slice(o+1).trim();typeof s[c]>"u"?s[c]=d:Array.isArray(s[c])?s[c].push(d):s[c]=[s[c],d]}),s};lib.exports=createXHR;lib.exports.default=createXHR;createXHR.XMLHttpRequest=window$2.XMLHttpRequest||noop$1;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window$2.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(i){createXHR[i==="delete"?"del":i]=function(e,s,a){return s=initParams(e,s,a),s.method=i.toUpperCase(),_createXHR(s)}});function forEachArray(i,e){for(var s=0;s<i.length;s++)e(i[s])}function isEmpty(i){for(var e in i)if(i.hasOwnProperty(e))return!1;return!0}function initParams(i,e,s){var a=i;return isFunction(e)?(s=e,typeof i=="string"&&(a={uri:i})):a=_extends$1({},e,{uri:i}),a.callback=s,a}function createXHR(i,e,s){return e=initParams(i,e,s),_createXHR(e)}function _createXHR(i){if(typeof i.callback>"u")throw new Error("callback argument missing");var e=!1,s=function(xt,At,kt){e||(e=!0,i.callback(xt,At,kt))};function a(){h.readyState===4&&setTimeout(d,0)}function o(){var vt=void 0;if(h.response?vt=h.response:vt=h.responseText||getXml(h),St)try{vt=JSON.parse(vt)}catch{}return vt}function c(vt){return clearTimeout(wt),vt instanceof Error||(vt=new Error(""+(vt||"Unknown XMLHttpRequest Error"))),vt.statusCode=0,s(vt,Et)}function d(){if(!tt){var vt;clearTimeout(wt),i.useXDR&&h.status===void 0?vt=200:vt=h.status===1223?204:h.status;var xt=Et,At=null;return vt!==0?(xt={body:o(),statusCode:vt,method:ft,headers:{},url:nt,rawRequest:h},h.getAllResponseHeaders&&(xt.headers=parseHeaders(h.getAllResponseHeaders()))):At=new Error("Internal XMLHttpRequest Error"),s(At,xt,xt.body)}}var h=i.xhr||null;h||(i.cors||i.useXDR?h=new createXHR.XDomainRequest:h=new createXHR.XMLHttpRequest);var b,tt,nt=h.url=i.uri||i.url,ft=h.method=i.method||"GET",yt=i.body||i.data,Tt=h.headers=i.headers||{},gt=!!i.sync,St=!1,wt,Et={body:void 0,headers:{},statusCode:0,method:ft,url:nt,rawRequest:h};if("json"in i&&i.json!==!1&&(St=!0,Tt.accept||Tt.Accept||(Tt.Accept="application/json"),ft!=="GET"&&ft!=="HEAD"&&(Tt["content-type"]||Tt["Content-Type"]||(Tt["Content-Type"]="application/json"),yt=JSON.stringify(i.json===!0?yt:i.json))),h.onreadystatechange=a,h.onload=d,h.onerror=c,h.onprogress=function(){},h.onabort=function(){tt=!0},h.ontimeout=c,h.open(ft,nt,!gt,i.username,i.password),gt||(h.withCredentials=!!i.withCredentials),!gt&&i.timeout>0&&(wt=setTimeout(function(){if(!tt){tt=!0,h.abort("timeout");var vt=new Error("XMLHttpRequest timeout");vt.code="ETIMEDOUT",c(vt)}},i.timeout)),h.setRequestHeader)for(b in Tt)Tt.hasOwnProperty(b)&&h.setRequestHeader(b,Tt[b]);else if(i.headers&&!isEmpty(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(h.responseType=i.responseType),"beforeSend"in i&&typeof i.beforeSend=="function"&&i.beforeSend(h),h.send(yt||null),h}function getXml(i){try{if(i.responseType==="document")return i.responseXML;var e=i.responseXML&&i.responseXML.documentElement.nodeName==="parsererror";if(i.responseType===""&&!e)return i.responseXML}catch{}return null}function noop$1(){}var libExports=lib.exports;const XHR=getDefaultExportFromCjs(libExports);var browserIndex={exports:{}},document$1=document_1,_objCreate=Object.create||function(){function i(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return i.prototype=e,new i}}();function ParsingError(i,e){this.name="ParsingError",this.code=i.code,this.message=e||i.message}ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(i){function e(a,o,c,d){return(a|0)*3600+(o|0)*60+(c|0)+(d|0)/1e3}var s=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return s?s[3]?e(s[1],s[2],s[3].replace(":",""),s[4]):s[1]>59?e(s[1],s[2],0,s[4]):e(0,s[1],s[2],s[4]):null}function Settings(){this.values=_objCreate(null)}Settings.prototype={set:function(i,e){!this.get(i)&&e!==""&&(this.values[i]=e)},get:function(i,e,s){return s?this.has(i)?this.values[i]:e[s]:this.has(i)?this.values[i]:e},has:function(i){return i in this.values},alt:function(i,e,s){for(var a=0;a<s.length;++a)if(e===s[a]){this.set(i,e);break}},integer:function(i,e){/^-?\d+$/.test(e)&&this.set(i,parseInt(e,10))},percent:function(i,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(i,e),!0):!1}};function parseOptions(i,e,s,a){var o=a?i.split(a):[i];for(var c in o)if(typeof o[c]=="string"){var d=o[c].split(s);if(d.length===2){var h=d[0].trim(),b=d[1].trim();e(h,b)}}}function parseCue(i,e,s){var a=i;function o(){var h=parseTimeStamp(i);if(h===null)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+a);return i=i.replace(/^[^\sa-zA-Z-]+/,""),h}function c(h,b){var tt=new Settings;parseOptions(h,function(nt,ft){switch(nt){case"region":for(var yt=s.length-1;yt>=0;yt--)if(s[yt].id===ft){tt.set(nt,s[yt].region);break}break;case"vertical":tt.alt(nt,ft,["rl","lr"]);break;case"line":var Tt=ft.split(","),gt=Tt[0];tt.integer(nt,gt),tt.percent(nt,gt)&&tt.set("snapToLines",!1),tt.alt(nt,gt,["auto"]),Tt.length===2&&tt.alt("lineAlign",Tt[1],["start","center","end"]);break;case"position":Tt=ft.split(","),tt.percent(nt,Tt[0]),Tt.length===2&&tt.alt("positionAlign",Tt[1],["start","center","end"]);break;case"size":tt.percent(nt,ft);break;case"align":tt.alt(nt,ft,["start","center","end","left","right"]);break}},/:/,/\s/),b.region=tt.get("region",null),b.vertical=tt.get("vertical","");try{b.line=tt.get("line","auto")}catch{}b.lineAlign=tt.get("lineAlign","start"),b.snapToLines=tt.get("snapToLines",!0),b.size=tt.get("size",100);try{b.align=tt.get("align","center")}catch{b.align=tt.get("align","middle")}try{b.position=tt.get("position","auto")}catch{b.position=tt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=tt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}function d(){i=i.replace(/^\s+/,"")}if(d(),e.startTime=o(),d(),i.substr(0,3)!=="-->")throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+a);i=i.substr(3),d(),e.endTime=o(),d(),c(i,e)}var TEXTAREA_ELEMENT=document$1.createElement&&document$1.createElement("textarea"),TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},DEFAULT_COLOR_CLASS={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},TAG_ANNOTATION={v:"title",lang:"lang"},NEEDS_PARENT={rt:"ruby"};function parseContent(i,e){function s(){if(!e)return null;function gt(wt){return e=e.substr(wt.length),wt}var St=e.match(/^([^<]*)(<[^>]*>?)?/);return gt(St[1]?St[1]:St[2])}function a(gt){return TEXTAREA_ELEMENT.innerHTML=gt,gt=TEXTAREA_ELEMENT.textContent,TEXTAREA_ELEMENT.textContent="",gt}function o(gt,St){return!NEEDS_PARENT[St.localName]||NEEDS_PARENT[St.localName]===gt.localName}function c(gt,St){var wt=TAG_NAME[gt];if(!wt)return null;var Et=i.document.createElement(wt),vt=TAG_ANNOTATION[gt];return vt&&St&&(Et[vt]=St.trim()),Et}for(var d=i.document.createElement("div"),h=d,b,tt=[];(b=s())!==null;){if(b[0]==="<"){if(b[1]==="/"){tt.length&&tt[tt.length-1]===b.substr(2).replace(">","")&&(tt.pop(),h=h.parentNode);continue}var nt=parseTimeStamp(b.substr(1,b.length-2)),ft;if(nt){ft=i.document.createProcessingInstruction("timestamp",nt),h.appendChild(ft);continue}var yt=b.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!yt||(ft=c(yt[1],yt[3]),!ft)||!o(h,ft))continue;if(yt[2]){var Tt=yt[2].split(".");Tt.forEach(function(gt){var St=/^bg_/.test(gt),wt=St?gt.slice(3):gt;if(DEFAULT_COLOR_CLASS.hasOwnProperty(wt)){var Et=St?"background-color":"color",vt=DEFAULT_COLOR_CLASS[wt];ft.style[Et]=vt}}),ft.className=Tt.join(" ")}tt.push(yt[1]),h.appendChild(ft),h=ft;continue}h.appendChild(i.document.createTextNode(a(b)))}return d}var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(i){for(var e=0;e<strongRTLRanges.length;e++){var s=strongRTLRanges[e];if(i>=s[0]&&i<=s[1])return!0}return!1}function determineBidi(i){var e=[],s="",a;if(!i||!i.childNodes)return"ltr";function o(h,b){for(var tt=b.childNodes.length-1;tt>=0;tt--)h.push(b.childNodes[tt])}function c(h){if(!h||!h.length)return null;var b=h.pop(),tt=b.textContent||b.innerText;if(tt){var nt=tt.match(/^.*(\n|\r)/);return nt?(h.length=0,nt[0]):tt}if(b.tagName==="ruby")return c(h);if(b.childNodes)return o(h,b),c(h)}for(o(e,i);s=c(e);)for(var d=0;d<s.length;d++)if(a=s.charCodeAt(d),isStrongRTLChar(a))return"rtl";return"ltr"}function computeLinePos(i){if(typeof i.line=="number"&&(i.snapToLines||i.line>=0&&i.line<=100))return i.line;if(!i.track||!i.track.textTrackList||!i.track.textTrackList.mediaElement)return-1;for(var e=i.track,s=e.textTrackList,a=0,o=0;o<s.length&&s[o]!==e;o++)s[o].mode==="showing"&&a++;return++a*-1}function StyleBox(){}StyleBox.prototype.applyStyles=function(i,e){e=e||this.div;for(var s in i)i.hasOwnProperty(s)&&(e.style[s]=i[s])};StyleBox.prototype.formatStyle=function(i,e){return i===0?0:i+e};function CueStyleBox(i,e,s){StyleBox.call(this),this.cue=e,this.cueDiv=parseContent(i,e.text);var a={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(a,this.cueDiv),this.div=i.document.createElement("div"),a={direction:determineBidi(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:s.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(a),this.div.appendChild(this.cueDiv);var o=0;switch(e.positionAlign){case"start":case"line-left":o=e.position;break;case"center":o=e.position-e.size/2;break;case"end":case"line-right":o=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(o,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(o,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(c){this.applyStyles({top:this.formatStyle(c.top,"px"),bottom:this.formatStyle(c.bottom,"px"),left:this.formatStyle(c.left,"px"),right:this.formatStyle(c.right,"px"),height:this.formatStyle(c.height,"px"),width:this.formatStyle(c.width,"px")})}}CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(i){var e,s,a,o;if(i.div){s=i.div.offsetHeight,a=i.div.offsetWidth,o=i.div.offsetTop;var c=(c=i.div.childNodes)&&(c=c[0])&&c.getClientRects&&c.getClientRects();i=i.div.getBoundingClientRect(),e=c?Math.max(c[0]&&c[0].height||0,i.height/c.length):0}this.left=i.left,this.right=i.right,this.top=i.top||o,this.height=i.height||s,this.bottom=i.bottom||o+(i.height||s),this.width=i.width||a,this.lineHeight=e!==void 0?e:i.lineHeight}BoxPosition.prototype.move=function(i,e){switch(e=e!==void 0?e:this.lineHeight,i){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};BoxPosition.prototype.overlaps=function(i){return this.left<i.right&&this.right>i.left&&this.top<i.bottom&&this.bottom>i.top};BoxPosition.prototype.overlapsAny=function(i){for(var e=0;e<i.length;e++)if(this.overlaps(i[e]))return!0;return!1};BoxPosition.prototype.within=function(i){return this.top>=i.top&&this.bottom<=i.bottom&&this.left>=i.left&&this.right<=i.right};BoxPosition.prototype.overlapsOppositeAxis=function(i,e){switch(e){case"+x":return this.left<i.left;case"-x":return this.right>i.right;case"+y":return this.top<i.top;case"-y":return this.bottom>i.bottom}};BoxPosition.prototype.intersectPercentage=function(i){var e=Math.max(0,Math.min(this.right,i.right)-Math.max(this.left,i.left)),s=Math.max(0,Math.min(this.bottom,i.bottom)-Math.max(this.top,i.top)),a=e*s;return a/(this.height*this.width)};BoxPosition.prototype.toCSSCompatValues=function(i){return{top:this.top-i.top,bottom:i.bottom-this.bottom,left:this.left-i.left,right:i.right-this.right,height:this.height,width:this.width}};BoxPosition.getSimpleBoxPosition=function(i){var e=i.div?i.div.offsetHeight:i.tagName?i.offsetHeight:0,s=i.div?i.div.offsetWidth:i.tagName?i.offsetWidth:0,a=i.div?i.div.offsetTop:i.tagName?i.offsetTop:0;i=i.div?i.div.getBoundingClientRect():i.tagName?i.getBoundingClientRect():i;var o={left:i.left,right:i.right,top:i.top||a,height:i.height||e,bottom:i.bottom||a+(i.height||e),width:i.width||s};return o};function moveBoxToLinePosition(i,e,s,a){function o(wt,Et){for(var vt,xt=new BoxPosition(wt),At=1,kt=0;kt<Et.length;kt++){for(;wt.overlapsOppositeAxis(s,Et[kt])||wt.within(s)&&wt.overlapsAny(a);)wt.move(Et[kt]);if(wt.within(s))return wt;var It=wt.intersectPercentage(s);At>It&&(vt=new BoxPosition(wt),At=It),wt=new BoxPosition(xt)}return vt||xt}var c=new BoxPosition(e),d=e.cue,h=computeLinePos(d),b=[];if(d.snapToLines){var tt;switch(d.vertical){case"":b=["+y","-y"],tt="height";break;case"rl":b=["+x","-x"],tt="width";break;case"lr":b=["-x","+x"],tt="width";break}var nt=c.lineHeight,ft=nt*Math.round(h),yt=s[tt]+nt,Tt=b[0];Math.abs(ft)>yt&&(ft=ft<0?-1:1,ft*=Math.ceil(yt/nt)*nt),h<0&&(ft+=d.vertical===""?s.height:s.width,b=b.reverse()),c.move(Tt,ft)}else{var gt=c.lineHeight/s.height*100;switch(d.lineAlign){case"center":h-=gt/2;break;case"end":h-=gt;break}switch(d.vertical){case"":e.applyStyles({top:e.formatStyle(h,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(h,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(h,"%")});break}b=["+y","-x","+x","-y"],c=new BoxPosition(e)}var St=o(c,b);e.move(St.toCSSCompatValues(s))}function WebVTT$1(){}WebVTT$1.StringDecoder=function(){return{decode:function(i){if(!i)return"";if(typeof i!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))}}};WebVTT$1.convertCueToDOMTree=function(i,e){return!i||!e?null:parseContent(i,e)};var FONT_SIZE_PERCENT=.05,FONT_STYLE="sans-serif",CUE_BACKGROUND_PADDING="1.5%";WebVTT$1.processCues=function(i,e,s){if(!i||!e||!s)return null;for(;s.firstChild;)s.removeChild(s.firstChild);var a=i.document.createElement("div");a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin=CUE_BACKGROUND_PADDING,s.appendChild(a);function o(nt){for(var ft=0;ft<nt.length;ft++)if(nt[ft].hasBeenReset||!nt[ft].displayState)return!0;return!1}if(!o(e)){for(var c=0;c<e.length;c++)a.appendChild(e[c].displayState);return}var d=[],h=BoxPosition.getSimpleBoxPosition(a),b=Math.round(h.height*FONT_SIZE_PERCENT*100)/100,tt={font:b+"px "+FONT_STYLE};(function(){for(var nt,ft,yt=0;yt<e.length;yt++)ft=e[yt],nt=new CueStyleBox(i,ft,tt),a.appendChild(nt.div),moveBoxToLinePosition(i,nt,h,d),ft.displayState=nt.div,d.push(BoxPosition.getSimpleBoxPosition(nt))})()};WebVTT$1.Parser=function(i,e,s){s||(s=e,e={}),e||(e={}),this.window=i,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=s||new TextDecoder("utf8"),this.regionList=[]};WebVTT$1.Parser.prototype={reportOrThrowError:function(i){if(i instanceof ParsingError)this.onparsingerror&&this.onparsingerror(i);else throw i},parse:function(i){var e=this;i&&(e.buffer+=e.decoder.decode(i,{stream:!0}));function s(){for(var nt=e.buffer,ft=0;ft<nt.length&&nt[ft]!=="\r"&&nt[ft]!==`
`;)++ft;var yt=nt.substr(0,ft);return nt[ft]==="\r"&&++ft,nt[ft]===`
`&&++ft,e.buffer=nt.substr(ft),yt}function a(nt){var ft=new Settings;if(parseOptions(nt,function(Tt,gt){switch(Tt){case"id":ft.set(Tt,gt);break;case"width":ft.percent(Tt,gt);break;case"lines":ft.integer(Tt,gt);break;case"regionanchor":case"viewportanchor":var St=gt.split(",");if(St.length!==2)break;var wt=new Settings;if(wt.percent("x",St[0]),wt.percent("y",St[1]),!wt.has("x")||!wt.has("y"))break;ft.set(Tt+"X",wt.get("x")),ft.set(Tt+"Y",wt.get("y"));break;case"scroll":ft.alt(Tt,gt,["up"]);break}},/=/,/\s/),ft.has("id")){var yt=new(e.vttjs.VTTRegion||e.window.VTTRegion);yt.width=ft.get("width",100),yt.lines=ft.get("lines",3),yt.regionAnchorX=ft.get("regionanchorX",0),yt.regionAnchorY=ft.get("regionanchorY",100),yt.viewportAnchorX=ft.get("viewportanchorX",0),yt.viewportAnchorY=ft.get("viewportanchorY",100),yt.scroll=ft.get("scroll",""),e.onregion&&e.onregion(yt),e.regionList.push({id:ft.get("id"),region:yt})}}function o(nt){var ft=new Settings;parseOptions(nt,function(yt,Tt){switch(yt){case"MPEGT":ft.integer(yt+"S",Tt);break;case"LOCA":ft.set(yt+"L",parseTimeStamp(Tt));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:ft.get("MPEGTS"),LOCAL:ft.get("LOCAL")})}function c(nt){nt.match(/X-TIMESTAMP-MAP/)?parseOptions(nt,function(ft,yt){switch(ft){case"X-TIMESTAMP-MAP":o(yt);break}},/=/):parseOptions(nt,function(ft,yt){switch(ft){case"Region":a(yt);break}},/:/)}try{var d;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;d=s();var h=d.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new ParsingError(ParsingError.Errors.BadSignature);e.state="HEADER"}for(var b=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(b?b=!1:d=s(),e.state){case"HEADER":/:/.test(d)?c(d):d||(e.state="ID");continue;case"NOTE":d||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){e.state="NOTE";break}if(!d)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",d.indexOf("-->")===-1){e.cue.id=d;continue}case"CUE":try{parseCue(d,e.cue,e.regionList)}catch(nt){e.reportOrThrowError(nt),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var tt=d.indexOf("-->")!==-1;if(!d||tt&&(b=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=d.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":d||(e.state="ID");continue}}}catch(nt){e.reportOrThrowError(nt),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var i=this;try{if(i.buffer+=i.decoder.decode(),(i.cue||i.state==="HEADER")&&(i.buffer+=`

`,i.parse()),i.state==="INITIAL")throw new ParsingError(ParsingError.Errors.BadSignature)}catch(e){i.reportOrThrowError(e)}return i.onflush&&i.onflush(),this}};var vtt$1=WebVTT$1,autoKeyword="auto",directionSetting={"":1,lr:1,rl:1},alignSetting={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function findDirectionSetting(i){if(typeof i!="string")return!1;var e=directionSetting[i.toLowerCase()];return e?i.toLowerCase():!1}function findAlignSetting(i){if(typeof i!="string")return!1;var e=alignSetting[i.toLowerCase()];return e?i.toLowerCase():!1}function VTTCue(i,e,s){this.hasBeenReset=!1;var a="",o=!1,c=i,d=e,h=s,b=null,tt="",nt=!0,ft="auto",yt="start",Tt="auto",gt="auto",St=100,wt="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(Et){a=""+Et}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(Et){o=!!Et}},startTime:{enumerable:!0,get:function(){return c},set:function(Et){if(typeof Et!="number")throw new TypeError("Start time must be set to a number.");c=Et,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(Et){if(typeof Et!="number")throw new TypeError("End time must be set to a number.");d=Et,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(Et){h=""+Et,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return b},set:function(Et){b=Et,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return tt},set:function(Et){var vt=findDirectionSetting(Et);if(vt===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");tt=vt,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return nt},set:function(Et){nt=!!Et,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return ft},set:function(Et){if(typeof Et!="number"&&Et!==autoKeyword)throw new SyntaxError("Line: an invalid number or illegal string was specified.");ft=Et,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return yt},set:function(Et){var vt=findAlignSetting(Et);vt?(yt=vt,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Tt},set:function(Et){if(Et<0||Et>100)throw new Error("Position must be between 0 and 100.");Tt=Et,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return gt},set:function(Et){var vt=findAlignSetting(Et);vt?(gt=vt,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return St},set:function(Et){if(Et<0||Et>100)throw new Error("Size must be between 0 and 100.");St=Et,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return wt},set:function(Et){var vt=findAlignSetting(Et);if(!vt)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");wt=vt,this.hasBeenReset=!0}}}),this.displayState=void 0}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var vttcue=VTTCue,scrollSetting={"":!0,up:!0};function findScrollSetting(i){if(typeof i!="string")return!1;var e=scrollSetting[i.toLowerCase()];return e?i.toLowerCase():!1}function isValidPercentValue(i){return typeof i=="number"&&i>=0&&i<=100}function VTTRegion(){var i=100,e=3,s=0,a=100,o=0,c=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(h){if(!isValidPercentValue(h))throw new Error("Width must be between 0 and 100.");i=h}},lines:{enumerable:!0,get:function(){return e},set:function(h){if(typeof h!="number")throw new TypeError("Lines must be set to a number.");e=h}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(h){if(!isValidPercentValue(h))throw new Error("RegionAnchorX must be between 0 and 100.");a=h}},regionAnchorX:{enumerable:!0,get:function(){return s},set:function(h){if(!isValidPercentValue(h))throw new Error("RegionAnchorY must be between 0 and 100.");s=h}},viewportAnchorY:{enumerable:!0,get:function(){return c},set:function(h){if(!isValidPercentValue(h))throw new Error("ViewportAnchorY must be between 0 and 100.");c=h}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(h){if(!isValidPercentValue(h))throw new Error("ViewportAnchorX must be between 0 and 100.");o=h}},scroll:{enumerable:!0,get:function(){return d},set:function(h){var b=findScrollSetting(h);b===!1?console.warn("Scroll: an invalid or illegal string was specified."):d=b}}})}var vttregion=VTTRegion,window$1=window_1,vttjs=browserIndex.exports={WebVTT:vtt$1,VTTCue:vttcue,VTTRegion:vttregion};window$1.vttjs=vttjs;window$1.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue,regionShim=vttjs.VTTRegion,nativeVTTCue=window$1.VTTCue,nativeVTTRegion=window$1.VTTRegion;vttjs.shim=function(){window$1.VTTCue=cueShim,window$1.VTTRegion=regionShim};vttjs.restore=function(){window$1.VTTCue=nativeVTTCue,window$1.VTTRegion=nativeVTTRegion};window$1.VTTCue||vttjs.shim();var browserIndexExports=browserIndex.exports;const vtt=getDefaultExportFromCjs(browserIndexExports);var urlToolkit={exports:{}};(function(i,e){(function(s){var a=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,o=/^(?=([^\/?#]*))\1([^]*)$/,c=/(?:\/|^)\.(?=\/)/g,d=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,h={buildAbsoluteURL:function(b,tt,nt){if(nt=nt||{},b=b.trim(),tt=tt.trim(),!tt){if(!nt.alwaysNormalize)return b;var ft=h.parseURL(b);if(!ft)throw new Error("Error trying to parse base URL.");return ft.path=h.normalizePath(ft.path),h.buildURLFromParts(ft)}var yt=h.parseURL(tt);if(!yt)throw new Error("Error trying to parse relative URL.");if(yt.scheme)return nt.alwaysNormalize?(yt.path=h.normalizePath(yt.path),h.buildURLFromParts(yt)):tt;var Tt=h.parseURL(b);if(!Tt)throw new Error("Error trying to parse base URL.");if(!Tt.netLoc&&Tt.path&&Tt.path[0]!=="/"){var gt=o.exec(Tt.path);Tt.netLoc=gt[1],Tt.path=gt[2]}Tt.netLoc&&!Tt.path&&(Tt.path="/");var St={scheme:Tt.scheme,netLoc:yt.netLoc,path:null,params:yt.params,query:yt.query,fragment:yt.fragment};if(!yt.netLoc&&(St.netLoc=Tt.netLoc,yt.path[0]!=="/"))if(!yt.path)St.path=Tt.path,yt.params||(St.params=Tt.params,yt.query||(St.query=Tt.query));else{var wt=Tt.path,Et=wt.substring(0,wt.lastIndexOf("/")+1)+yt.path;St.path=h.normalizePath(Et)}return St.path===null&&(St.path=nt.alwaysNormalize?h.normalizePath(yt.path):yt.path),h.buildURLFromParts(St)},parseURL:function(b){var tt=a.exec(b);return tt?{scheme:tt[1]||"",netLoc:tt[2]||"",path:tt[3]||"",params:tt[4]||"",query:tt[5]||"",fragment:tt[6]||""}:null},normalizePath:function(b){for(b=b.split("").reverse().join("").replace(c,"");b.length!==(b=b.replace(d,"")).length;);return b.split("").reverse().join("")},buildURLFromParts:function(b){return b.scheme+b.netLoc+b.path+b.params+b.query+b.fragment}};i.exports=h})()})(urlToolkit);var urlToolkitExports=urlToolkit.exports;const URLToolkit=getDefaultExportFromCjs(urlToolkitExports);var DEFAULT_LOCATION="http://example.com",resolveUrl$1=function i(e,s){if(/^[a-z]+:/i.test(s))return s;/^data:/.test(e)&&(e=window$1$1.location&&window$1$1.location.href||"");var a=typeof window$1$1.URL=="function",o=/^\/\//.test(e),c=!window$1$1.location&&!/\/\//i.test(e);if(a?e=new window$1$1.URL(e,window$1$1.location||DEFAULT_LOCATION):/\/\//i.test(e)||(e=URLToolkit.buildAbsoluteURL(window$1$1.location&&window$1$1.location.href||"",e)),a){var d=new URL(s,e);return c?d.href.slice(DEFAULT_LOCATION.length):o?d.href.slice(d.protocol.length):d.href}return URLToolkit.buildAbsoluteURL(e,s)},Stream=function(){function i(){this.listeners={}}var e=i.prototype;return e.on=function(a,o){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(o)},e.off=function(a,o){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(o);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},e.trigger=function(a){var o=this.listeners[a];if(o)if(arguments.length===2)for(var c=o.length,d=0;d<c;++d)o[d].call(this,arguments[1]);else for(var h=Array.prototype.slice.call(arguments,1),b=o.length,tt=0;tt<b;++tt)o[tt].apply(this,h)},e.dispose=function(){this.listeners={}},e.pipe=function(a){this.on("data",function(o){a.push(o)})},i}(),atob$1=function i(e){return window$1$1.atob?window$1$1.atob(e):Buffer.from(e,"base64").toString("binary")};function decodeB64ToUint8Array$1(i){for(var e=atob$1(i),s=new Uint8Array(e.length),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s}/*! @name m3u8-parser @version 7.1.0 @license Apache-2.0 */class LineStream extends Stream{constructor(){super(),this.buffer=""}push(e){let s;for(this.buffer+=e,s=this.buffer.indexOf(`
`);s>-1;s=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)}}const TAB="	",parseByterange=function(i){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),s={};return e[1]&&(s.length=parseInt(e[1],10)),e[2]&&(s.offset=parseInt(e[2],10)),s},attributeSeparator=function(){const s="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+s+")")},parseAttributes$1=function(i){const e={};if(!i)return e;const s=i.split(attributeSeparator());let a=s.length,o;for(;a--;)s[a]!==""&&(o=/([^=]*)=(.*)/.exec(s[a]).slice(1),o[0]=o[0].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^['"](.*)['"]$/g,"$1"),e[o[0]]=o[1]);return e};class ParseStream extends Stream{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let s,a;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((c,d)=>{const h=d(e);return h===e?c:c.concat([h])},[e]).forEach(c=>{for(let d=0;d<this.customParsers.length;d++)if(this.customParsers[d].call(this,c))return;if(c.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:c.slice(1)});return}if(c=c.replace("\r",""),s=/^#EXTM3U/.exec(c),s){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(c),s){a={type:"tag",tagType:"inf"},s[1]&&(a.duration=parseFloat(s[1])),s[2]&&(a.title=s[2]),this.trigger("data",a);return}if(s=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(c),s){a={type:"tag",tagType:"targetduration"},s[1]&&(a.duration=parseInt(s[1],10)),this.trigger("data",a);return}if(s=/^#EXT-X-VERSION:([0-9.]*)?/.exec(c),s){a={type:"tag",tagType:"version"},s[1]&&(a.version=parseInt(s[1],10)),this.trigger("data",a);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(c),s){a={type:"tag",tagType:"media-sequence"},s[1]&&(a.number=parseInt(s[1],10)),this.trigger("data",a);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(c),s){a={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(a.number=parseInt(s[1],10)),this.trigger("data",a);return}if(s=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(c),s){a={type:"tag",tagType:"playlist-type"},s[1]&&(a.playlistType=s[1]),this.trigger("data",a);return}if(s=/^#EXT-X-BYTERANGE:(.*)?$/.exec(c),s){a=_extends$2(parseByterange(s[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",a);return}if(s=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(c),s){a={type:"tag",tagType:"allow-cache"},s[1]&&(a.allowed=!/NO/.test(s[1])),this.trigger("data",a);return}if(s=/^#EXT-X-MAP:(.*)$/.exec(c),s){if(a={type:"tag",tagType:"map"},s[1]){const d=parseAttributes$1(s[1]);d.URI&&(a.uri=d.URI),d.BYTERANGE&&(a.byterange=parseByterange(d.BYTERANGE))}this.trigger("data",a);return}if(s=/^#EXT-X-STREAM-INF:(.*)$/.exec(c),s){if(a={type:"tag",tagType:"stream-inf"},s[1]){if(a.attributes=parseAttributes$1(s[1]),a.attributes.RESOLUTION){const d=a.attributes.RESOLUTION.split("x"),h={};d[0]&&(h.width=parseInt(d[0],10)),d[1]&&(h.height=parseInt(d[1],10)),a.attributes.RESOLUTION=h}a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["FRAME-RATE"]&&(a.attributes["FRAME-RATE"]=parseFloat(a.attributes["FRAME-RATE"])),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))}this.trigger("data",a);return}if(s=/^#EXT-X-MEDIA:(.*)$/.exec(c),s){a={type:"tag",tagType:"media"},s[1]&&(a.attributes=parseAttributes$1(s[1])),this.trigger("data",a);return}if(s=/^#EXT-X-ENDLIST/.exec(c),s){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(c),s){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(c),s){a={type:"tag",tagType:"program-date-time"},s[1]&&(a.dateTimeString=s[1],a.dateTimeObject=new Date(s[1])),this.trigger("data",a);return}if(s=/^#EXT-X-KEY:(.*)$/.exec(c),s){a={type:"tag",tagType:"key"},s[1]&&(a.attributes=parseAttributes$1(s[1]),a.attributes.IV&&(a.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),this.trigger("data",a);return}if(s=/^#EXT-X-START:(.*)$/.exec(c),s){a={type:"tag",tagType:"start"},s[1]&&(a.attributes=parseAttributes$1(s[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),this.trigger("data",a);return}if(s=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(c),s){a={type:"tag",tagType:"cue-out-cont"},s[1]?a.data=s[1]:a.data="",this.trigger("data",a);return}if(s=/^#EXT-X-CUE-OUT:(.*)?$/.exec(c),s){a={type:"tag",tagType:"cue-out"},s[1]?a.data=s[1]:a.data="",this.trigger("data",a);return}if(s=/^#EXT-X-CUE-IN:(.*)?$/.exec(c),s){a={type:"tag",tagType:"cue-in"},s[1]?a.data=s[1]:a.data="",this.trigger("data",a);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"skip"},a.attributes=parseAttributes$1(s[1]),a.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(a.attributes["SKIPPED-SEGMENTS"]=parseInt(a.attributes["SKIPPED-SEGMENTS"],10)),a.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(a.attributes["RECENTLY-REMOVED-DATERANGES"]=a.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB)),this.trigger("data",a);return}if(s=/^#EXT-X-PART:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"part"},a.attributes=parseAttributes$1(s[1]),["DURATION"].forEach(function(d){a.attributes.hasOwnProperty(d)&&(a.attributes[d]=parseFloat(a.attributes[d]))}),["INDEPENDENT","GAP"].forEach(function(d){a.attributes.hasOwnProperty(d)&&(a.attributes[d]=/YES/.test(a.attributes[d]))}),a.attributes.hasOwnProperty("BYTERANGE")&&(a.attributes.byterange=parseByterange(a.attributes.BYTERANGE)),this.trigger("data",a);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"server-control"},a.attributes=parseAttributes$1(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(d){a.attributes.hasOwnProperty(d)&&(a.attributes[d]=parseFloat(a.attributes[d]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(d){a.attributes.hasOwnProperty(d)&&(a.attributes[d]=/YES/.test(a.attributes[d]))}),this.trigger("data",a);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"part-inf"},a.attributes=parseAttributes$1(s[1]),["PART-TARGET"].forEach(function(d){a.attributes.hasOwnProperty(d)&&(a.attributes[d]=parseFloat(a.attributes[d]))}),this.trigger("data",a);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"preload-hint"},a.attributes=parseAttributes$1(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(d){if(a.attributes.hasOwnProperty(d)){a.attributes[d]=parseInt(a.attributes[d],10);const h=d==="BYTERANGE-LENGTH"?"length":"offset";a.attributes.byterange=a.attributes.byterange||{},a.attributes.byterange[h]=a.attributes[d],delete a.attributes[d]}}),this.trigger("data",a);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"rendition-report"},a.attributes=parseAttributes$1(s[1]),["LAST-MSN","LAST-PART"].forEach(function(d){a.attributes.hasOwnProperty(d)&&(a.attributes[d]=parseInt(a.attributes[d],10))}),this.trigger("data",a);return}if(s=/^#EXT-X-DATERANGE:(.*)$/.exec(c),s&&s[1]){a={type:"tag",tagType:"daterange"},a.attributes=parseAttributes$1(s[1]),["ID","CLASS"].forEach(function(h){a.attributes.hasOwnProperty(h)&&(a.attributes[h]=String(a.attributes[h]))}),["START-DATE","END-DATE"].forEach(function(h){a.attributes.hasOwnProperty(h)&&(a.attributes[h]=new Date(a.attributes[h]))}),["DURATION","PLANNED-DURATION"].forEach(function(h){a.attributes.hasOwnProperty(h)&&(a.attributes[h]=parseFloat(a.attributes[h]))}),["END-ON-NEXT"].forEach(function(h){a.attributes.hasOwnProperty(h)&&(a.attributes[h]=/YES/i.test(a.attributes[h]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(h){a.attributes.hasOwnProperty(h)&&(a.attributes[h]=a.attributes[h].toString(16))});const d=/^X-([A-Z]+-)+[A-Z]+$/;for(const h in a.attributes){if(!d.test(h))continue;const b=/[0-9A-Fa-f]{6}/g.test(a.attributes[h]),tt=/^\d+(\.\d+)?$/.test(a.attributes[h]);a.attributes[h]=b?a.attributes[h].toString(16):tt?parseFloat(a.attributes[h]):String(a.attributes[h])}this.trigger("data",a);return}if(s=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(c),s){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(s=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(c),s){a={type:"tag",tagType:"content-steering"},a.attributes=parseAttributes$1(s[1]),this.trigger("data",a);return}this.trigger("data",{type:"tag",data:c.slice(4)})})}addParser({expression:e,customType:s,dataParser:a,segment:o}){typeof a!="function"&&(a=c=>c),this.customParsers.push(c=>{if(e.exec(c))return this.trigger("data",{type:"custom",data:a(c),customType:s,segment:o}),!0})}addTagMapper({expression:e,map:s}){const a=o=>e.test(o)?s(o):o;this.tagMappers.push(a)}}const camelCase=i=>i.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),camelCaseKeys=function(i){const e={};return Object.keys(i).forEach(function(s){e[camelCase(s)]=i[s]}),e},setHoldBack=function(i){const{serverControl:e,targetDuration:s,partTargetDuration:a}=i;if(!e)return;const o="#EXT-X-SERVER-CONTROL",c="holdBack",d="partHoldBack",h=s&&s*3,b=a&&a*2;s&&!e.hasOwnProperty(c)&&(e[c]=h,this.trigger("info",{message:`${o} defaulting HOLD-BACK to targetDuration * 3 (${h}).`})),h&&e[c]<h&&(this.trigger("warn",{message:`${o} clamping HOLD-BACK (${e[c]}) to targetDuration * 3 (${h})`}),e[c]=h),a&&!e.hasOwnProperty(d)&&(e[d]=a*3,this.trigger("info",{message:`${o} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[d]}).`})),a&&e[d]<b&&(this.trigger("warn",{message:`${o} clamping PART-HOLD-BACK (${e[d]}) to partTargetDuration * 2 (${b}).`}),e[d]=b)};class Parser extends Stream{constructor(){super(),this.lineStream=new LineStream,this.parseStream=new ParseStream,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const e=this,s=[];let a={},o,c,d=!1;const h=function(){},b={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},tt="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let nt=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let ft=0,yt=0;const Tt={};this.on("end",()=>{a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&c&&(a.key=c),!a.timeline&&typeof nt=="number"&&(a.timeline=nt),this.manifest.preloadSegment=a)}),this.parseStream.on("data",function(gt){let St,wt;({tag(){({version(){gt.version&&(this.manifest.version=gt.version)},"allow-cache"(){this.manifest.allowCache=gt.allowed,"allowed"in gt||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const Et={};"length"in gt&&(a.byterange=Et,Et.length=gt.length,"offset"in gt||(gt.offset=ft)),"offset"in gt&&(a.byterange=Et,Et.offset=gt.offset),ft=Et.offset+Et.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),gt.title&&(a.title=gt.title),gt.duration>0&&(a.duration=gt.duration),gt.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(!gt.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(gt.attributes.METHOD==="NONE"){c=null;return}if(!gt.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(gt.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:gt.attributes};return}if(gt.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:gt.attributes.URI};return}if(gt.attributes.KEYFORMAT===tt){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(gt.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(gt.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),gt.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(gt.attributes.KEYID&&gt.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:gt.attributes.KEYFORMAT,keyId:gt.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array$1(gt.attributes.URI.split(",")[1])};return}gt.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:gt.attributes.METHOD||"AES-128",uri:gt.attributes.URI},typeof gt.attributes.IV<"u"&&(c.iv=gt.attributes.IV)},"media-sequence"(){if(!isFinite(gt.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+gt.number});return}this.manifest.mediaSequence=gt.number},"discontinuity-sequence"(){if(!isFinite(gt.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+gt.number});return}this.manifest.discontinuitySequence=gt.number,nt=gt.number},"playlist-type"(){if(!/VOD|EVENT/.test(gt.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+gt.playlist});return}this.manifest.playlistType=gt.playlistType},map(){o={},gt.uri&&(o.uri=gt.uri),gt.byterange&&(o.byterange=gt.byterange),c&&(o.key=c)},"stream-inf"(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||b,!gt.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),_extends$2(a.attributes,gt.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||b,!(gt.attributes&&gt.attributes.TYPE&&gt.attributes["GROUP-ID"]&&gt.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const Et=this.manifest.mediaGroups[gt.attributes.TYPE];Et[gt.attributes["GROUP-ID"]]=Et[gt.attributes["GROUP-ID"]]||{},St=Et[gt.attributes["GROUP-ID"]],wt={default:/yes/i.test(gt.attributes.DEFAULT)},wt.default?wt.autoselect=!0:wt.autoselect=/yes/i.test(gt.attributes.AUTOSELECT),gt.attributes.LANGUAGE&&(wt.language=gt.attributes.LANGUAGE),gt.attributes.URI&&(wt.uri=gt.attributes.URI),gt.attributes["INSTREAM-ID"]&&(wt.instreamId=gt.attributes["INSTREAM-ID"]),gt.attributes.CHARACTERISTICS&&(wt.characteristics=gt.attributes.CHARACTERISTICS),gt.attributes.FORCED&&(wt.forced=/yes/i.test(gt.attributes.FORCED)),St[gt.attributes.NAME]=wt},discontinuity(){nt+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=gt.dateTimeString,this.manifest.dateTimeObject=gt.dateTimeObject),a.dateTimeString=gt.dateTimeString,a.dateTimeObject=gt.dateTimeObject;const{lastProgramDateTime:Et}=this;this.lastProgramDateTime=new Date(gt.dateTimeString).getTime(),Et===null&&this.manifest.segments.reduceRight((vt,xt)=>(xt.programDateTime=vt-xt.duration*1e3,xt.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(gt.duration)||gt.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+gt.duration});return}this.manifest.targetDuration=gt.duration,setHoldBack.call(this,this.manifest)},start(){if(!gt.attributes||isNaN(gt.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:gt.attributes["TIME-OFFSET"],precise:gt.attributes.PRECISE}},"cue-out"(){a.cueOut=gt.data},"cue-out-cont"(){a.cueOutCont=gt.data},"cue-in"(){a.cueIn=gt.data},skip(){this.manifest.skip=camelCaseKeys(gt.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",gt.attributes,["SKIPPED-SEGMENTS"])},part(){d=!0;const Et=this.manifest.segments.length,vt=camelCaseKeys(gt.attributes);a.parts=a.parts||[],a.parts.push(vt),vt.byterange&&(vt.byterange.hasOwnProperty("offset")||(vt.byterange.offset=yt),yt=vt.byterange.offset+vt.byterange.length);const xt=a.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${xt} for segment #${Et}`,gt.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((At,kt)=>{At.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${kt} lacks required attribute(s): LAST-PART`})})},"server-control"(){const Et=this.manifest.serverControl=camelCaseKeys(gt.attributes);Et.hasOwnProperty("canBlockReload")||(Et.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),setHoldBack.call(this,this.manifest),Et.canSkipDateranges&&!Et.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const Et=this.manifest.segments.length,vt=camelCaseKeys(gt.attributes),xt=vt.type&&vt.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(vt),vt.byterange&&(vt.byterange.hasOwnProperty("offset")||(vt.byterange.offset=xt?yt:0,xt&&(yt=vt.byterange.offset+vt.byterange.length)));const At=a.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${At} for segment #${Et}`,gt.attributes,["TYPE","URI"]),!!vt.type)for(let kt=0;kt<a.preloadHints.length-1;kt++){const It=a.preloadHints[kt];It.type&&It.type===vt.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${At} for segment #${Et} has the same TYPE ${vt.type} as preload hint #${kt}`})}},"rendition-report"(){const Et=camelCaseKeys(gt.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(Et);const vt=this.manifest.renditionReports.length-1,xt=["LAST-MSN","URI"];d&&xt.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${vt}`,gt.attributes,xt)},"part-inf"(){this.manifest.partInf=camelCaseKeys(gt.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",gt.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),setHoldBack.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(camelCaseKeys(gt.attributes));const Et=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${Et}`,gt.attributes,["ID","START-DATE"]);const vt=this.manifest.dateRanges[Et];vt.endDate&&vt.startDate&&new Date(vt.endDate)<new Date(vt.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),vt.duration&&vt.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),vt.plannedDuration&&vt.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const xt=!!vt.endOnNext;if(xt&&!vt.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),xt&&(vt.duration||vt.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),vt.duration&&vt.endDate){const kt=vt.startDate.getTime()+vt.duration*1e3;this.manifest.dateRanges[Et].endDate=new Date(kt)}if(!Tt[vt.id])Tt[vt.id]=vt;else{for(const kt in Tt[vt.id])if(vt[kt]&&JSON.stringify(Tt[vt.id][kt])!==JSON.stringify(vt[kt])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const At=this.manifest.dateRanges.findIndex(kt=>kt.id===vt.id);this.manifest.dateRanges[At]=_extends$2(this.manifest.dateRanges[At],vt),Tt[vt.id]=_extends$2(Tt[vt.id],vt),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=camelCaseKeys(gt.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",gt.attributes,["SERVER-URI"])}}[gt.tagType]||h).call(e)},uri(){a.uri=gt.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),c&&(a.key=c),a.timeline=nt,o&&(a.map=o),yt=0,this.lastProgramDateTime!==null&&(a.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=a.duration*1e3),a={}},comment(){},custom(){gt.segment?(a.custom=a.custom||{},a.custom[gt.customType]=gt.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[gt.customType]=gt.data)}})[gt.type].call(e)})}warnOnMissingAttributes_(e,s,a){const o=[];a.forEach(function(c){s.hasOwnProperty(c)||o.push(c)}),o.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${o.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},mediaTypes=["video","audio","text"],upperMediaTypes=["Video","Audio","Text"],translateLegacyCodec=function i(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(s,a,o){var c=("00"+Number(a).toString(16)).slice(-2),d=("00"+Number(o).toString(16)).slice(-2);return"avc1."+c+"00"+d})},parseCodecs=function i(e){e===void 0&&(e="");var s=e.split(","),a=[];return s.forEach(function(o){o=o.trim();var c;mediaTypes.forEach(function(d){var h=regexs[d].exec(o.toLowerCase());if(!(!h||h.length<=1)){c=d;var b=o.substring(0,h[1].length),tt=o.replace(b,"");a.push({type:b,details:tt,mediaType:d})}}),c||a.push({type:o,details:"",mediaType:"unknown"})}),a},codecsFromDefault=function i(e,s){if(!e.mediaGroups.AUDIO||!s)return null;var a=e.mediaGroups.AUDIO[s];if(!a)return null;for(var o in a){var c=a[o];if(c.default&&c.playlists)return parseCodecs(c.playlists[0].attributes.CODECS)}return null},isAudioCodec=function i(e){return e===void 0&&(e=""),regexs.audio.test(e.trim().toLowerCase())},isTextCodec=function i(e){return e===void 0&&(e=""),regexs.text.test(e.trim().toLowerCase())},getMimeForCodec=function i(e){if(!(!e||typeof e!="string")){var s=e.toLowerCase().split(",").map(function(c){return translateLegacyCodec(c.trim())}),a="video";s.length===1&&isAudioCodec(s[0])?a="audio":s.length===1&&isTextCodec(s[0])&&(a="application");var o="mp4";return s.every(function(c){return regexs.mp4.test(c)})?o="mp4":s.every(function(c){return regexs.webm.test(c)})?o="webm":s.every(function(c){return regexs.ogg.test(c)})&&(o="ogg"),a+"/"+o+';codecs="'+e+'"'}},browserSupportsCodec=function i(e){return e===void 0&&(e=""),window$1$1.MediaSource&&window$1$1.MediaSource.isTypeSupported&&window$1$1.MediaSource.isTypeSupported(getMimeForCodec(e))||!1},muxerSupportsCodec=function i(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(s){s=s.trim();for(var a=0;a<upperMediaTypes.length;a++){var o=upperMediaTypes[a];if(regexs["muxer"+o].test(s))return!0}return!1})},DEFAULT_AUDIO_CODEC="mp4a.40.2",DEFAULT_VIDEO_CODEC="avc1.4d400d",MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,DASH_REGEX=/^application\/dash\+xml/i,simpleTypeFromSourceType=function i(e){return MPEGURL_REGEX.test(e)?"hls":DASH_REGEX.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},countBits=function i(e){return e.toString(2).length},countBytes=function i(e){return Math.ceil(countBits(e)/8)},isArrayBufferView=function i(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},isTypedArray=function i(e){return isArrayBufferView(e)},toUint8=function i(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!isTypedArray(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},BigInt=window$1$1.BigInt||Number,BYTE_TABLE=[BigInt("0x1"),BigInt("0x100"),BigInt("0x10000"),BigInt("0x1000000"),BigInt("0x100000000"),BigInt("0x10000000000"),BigInt("0x1000000000000"),BigInt("0x100000000000000"),BigInt("0x10000000000000000")];(function(){var i=new Uint16Array([65484]),e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var bytesToNumber=function i(e,s){var a=s===void 0?{}:s,o=a.signed,c=o===void 0?!1:o,d=a.le,h=d===void 0?!1:d;e=toUint8(e);var b=h?"reduce":"reduceRight",tt=e[b]?e[b]:Array.prototype[b],nt=tt.call(e,function(yt,Tt,gt){var St=h?gt:Math.abs(gt+1-e.length);return yt+BigInt(Tt)*BYTE_TABLE[St]},BigInt(0));if(c){var ft=BYTE_TABLE[e.length]/BigInt(2)-BigInt(1);nt=BigInt(nt),nt>ft&&(nt-=ft,nt-=ft,nt-=BigInt(2))}return Number(nt)},numberToBytes=function i(e,s){var a={},o=a.le,c=o===void 0?!1:o;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=BigInt(e);for(var d=countBytes(e),h=new Uint8Array(new ArrayBuffer(d)),b=0;b<d;b++){var tt=c?b:Math.abs(b+1-h.length);h[tt]=Number(e/BYTE_TABLE[b]&BigInt(255)),e<0&&(h[tt]=Math.abs(~h[tt]),h[tt]-=b===0?1:2)}return h},stringToBytes=function i(e,s){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;s||(e=unescape(encodeURIComponent(e)));for(var a=new Uint8Array(e.length),o=0;o<e.length;o++)a[o]=e.charCodeAt(o);return a},concatTypedArrays=function i(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];if(s=s.filter(function(h){return h&&(h.byteLength||h.length)&&typeof h!="string"}),s.length<=1)return toUint8(s[0]);var o=s.reduce(function(h,b,tt){return h+(b.byteLength||b.length)},0),c=new Uint8Array(o),d=0;return s.forEach(function(h){h=toUint8(h),c.set(h,d),d+=h.byteLength}),c},bytesMatch=function i(e,s,a){var o=a===void 0?{}:a,c=o.offset,d=c===void 0?0:c,h=o.mask,b=h===void 0?[]:h;e=toUint8(e),s=toUint8(s);var tt=s.every?s.every:Array.prototype.every;return s.length&&e.length-d>=s.length&&tt.call(s,function(nt,ft){var yt=b[ft]?b[ft]&e[d+ft]:e[d+ft];return nt===yt})},forEachMediaGroup$1=function i(e,s,a){s.forEach(function(o){for(var c in e.mediaGroups[o])for(var d in e.mediaGroups[o][c]){var h=e.mediaGroups[o][c][d];a(h,o,c,d)}})},atob=function i(e){return window$1$1.atob?window$1$1.atob(e):Buffer.from(e,"base64").toString("binary")};function decodeB64ToUint8Array(i){for(var e=atob(i),s=new Uint8Array(e.length),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s}var dom$1={},conventions$2={};function find$1(i,e,s){if(s===void 0&&(s=Array.prototype),i&&typeof s.find=="function")return s.find.call(i,e);for(var a=0;a<i.length;a++)if(Object.prototype.hasOwnProperty.call(i,a)){var o=i[a];if(e.call(void 0,o,a,i))return o}}function freeze(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}function assign(i,e){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(i){return i===MIME_TYPE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),NAMESPACE$3=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===NAMESPACE$3.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});conventions$2.assign=assign;conventions$2.find=find$1;conventions$2.freeze=freeze;conventions$2.MIME_TYPE=MIME_TYPE;conventions$2.NAMESPACE=NAMESPACE$3;var conventions$1=conventions$2,find=conventions$1.find,NAMESPACE$2=conventions$1.NAMESPACE;function notEmptyString(i){return i!==""}function splitOnASCIIWhitespace(i){return i?i.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}function orderedSetReducer(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function toOrderedSet(i){if(!i)return[];var e=splitOnASCIIWhitespace(i);return Object.keys(e.reduce(orderedSetReducer,{}))}function arrayIncludes(i){return function(e){return i&&i.indexOf(e)!==-1}}function copy(i,e){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}function _extends(i,e){var s=i.prototype;if(!(s instanceof e)){let o=function(){};var a=o;o.prototype=e.prototype,o=new o,copy(s,o),i.prototype=s=o}s.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),s.constructor=i)}var NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={};ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(i,e){if(e instanceof Error)var s=e;else s=this,Error.call(this,ExceptionMessage[i]),this.message=ExceptionMessage[i],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return s.code=i,e&&(this.message=this.message+": "+e),s}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var s=[],a=0;a<this.length;a++)serializeToString(this[a],s,i,e);return s.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function LiveNodeList(i,e){this._node=i,this._refresh=e,_updateLiveList(this)}function _updateLiveList(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var s=i._refresh(i._node);if(__set__(i,"length",s.length),!i.$$length||s.length<i.$$length)for(var a=s.length;a in i;a++)Object.prototype.hasOwnProperty.call(i,a)&&delete i[a];copy(s,i),i._inc=e}}LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]||null};_extends(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(i,e){for(var s=i.length;s--;)if(i[s]===e)return s}function _addNamedNode(i,e,s,a){if(a?e[_findNodeIndex(e,a)]=s:e[e.length++]=s,i){s.ownerElement=i;var o=i.ownerDocument;o&&(a&&_onRemoveAttribute(o,i,a),_onAddAttribute(o,i,s))}}function _removeNamedNode(i,e,s){var a=_findNodeIndex(e,s);if(a>=0){for(var o=e.length-1;a<o;)e[a]=e[++a];if(e.length=o,i){var c=i.ownerDocument;c&&(_onRemoveAttribute(c,i,s),s.ownerElement=null)}}else throw new DOMException(NOT_FOUND_ERR,new Error(i.tagName+"@"+s))}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var s=this[e];if(s.nodeName==i)return s}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var s=this.getNamedItem(i.nodeName);return _addNamedNode(this._ownerElement,this,i,s),s},setNamedItemNS:function(i){var e=i.ownerElement,s;if(e&&e!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return s=this.getNamedItemNS(i.namespaceURI,i.localName),_addNamedNode(this._ownerElement,this,i,s),s},removeNamedItem:function(i){var e=this.getNamedItem(i);return _removeNamedNode(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var s=this.getNamedItemNS(i,e);return _removeNamedNode(this._ownerElement,this,s),s},getNamedItemNS:function(i,e){for(var s=this.length;s--;){var a=this[s];if(a.localName==e&&a.namespaceURI==i)return a}return null}};function DOMImplementation$1(){}DOMImplementation$1.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,s){var a=new Document;if(a.implementation=this,a.childNodes=new NodeList,a.doctype=s||null,s&&a.appendChild(s),e){var o=a.createElementNS(i,e);a.appendChild(o)}return a},createDocumentType:function(i,e,s){var a=new DocumentType;return a.name=i,a.nodeName=i,a.publicId=e||"",a.systemId=s||"",a}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return _insertBefore(this,i,e)},replaceChild:function(i,e){_insertBefore(this,i,e,assertPreReplacementValidityInDocument),e&&this.removeChild(e)},removeChild:function(i){return _removeChild(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return cloneNode(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==TEXT_NODE&&i.nodeType==TEXT_NODE?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var s=e._nsMap;if(s){for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&s[a]===i)return a}e=e.nodeType==ATTRIBUTE_NODE?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var s=e._nsMap;if(s&&Object.prototype.hasOwnProperty.call(s,i))return s[i];e=e.nodeType==ATTRIBUTE_NODE?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function _xmlEncoder(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(i,e){if(e(i))return!0;if(i=i.firstChild)do if(_visitNode(i,e))return!0;while(i=i.nextSibling)}function Document(){this.ownerDocument=this}function _onAddAttribute(i,e,s){i&&i._inc++;var a=s.namespaceURI;a===NAMESPACE$2.XMLNS&&(e._nsMap[s.prefix?s.localName:""]=s.value)}function _onRemoveAttribute(i,e,s,a){i&&i._inc++;var o=s.namespaceURI;o===NAMESPACE$2.XMLNS&&delete e._nsMap[s.prefix?s.localName:""]}function _onUpdateChild(i,e,s){if(i&&i._inc){i._inc++;var a=e.childNodes;if(s)a[a.length++]=s;else{for(var o=e.firstChild,c=0;o;)a[c++]=o,o=o.nextSibling;a.length=c,delete a[a.length]}}}function _removeChild(i,e){var s=e.previousSibling,a=e.nextSibling;return s?s.nextSibling=a:i.firstChild=a,a?a.previousSibling=s:i.lastChild=s,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,_onUpdateChild(i.ownerDocument,i),e}function hasValidParentNodeType(i){return i&&(i.nodeType===Node.DOCUMENT_NODE||i.nodeType===Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===Node.ELEMENT_NODE)}function hasInsertableNodeType(i){return i&&(isElementNode(i)||isTextNode$1(i)||isDocTypeNode(i)||i.nodeType===Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===Node.COMMENT_NODE||i.nodeType===Node.PROCESSING_INSTRUCTION_NODE)}function isDocTypeNode(i){return i&&i.nodeType===Node.DOCUMENT_TYPE_NODE}function isElementNode(i){return i&&i.nodeType===Node.ELEMENT_NODE}function isTextNode$1(i){return i&&i.nodeType===Node.TEXT_NODE}function isElementInsertionPossible(i,e){var s=i.childNodes||[];if(find(s,isElementNode)||isDocTypeNode(e))return!1;var a=find(s,isDocTypeNode);return!(e&&a&&s.indexOf(a)>s.indexOf(e))}function isElementReplacementPossible(i,e){var s=i.childNodes||[];function a(c){return isElementNode(c)&&c!==e}if(find(s,a))return!1;var o=find(s,isDocTypeNode);return!(e&&o&&s.indexOf(o)>s.indexOf(e))}function assertPreInsertionValidity1to5(i,e,s){if(!hasValidParentNodeType(i))throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+i.nodeType);if(s&&s.parentNode!==i)throw new DOMException(NOT_FOUND_ERR,"child not in parent");if(!hasInsertableNodeType(e)||isDocTypeNode(e)&&i.nodeType!==Node.DOCUMENT_NODE)throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function assertPreInsertionValidityInDocument(i,e,s){var a=i.childNodes||[],o=e.childNodes||[];if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var c=o.filter(isElementNode);if(c.length>1||find(o,isTextNode$1))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(c.length===1&&!isElementInsertionPossible(i,s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(e)&&!isElementInsertionPossible(i,s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(e)){if(find(a,isDocTypeNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var d=find(a,isElementNode);if(s&&a.indexOf(d)<a.indexOf(s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!s&&d)throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(i,e,s){var a=i.childNodes||[],o=e.childNodes||[];if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var c=o.filter(isElementNode);if(c.length>1||find(o,isTextNode$1))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(c.length===1&&!isElementReplacementPossible(i,s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(e)&&!isElementReplacementPossible(i,s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(e)){let b=function(tt){return isDocTypeNode(tt)&&tt!==s};var h=b;if(find(a,b))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var d=find(a,isElementNode);if(s&&a.indexOf(d)<a.indexOf(s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function _insertBefore(i,e,s,a){assertPreInsertionValidity1to5(i,e,s),i.nodeType===Node.DOCUMENT_NODE&&(a||assertPreInsertionValidityInDocument)(i,e,s);var o=e.parentNode;if(o&&o.removeChild(e),e.nodeType===DOCUMENT_FRAGMENT_NODE){var c=e.firstChild;if(c==null)return e;var d=e.lastChild}else c=d=e;var h=s?s.previousSibling:i.lastChild;c.previousSibling=h,d.nextSibling=s,h?h.nextSibling=c:i.firstChild=c,s==null?i.lastChild=d:s.previousSibling=d;do c.parentNode=i;while(c!==d&&(c=c.nextSibling));return _onUpdateChild(i.ownerDocument||i,i),e.nodeType==DOCUMENT_FRAGMENT_NODE&&(e.firstChild=e.lastChild=null),e}function _appendSingleChild(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,_onUpdateChild(i.ownerDocument,i,e),e}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==DOCUMENT_FRAGMENT_NODE){for(var s=i.firstChild;s;){var a=s.nextSibling;this.insertBefore(s,e),s=a}return i}return _insertBefore(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===ELEMENT_NODE&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),_removeChild(this,i)},replaceChild:function(i,e){_insertBefore(this,i,e,assertPreReplacementValidityInDocument),i.ownerDocument=this,e&&this.removeChild(e),isElementNode(i)&&(this.documentElement=i)},importNode:function(i,e){return importNode(this,i,e)},getElementById:function(i){var e=null;return _visitNode(this.documentElement,function(s){if(s.nodeType==ELEMENT_NODE&&s.getAttribute("id")==i)return e=s,!0}),e},getElementsByClassName:function(i){var e=toOrderedSet(i);return new LiveNodeList(this,function(s){var a=[];return e.length>0&&_visitNode(s.documentElement,function(o){if(o!==s&&o.nodeType===ELEMENT_NODE){var c=o.getAttribute("class");if(c){var d=i===c;if(!d){var h=toOrderedSet(c);d=e.every(arrayIncludes(h))}d&&a.push(o)}}}),a})},createElement:function(i){var e=new Element;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new NodeList;var s=e.attributes=new NamedNodeMap;return s._ownerElement=e,e},createDocumentFragment:function(){var i=new DocumentFragment;return i.ownerDocument=this,i.childNodes=new NodeList,i},createTextNode:function(i){var e=new Text;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new Comment;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new CDATASection;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var s=new ProcessingInstruction;return s.ownerDocument=this,s.tagName=s.nodeName=s.target=i,s.nodeValue=s.data=e,s},createAttribute:function(i){var e=new Attr;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new EntityReference;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var s=new Element,a=e.split(":"),o=s.attributes=new NamedNodeMap;return s.childNodes=new NodeList,s.ownerDocument=this,s.nodeName=e,s.tagName=e,s.namespaceURI=i,a.length==2?(s.prefix=a[0],s.localName=a[1]):s.localName=e,o._ownerElement=s,s},createAttributeNS:function(i,e){var s=new Attr,a=e.split(":");return s.ownerDocument=this,s.nodeName=e,s.name=e,s.namespaceURI=i,s.specified=!0,a.length==2?(s.prefix=a[0],s.localName=a[1]):s.localName=e,s}};_extends(Document,Node);function Element(){this._nsMap={}}Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var s=this.ownerDocument.createAttribute(i);s.value=s.nodeValue=""+e,this.setAttributeNode(s)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(i,null):_appendSingleChild(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var s=this.getAttributeNodeNS(i,e);s&&this.removeAttributeNode(s)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var s=this.getAttributeNodeNS(i,e);return s&&s.value||""},setAttributeNS:function(i,e,s){var a=this.ownerDocument.createAttributeNS(i,e);a.value=a.nodeValue=""+s,this.setAttributeNode(a)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new LiveNodeList(this,function(e){var s=[];return _visitNode(e,function(a){a!==e&&a.nodeType==ELEMENT_NODE&&(i==="*"||a.tagName==i)&&s.push(a)}),s})},getElementsByTagNameNS:function(i,e){return new LiveNodeList(this,function(s){var a=[];return _visitNode(s,function(o){o!==s&&o.nodeType===ELEMENT_NODE&&(i==="*"||o.namespaceURI===i)&&(e==="*"||o.localName==e)&&a.push(o)}),a})}};Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS;_extends(Element,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,s){var a=this.data.substring(0,i),o=this.data.substring(i+e);s=a+s+o,this.nodeValue=this.data=s,this.length=s.length}};_extends(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(i){var e=this.data,s=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var a=this.ownerDocument.createTextNode(s);return this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling),a}};_extends(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(i,e,s){return nodeSerializeToString.call(i,e,s)};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(i,e){var s=[],a=this.nodeType==9&&this.documentElement||this,o=a.prefix,c=a.namespaceURI;if(c&&o==null){var o=a.lookupPrefix(c);if(o==null)var d=[{namespace:c,prefix:null}]}return serializeToString(this,s,i,e,d),s.join("")}function needNamespaceDefine(i,e,s){var a=i.prefix||"",o=i.namespaceURI;if(!o||a==="xml"&&o===NAMESPACE$2.XML||o===NAMESPACE$2.XMLNS)return!1;for(var c=s.length;c--;){var d=s[c];if(d.prefix===a)return d.namespace!==o}return!0}function addSerializedAttribute(i,e,s){i.push(" ",e,'="',s.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(i,e,s,a,o){if(o||(o=[]),a)if(i=a(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case ELEMENT_NODE:var c=i.attributes,d=c.length,Et=i.firstChild,h=i.tagName;s=NAMESPACE$2.isHTML(i.namespaceURI)||s;var b=h;if(!s&&!i.prefix&&i.namespaceURI){for(var tt,nt=0;nt<c.length;nt++)if(c.item(nt).name==="xmlns"){tt=c.item(nt).value;break}if(!tt)for(var ft=o.length-1;ft>=0;ft--){var yt=o[ft];if(yt.prefix===""&&yt.namespace===i.namespaceURI){tt=yt.namespace;break}}if(tt!==i.namespaceURI)for(var ft=o.length-1;ft>=0;ft--){var yt=o[ft];if(yt.namespace===i.namespaceURI){yt.prefix&&(b=yt.prefix+":"+h);break}}}e.push("<",b);for(var Tt=0;Tt<d;Tt++){var gt=c.item(Tt);gt.prefix=="xmlns"?o.push({prefix:gt.localName,namespace:gt.value}):gt.nodeName=="xmlns"&&o.push({prefix:"",namespace:gt.value})}for(var Tt=0;Tt<d;Tt++){var gt=c.item(Tt);if(needNamespaceDefine(gt,s,o)){var St=gt.prefix||"",wt=gt.namespaceURI;addSerializedAttribute(e,St?"xmlns:"+St:"xmlns",wt),o.push({prefix:St,namespace:wt})}serializeToString(gt,e,s,a,o)}if(h===b&&needNamespaceDefine(i,s,o)){var St=i.prefix||"",wt=i.namespaceURI;addSerializedAttribute(e,St?"xmlns:"+St:"xmlns",wt),o.push({prefix:St,namespace:wt})}if(Et||s&&!/^(?:meta|link|img|br|hr|input)$/i.test(h)){if(e.push(">"),s&&/^script$/i.test(h))for(;Et;)Et.data?e.push(Et.data):serializeToString(Et,e,s,a,o.slice()),Et=Et.nextSibling;else for(;Et;)serializeToString(Et,e,s,a,o.slice()),Et=Et.nextSibling;e.push("</",b,">")}else e.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var Et=i.firstChild;Et;)serializeToString(Et,e,s,a,o.slice()),Et=Et.nextSibling;return;case ATTRIBUTE_NODE:return addSerializedAttribute(e,i.name,i.value);case TEXT_NODE:return e.push(i.data.replace(/[<&>]/g,_xmlEncoder));case CDATA_SECTION_NODE:return e.push("<![CDATA[",i.data,"]]>");case COMMENT_NODE:return e.push("<!--",i.data,"-->");case DOCUMENT_TYPE_NODE:var vt=i.publicId,xt=i.systemId;if(e.push("<!DOCTYPE ",i.name),vt)e.push(" PUBLIC ",vt),xt&&xt!="."&&e.push(" ",xt),e.push(">");else if(xt&&xt!=".")e.push(" SYSTEM ",xt,">");else{var At=i.internalSubset;At&&e.push(" [",At,"]"),e.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return e.push("<?",i.target," ",i.data,"?>");case ENTITY_REFERENCE_NODE:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function importNode(i,e,s){var a;switch(e.nodeType){case ELEMENT_NODE:a=e.cloneNode(!1),a.ownerDocument=i;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:s=!0;break}if(a||(a=e.cloneNode(!1)),a.ownerDocument=i,a.parentNode=null,s)for(var o=e.firstChild;o;)a.appendChild(importNode(i,o,s)),o=o.nextSibling;return a}function cloneNode(i,e,s){var a=new e.constructor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=e[o];typeof c!="object"&&c!=a[o]&&(a[o]=c)}switch(e.childNodes&&(a.childNodes=new NodeList),a.ownerDocument=i,a.nodeType){case ELEMENT_NODE:var d=e.attributes,h=a.attributes=new NamedNodeMap,b=d.length;h._ownerElement=a;for(var tt=0;tt<b;tt++)a.setAttributeNode(cloneNode(i,d.item(tt),!0));break;case ATTRIBUTE_NODE:s=!0}if(s)for(var nt=e.firstChild;nt;)a.appendChild(cloneNode(i,nt,s)),nt=nt.nextSibling;return a}function __set__(i,e,s){i[e]=s}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var s=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&s.push(i(e)),e=e.nextSibling;return s.join("");default:return e.nodeValue}};var getTextContent=i;Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,s,a){e["$$"+s]=a}}}catch(i){}dom$1.DocumentType=DocumentType;dom$1.DOMException=DOMException;dom$1.DOMImplementation=DOMImplementation$1;dom$1.Element=Element;dom$1.Node=Node;dom$1.NodeList=NodeList;dom$1.XMLSerializer=XMLSerializer;var domParser={},entities$1={};(function(i){var e=conventions$2.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})(entities$1);var sax$1={},NAMESPACE$1=conventions$2.NAMESPACE,nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function ParseError$1(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError$1)}ParseError$1.prototype=new Error;ParseError$1.prototype.name=ParseError$1.name;function XMLReader$1(){}XMLReader$1.prototype={parse:function(i,e,s){var a=this.domBuilder;a.startDocument(),_copy(e,e={}),parse$1(i,e,s,a,this.errorHandler),a.endDocument()}};function parse$1(i,e,s,a,o){function c(Kt){if(Kt>65535){Kt-=65536;var Jt=55296+(Kt>>10),Mt=56320+(Kt&1023);return String.fromCharCode(Jt,Mt)}else return String.fromCharCode(Kt)}function d(Kt){var Jt=Kt.slice(1,-1);return Object.hasOwnProperty.call(s,Jt)?s[Jt]:Jt.charAt(0)==="#"?c(parseInt(Jt.substr(1).replace("x","0x"))):(o.error("entity not found:"+Kt),Kt)}function h(Kt){if(Kt>St){var Jt=i.substring(St,Kt).replace(/&#?\w+;/g,d);yt&&b(St),a.characters(Jt,0,Kt-St),St=Kt}}function b(Kt,Jt){for(;Kt>=nt&&(Jt=ft.exec(i));)tt=Jt.index,nt=tt+Jt[0].length,yt.lineNumber++;yt.columnNumber=Kt-tt+1}for(var tt=0,nt=0,ft=/.*(?:\r\n?|\n)|.*$/g,yt=a.locator,Tt=[{currentNSMap:e}],gt={},St=0;;){try{var wt=i.indexOf("<",St);if(wt<0){if(!i.substr(St).match(/^\s*$/)){var Et=a.doc,vt=Et.createTextNode(i.substr(St));Et.appendChild(vt),a.currentElement=vt}return}switch(wt>St&&h(wt),i.charAt(wt+1)){case"/":var qt=i.indexOf(">",wt+3),xt=i.substring(wt+2,qt).replace(/[ \t\n\r]+$/g,""),At=Tt.pop();qt<0?(xt=i.substring(wt+2).replace(/[\s<].*/,""),o.error("end tag name: "+xt+" is not complete:"+At.tagName),qt=wt+1+xt.length):xt.match(/\s</)&&(xt=xt.replace(/[\s<].*/,""),o.error("end tag name: "+xt+" maybe not complete"),qt=wt+1+xt.length);var kt=At.localNSMap,It=At.tagName==xt,Rt=It||At.tagName&&At.tagName.toLowerCase()==xt.toLowerCase();if(Rt){if(a.endElement(At.uri,At.localName,xt),kt)for(var Lt in kt)Object.prototype.hasOwnProperty.call(kt,Lt)&&a.endPrefixMapping(Lt);It||o.fatalError("end tag name: "+xt+" is not match the current start tagName:"+At.tagName)}else Tt.push(At);qt++;break;case"?":yt&&b(wt),qt=parseInstruction(i,wt,a);break;case"!":yt&&b(wt),qt=parseDCC(i,wt,a,o);break;default:yt&&b(wt);var jt=new ElementAttributes,Ft=Tt[Tt.length-1].currentNSMap,qt=parseElementStartPart(i,wt,jt,Ft,d,o),Xt=jt.length;if(!jt.closed&&fixSelfClosed(i,qt,jt.tagName,gt)&&(jt.closed=!0,s.nbsp||o.warning("unclosed xml attribute")),yt&&Xt){for(var Ut=copyLocator(yt,{}),Wt=0;Wt<Xt;Wt++){var an=jt[Wt];b(an.offset),an.locator=copyLocator(yt,{})}a.locator=Ut,appendElement$1(jt,a,Ft)&&Tt.push(jt),a.locator=yt}else appendElement$1(jt,a,Ft)&&Tt.push(jt);NAMESPACE$1.isHTML(jt.uri)&&!jt.closed?qt=parseHtmlSpecialContent(i,qt,jt.tagName,d,a):qt++}}catch(Kt){if(Kt instanceof ParseError$1)throw Kt;o.error("element parse error: "+Kt),qt=-1}qt>St?St=qt:h(Math.max(wt,St)+1)}}function copyLocator(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function parseElementStartPart(i,e,s,a,o,c){function d(yt,Tt,gt){s.attributeNames.hasOwnProperty(yt)&&c.fatalError("Attribute "+yt+" redefined"),s.addValue(yt,Tt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,o),gt)}for(var h,b,tt=++e,nt=S_TAG;;){var ft=i.charAt(tt);switch(ft){case"=":if(nt===S_ATTR)h=i.slice(e,tt),nt=S_EQ;else if(nt===S_ATTR_SPACE)nt=S_EQ;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(nt===S_EQ||nt===S_ATTR)if(nt===S_ATTR&&(c.warning('attribute value must after "="'),h=i.slice(e,tt)),e=tt+1,tt=i.indexOf(ft,e),tt>0)b=i.slice(e,tt),d(h,b,e-1),nt=S_ATTR_END;else throw new Error("attribute value no end '"+ft+"' match");else if(nt==S_ATTR_NOQUOT_VALUE)b=i.slice(e,tt),d(h,b,e),c.warning('attribute "'+h+'" missed start quot('+ft+")!!"),e=tt+1,nt=S_ATTR_END;else throw new Error('attribute value must after "="');break;case"/":switch(nt){case S_TAG:s.setTagName(i.slice(e,tt));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:nt=S_TAG_CLOSE,s.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:break;case S_ATTR_SPACE:s.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return c.error("unexpected end of input"),nt==S_TAG&&s.setTagName(i.slice(e,tt)),tt;case">":switch(nt){case S_TAG:s.setTagName(i.slice(e,tt));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:b=i.slice(e,tt),b.slice(-1)==="/"&&(s.closed=!0,b=b.slice(0,-1));case S_ATTR_SPACE:nt===S_ATTR_SPACE&&(b=h),nt==S_ATTR_NOQUOT_VALUE?(c.warning('attribute "'+b+'" missed quot(")!'),d(h,b,e)):((!NAMESPACE$1.isHTML(a[""])||!b.match(/^(?:disabled|checked|selected)$/i))&&c.warning('attribute "'+b+'" missed value!! "'+b+'" instead!!'),d(b,b,e));break;case S_EQ:throw new Error("attribute value missed!!")}return tt;case"":ft=" ";default:if(ft<=" ")switch(nt){case S_TAG:s.setTagName(i.slice(e,tt)),nt=S_TAG_SPACE;break;case S_ATTR:h=i.slice(e,tt),nt=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var b=i.slice(e,tt);c.warning('attribute "'+b+'" missed quot(")!!'),d(h,b,e);case S_ATTR_END:nt=S_TAG_SPACE;break}else switch(nt){case S_ATTR_SPACE:s.tagName,(!NAMESPACE$1.isHTML(a[""])||!h.match(/^(?:disabled|checked|selected)$/i))&&c.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),d(h,h,e),e=tt,nt=S_ATTR;break;case S_ATTR_END:c.warning('attribute space is required"'+h+'"!!');case S_TAG_SPACE:nt=S_ATTR,e=tt;break;case S_EQ:nt=S_ATTR_NOQUOT_VALUE,e=tt;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}tt++}}function appendElement$1(i,e,s){for(var a=i.tagName,o=null,ft=i.length;ft--;){var c=i[ft],d=c.qName,h=c.value,yt=d.indexOf(":");if(yt>0)var b=c.prefix=d.slice(0,yt),tt=d.slice(yt+1),nt=b==="xmlns"&&tt;else tt=d,b=null,nt=d==="xmlns"&&"";c.localName=tt,nt!==!1&&(o==null&&(o={},_copy(s,s={})),s[nt]=o[nt]=h,c.uri=NAMESPACE$1.XMLNS,e.startPrefixMapping(nt,h))}for(var ft=i.length;ft--;){c=i[ft];var b=c.prefix;b&&(b==="xml"&&(c.uri=NAMESPACE$1.XML),b!=="xmlns"&&(c.uri=s[b||""]))}var yt=a.indexOf(":");yt>0?(b=i.prefix=a.slice(0,yt),tt=i.localName=a.slice(yt+1)):(b=null,tt=i.localName=a);var Tt=i.uri=s[b||""];if(e.startElement(Tt,tt,a,i),i.closed){if(e.endElement(Tt,tt,a),o)for(b in o)Object.prototype.hasOwnProperty.call(o,b)&&e.endPrefixMapping(b)}else return i.currentNSMap=s,i.localNSMap=o,!0}function parseHtmlSpecialContent(i,e,s,a,o){if(/^(?:script|textarea)$/i.test(s)){var c=i.indexOf("</"+s+">",e),d=i.substring(e+1,c);if(/[&<]/.test(d))return/^script$/i.test(s)?(o.characters(d,0,d.length),c):(d=d.replace(/&#?\w+;/g,a),o.characters(d,0,d.length),c)}return e+1}function fixSelfClosed(i,e,s,a){var o=a[s];return o==null&&(o=i.lastIndexOf("</"+s+">"),o<e&&(o=i.lastIndexOf("</"+s)),a[s]=o),o<e}function _copy(i,e){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}function parseDCC(i,e,s,a){var o=i.charAt(e+2);switch(o){case"-":if(i.charAt(e+3)==="-"){var c=i.indexOf("-->",e+4);return c>e?(s.comment(i,e+4,c-e-4),c+3):(a.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var c=i.indexOf("]]>",e+9);return s.startCDATA(),s.characters(i,e+9,c-e-9),s.endCDATA(),c+3}var d=split(i,e),h=d.length;if(h>1&&/!doctype/i.test(d[0][0])){var b=d[1][0],tt=!1,nt=!1;h>3&&(/^public$/i.test(d[2][0])?(tt=d[3][0],nt=h>4&&d[4][0]):/^system$/i.test(d[2][0])&&(nt=d[3][0]));var ft=d[h-1];return s.startDTD(b,tt,nt),s.endDTD(),ft.index+ft[0].length}}return-1}function parseInstruction(i,e,s){var a=i.indexOf("?>",e);if(a){var o=i.substring(e,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return o?(o[0].length,s.processingInstruction(o[1],o[2]),a+2):-1}return-1}function ElementAttributes(){this.attributeNames={}}ElementAttributes.prototype={setTagName:function(i){if(!tagNamePattern.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,s){if(!tagNamePattern.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:s}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function split(i,e){var s,a=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=e,o.exec(i);s=o.exec(i);)if(a.push(s),s[1])return a}sax$1.XMLReader=XMLReader$1;sax$1.ParseError=ParseError$1;var conventions=conventions$2,dom=dom$1,entities=entities$1,sax=sax$1,DOMImplementation=dom.DOMImplementation,NAMESPACE=conventions.NAMESPACE,ParseError=sax.ParseError,XMLReader=sax.XMLReader;function normalizeLineEndings(i){return i.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function DOMParser$1(i){this.options=i||{locator:{}}}DOMParser$1.prototype.parseFromString=function(i,e){var s=this.options,a=new XMLReader,o=s.domBuilder||new DOMHandler,c=s.errorHandler,d=s.locator,h=s.xmlns||{},b=/\/x?html?$/.test(e),tt=b?entities.HTML_ENTITIES:entities.XML_ENTITIES;d&&o.setDocumentLocator(d),a.errorHandler=buildErrorHandler(c,o,d),a.domBuilder=s.domBuilder||o,b&&(h[""]=NAMESPACE.HTML),h.xml=h.xml||NAMESPACE.XML;var nt=s.normalizeLineEndings||normalizeLineEndings;return i&&typeof i=="string"?a.parse(nt(i),h,tt):a.errorHandler.error("invalid doc source"),o.doc};function buildErrorHandler(i,e,s){if(!i){if(e instanceof DOMHandler)return e;i=e}var a={},o=i instanceof Function;s=s||{};function c(d){var h=i[d];!h&&o&&(h=i.length==2?function(b){i(d,b)}:i),a[d]=h&&function(b){h("[xmldom "+d+"]	"+b+_locator(s))}||function(){}}return c("warning"),c("error"),c("fatalError"),a}function DOMHandler(){this.cdata=!1}function position(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=new DOMImplementation().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,s,a){var o=this.doc,c=o.createElementNS(i,s||e),d=a.length;appendElement(this,c),this.currentElement=c,this.locator&&position(this.locator,c);for(var h=0;h<d;h++){var i=a.getURI(h),b=a.getValue(h),s=a.getQName(h),tt=o.createAttributeNS(i,s);this.locator&&position(a.getLocator(h),tt),tt.value=tt.nodeValue=b,c.setAttributeNode(tt)}},endElement:function(i,e,s){var a=this.currentElement;a.tagName,this.currentElement=a.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var s=this.doc.createProcessingInstruction(i,e);this.locator&&position(this.locator,s),appendElement(this,s)},ignorableWhitespace:function(i,e,s){},characters:function(i,e,s){if(i=_toString.apply(this,arguments),i){if(this.cdata)var a=this.doc.createCDATASection(i);else var a=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(a):/^\s*$/.test(i)&&this.doc.appendChild(a),this.locator&&position(this.locator,a)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,s){i=_toString.apply(this,arguments);var a=this.doc.createComment(i);this.locator&&position(this.locator,a),appendElement(this,a)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,s){var a=this.doc.implementation;if(a&&a.createDocumentType){var o=a.createDocumentType(i,e,s);this.locator&&position(this.locator,o),appendElement(this,o),this.doc.doctype=o}},warning:function(i){console.warn("[xmldom warning]	"+i,_locator(this.locator))},error:function(i){console.error("[xmldom error]	"+i,_locator(this.locator))},fatalError:function(i){throw new ParseError(i,this.locator)}};function _locator(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function _toString(i,e,s){return typeof i=="string"?i.substr(e,s):i.length>=e+s||e?new java.lang.String(i,e,s)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){DOMHandler.prototype[i]=function(){return null}});function appendElement(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}domParser.__DOMHandler=DOMHandler;domParser.normalizeLineEndings=normalizeLineEndings;domParser.DOMParser=DOMParser$1;var DOMParser=domParser.DOMParser;/*! @name mpd-parser @version 1.3.0 @license Apache-2.0 */const isObject$1=i=>!!i&&typeof i=="object",merge$2=(...i)=>i.reduce((e,s)=>(typeof s!="object"||Object.keys(s).forEach(a=>{Array.isArray(e[a])&&Array.isArray(s[a])?e[a]=e[a].concat(s[a]):isObject$1(e[a])&&isObject$1(s[a])?e[a]=merge$2(e[a],s[a]):e[a]=s[a]}),e),{}),values$1=i=>Object.keys(i).map(e=>i[e]),range=(i,e)=>{const s=[];for(let a=i;a<e;a++)s.push(a);return s},flatten=i=>i.reduce((e,s)=>e.concat(s),[]),from=i=>{if(!i.length)return[];const e=[];for(let s=0;s<i.length;s++)e.push(i[s]);return e},findIndexes=(i,e)=>i.reduce((s,a,o)=>(a[e]&&s.push(o),s),[]),union=(i,e)=>values$1(i.reduce((s,a)=>(a.forEach(o=>{s[e(o)]=o}),s),{}));var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const urlTypeToSegment=({baseUrl:i="",source:e="",range:s="",indexRange:a=""})=>{const o={uri:e,resolvedUri:resolveUrl$1(i||"",e)};if(s||a){const d=(s||a).split("-");let h=window$1$1.BigInt?window$1$1.BigInt(d[0]):parseInt(d[0],10),b=window$1$1.BigInt?window$1$1.BigInt(d[1]):parseInt(d[1],10);h<Number.MAX_SAFE_INTEGER&&typeof h=="bigint"&&(h=Number(h)),b<Number.MAX_SAFE_INTEGER&&typeof b=="bigint"&&(b=Number(b));let tt;typeof b=="bigint"||typeof h=="bigint"?tt=window$1$1.BigInt(b)-window$1$1.BigInt(h)+window$1$1.BigInt(1):tt=b-h+1,typeof tt=="bigint"&&tt<Number.MAX_SAFE_INTEGER&&(tt=Number(tt)),o.byterange={length:tt,offset:h}}return o},byteRangeToString=i=>{let e;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=window$1$1.BigInt(i.offset)+window$1$1.BigInt(i.length)-window$1$1.BigInt(1):e=i.offset+i.length-1,`${i.offset}-${e}`},parseEndNumber=i=>(i&&typeof i!="number"&&(i=parseInt(i,10)),isNaN(i)?null:i),segmentRange={static(i){const{duration:e,timescale:s=1,sourceDuration:a,periodDuration:o}=i,c=parseEndNumber(i.endNumber),d=e/s;return typeof c=="number"?{start:0,end:c}:typeof o=="number"?{start:0,end:o/d}:{start:0,end:a/d}},dynamic(i){const{NOW:e,clientOffset:s,availabilityStartTime:a,timescale:o=1,duration:c,periodStart:d=0,minimumUpdatePeriod:h=0,timeShiftBufferDepth:b=1/0}=i,tt=parseEndNumber(i.endNumber),nt=(e+s)/1e3,ft=a+d,Tt=nt+h-ft,gt=Math.ceil(Tt*o/c),St=Math.floor((nt-ft-b)*o/c),wt=Math.floor((nt-ft)*o/c);return{start:Math.max(0,St),end:typeof tt=="number"?tt:Math.min(gt,wt)}}},toSegments=i=>e=>{const{duration:s,timescale:a=1,periodStart:o,startNumber:c=1}=i;return{number:c+e,duration:s/a,timeline:o,time:e*s}},parseByDuration=i=>{const{type:e,duration:s,timescale:a=1,periodDuration:o,sourceDuration:c}=i,{start:d,end:h}=segmentRange[e](i),b=range(d,h).map(toSegments(i));if(e==="static"){const tt=b.length-1,nt=typeof o=="number"?o:c;b[tt].duration=nt-s/a*tt}return b},segmentsFromBase=i=>{const{baseUrl:e,initialization:s={},sourceDuration:a,indexRange:o="",periodStart:c,presentationTime:d,number:h=0,duration:b}=i;if(!e)throw new Error(errors.NO_BASE_URL);const tt=urlTypeToSegment({baseUrl:e,source:s.sourceURL,range:s.range}),nt=urlTypeToSegment({baseUrl:e,source:e,indexRange:o});if(nt.map=tt,b){const ft=parseByDuration(i);ft.length&&(nt.duration=ft[0].duration,nt.timeline=ft[0].timeline)}else a&&(nt.duration=a,nt.timeline=c);return nt.presentationTime=d||c,nt.number=h,[nt]},addSidxSegmentsToPlaylist$1=(i,e,s)=>{const a=i.sidx.map?i.sidx.map:null,o=i.sidx.duration,c=i.timeline||0,d=i.sidx.byterange,h=d.offset+d.length,b=e.timescale,tt=e.references.filter(wt=>wt.referenceType!==1),nt=[],ft=i.endList?"static":"dynamic",yt=i.sidx.timeline;let Tt=yt,gt=i.mediaSequence||0,St;typeof e.firstOffset=="bigint"?St=window$1$1.BigInt(h)+e.firstOffset:St=h+e.firstOffset;for(let wt=0;wt<tt.length;wt++){const Et=e.references[wt],vt=Et.referencedSize,xt=Et.subsegmentDuration;let At;typeof St=="bigint"?At=St+window$1$1.BigInt(vt)-window$1$1.BigInt(1):At=St+vt-1;const kt=`${St}-${At}`,Rt=segmentsFromBase({baseUrl:s,timescale:b,timeline:c,periodStart:yt,presentationTime:Tt,number:gt,duration:xt,sourceDuration:o,indexRange:kt,type:ft})[0];a&&(Rt.map=a),nt.push(Rt),typeof St=="bigint"?St+=window$1$1.BigInt(vt):St+=vt,Tt+=xt/b,gt++}return i.segments=nt,i},SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"],TIME_FUDGE=1/60,getUniqueTimelineStarts=i=>union(i,({timeline:e})=>e).sort((e,s)=>e.timeline>s.timeline?1:-1),findPlaylistWithName=(i,e)=>{for(let s=0;s<i.length;s++)if(i[s].attributes.NAME===e)return i[s];return null},getMediaGroupPlaylists=i=>{let e=[];return forEachMediaGroup$1(i,SUPPORTED_MEDIA_TYPES,(s,a,o,c)=>{e=e.concat(s.playlists||[])}),e},updateMediaSequenceForPlaylist=({playlist:i,mediaSequence:e})=>{i.mediaSequence=e,i.segments.forEach((s,a)=>{s.number=i.mediaSequence+a})},updateSequenceNumbers=({oldPlaylists:i,newPlaylists:e,timelineStarts:s})=>{e.forEach(a=>{a.discontinuitySequence=s.findIndex(function({timeline:b}){return b===a.timeline});const o=findPlaylistWithName(i,a.attributes.NAME);if(!o||a.sidx)return;const c=a.segments[0],d=o.segments.findIndex(function(b){return Math.abs(b.presentationTime-c.presentationTime)<TIME_FUDGE});if(d===-1){updateMediaSequenceForPlaylist({playlist:a,mediaSequence:o.mediaSequence+o.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!o.segments.length&&a.timeline>o.timeline||o.segments.length&&a.timeline>o.segments[o.segments.length-1].timeline)&&a.discontinuitySequence--;return}o.segments[d].discontinuity&&!c.discontinuity&&(c.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),updateMediaSequenceForPlaylist({playlist:a,mediaSequence:o.segments[d].number})})},positionManifestOnTimeline=({oldManifest:i,newManifest:e})=>{const s=i.playlists.concat(getMediaGroupPlaylists(i)),a=e.playlists.concat(getMediaGroupPlaylists(e));return e.timelineStarts=getUniqueTimelineStarts([i.timelineStarts,e.timelineStarts]),updateSequenceNumbers({oldPlaylists:s,newPlaylists:a,timelineStarts:e.timelineStarts}),e},generateSidxKey=i=>i&&i.uri+"-"+byteRangeToString(i.byterange),mergeDiscontiguousPlaylists=i=>{const e=i.reduce(function(a,o){return a[o.attributes.baseUrl]||(a[o.attributes.baseUrl]=[]),a[o.attributes.baseUrl].push(o),a},{});let s=[];return Object.values(e).forEach(a=>{const o=values$1(a.reduce((c,d)=>{const h=d.attributes.id+(d.attributes.lang||"");return c[h]?(d.segments&&(d.segments[0]&&(d.segments[0].discontinuity=!0),c[h].segments.push(...d.segments)),d.attributes.contentProtection&&(c[h].attributes.contentProtection=d.attributes.contentProtection)):(c[h]=d,c[h].attributes.timelineStarts=[]),c[h].attributes.timelineStarts.push({start:d.attributes.periodStart,timeline:d.attributes.periodStart}),c},{}));s=s.concat(o)}),s.map(a=>(a.discontinuityStarts=findIndexes(a.segments||[],"discontinuity"),a))},addSidxSegmentsToPlaylist=(i,e)=>{const s=generateSidxKey(i.sidx),a=s&&e[s]&&e[s].sidx;return a&&addSidxSegmentsToPlaylist$1(i,a,i.sidx.resolvedUri),i},addSidxSegmentsToPlaylists=(i,e={})=>{if(!Object.keys(e).length)return i;for(const s in i)i[s]=addSidxSegmentsToPlaylist(i[s],e);return i},formatAudioPlaylist=({attributes:i,segments:e,sidx:s,mediaSequence:a,discontinuitySequence:o,discontinuityStarts:c},d)=>{const h={attributes:{NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuitySequence:o,discontinuityStarts:c,timelineStarts:i.timelineStarts,mediaSequence:a,segments:e};return i.contentProtection&&(h.contentProtection=i.contentProtection),i.serviceLocation&&(h.attributes.serviceLocation=i.serviceLocation),s&&(h.sidx=s),d&&(h.attributes.AUDIO="audio",h.attributes.SUBTITLES="subs"),h},formatVttPlaylist=({attributes:i,segments:e,mediaSequence:s,discontinuityStarts:a,discontinuitySequence:o})=>{typeof e>"u"&&(e=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);const c={NAME:i.id,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1};i.codecs&&(c.CODECS=i.codecs);const d={attributes:c,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:s,segments:e};return i.serviceLocation&&(d.attributes.serviceLocation=i.serviceLocation),d},organizeAudioPlaylists=(i,e={},s=!1)=>{let a;const o=i.reduce((c,d)=>{const h=d.attributes.role&&d.attributes.role.value||"",b=d.attributes.lang||"";let tt=d.attributes.label||"main";if(b&&!d.attributes.label){const ft=h?` (${h})`:"";tt=`${d.attributes.lang}${ft}`}c[tt]||(c[tt]={language:b,autoselect:!0,default:h==="main",playlists:[],uri:""});const nt=addSidxSegmentsToPlaylist(formatAudioPlaylist(d,s),e);return c[tt].playlists.push(nt),typeof a>"u"&&h==="main"&&(a=d,a.default=!0),c},{});if(!a){const c=Object.keys(o)[0];o[c].default=!0}return o},organizeVttPlaylists=(i,e={})=>i.reduce((s,a)=>{const o=a.attributes.label||a.attributes.lang||"text";return s[o]||(s[o]={language:o,default:!1,autoselect:!1,playlists:[],uri:""}),s[o].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(a),e)),s},{}),organizeCaptionServices=i=>i.reduce((e,s)=>(s&&s.forEach(a=>{const{channel:o,language:c}=a;e[c]={autoselect:!1,default:!1,instreamId:o,language:c},a.hasOwnProperty("aspectRatio")&&(e[c].aspectRatio=a.aspectRatio),a.hasOwnProperty("easyReader")&&(e[c].easyReader=a.easyReader),a.hasOwnProperty("3D")&&(e[c]["3D"]=a["3D"])}),e),{}),formatVideoPlaylist=({attributes:i,segments:e,sidx:s,discontinuityStarts:a})=>{const o={attributes:{NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuityStarts:a,timelineStarts:i.timelineStarts,segments:e};return i.frameRate&&(o.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(o.contentProtection=i.contentProtection),i.serviceLocation&&(o.attributes.serviceLocation=i.serviceLocation),s&&(o.sidx=s),o},videoOnly=({attributes:i})=>i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video",audioOnly=({attributes:i})=>i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio",vttOnly=({attributes:i})=>i.mimeType==="text/vtt"||i.contentType==="text",addMediaSequenceValues=(i,e)=>{i.forEach(s=>{s.mediaSequence=0,s.discontinuitySequence=e.findIndex(function({timeline:a}){return a===s.timeline}),s.segments&&s.segments.forEach((a,o)=>{a.number=o})})},flattenMediaGroupPlaylists=i=>i?Object.keys(i).reduce((e,s)=>{const a=i[s];return e.concat(a.playlists)},[]):[],toM3u8=({dashPlaylists:i,locations:e,contentSteering:s,sidxMapping:a={},previousManifest:o,eventStream:c})=>{if(!i.length)return{};const{sourceDuration:d,type:h,suggestedPresentationDelay:b,minimumUpdatePeriod:tt}=i[0].attributes,nt=mergeDiscontiguousPlaylists(i.filter(videoOnly)).map(formatVideoPlaylist),ft=mergeDiscontiguousPlaylists(i.filter(audioOnly)),yt=mergeDiscontiguousPlaylists(i.filter(vttOnly)),Tt=i.map(At=>At.attributes.captionServices).filter(Boolean),gt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:d,playlists:addSidxSegmentsToPlaylists(nt,a)};tt>=0&&(gt.minimumUpdatePeriod=tt*1e3),e&&(gt.locations=e),s&&(gt.contentSteering=s),h==="dynamic"&&(gt.suggestedPresentationDelay=b),c&&c.length>0&&(gt.eventStream=c);const St=gt.playlists.length===0,wt=ft.length?organizeAudioPlaylists(ft,a,St):null,Et=yt.length?organizeVttPlaylists(yt,a):null,vt=nt.concat(flattenMediaGroupPlaylists(wt),flattenMediaGroupPlaylists(Et)),xt=vt.map(({timelineStarts:At})=>At);return gt.timelineStarts=getUniqueTimelineStarts(xt),addMediaSequenceValues(vt,gt.timelineStarts),wt&&(gt.mediaGroups.AUDIO.audio=wt),Et&&(gt.mediaGroups.SUBTITLES.subs=Et),Tt.length&&(gt.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(Tt)),o?positionManifestOnTimeline({oldManifest:o,newManifest:gt}):gt},getLiveRValue=(i,e,s)=>{const{NOW:a,clientOffset:o,availabilityStartTime:c,timescale:d=1,periodStart:h=0,minimumUpdatePeriod:b=0}=i,tt=(a+o)/1e3,nt=c+h,yt=tt+b-nt;return Math.ceil((yt*d-e)/s)},parseByTimeline=(i,e)=>{const{type:s,minimumUpdatePeriod:a=0,media:o="",sourceDuration:c,timescale:d=1,startNumber:h=1,periodStart:b}=i,tt=[];let nt=-1;for(let ft=0;ft<e.length;ft++){const yt=e[ft],Tt=yt.d,gt=yt.r||0,St=yt.t||0;nt<0&&(nt=St),St&&St>nt&&(nt=St);let wt;if(gt<0){const xt=ft+1;xt===e.length?s==="dynamic"&&a>0&&o.indexOf("$Number$")>0?wt=getLiveRValue(i,nt,Tt):wt=(c*d-nt)/Tt:wt=(e[xt].t-nt)/Tt}else wt=gt+1;const Et=h+tt.length+wt;let vt=h+tt.length;for(;vt<Et;)tt.push({number:vt,duration:Tt/d,time:nt,timeline:b}),nt+=Tt,vt++}return tt},identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,identifierReplacement=i=>(e,s,a,o)=>{if(e==="$$")return"$";if(typeof i[s]>"u")return e;const c=""+i[s];return s==="RepresentationID"||(a?o=parseInt(o,10):o=1,c.length>=o)?c:`${new Array(o-c.length+1).join("0")}${c}`},constructTemplateUrl=(i,e)=>i.replace(identifierPattern,identifierReplacement(e)),parseTemplateInfo=(i,e)=>!i.duration&&!e?[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]:i.duration?parseByDuration(i):parseByTimeline(i,e),segmentsFromTemplate=(i,e)=>{const s={RepresentationID:i.id,Bandwidth:i.bandwidth||0},{initialization:a={sourceURL:"",range:""}}=i,o=urlTypeToSegment({baseUrl:i.baseUrl,source:constructTemplateUrl(a.sourceURL,s),range:a.range});return parseTemplateInfo(i,e).map(d=>{s.Number=d.number,s.Time=d.time;const h=constructTemplateUrl(i.media||"",s),b=i.timescale||1,tt=i.presentationTimeOffset||0,nt=i.periodStart+(d.time-tt)/b;return{uri:h,timeline:d.timeline,duration:d.duration,resolvedUri:resolveUrl$1(i.baseUrl||"",h),map:o,number:d.number,presentationTime:nt}})},SegmentURLToSegmentObject=(i,e)=>{const{baseUrl:s,initialization:a={}}=i,o=urlTypeToSegment({baseUrl:s,source:a.sourceURL,range:a.range}),c=urlTypeToSegment({baseUrl:s,source:e.media,range:e.mediaRange});return c.map=o,c},segmentsFromList=(i,e)=>{const{duration:s,segmentUrls:a=[],periodStart:o}=i;if(!s&&!e||s&&e)throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);const c=a.map(b=>SegmentURLToSegmentObject(i,b));let d;return s&&(d=parseByDuration(i)),e&&(d=parseByTimeline(i,e)),d.map((b,tt)=>{if(c[tt]){const nt=c[tt],ft=i.timescale||1,yt=i.presentationTimeOffset||0;return nt.timeline=b.timeline,nt.duration=b.duration,nt.number=b.number,nt.presentationTime=o+(b.time-yt)/ft,nt}}).filter(b=>b)},generateSegments=({attributes:i,segmentInfo:e})=>{let s,a;e.template?(a=segmentsFromTemplate,s=merge$2(i,e.template)):e.base?(a=segmentsFromBase,s=merge$2(i,e.base)):e.list&&(a=segmentsFromList,s=merge$2(i,e.list));const o={attributes:i};if(!a)return o;const c=a(s,e.segmentTimeline);if(s.duration){const{duration:d,timescale:h=1}=s;s.duration=d/h}else c.length?s.duration=c.reduce((d,h)=>Math.max(d,Math.ceil(h.duration)),0):s.duration=0;return o.attributes=s,o.segments=c,e.base&&s.indexRange&&(o.sidx=c[0],o.segments=[]),o},toPlaylists=i=>i.map(generateSegments),findChildren=(i,e)=>from(i.childNodes).filter(({tagName:s})=>s===e),getContent=i=>i.textContent.trim(),parseDivisionValue=i=>parseFloat(i.split("/").reduce((e,s)=>e/s)),parseDuration=i=>{const h=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!h)return 0;const[b,tt,nt,ft,yt,Tt]=h.slice(1);return parseFloat(b||0)*31536e3+parseFloat(tt||0)*2592e3+parseFloat(nt||0)*86400+parseFloat(ft||0)*3600+parseFloat(yt||0)*60+parseFloat(Tt||0)},parseDate=i=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)),parsers={mediaPresentationDuration(i){return parseDuration(i)},availabilityStartTime(i){return parseDate(i)/1e3},minimumUpdatePeriod(i){return parseDuration(i)},suggestedPresentationDelay(i){return parseDuration(i)},type(i){return i},timeShiftBufferDepth(i){return parseDuration(i)},start(i){return parseDuration(i)},width(i){return parseInt(i,10)},height(i){return parseInt(i,10)},bandwidth(i){return parseInt(i,10)},frameRate(i){return parseDivisionValue(i)},startNumber(i){return parseInt(i,10)},timescale(i){return parseInt(i,10)},presentationTimeOffset(i){return parseInt(i,10)},duration(i){const e=parseInt(i,10);return isNaN(e)?parseDuration(i):e},d(i){return parseInt(i,10)},t(i){return parseInt(i,10)},r(i){return parseInt(i,10)},presentationTime(i){return parseInt(i,10)},DEFAULT(i){return i}},parseAttributes=i=>i&&i.attributes?from(i.attributes).reduce((e,s)=>{const a=parsers[s.name]||parsers.DEFAULT;return e[s.name]=a(s.value),e},{}):{},keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},buildBaseUrls=(i,e)=>e.length?flatten(i.map(function(s){return e.map(function(a){const o=getContent(a),c=resolveUrl$1(s.baseUrl,o),d=merge$2(parseAttributes(a),{baseUrl:c});return c!==o&&!d.serviceLocation&&s.serviceLocation&&(d.serviceLocation=s.serviceLocation),d})})):i,getSegmentInformation=i=>{const e=findChildren(i,"SegmentTemplate")[0],s=findChildren(i,"SegmentList")[0],a=s&&findChildren(s,"SegmentURL").map(ft=>merge$2({tag:"SegmentURL"},parseAttributes(ft))),o=findChildren(i,"SegmentBase")[0],c=s||e,d=c&&findChildren(c,"SegmentTimeline")[0],h=s||o||e,b=h&&findChildren(h,"Initialization")[0],tt=e&&parseAttributes(e);tt&&b?tt.initialization=b&&parseAttributes(b):tt&&tt.initialization&&(tt.initialization={sourceURL:tt.initialization});const nt={template:tt,segmentTimeline:d&&findChildren(d,"S").map(ft=>parseAttributes(ft)),list:s&&merge$2(parseAttributes(s),{segmentUrls:a,initialization:parseAttributes(b)}),base:o&&merge$2(parseAttributes(o),{initialization:parseAttributes(b)})};return Object.keys(nt).forEach(ft=>{nt[ft]||delete nt[ft]}),nt},inheritBaseUrls=(i,e,s)=>a=>{const o=findChildren(a,"BaseURL"),c=buildBaseUrls(e,o),d=merge$2(i,parseAttributes(a)),h=getSegmentInformation(a);return c.map(b=>({segmentInfo:merge$2(s,h),attributes:merge$2(d,b)}))},generateKeySystemInformation=i=>i.reduce((e,s)=>{const a=parseAttributes(s);a.schemeIdUri&&(a.schemeIdUri=a.schemeIdUri.toLowerCase());const o=keySystemsMap[a.schemeIdUri];if(o){e[o]={attributes:a};const c=findChildren(s,"cenc:pssh")[0];if(c){const d=getContent(c);e[o].pssh=d&&decodeB64ToUint8Array(d)}}return e},{}),parseCaptionServiceMetadata=i=>{if(i.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(s=>{let a,o;return o=s,/^CC\d=/.test(s)?[a,o]=s.split("="):/^CC\d$/.test(s)&&(a=s),{channel:a,language:o}});if(i.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(s=>{const a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(s)){const[o,c=""]=s.split("=");a.channel=o,a.language=s,c.split(",").forEach(d=>{const[h,b]=d.split(":");h==="lang"?a.language=b:h==="er"?a.easyReader=Number(b):h==="war"?a.aspectRatio=Number(b):h==="3D"&&(a["3D"]=Number(b))})}else a.language=s;return a.channel&&(a.channel="SERVICE"+a.channel),a})},toEventStream=i=>flatten(findChildren(i.node,"EventStream").map(e=>{const s=parseAttributes(e),a=s.schemeIdUri;return findChildren(e,"Event").map(o=>{const c=parseAttributes(o),d=c.presentationTime||0,h=s.timescale||1,b=c.duration||0,tt=d/h+i.attributes.start;return{schemeIdUri:a,value:s.value,id:c.id,start:tt,end:tt+b/h,messageData:getContent(o)||c.messageData,contentEncoding:s.contentEncoding,presentationTimeOffset:s.presentationTimeOffset||0}})})),toRepresentations=(i,e,s)=>a=>{const o=parseAttributes(a),c=buildBaseUrls(e,findChildren(a,"BaseURL")),d=findChildren(a,"Role")[0],h={role:parseAttributes(d)};let b=merge$2(i,o,h);const tt=findChildren(a,"Accessibility")[0],nt=parseCaptionServiceMetadata(parseAttributes(tt));nt&&(b=merge$2(b,{captionServices:nt}));const ft=findChildren(a,"Label")[0];if(ft&&ft.childNodes.length){const wt=ft.childNodes[0].nodeValue.trim();b=merge$2(b,{label:wt})}const yt=generateKeySystemInformation(findChildren(a,"ContentProtection"));Object.keys(yt).length&&(b=merge$2(b,{contentProtection:yt}));const Tt=getSegmentInformation(a),gt=findChildren(a,"Representation"),St=merge$2(s,Tt);return flatten(gt.map(inheritBaseUrls(b,c,St)))},toAdaptationSets=(i,e)=>(s,a)=>{const o=buildBaseUrls(e,findChildren(s.node,"BaseURL")),c=merge$2(i,{periodStart:s.attributes.start});typeof s.attributes.duration=="number"&&(c.periodDuration=s.attributes.duration);const d=findChildren(s.node,"AdaptationSet"),h=getSegmentInformation(s.node);return flatten(d.map(toRepresentations(c,o,h)))},generateContentSteeringInformation=(i,e)=>{if(i.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!i.length)return null;const s=merge$2({serverURL:getContent(i[0])},parseAttributes(i[0]));return s.queryBeforeStart=s.queryBeforeStart==="true",s},getPeriodStart=({attributes:i,priorPeriodAttributes:e,mpdType:s})=>typeof i.start=="number"?i.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&s==="static"?0:null,inheritAttributes=(i,e={})=>{const{manifestUri:s="",NOW:a=Date.now(),clientOffset:o=0,eventHandler:c=function(){}}=e,d=findChildren(i,"Period");if(!d.length)throw new Error(errors.INVALID_NUMBER_OF_PERIOD);const h=findChildren(i,"Location"),b=parseAttributes(i),tt=buildBaseUrls([{baseUrl:s}],findChildren(i,"BaseURL")),nt=findChildren(i,"ContentSteering");b.type=b.type||"static",b.sourceDuration=b.mediaPresentationDuration||0,b.NOW=a,b.clientOffset=o,h.length&&(b.locations=h.map(getContent));const ft=[];return d.forEach((yt,Tt)=>{const gt=parseAttributes(yt),St=ft[Tt-1];gt.start=getPeriodStart({attributes:gt,priorPeriodAttributes:St?St.attributes:null,mpdType:b.type}),ft.push({node:yt,attributes:gt})}),{locations:b.locations,contentSteeringInfo:generateContentSteeringInformation(nt,c),representationInfo:flatten(ft.map(toAdaptationSets(b,tt))),eventStream:flatten(ft.map(toEventStream))}},stringToMpdXml=i=>{if(i==="")throw new Error(errors.DASH_EMPTY_MANIFEST);const e=new DOMParser;let s,a;try{s=e.parseFromString(i,"application/xml"),a=s&&s.documentElement.tagName==="MPD"?s.documentElement:null}catch{}if(!a||a&&a.getElementsByTagName("parsererror").length>0)throw new Error(errors.DASH_INVALID_XML);return a},parseUTCTimingScheme=i=>{const e=findChildren(i,"UTCTiming")[0];if(!e)return null;const s=parseAttributes(e);switch(s.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":s.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":s.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":s.method="DIRECT",s.value=Date.parse(s.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME)}return s},parse=(i,e={})=>{const s=inheritAttributes(stringToMpdXml(i),e),a=toPlaylists(s.representationInfo);return toM3u8({dashPlaylists:a,locations:s.locations,contentSteering:s.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:s.eventStream})},parseUTCTiming=i=>parseUTCTimingScheme(stringToMpdXml(i));var MAX_UINT32=Math.pow(2,32),getUint64$1=function(i){var e=new DataView(i.buffer,i.byteOffset,i.byteLength),s;return e.getBigUint64?(s=e.getBigUint64(0),s<Number.MAX_SAFE_INTEGER?Number(s):s):e.getUint32(0)*MAX_UINT32+e.getUint32(4)},numbers={getUint64:getUint64$1,MAX_UINT32},getUint64=numbers.getUint64,parseSidx=function(i){var e=new DataView(i.buffer,i.byteOffset,i.byteLength),s={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},a=12;s.version===0?(s.earliestPresentationTime=e.getUint32(a),s.firstOffset=e.getUint32(a+4),a+=8):(s.earliestPresentationTime=getUint64(i.subarray(a)),s.firstOffset=getUint64(i.subarray(a+8)),a+=16),a+=2;var o=e.getUint16(a);for(a+=2;o>0;a+=12,o--)s.references.push({referenceType:(i[a]&128)>>>7,referencedSize:e.getUint32(a)&2147483647,subsegmentDuration:e.getUint32(a+4),startsWithSap:!!(i[a+8]&128),sapType:(i[a+8]&112)>>>4,sapDeltaTime:e.getUint32(a+8)&268435455});return s},parseSidx_1=parseSidx;const parseSidx$1=getDefaultExportFromCjs(parseSidx_1);var ID3=toUint8([73,68,51]),getId3Size=function i(e,s){s===void 0&&(s=0),e=toUint8(e);var a=e[s+5],o=e[s+6]<<21|e[s+7]<<14|e[s+8]<<7|e[s+9],c=(a&16)>>4;return c?o+20:o+10},getId3Offset=function i(e,s){return s===void 0&&(s=0),e=toUint8(e),e.length-s<10||!bytesMatch(e,ID3,{offset:s})?s:(s+=getId3Size(e,s),i(e,s))},normalizePath$1=function i(e){return typeof e=="string"?stringToBytes(e):e},normalizePaths$1=function i(e){return Array.isArray(e)?e.map(function(s){return normalizePath$1(s)}):[normalizePath$1(e)]},findBox=function i(e,s,a){a===void 0&&(a=!1),s=normalizePaths$1(s),e=toUint8(e);var o=[];if(!s.length)return o;for(var c=0;c<e.length;){var d=(e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3])>>>0,h=e.subarray(c+4,c+8);if(d===0)break;var b=c+d;if(b>e.length){if(a)break;b=e.length}var tt=e.subarray(c+8,b);bytesMatch(h,s[0])&&(s.length===1?o.push(tt):o.push.apply(o,i(tt,s.slice(1),a))),c=b}return o},EBML_TAGS={EBML:toUint8([26,69,223,163]),DocType:toUint8([66,130]),Segment:toUint8([24,83,128,103]),SegmentInfo:toUint8([21,73,169,102]),Tracks:toUint8([22,84,174,107]),Track:toUint8([174]),TrackNumber:toUint8([215]),DefaultDuration:toUint8([35,227,131]),TrackEntry:toUint8([174]),TrackType:toUint8([131]),FlagDefault:toUint8([136]),CodecID:toUint8([134]),CodecPrivate:toUint8([99,162]),VideoTrack:toUint8([224]),AudioTrack:toUint8([225]),Cluster:toUint8([31,67,182,117]),Timestamp:toUint8([231]),TimestampScale:toUint8([42,215,177]),BlockGroup:toUint8([160]),BlockDuration:toUint8([155]),Block:toUint8([161]),SimpleBlock:toUint8([163])},LENGTH_TABLE=[128,64,32,16,8,4,2,1],getLength=function i(e){for(var s=1,a=0;a<LENGTH_TABLE.length&&!(e&LENGTH_TABLE[a]);a++)s++;return s},getvint=function i(e,s,a,o){a===void 0&&(a=!0),o===void 0&&(o=!1);var c=getLength(e[s]),d=e.subarray(s,s+c);return a&&(d=Array.prototype.slice.call(e,s,s+c),d[0]^=LENGTH_TABLE[c-1]),{length:c,value:bytesToNumber(d,{signed:o}),bytes:d}},normalizePath=function i(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(s){return i(s)}):typeof e=="number"?numberToBytes(e):e},normalizePaths=function i(e){return Array.isArray(e)?e.map(function(s){return normalizePath(s)}):[normalizePath(e)]},getInfinityDataSize=function i(e,s,a){if(a>=s.length)return s.length;var o=getvint(s,a,!1);if(bytesMatch(e.bytes,o.bytes))return a;var c=getvint(s,a+o.length);return i(e,s,a+c.length+c.value+o.length)},findEbml=function i(e,s){s=normalizePaths(s),e=toUint8(e);var a=[];if(!s.length)return a;for(var o=0;o<e.length;){var c=getvint(e,o,!1),d=getvint(e,o+c.length),h=o+c.length+d.length;d.value===127&&(d.value=getInfinityDataSize(c,e,h),d.value!==e.length&&(d.value-=h));var b=h+d.value>e.length?e.length:h+d.value,tt=e.subarray(h,b);bytesMatch(s[0],c.bytes)&&(s.length===1?a.push(tt):a=a.concat(i(tt,s.slice(1))));var nt=c.length+d.length+tt.length;o+=nt}return a},NAL_TYPE_ONE=toUint8([0,0,0,1]),NAL_TYPE_TWO=toUint8([0,0,1]),EMULATION_PREVENTION=toUint8([0,0,3]),discardEmulationPreventionBytes=function i(e){for(var s=[],a=1;a<e.length-2;)bytesMatch(e.subarray(a,a+3),EMULATION_PREVENTION)&&(s.push(a+2),a++),a++;if(s.length===0)return e;var o=e.length-s.length,c=new Uint8Array(o),d=0;for(a=0;a<o;d++,a++)d===s[0]&&(d++,s.shift()),c[a]=e[d];return c},findNal=function i(e,s,a,o){e=toUint8(e),a=[].concat(a);for(var c=0,d,h=0;c<e.length&&(h<o||d);){var b=void 0;if(bytesMatch(e.subarray(c),NAL_TYPE_ONE)?b=4:bytesMatch(e.subarray(c),NAL_TYPE_TWO)&&(b=3),!b){c++;continue}if(h++,d)return discardEmulationPreventionBytes(e.subarray(d,c));var tt=void 0;s==="h264"?tt=e[c+b]&31:s==="h265"&&(tt=e[c+b]>>1&63),a.indexOf(tt)!==-1&&(d=c+b),c+=b+(s==="h264"?1:2)}return e.subarray(0,0)},findH264Nal=function i(e,s,a){return findNal(e,"h264",s,a)},findH265Nal=function i(e,s,a){return findNal(e,"h265",s,a)},CONSTANTS={webm:toUint8([119,101,98,109]),matroska:toUint8([109,97,116,114,111,115,107,97]),flac:toUint8([102,76,97,67]),ogg:toUint8([79,103,103,83]),ac3:toUint8([11,119]),riff:toUint8([82,73,70,70]),avi:toUint8([65,86,73]),wav:toUint8([87,65,86,69]),"3gp":toUint8([102,116,121,112,51,103]),mp4:toUint8([102,116,121,112]),fmp4:toUint8([115,116,121,112]),mov:toUint8([102,116,121,112,113,116]),moov:toUint8([109,111,111,118]),moof:toUint8([109,111,111,102])},_isLikely={aac:function i(e){var s=getId3Offset(e);return bytesMatch(e,[255,16],{offset:s,mask:[255,22]})},mp3:function i(e){var s=getId3Offset(e);return bytesMatch(e,[255,2],{offset:s,mask:[255,6]})},webm:function i(e){var s=findEbml(e,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(s,CONSTANTS.webm)},mkv:function i(e){var s=findEbml(e,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(s,CONSTANTS.matroska)},mp4:function i(e){if(_isLikely["3gp"](e)||_isLikely.mov(e))return!1;if(bytesMatch(e,CONSTANTS.mp4,{offset:4})||bytesMatch(e,CONSTANTS.fmp4,{offset:4})||bytesMatch(e,CONSTANTS.moof,{offset:4})||bytesMatch(e,CONSTANTS.moov,{offset:4}))return!0},mov:function i(e){return bytesMatch(e,CONSTANTS.mov,{offset:4})},"3gp":function i(e){return bytesMatch(e,CONSTANTS["3gp"],{offset:4})},ac3:function i(e){var s=getId3Offset(e);return bytesMatch(e,CONSTANTS.ac3,{offset:s})},ts:function i(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var s=0;s+188<e.length&&s<188;){if(e[s]===71&&e[s+188]===71)return!0;s+=1}return!1},flac:function i(e){var s=getId3Offset(e);return bytesMatch(e,CONSTANTS.flac,{offset:s})},ogg:function i(e){return bytesMatch(e,CONSTANTS.ogg)},avi:function i(e){return bytesMatch(e,CONSTANTS.riff)&&bytesMatch(e,CONSTANTS.avi,{offset:8})},wav:function i(e){return bytesMatch(e,CONSTANTS.riff)&&bytesMatch(e,CONSTANTS.wav,{offset:8})},h264:function i(e){return findH264Nal(e,7,3).length},h265:function i(e){return findH265Nal(e,[32,33],3).length}},isLikelyTypes=Object.keys(_isLikely).filter(function(i){return i!=="ts"&&i!=="h264"&&i!=="h265"}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(i){var e=_isLikely[i];_isLikely[i]=function(s){return e(toUint8(s))}});var isLikely=_isLikely,detectContainerForBytes=function i(e){e=toUint8(e);for(var s=0;s<isLikelyTypes.length;s++){var a=isLikelyTypes[s];if(isLikely[a](e))return a}return""},isLikelyFmp4MediaSegment=function i(e){return findBox(e,["moof"]).length>0},ONE_SECOND_IN_TS=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds;secondsToVideoTs=function(i){return i*ONE_SECOND_IN_TS};secondsToAudioTs=function(i,e){return i*e};videoTsToSeconds=function(i){return i/ONE_SECOND_IN_TS};audioTsToSeconds=function(i,e){return i/e};audioTsToVideoTs=function(i,e){return secondsToVideoTs(audioTsToSeconds(i,e))};videoTsToAudioTs=function(i,e){return secondsToAudioTs(videoTsToSeconds(i),e)};metadataTsToSeconds=function(i,e,s){return videoTsToSeconds(s?i:i-e)};var clock={ONE_SECOND_IN_TS,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds};/**
 * @license
 * Video.js 8.12.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var version$6="8.12.0";const hooks_={},hooks=function(i,e){return hooks_[i]=hooks_[i]||[],e&&(hooks_[i]=hooks_[i].concat(e)),hooks_[i]},hook=function(i,e){hooks(i,e)},removeHook=function(i,e){const s=hooks(i).indexOf(e);return s<=-1?!1:(hooks_[i]=hooks_[i].slice(),hooks_[i].splice(s,1),!0)},hookOnce=function(i,e){hooks(i,[].concat(e).map(s=>{const a=(...o)=>(removeHook(i,a),s(...o));return a}))},FullscreenApi={prefixed:!0},apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],specApi=apiMap[0];let browserApi;for(let i=0;i<apiMap.length;i++)if(apiMap[i][1]in document$2){browserApi=apiMap[i];break}if(browserApi){for(let i=0;i<browserApi.length;i++)FullscreenApi[specApi[i]]=browserApi[i];FullscreenApi.prefixed=browserApi[0]!==specApi[0]}let history$1=[];const LogByTypeFactory=(i,e,s)=>(a,o,c)=>{const d=e.levels[o],h=new RegExp(`^(${d})$`);let b=i;if(a!=="log"&&c.unshift(a.toUpperCase()+":"),s&&(b=`%c${i}`,c.unshift(s)),c.unshift(b+":"),history$1){history$1.push([].concat(c));const nt=history$1.length-1e3;history$1.splice(0,nt>0?nt:0)}if(!window$1$1.console)return;let tt=window$1$1.console[a];!tt&&a==="debug"&&(tt=window$1$1.console.info||window$1$1.console.log),!(!tt||!d||!h.test(a))&&tt[Array.isArray(c)?"apply":"call"](window$1$1.console,c)};function createLogger$1(i,e=":",s=""){let a="info",o;const c=function(...d){o("log",a,d)};return o=LogByTypeFactory(i,c,s),c.createLogger=(d,h,b)=>{const tt=h!==void 0?h:e,nt=b!==void 0?b:s,ft=`${i} ${tt} ${d}`;return createLogger$1(ft,tt,nt)},c.createNewLogger=(d,h,b)=>createLogger$1(d,h,b),c.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},c.level=d=>{if(typeof d=="string"){if(!c.levels.hasOwnProperty(d))throw new Error(`"${d}" in not a valid log level`);a=d}return a},c.history=()=>history$1?[].concat(history$1):[],c.history.filter=d=>(history$1||[]).filter(h=>new RegExp(`.*${d}.*`).test(h[0])),c.history.clear=()=>{history$1&&(history$1.length=0)},c.history.disable=()=>{history$1!==null&&(history$1.length=0,history$1=null)},c.history.enable=()=>{history$1===null&&(history$1=[])},c.error=(...d)=>o("error",a,d),c.warn=(...d)=>o("warn",a,d),c.debug=(...d)=>o("debug",a,d),c}const log$1=createLogger$1("VIDEOJS"),createLogger=log$1.createLogger,toString=Object.prototype.toString,keys=function(i){return isObject(i)?Object.keys(i):[]};function each(i,e){keys(i).forEach(s=>e(i[s],s))}function reduce(i,e,s=0){return keys(i).reduce((a,o)=>e(a,i[o],o),s)}function isObject(i){return!!i&&typeof i=="object"}function isPlain(i){return isObject(i)&&toString.call(i)==="[object Object]"&&i.constructor===Object}function merge$1(...i){const e={};return i.forEach(s=>{s&&each(s,(a,o)=>{if(!isPlain(a)){e[o]=a;return}isPlain(e[o])||(e[o]={}),e[o]=merge$1(e[o],a)})}),e}function values(i={}){const e=[];for(const s in i)if(i.hasOwnProperty(s)){const a=i[s];e.push(a)}return e}function defineLazyProperty(i,e,s,a=!0){const o=d=>Object.defineProperty(i,e,{value:d,enumerable:!0,writable:!0}),c={configurable:!0,enumerable:!0,get(){const d=s();return o(d),d}};return a&&(c.set=o),Object.defineProperty(i,e,c)}var Obj=Object.freeze({__proto__:null,each,reduce,isObject,isPlain,merge:merge$1,values,defineLazyProperty});let IS_IPOD=!1,IOS_VERSION=null,IS_ANDROID=!1,ANDROID_VERSION,IS_FIREFOX=!1,IS_EDGE=!1,IS_CHROMIUM=!1,IS_CHROME=!1,CHROMIUM_VERSION=null,CHROME_VERSION=null,IE_VERSION=null,IS_SAFARI=!1,IS_WINDOWS=!1,IS_IPAD=!1,IS_IPHONE=!1,IS_TIZEN=!1,IS_WEBOS=!1,IS_SMART_TV=!1;const TOUCH_ENABLED=!!(isReal()&&("ontouchstart"in window$1$1||window$1$1.navigator.maxTouchPoints||window$1$1.DocumentTouch&&window$1$1.document instanceof window$1$1.DocumentTouch)),UAD=window$1$1.navigator&&window$1$1.navigator.userAgentData;UAD&&UAD.platform&&UAD.brands&&(IS_ANDROID=UAD.platform==="Android",IS_EDGE=!!UAD.brands.find(i=>i.brand==="Microsoft Edge"),IS_CHROMIUM=!!UAD.brands.find(i=>i.brand==="Chromium"),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=(UAD.brands.find(i=>i.brand==="Chromium")||{}).version||null,IS_WINDOWS=UAD.platform==="Windows");if(!IS_CHROMIUM){const i=window$1$1.navigator&&window$1$1.navigator.userAgent||"";IS_IPOD=/iPod/i.test(i),IOS_VERSION=function(){const e=i.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),IS_ANDROID=/Android/i.test(i),ANDROID_VERSION=function(){const e=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const s=e[1]&&parseFloat(e[1]),a=e[2]&&parseFloat(e[2]);return s&&a?parseFloat(e[1]+"."+e[2]):s||null}(),IS_FIREFOX=/Firefox/i.test(i),IS_EDGE=/Edg/i.test(i),IS_CHROMIUM=/Chrome/i.test(i)||/CriOS/i.test(i),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=function(){const e=i.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),IE_VERSION=function(){const e=/MSIE\s(\d+)\.\d/.exec(i);let s=e&&parseFloat(e[1]);return!s&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)&&(s=11),s}(),IS_TIZEN=/Tizen/i.test(i),IS_WEBOS=/Web0S/i.test(i),IS_SMART_TV=IS_TIZEN||IS_WEBOS,IS_SAFARI=/Safari/i.test(i)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE&&!IS_SMART_TV,IS_WINDOWS=/Windows/i.test(i),IS_IPAD=/iPad/i.test(i)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(i),IS_IPHONE=/iPhone/i.test(i)&&!IS_IPAD}const IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD,IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=Object.freeze({__proto__:null,get IS_IPOD(){return IS_IPOD},get IOS_VERSION(){return IOS_VERSION},get IS_ANDROID(){return IS_ANDROID},get ANDROID_VERSION(){return ANDROID_VERSION},get IS_FIREFOX(){return IS_FIREFOX},get IS_EDGE(){return IS_EDGE},get IS_CHROMIUM(){return IS_CHROMIUM},get IS_CHROME(){return IS_CHROME},get CHROMIUM_VERSION(){return CHROMIUM_VERSION},get CHROME_VERSION(){return CHROME_VERSION},get IE_VERSION(){return IE_VERSION},get IS_SAFARI(){return IS_SAFARI},get IS_WINDOWS(){return IS_WINDOWS},get IS_IPAD(){return IS_IPAD},get IS_IPHONE(){return IS_IPHONE},get IS_TIZEN(){return IS_TIZEN},get IS_WEBOS(){return IS_WEBOS},get IS_SMART_TV(){return IS_SMART_TV},TOUCH_ENABLED,IS_IOS,IS_ANY_SAFARI});function isNonBlankString(i){return typeof i=="string"&&!!i.trim()}function throwIfWhitespace(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return document$2===window$1$1.document}function isEl(i){return isObject(i)&&i.nodeType===1}function isInFrame(){try{return window$1$1.parent!==window$1$1.self}catch{return!0}}function createQuerier(i){return function(e,s){if(!isNonBlankString(e))return document$2[i](null);isNonBlankString(s)&&(s=document$2.querySelector(s));const a=isEl(s)?s:document$2;return a[i]&&a[i](e)}}function createEl(i="div",e={},s={},a){const o=document$2.createElement(i);return Object.getOwnPropertyNames(e).forEach(function(c){const d=e[c];c==="textContent"?textContent(o,d):(o[c]!==d||c==="tabIndex")&&(o[c]=d)}),Object.getOwnPropertyNames(s).forEach(function(c){o.setAttribute(c,s[c])}),a&&appendContent(o,a),o}function textContent(i,e){return typeof i.textContent>"u"?i.innerText=e:i.textContent=e,i}function prependTo(i,e){e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}function hasClass(i,e){return throwIfWhitespace(e),i.classList.contains(e)}function addClass(i,...e){return i.classList.add(...e.reduce((s,a)=>s.concat(a.split(/\s+/)),[])),i}function removeClass(i,...e){return i?(i.classList.remove(...e.reduce((s,a)=>s.concat(a.split(/\s+/)),[])),i):(log$1.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass(i,e,s){return typeof s=="function"&&(s=s(i,e)),typeof s!="boolean"&&(s=void 0),e.split(/\s+/).forEach(a=>i.classList.toggle(a,s)),i}function setAttributes(i,e){Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];a===null||typeof a>"u"||a===!1?i.removeAttribute(s):i.setAttribute(s,a===!0?"":a)})}function getAttributes(i){const e={},s=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(i&&i.attributes&&i.attributes.length>0){const a=i.attributes;for(let o=a.length-1;o>=0;o--){const c=a[o].name;let d=a[o].value;s.includes(c)&&(d=d!==null),e[c]=d}}return e}function getAttribute(i,e){return i.getAttribute(e)}function setAttribute(i,e,s){i.setAttribute(e,s)}function removeAttribute(i,e){i.removeAttribute(e)}function blockTextSelection(){document$2.body.focus(),document$2.onselectstart=function(){return!1}}function unblockTextSelection(){document$2.onselectstart=function(){return!0}}function getBoundingClientRect(i){if(i&&i.getBoundingClientRect&&i.parentNode){const e=i.getBoundingClientRect(),s={};return["bottom","height","left","right","top","width"].forEach(a=>{e[a]!==void 0&&(s[a]=e[a])}),s.height||(s.height=parseFloat(computedStyle(i,"height"))),s.width||(s.width=parseFloat(computedStyle(i,"width"))),s}}function findPosition(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};const e=i.offsetWidth,s=i.offsetHeight;let a=0,o=0;for(;i.offsetParent&&i!==document$2[FullscreenApi.fullscreenElement];)a+=i.offsetLeft,o+=i.offsetTop,i=i.offsetParent;return{left:a,top:o,width:e,height:s}}function getPointerPosition(i,e){const s={x:0,y:0};if(IS_IOS){let nt=i;for(;nt&&nt.nodeName.toLowerCase()!=="html";){const ft=computedStyle(nt,"transform");if(/^matrix/.test(ft)){const yt=ft.slice(7,-1).split(/,\s/).map(Number);s.x+=yt[4],s.y+=yt[5]}else if(/^matrix3d/.test(ft)){const yt=ft.slice(9,-1).split(/,\s/).map(Number);s.x+=yt[12],s.y+=yt[13]}nt=nt.parentNode}}const a={},o=findPosition(e.target),c=findPosition(i),d=c.width,h=c.height;let b=e.offsetY-(c.top-o.top),tt=e.offsetX-(c.left-o.left);return e.changedTouches&&(tt=e.changedTouches[0].pageX-c.left,b=e.changedTouches[0].pageY+c.top,IS_IOS&&(tt-=s.x,b-=s.y)),a.y=1-Math.max(0,Math.min(1,b/h)),a.x=Math.max(0,Math.min(1,tt/d)),a}function isTextNode(i){return isObject(i)&&i.nodeType===3}function emptyEl(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function normalizeContent(i){return typeof i=="function"&&(i=i()),(Array.isArray(i)?i:[i]).map(e=>{if(typeof e=="function"&&(e=e()),isEl(e)||isTextNode(e))return e;if(typeof e=="string"&&/\S/.test(e))return document$2.createTextNode(e)}).filter(e=>e)}function appendContent(i,e){return normalizeContent(e).forEach(s=>i.appendChild(s)),i}function insertContent(i,e){return appendContent(emptyEl(i),e)}function isSingleLeftClick(i){return i.button===void 0&&i.buttons===void 0||i.button===0&&i.buttons===void 0||i.type==="mouseup"&&i.button===0&&i.buttons===0?!0:!(i.button!==0||i.buttons!==1)}const $=createQuerier("querySelector"),$$=createQuerier("querySelectorAll");function computedStyle(i,e){if(!i||!e)return"";if(typeof window$1$1.getComputedStyle=="function"){let s;try{s=window$1$1.getComputedStyle(i)}catch{return""}return s?s.getPropertyValue(e)||s[e]:""}return""}function copyStyleSheetsToWindow(i){[...document$2.styleSheets].forEach(e=>{try{const s=[...e.cssRules].map(o=>o.cssText).join(""),a=document$2.createElement("style");a.textContent=s,i.document.head.appendChild(a)}catch{const a=document$2.createElement("link");a.rel="stylesheet",a.type=e.type,a.media=e.media.mediaText,a.href=e.href,i.document.head.appendChild(a)}})}var Dom=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass,setAttributes,getAttributes,getAttribute,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$,$$,computedStyle,copyStyleSheetsToWindow});let _windowLoaded=!1,videojs$1;const autoSetup=function(){if(videojs$1.options.autoSetup===!1)return;const i=Array.prototype.slice.call(document$2.getElementsByTagName("video")),e=Array.prototype.slice.call(document$2.getElementsByTagName("audio")),s=Array.prototype.slice.call(document$2.getElementsByTagName("video-js")),a=i.concat(e,s);if(a&&a.length>0)for(let o=0,c=a.length;o<c;o++){const d=a[o];if(d&&d.getAttribute)d.player===void 0&&d.getAttribute("data-setup")!==null&&videojs$1(d);else{autoSetupTimeout(1);break}}else _windowLoaded||autoSetupTimeout(1)};function autoSetupTimeout(i,e){isReal()&&(e&&(videojs$1=e),window$1$1.setTimeout(autoSetup,i))}function setWindowLoaded(){_windowLoaded=!0,window$1$1.removeEventListener("load",setWindowLoaded)}isReal()&&(document$2.readyState==="complete"?setWindowLoaded():window$1$1.addEventListener("load",setWindowLoaded));const createStyleElement=function(i){const e=document$2.createElement("style");return e.className=i,e},setTextContent=function(i,e){i.styleSheet?i.styleSheet.cssText=e:i.textContent=e};var DomData=new WeakMap;const _initialGuid=3;let _guid=_initialGuid;function newGUID(){return _guid++}function _cleanUpEvents(i,e){if(!DomData.has(i))return;const s=DomData.get(i);s.handlers[e].length===0&&(delete s.handlers[e],i.removeEventListener?i.removeEventListener(e,s.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+e,s.dispatcher)),Object.getOwnPropertyNames(s.handlers).length<=0&&(delete s.handlers,delete s.dispatcher,delete s.disabled),Object.getOwnPropertyNames(s).length===0&&DomData.delete(i)}function _handleMultipleEvents(i,e,s,a){s.forEach(function(o){i(e,o,a)})}function fixEvent(i){if(i.fixed_)return i;function e(){return!0}function s(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){const a=i||window$1$1.event;i={};for(const o in a)o!=="layerX"&&o!=="layerY"&&o!=="keyLocation"&&o!=="webkitMovementX"&&o!=="webkitMovementY"&&o!=="path"&&(o==="returnValue"&&a.preventDefault||(i[o]=a[o]));if(i.target||(i.target=i.srcElement||document$2),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){a.preventDefault&&a.preventDefault(),i.returnValue=!1,a.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),i.cancelBubble=!0,a.cancelBubble=!0,i.isPropagationStopped=e},i.isPropagationStopped=s,i.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),i.isImmediatePropagationStopped=e,i.stopPropagation()},i.isImmediatePropagationStopped=s,i.clientX!==null&&i.clientX!==void 0){const o=document$2.documentElement,c=document$2.body;i.pageX=i.clientX+(o&&o.scrollLeft||c&&c.scrollLeft||0)-(o&&o.clientLeft||c&&c.clientLeft||0),i.pageY=i.clientY+(o&&o.scrollTop||c&&c.scrollTop||0)-(o&&o.clientTop||c&&c.clientTop||0)}i.which=i.charCode||i.keyCode,i.button!==null&&i.button!==void 0&&(i.button=i.button&1?0:i.button&4?1:i.button&2?2:0)}return i.fixed_=!0,i}let _supportsPassive;const supportsPassive=function(){if(typeof _supportsPassive!="boolean"){_supportsPassive=!1;try{const i=Object.defineProperty({},"passive",{get(){_supportsPassive=!0}});window$1$1.addEventListener("test",null,i),window$1$1.removeEventListener("test",null,i)}catch{}}return _supportsPassive},passiveEvents=["touchstart","touchmove"];function on(i,e,s){if(Array.isArray(e))return _handleMultipleEvents(on,i,e,s);DomData.has(i)||DomData.set(i,{});const a=DomData.get(i);if(a.handlers||(a.handlers={}),a.handlers[e]||(a.handlers[e]=[]),s.guid||(s.guid=newGUID()),a.handlers[e].push(s),a.dispatcher||(a.disabled=!1,a.dispatcher=function(o,c){if(a.disabled)return;o=fixEvent(o);const d=a.handlers[o.type];if(d){const h=d.slice(0);for(let b=0,tt=h.length;b<tt&&!o.isImmediatePropagationStopped();b++)try{h[b].call(i,o,c)}catch(nt){log$1.error(nt)}}}),a.handlers[e].length===1)if(i.addEventListener){let o=!1;supportsPassive()&&passiveEvents.indexOf(e)>-1&&(o={passive:!0}),i.addEventListener(e,a.dispatcher,o)}else i.attachEvent&&i.attachEvent("on"+e,a.dispatcher)}function off(i,e,s){if(!DomData.has(i))return;const a=DomData.get(i);if(!a.handlers)return;if(Array.isArray(e))return _handleMultipleEvents(off,i,e,s);const o=function(d,h){a.handlers[h]=[],_cleanUpEvents(d,h)};if(e===void 0){for(const d in a.handlers)Object.prototype.hasOwnProperty.call(a.handlers||{},d)&&o(i,d);return}const c=a.handlers[e];if(c){if(!s){o(i,e);return}if(s.guid)for(let d=0;d<c.length;d++)c[d].guid===s.guid&&c.splice(d--,1);_cleanUpEvents(i,e)}}function trigger(i,e,s){const a=DomData.has(i)?DomData.get(i):{},o=i.parentNode||i.ownerDocument;if(typeof e=="string"?e={type:e,target:i}:e.target||(e.target=i),e=fixEvent(e),a.dispatcher&&a.dispatcher.call(i,e,s),o&&!e.isPropagationStopped()&&e.bubbles===!0)trigger.call(null,o,e,s);else if(!o&&!e.defaultPrevented&&e.target&&e.target[e.type]){DomData.has(e.target)||DomData.set(e.target,{});const c=DomData.get(e.target);e.target[e.type]&&(c.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),c.disabled=!1)}return!e.defaultPrevented}function one(i,e,s){if(Array.isArray(e))return _handleMultipleEvents(one,i,e,s);const a=function(){off(i,e,a),s.apply(this,arguments)};a.guid=s.guid=s.guid||newGUID(),on(i,e,a)}function any(i,e,s){const a=function(){off(i,e,a),s.apply(this,arguments)};a.guid=s.guid=s.guid||newGUID(),on(i,e,a)}var Events=Object.freeze({__proto__:null,fixEvent,on,off,trigger,one,any});const UPDATE_REFRESH_INTERVAL=30,bind_=function(i,e,s){e.guid||(e.guid=newGUID());const a=e.bind(i);return a.guid=s?s+"_"+e.guid:e.guid,a},throttle=function(i,e){let s=window$1$1.performance.now();return function(...o){const c=window$1$1.performance.now();c-s>=e&&(i(...o),s=c)}},debounce=function(i,e,s,a=window$1$1){let o;const c=()=>{a.clearTimeout(o),o=null},d=function(){const h=this,b=arguments;let tt=function(){o=null,tt=null,s||i.apply(h,b)};!o&&s&&i.apply(h,b),a.clearTimeout(o),o=a.setTimeout(tt,e)};return d.cancel=c,d};var Fn=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL,bind_,throttle,debounce});let EVENT_MAP;class EventTarget$2{on(e,s){const a=this.addEventListener;this.addEventListener=()=>{},on(this,e,s),this.addEventListener=a}off(e,s){off(this,e,s)}one(e,s){const a=this.addEventListener;this.addEventListener=()=>{},one(this,e,s),this.addEventListener=a}any(e,s){const a=this.addEventListener;this.addEventListener=()=>{},any(this,e,s),this.addEventListener=a}trigger(e){const s=e.type||e;typeof e=="string"&&(e={type:s}),e=fixEvent(e),this.allowedEvents_[s]&&this["on"+s]&&this["on"+s](e),trigger(this,e)}queueTrigger(e){EVENT_MAP||(EVENT_MAP=new Map);const s=e.type||e;let a=EVENT_MAP.get(this);a||(a=new Map,EVENT_MAP.set(this,a));const o=a.get(s);a.delete(s),window$1$1.clearTimeout(o);const c=window$1$1.setTimeout(()=>{a.delete(s),a.size===0&&(a=null,EVENT_MAP.delete(this)),this.trigger(e)},0);a.set(s,c)}}EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;const objName=i=>typeof i.name=="function"?i.name():typeof i.name=="string"?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i,isEvented=i=>i instanceof EventTarget$2||!!i.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof i[e]=="function"),addEventedCallback=(i,e)=>{isEvented(i)?e():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(e))},isValidEventType=i=>typeof i=="string"&&/\S/.test(i)||Array.isArray(i)&&!!i.length,validateTarget=(i,e,s)=>{if(!i||!i.nodeName&&!isEvented(i))throw new Error(`Invalid target for ${objName(e)}#${s}; must be a DOM node or evented object.`)},validateEventType=(i,e,s)=>{if(!isValidEventType(i))throw new Error(`Invalid event type for ${objName(e)}#${s}; must be a non-empty string or array.`)},validateListener=(i,e,s)=>{if(typeof i!="function")throw new Error(`Invalid listener for ${objName(e)}#${s}; must be a function.`)},normalizeListenArgs=(i,e,s)=>{const a=e.length<3||e[0]===i||e[0]===i.eventBusEl_;let o,c,d;return a?(o=i.eventBusEl_,e.length>=3&&e.shift(),[c,d]=e):[o,c,d]=e,validateTarget(o,i,s),validateEventType(c,i,s),validateListener(d,i,s),d=bind_(i,d),{isTargetingSelf:a,target:o,type:c,listener:d}},listen=(i,e,s,a)=>{validateTarget(i,i,e),i.nodeName?Events[e](i,s,a):i[e](s,a)},EventedMixin={on(...i){const{isTargetingSelf:e,target:s,type:a,listener:o}=normalizeListenArgs(this,i,"on");if(listen(s,"on",a,o),!e){const c=()=>this.off(s,a,o);c.guid=o.guid;const d=()=>this.off("dispose",c);d.guid=o.guid,listen(this,"on","dispose",c),listen(s,"on","dispose",d)}},one(...i){const{isTargetingSelf:e,target:s,type:a,listener:o}=normalizeListenArgs(this,i,"one");if(e)listen(s,"one",a,o);else{const c=(...d)=>{this.off(s,a,c),o.apply(null,d)};c.guid=o.guid,listen(s,"one",a,c)}},any(...i){const{isTargetingSelf:e,target:s,type:a,listener:o}=normalizeListenArgs(this,i,"any");if(e)listen(s,"any",a,o);else{const c=(...d)=>{this.off(s,a,c),o.apply(null,d)};c.guid=o.guid,listen(s,"any",a,c)}},off(i,e,s){if(!i||isValidEventType(i))off(this.eventBusEl_,i,e);else{const a=i,o=e;validateTarget(a,this,"off"),validateEventType(o,this,"off"),validateListener(s,this,"off"),s=bind_(this,s),this.off("dispose",s),a.nodeName?(off(a,o,s),off(a,"dispose",s)):isEvented(a)&&(a.off(o,s),a.off("dispose",s))}},trigger(i,e){validateTarget(this.eventBusEl_,this,"trigger");const s=i&&typeof i!="string"?i.type:i;if(!isValidEventType(s))throw new Error(`Invalid event type for ${objName(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return trigger(this.eventBusEl_,i,e)}};function evented(i,e={}){const{eventBusKey:s}=e;if(s){if(!i[s].nodeName)throw new Error(`The eventBusKey "${s}" does not refer to an element.`);i.eventBusEl_=i[s]}else i.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return Object.assign(i,EventedMixin),i.eventedCallbacks&&i.eventedCallbacks.forEach(a=>{a()}),i.on("dispose",()=>{i.off(),[i,i.el_,i.eventBusEl_].forEach(function(a){a&&DomData.has(a)&&DomData.delete(a)}),window$1$1.setTimeout(()=>{i.eventBusEl_=null},0)}),i}const StatefulMixin={state:{},setState(i){typeof i=="function"&&(i=i());let e;return each(i,(s,a)=>{this.state[a]!==s&&(e=e||{},e[a]={from:this.state[a],to:s}),this.state[a]=s}),e&&isEvented(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function stateful(i,e){return Object.assign(i,StatefulMixin),i.state=Object.assign({},i.state,e),typeof i.handleStateChanged=="function"&&isEvented(i)&&i.on("statechanged",i.handleStateChanged),i}const toLowerCase=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toLowerCase())},toTitleCase$1=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},titleCaseEquals=function(i,e){return toTitleCase$1(i)===toTitleCase$1(e)};var Str=Object.freeze({__proto__:null,toLowerCase,toTitleCase:toTitleCase$1,titleCaseEquals});class Component$1{constructor(e,s,a){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=merge$1({},this.options_),s=this.options_=merge$1(this.options_,s),this.id_=s.id||s.el&&s.el.id,!this.id_){const o=e&&e.id&&e.id()||"no_player";this.id_=`${o}_component_${newGUID()}`}this.name_=s.name||null,s.el?this.el_=s.el:s.createEl!==!1&&(this.el_=this.createEl()),s.className&&this.el_&&s.className.split(" ").forEach(o=>this.addClass(o)),["on","off","one","any","trigger"].forEach(o=>{this[o]=void 0}),s.evented!==!1&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,s.initChildren!==!1&&this.initChildren(),this.ready(a),s.reportTouchActivity!==!1&&this.enableTouchActivity()}on(e,s){}off(e,s){}one(e,s){}any(e,s){}trigger(e,s){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let s=this.children_.length-1;s>=0;s--)this.children_[s].dispose&&this.children_[s].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=merge$1(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,s,a){return createEl(e,s,a)}localize(e,s,a=e){const o=this.player_.language&&this.player_.language(),c=this.player_.languages&&this.player_.languages(),d=c&&c[o],h=o&&o.split("-")[0],b=c&&c[h];let tt=a;return d&&d[e]?tt=d[e]:b&&b[e]&&(tt=b[e]),s&&(tt=tt.replace(/\{(\d+)\}/g,function(nt,ft){const yt=s[ft-1];let Tt=yt;return typeof yt>"u"&&(Tt=nt),Tt})),tt}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((a,o)=>a.concat(o),[]);let s=this;for(let a=0;a<e.length;a++)if(s=s.getChild(e[a]),!s||!s.getChild)return;return s}setIcon(e,s=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const a="http://www.w3.org/2000/svg",o=createEl("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),c=document$2.createElementNS(a,"svg");c.setAttributeNS(null,"viewBox","0 0 512 512");const d=document$2.createElementNS(a,"use");return c.appendChild(d),d.setAttributeNS(null,"href",`#vjs-icon-${e}`),o.appendChild(c),this.iconIsSet_?s.replaceChild(o,s.querySelector(".vjs-icon-placeholder")):s.appendChild(o),this.iconIsSet_=!0,o}addChild(e,s={},a=this.children_.length){let o,c;if(typeof e=="string"){c=toTitleCase$1(e);const d=s.componentClass||c;s.name=c;const h=Component$1.getComponent(d);if(!h)throw new Error(`Component ${d} does not exist`);if(typeof h!="function")return null;o=new h(this.player_||this,s)}else o=e;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(a,0,o),o.parentComponent_=this,typeof o.id=="function"&&(this.childIndex_[o.id()]=o),c=c||o.name&&toTitleCase$1(o.name()),c&&(this.childNameIndex_[c]=o,this.childNameIndex_[toLowerCase(c)]=o),typeof o.el=="function"&&o.el()){let d=null;this.children_[a+1]&&(this.children_[a+1].el_?d=this.children_[a+1].el_:isEl(this.children_[a+1])&&(d=this.children_[a+1])),this.contentEl().insertBefore(o.el(),d)}return o}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let s=!1;for(let o=this.children_.length-1;o>=0;o--)if(this.children_[o]===e){s=!0,this.children_.splice(o,1);break}if(!s)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[toTitleCase$1(e.name())]=null,this.childNameIndex_[toLowerCase(e.name())]=null;const a=e.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const s=this.options_,a=d=>{const h=d.name;let b=d.opts;if(s[h]!==void 0&&(b=s[h]),b===!1)return;b===!0&&(b={}),b.playerOptions=this.options_.playerOptions;const tt=this.addChild(h,b);tt&&(this[h]=tt)};let o;const c=Component$1.getComponent("Tech");Array.isArray(e)?o=e:o=Object.keys(e),o.concat(Object.keys(this.options_).filter(function(d){return!o.some(function(h){return typeof h=="string"?d===h:d===h.name})})).map(d=>{let h,b;return typeof d=="string"?(h=d,b=e[h]||this.options_[h]||{}):(h=d.name,b=d),{name:h,opts:b}}).filter(d=>{const h=Component$1.getComponent(d.opts.componentClass||toTitleCase$1(d.name));return h&&!c.isTech(h)}).forEach(a)}}buildCSSClass(){return""}ready(e,s=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}s?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(s){s.call(this)},this),this.trigger("ready")},1)}$(e,s){return $(e,s||this.contentEl())}$$(e,s){return $$(e,s||this.contentEl())}hasClass(e){return hasClass(this.el_,e)}addClass(...e){addClass(this.el_,...e)}removeClass(...e){removeClass(this.el_,...e)}toggleClass(e,s){toggleClass(this.el_,e,s)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return getAttribute(this.el_,e)}setAttribute(e,s){setAttribute(this.el_,e,s)}removeAttribute(e){removeAttribute(this.el_,e)}width(e,s){return this.dimension("width",e,s)}height(e,s){return this.dimension("height",e,s)}dimensions(e,s){this.width(e,!0),this.height(s)}dimension(e,s,a){if(s!==void 0){(s===null||s!==s)&&(s=0),(""+s).indexOf("%")!==-1||(""+s).indexOf("px")!==-1?this.el_.style[e]=s:s==="auto"?this.el_.style[e]="":this.el_.style[e]=s+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;const o=this.el_.style[e],c=o.indexOf("px");return parseInt(c!==-1?o.slice(0,c):this.el_["offset"+toTitleCase$1(e)],10)}currentDimension(e){let s=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(s=computedStyle(this.el_,e),s=parseFloat(s),s===0||isNaN(s)){const a=`offset${toTitleCase$1(e)}`;s=this.el_[a]}return s}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(keycode.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,s=null;const a=10,o=200;let c;this.on("touchstart",function(h){h.touches.length===1&&(s={pageX:h.touches[0].pageX,pageY:h.touches[0].pageY},e=window$1$1.performance.now(),c=!0)}),this.on("touchmove",function(h){if(h.touches.length>1)c=!1;else if(s){const b=h.touches[0].pageX-s.pageX,tt=h.touches[0].pageY-s.pageY;Math.sqrt(b*b+tt*tt)>a&&(c=!1)}});const d=function(){c=!1};this.on("touchleave",d),this.on("touchcancel",d),this.on("touchend",function(h){s=null,c===!0&&window$1$1.performance.now()-e<o&&(h.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=bind_(this.player(),this.player().reportUserActivity);let s;this.on("touchstart",function(){e(),this.clearInterval(s),s=this.setInterval(e,250)});const a=function(o){e(),this.clearInterval(s)};this.on("touchmove",e),this.on("touchend",a),this.on("touchcancel",a)}setTimeout(e,s){var a;return e=bind_(this,e),this.clearTimersOnDispose_(),a=window$1$1.setTimeout(()=>{this.setTimeoutIds_.has(a)&&this.setTimeoutIds_.delete(a),e()},s),this.setTimeoutIds_.add(a),a}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window$1$1.clearTimeout(e)),e}setInterval(e,s){e=bind_(this,e),this.clearTimersOnDispose_();const a=window$1$1.setInterval(e,s);return this.setIntervalIds_.add(a),a}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window$1$1.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var s;return e=bind_(this,e),s=window$1$1.requestAnimationFrame(()=>{this.rafIds_.has(s)&&this.rafIds_.delete(s),e()}),this.rafIds_.add(s),s}requestNamedAnimationFrame(e,s){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),s=bind_(this,s);const a=this.requestAnimationFrame(()=>{s(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,a),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),window$1$1.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,s])=>{this[e].forEach((a,o)=>this[s](o))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,s){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const a=Component$1.getComponent("Tech"),o=a&&a.isTech(s),c=Component$1===s||Component$1.prototype.isPrototypeOf(s.prototype);if(o||!c){let h;throw o?h="techs must be registered using Tech.registerTech()":h="must be a Component subclass",new Error(`Illegal component, "${e}"; ${h}.`)}e=toTitleCase$1(e),Component$1.components_||(Component$1.components_={});const d=Component$1.getComponent("Player");if(e==="Player"&&d&&d.players){const h=d.players,b=Object.keys(h);if(h&&b.length>0&&b.map(tt=>h[tt]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component$1.components_[e]=s,Component$1.components_[toLowerCase(e)]=s,s}static getComponent(e){if(!(!e||!Component$1.components_))return Component$1.components_[e]}}Component$1.registerComponent("Component",Component$1);function rangeCheck(i,e,s){if(typeof e!="number"||e<0||e>s)throw new Error(`Failed to execute '${i}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${s}).`)}function getRange(i,e,s,a){return rangeCheck(i,a,s.length-1),s[a][e]}function createTimeRangesObj(i){let e;return i===void 0||i.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:i.length,start:getRange.bind(null,"start",0,i),end:getRange.bind(null,"end",1,i)},window$1$1.Symbol&&window$1$1.Symbol.iterator&&(e[window$1$1.Symbol.iterator]=()=>(i||[]).values()),e}function createTimeRanges$1(i,e){return Array.isArray(i)?createTimeRangesObj(i):i===void 0||e===void 0?createTimeRangesObj():createTimeRangesObj([[i,e]])}const defaultImplementation=function(i,e){i=i<0?0:i;let s=Math.floor(i%60),a=Math.floor(i/60%60),o=Math.floor(i/3600);const c=Math.floor(e/60%60),d=Math.floor(e/3600);return(isNaN(i)||i===1/0)&&(o=a=s="-"),o=o>0||d>0?o+":":"",a=((o||c>=10)&&a<10?"0"+a:a)+":",s=s<10?"0"+s:s,o+a+s};let implementation=defaultImplementation;function setFormatTime(i){implementation=i}function resetFormatTime(){implementation=defaultImplementation}function formatTime(i,e=i){return implementation(i,e)}var Time=Object.freeze({__proto__:null,createTimeRanges:createTimeRanges$1,createTimeRange:createTimeRanges$1,setFormatTime,resetFormatTime,formatTime});function bufferedPercent(i,e){let s=0,a,o;if(!e)return 0;(!i||!i.length)&&(i=createTimeRanges$1(0,0));for(let c=0;c<i.length;c++)a=i.start(c),o=i.end(c),o>e&&(o=e),s+=o-a;return s/e}function MediaError(i){if(i instanceof MediaError)return i;typeof i=="number"?this.code=i:typeof i=="string"?this.message=i:isObject(i)&&(typeof i.code=="number"&&(this.code=i.code),Object.assign(this,i)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.prototype.metadata=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};MediaError.MEDIA_ERR_CUSTOM=0;MediaError.prototype.MEDIA_ERR_CUSTOM=0;MediaError.MEDIA_ERR_ABORTED=1;MediaError.prototype.MEDIA_ERR_ABORTED=1;MediaError.MEDIA_ERR_NETWORK=2;MediaError.prototype.MEDIA_ERR_NETWORK=2;MediaError.MEDIA_ERR_DECODE=3;MediaError.prototype.MEDIA_ERR_DECODE=3;MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.MEDIA_ERR_ENCRYPTED=5;MediaError.prototype.MEDIA_ERR_ENCRYPTED=5;function isPromise(i){return i!=null&&typeof i.then=="function"}function silencePromise(i){isPromise(i)&&i.then(null,e=>{})}const trackToJson_=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((s,a,o)=>(i[a]&&(s[a]=i[a]),s),{cues:i.cues&&Array.prototype.map.call(i.cues,function(s){return{startTime:s.startTime,endTime:s.endTime,text:s.text,id:s.id}})})},textTracksToJson=function(i){const e=i.$$("track"),s=Array.prototype.map.call(e,o=>o.track);return Array.prototype.map.call(e,function(o){const c=trackToJson_(o.track);return o.src&&(c.src=o.src),c}).concat(Array.prototype.filter.call(i.textTracks(),function(o){return s.indexOf(o)===-1}).map(trackToJson_))},jsonToTextTracks=function(i,e){return i.forEach(function(s){const a=e.addRemoteTextTrack(s).track;!s.src&&s.cues&&s.cues.forEach(o=>a.addCue(o))}),e.textTracks()};var textTrackConverter={textTracksToJson,jsonToTextTracks,trackToJson_};const MODAL_CLASS_NAME="vjs-modal-dialog";class ModalDialog extends Component$1{constructor(e,s){super(e,s),this.handleKeyDown_=a=>this.handleKeyDown(a),this.close_=a=>this.close(a),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=createEl("div",{className:`${MODAL_CLASS_NAME}-content`},{role:"document"}),this.descEl_=createEl("p",{className:`${MODAL_CLASS_NAME}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${MODAL_CLASS_NAME} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const s=this.closeable_=!!e;let a=this.getChild("closeButton");if(s&&!a){const o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!s&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const s=this.contentEl(),a=s.parentNode,o=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(s),this.empty(),insertContent(s,e),this.trigger("modalfill"),o?a.insertBefore(s,o):a.appendChild(s);const c=this.getChild("closeButton");c&&a.appendChild(c.el_)}empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=document$2.activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(e)||s===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),keycode.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!keycode.isEventKey(e,"Tab"))return;const s=this.focusableEls_(),a=this.el_.querySelector(":focus");let o;for(let c=0;c<s.length;c++)if(a===s[c]){o=c;break}document$2.activeElement===this.el_&&(o=0),e.shiftKey&&o===0?(s[s.length-1].focus(),e.preventDefault()):!e.shiftKey&&o===s.length-1&&(s[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,s=>(s instanceof window$1$1.HTMLAnchorElement||s instanceof window$1$1.HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof window$1$1.HTMLInputElement||s instanceof window$1$1.HTMLSelectElement||s instanceof window$1$1.HTMLTextAreaElement||s instanceof window$1$1.HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof window$1$1.HTMLIFrameElement||s instanceof window$1$1.HTMLObjectElement||s instanceof window$1$1.HTMLEmbedElement||s.hasAttribute("tabindex")&&s.getAttribute("tabindex")!==-1||s.hasAttribute("contenteditable"))}}ModalDialog.prototype.options_={pauseOnOpen:!0,temporary:!0};Component$1.registerComponent("ModalDialog",ModalDialog);class TrackList extends EventTarget$2{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let s=0;s<e.length;s++)this.addTrack(e[s])}addTrack(e){const s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get(){return this.tracks_[s]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},isEvented(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let s;for(let a=0,o=this.length;a<o;a++)if(this[a]===e){s=this[a],s.off&&s.off(),this.tracks_.splice(a,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})}getTrackById(e){let s=null;for(let a=0,o=this.length;a<o;a++){const c=this[a];if(c.id===e){s=c;break}}return s}}TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const i in TrackList.prototype.allowedEvents_)TrackList.prototype["on"+i]=null;const disableOthers$1=function(i,e){for(let s=0;s<i.length;s++)!Object.keys(i[s]).length||e.id===i[s].id||(i[s].enabled=!1)};class AudioTrackList extends TrackList{constructor(e=[]){for(let s=e.length-1;s>=0;s--)if(e[s].enabled){disableOthers$1(e,e[s]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&disableOthers$1(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,disableOthers$1(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const disableOthers=function(i,e){for(let s=0;s<i.length;s++)!Object.keys(i[s]).length||e.id===i[s].id||(i[s].selected=!1)};class VideoTrackList extends TrackList{constructor(e=[]){for(let s=e.length-1;s>=0;s--)if(e[s].selected){disableOthers(e,e[s]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let s=0;s<this.length;s++)if(this[s].selected)return s;return-1},set(){}})}addTrack(e){e.selected&&disableOthers(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,disableOthers(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class TextTrackList extends TrackList{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class HtmlTrackElementList{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let s=0,a=e.length;s<a;s++)this.addTrackElement_(e[s])}addTrackElement_(e){const s=this.trackElements_.length;""+s in this||Object.defineProperty(this,s,{get(){return this.trackElements_[s]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let s;for(let a=0,o=this.trackElements_.length;a<o;a++)if(e===this.trackElements_[a].track){s=this.trackElements_[a];break}return s}removeTrackElement_(e){for(let s=0,a=this.trackElements_.length;s<a;s++)if(e===this.trackElements_[s]){this.trackElements_[s].track&&typeof this.trackElements_[s].track.off=="function"&&this.trackElements_[s].track.off(),typeof this.trackElements_[s].off=="function"&&this.trackElements_[s].off(),this.trackElements_.splice(s,1);break}}}class TextTrackCueList{constructor(e){TextTrackCueList.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const s=this.length||0;let a=0;const o=e.length;this.cues_=e,this.length_=e.length;const c=function(d){""+d in this||Object.defineProperty(this,""+d,{get(){return this.cues_[d]}})};if(s<o)for(a=s;a<o;a++)c.call(this,a)}getCueById(e){let s=null;for(let a=0,o=this.length;a<o;a++){const c=this[a];if(c.id===e){s=c;break}}return s}}const VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};class Track extends EventTarget$2{constructor(e={}){super();const s={id:e.id||"vjs_track_"+newGUID(),kind:e.kind||"",language:e.language||""};let a=e.label||"";for(const o in s)Object.defineProperty(this,o,{get(){return s[o]},set(){}});Object.defineProperty(this,"label",{get(){return a},set(o){o!==a&&(a=o,this.trigger("labelchange"))}})}}const parseUrl=function(i){const e=["protocol","hostname","port","pathname","search","hash","host"],s=document$2.createElement("a");s.href=i;const a={};for(let o=0;o<e.length;o++)a[e[o]]=s[e[o]];return a.protocol==="http:"&&(a.host=a.host.replace(/:80$/,"")),a.protocol==="https:"&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=window$1$1.location.protocol),a.host||(a.host=window$1$1.location.host),a},getAbsoluteURL=function(i){if(!i.match(/^https?:\/\//)){const e=document$2.createElement("a");e.href=i,i=e.href}return i},getFileExtension=function(i){if(typeof i=="string"){const s=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(s)return s.pop().toLowerCase()}return""},isCrossOrigin=function(i,e=window$1$1.location){const s=parseUrl(i);return(s.protocol===":"?e.protocol:s.protocol)+s.host!==e.protocol+e.host};var Url=Object.freeze({__proto__:null,parseUrl,getAbsoluteURL,getFileExtension,isCrossOrigin});const parseCues=function(i,e){const s=new window$1$1.WebVTT.Parser(window$1$1,window$1$1.vttjs,window$1$1.WebVTT.StringDecoder()),a=[];s.oncue=function(o){e.addCue(o)},s.onparsingerror=function(o){a.push(o)},s.onflush=function(){e.trigger({type:"loadeddata",target:e})},s.parse(i),a.length>0&&(window$1$1.console&&window$1$1.console.groupCollapsed&&window$1$1.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),a.forEach(o=>log$1.error(o)),window$1$1.console&&window$1$1.console.groupEnd&&window$1$1.console.groupEnd()),s.flush()},loadTrack=function(i,e){const s={uri:i},a=isCrossOrigin(i);a&&(s.cors=a);const o=e.tech_.crossOrigin()==="use-credentials";o&&(s.withCredentials=o),XHR(s,bind_(this,function(c,d,h){if(c)return log$1.error(c,d);e.loaded_=!0,typeof window$1$1.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],b=>{if(b.type==="vttjserror"){log$1.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return parseCues(h,e)}):parseCues(h,e)}))};class TextTrack extends Track{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const s=merge$1(e,{kind:TextTrackKind[e.kind]||"subtitles",language:e.language||e.srclang||""});let a=TextTrackMode[s.mode]||"disabled";const o=s.default;(s.kind==="metadata"||s.kind==="chapters")&&(a="hidden"),super(s),this.tech_=s.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const c=new TextTrackCueList(this.cues_),d=new TextTrackCueList(this.activeCues_);let h=!1;this.timeupdateHandler=bind_(this,function(tt={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){tt.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,h&&(this.trigger("cuechange"),h=!1),tt.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const b=()=>{this.stopTracking()};this.tech_.one("dispose",b),a!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return o},set(){}},mode:{get(){return a},set(tt){TextTrackMode[tt]&&a!==tt&&(a=tt,!this.preload_&&a!=="disabled"&&this.cues.length===0&&loadTrack(this.src,this),this.stopTracking(),a!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?c:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return d;const tt=this.tech_.currentTime(),nt=[];for(let ft=0,yt=this.cues.length;ft<yt;ft++){const Tt=this.cues[ft];Tt.startTime<=tt&&Tt.endTime>=tt&&nt.push(Tt)}if(h=!1,nt.length!==this.activeCues_.length)h=!0;else for(let ft=0;ft<nt.length;ft++)this.activeCues_.indexOf(nt[ft])===-1&&(h=!0);return this.activeCues_=nt,d.setCues_(this.activeCues_),d},set(){}}}),s.src?(this.src=s.src,this.preload_||(this.loaded_=!0),(this.preload_||s.kind!=="subtitles"&&s.kind!=="captions")&&loadTrack(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let s=e;if(!("getCueAsHTML"in s)){s=new window$1$1.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const o in e)o in s||(s[o]=e[o]);s.id=e.id,s.originalCue_=e}const a=this.tech_.textTracks();for(let o=0;o<a.length;o++)a[o]!==this&&a[o].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)}removeCue(e){let s=this.cues_.length;for(;s--;){const a=this.cues_[s];if(a===e||a.originalCue_&&a.originalCue_===e){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}}}TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};class AudioTrack extends Track{constructor(e={}){const s=merge$1(e,{kind:AudioTrackKind[e.kind]||""});super(s);let a=!1;Object.defineProperty(this,"enabled",{get(){return a},set(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),s.enabled&&(this.enabled=s.enabled),this.loaded_=!0}}class VideoTrack extends Track{constructor(e={}){const s=merge$1(e,{kind:VideoTrackKind[e.kind]||""});super(s);let a=!1;Object.defineProperty(this,"selected",{get(){return a},set(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),s.selected&&(this.selected=s.selected)}}class HTMLTrackElement extends EventTarget$2{constructor(e={}){super();let s;const a=new TextTrack(e);this.kind=a.kind,this.src=a.src,this.srclang=a.language,this.label=a.label,this.default=a.default,Object.defineProperties(this,{readyState:{get(){return s}},track:{get(){return a}}}),s=HTMLTrackElement.NONE,a.addEventListener("loadeddata",()=>{s=HTMLTrackElement.LOADED,this.trigger({type:"load",target:this})})}}HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=0;HTMLTrackElement.LOADING=1;HTMLTrackElement.LOADED=2;HTMLTrackElement.ERROR=3;const NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(i){NORMAL[i].getterName=`${i}Tracks`,NORMAL[i].privateName=`${i}Tracks_`});const REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ALL=Object.assign({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(i,e,s,a,o={}){const c=i.textTracks();o.kind=e,s&&(o.label=s),a&&(o.language=a),o.tech=i;const d=new ALL.text.TrackClass(o);return c.addTrack(d),d}class Tech extends Component$1{constructor(e={},s=function(){}){e.reportTouchActivity=!1,super(null,e,s),this.onDurationChange_=a=>this.onDurationChange(a),this.trackProgress_=a=>this.trackProgress(a),this.trackCurrentTime_=a=>this.trackCurrentTime(a),this.stopTrackingCurrentTime_=a=>this.stopTrackingCurrentTime(a),this.disposeSourceHandler_=a=>this.disposeSourceHandler(a),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ALL.names.forEach(a=>{const o=ALL[a];e&&e[o.getterName]&&(this[o.privateName]=e[o.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(a=>{e[`native${a}Tracks`]===!1&&(this[`featuresNative${a}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ALL.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(bind_(this,function(){const s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,s===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return createTimeRanges$1(0,0)}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(NORMAL.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(s=>{const a=this[`${s}Tracks`]()||[];let o=a.length;for(;o--;){const c=a[o];s==="text"&&this.removeRemoteTextTrack(c),a.removeTrack(c)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let s=e.length;for(;s--;){const a=e[s];this.removeRemoteTextTrack(a)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new MediaError(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?createTimeRanges$1(0,0):createTimeRanges$1()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){NORMAL.names.forEach(e=>{const s=NORMAL[e],a=()=>{this.trigger(`${e}trackchange`)},o=this[s.getterName]();o.addEventListener("removetrack",a),o.addEventListener("addtrack",a),this.on("dispose",()=>{o.removeEventListener("removetrack",a),o.removeEventListener("addtrack",a)})})}addWebVttScript_(){if(!window$1$1.WebVTT)if(document$2.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(vtt)&&Object.keys(vtt).length>0){this.trigger("vttjsloaded");return}const e=document$2.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),window$1$1.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),s=this.remoteTextTracks(),a=h=>e.addTrack(h.track),o=h=>e.removeTrack(h.track);s.on("addtrack",a),s.on("removetrack",o),this.addWebVttScript_();const c=()=>this.trigger("texttrackchange"),d=()=>{c();for(let h=0;h<e.length;h++){const b=e[h];b.removeEventListener("cuechange",c),b.mode==="showing"&&b.addEventListener("cuechange",c)}};d(),e.addEventListener("change",d),e.addEventListener("addtrack",d),e.addEventListener("removetrack",d),this.on("dispose",function(){s.off("addtrack",a),s.off("removetrack",o),e.removeEventListener("change",d),e.removeEventListener("addtrack",d),e.removeEventListener("removetrack",d);for(let h=0;h<e.length;h++)e[h].removeEventListener("cuechange",c)})}addTextTrack(e,s,a){if(!e)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,e,s,a)}createRemoteTextTrack(e){const s=merge$1(e,{tech:this});return new REMOTE.remoteTextEl.TrackClass(s)}addRemoteTextTrack(e={},s){const a=this.createRemoteTextTrack(e);return typeof s!="boolean"&&(s=!1),this.remoteTextTrackEls().addTrackElement_(a),this.remoteTextTracks().addTrack(a.track),s===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(a.track)),a}removeRemoteTextTrack(e){const s=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const s=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",()=>{this.queuedHanders_.has(s)&&(this.queuedHanders_.delete(s),e())})):this.requestNamedAnimationFrame(s,e),s}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,s){return Tech.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Tech||e instanceof Tech||e===Tech}static registerTech(e,s){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(s))throw new Error(`Tech ${e} must be a Tech`);if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=toTitleCase$1(e),Tech.techs_[e]=s,Tech.techs_[toLowerCase(e)]=s,e!=="Tech"&&Tech.defaultTechOrder_.push(e),s}static getTech(e){if(e){if(Tech.techs_&&Tech.techs_[e])return Tech.techs_[e];if(e=toTitleCase$1(e),window$1$1&&window$1$1.videojs&&window$1$1.videojs[e])return log$1.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window$1$1.videojs[e]}}}ALL.names.forEach(function(i){const e=ALL[i];Tech.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Tech.prototype.featuresVolumeControl=!0;Tech.prototype.featuresMuteControl=!0;Tech.prototype.featuresFullscreenResize=!1;Tech.prototype.featuresPlaybackRate=!1;Tech.prototype.featuresProgressEvents=!1;Tech.prototype.featuresSourceset=!1;Tech.prototype.featuresTimeupdateEvents=!1;Tech.prototype.featuresNativeTextTracks=!1;Tech.prototype.featuresVideoFrameCallback=!1;Tech.withSourceHandlers=function(i){i.registerSourceHandler=function(s,a){let o=i.sourceHandlers;o||(o=i.sourceHandlers=[]),a===void 0&&(a=o.length),o.splice(a,0,s)},i.canPlayType=function(s){const a=i.sourceHandlers||[];let o;for(let c=0;c<a.length;c++)if(o=a[c].canPlayType(s),o)return o;return""},i.selectSourceHandler=function(s,a){const o=i.sourceHandlers||[];let c;for(let d=0;d<o.length;d++)if(c=o[d].canHandleSource(s,a),c)return o[d];return null},i.canPlaySource=function(s,a){const o=i.selectSourceHandler(s,a);return o?o.canHandleSource(s,a):""},["seekable","seeking","duration"].forEach(function(s){const a=this[s];typeof a=="function"&&(this[s]=function(){return this.sourceHandler_&&this.sourceHandler_[s]?this.sourceHandler_[s].apply(this.sourceHandler_,arguments):a.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(s){let a=i.selectSourceHandler(s,this.options_);a||(i.nativeSourceHandler?a=i.nativeSourceHandler:log$1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),a!==i.nativeSourceHandler&&(this.currentSource_=s),this.sourceHandler_=a.handleSource(s,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];const middlewares={},middlewareInstances={},TERMINATOR={};function use(i,e){middlewares[i]=middlewares[i]||[],middlewares[i].push(e)}function setSource(i,e,s){i.setTimeout(()=>setSourceHelper(e,middlewares[e.type],s,i),1)}function setTech(i,e){i.forEach(s=>s.setTech&&s.setTech(e))}function get(i,e,s){return i.reduceRight(middlewareIterator(s),e[s]())}function set(i,e,s,a){return e[s](i.reduce(middlewareIterator(s),a))}function mediate(i,e,s,a=null){const o="call"+toTitleCase$1(s),c=i.reduce(middlewareIterator(o),a),d=c===TERMINATOR,h=d?null:e[s](c);return executeRight(i,s,h,d),h}const allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1},allowedMediators={play:1,pause:1};function middlewareIterator(i){return(e,s)=>e===TERMINATOR?TERMINATOR:s[i]?s[i](e):e}function executeRight(i,e,s,a){for(let o=i.length-1;o>=0;o--){const c=i[o];c[e]&&c[e](a,s)}}function clearCacheForPlayer(i){middlewareInstances[i.id()]=null}function getOrCreateFactory(i,e){const s=middlewareInstances[i.id()];let a=null;if(s==null)return a=e(i),middlewareInstances[i.id()]=[[e,a]],a;for(let o=0;o<s.length;o++){const[c,d]=s[o];c===e&&(a=d)}return a===null&&(a=e(i),s.push([e,a])),a}function setSourceHelper(i={},e=[],s,a,o=[],c=!1){const[d,...h]=e;if(typeof d=="string")setSourceHelper(i,middlewares[d],s,a,o,c);else if(d){const b=getOrCreateFactory(a,d);if(!b.setSource)return o.push(b),setSourceHelper(i,h,s,a,o,c);b.setSource(Object.assign({},i),function(tt,nt){if(tt)return setSourceHelper(i,h,s,a,o,c);o.push(b),setSourceHelper(nt,i.type===nt.type?h:middlewares[nt.type],s,a,o,c)})}else h.length?setSourceHelper(i,h,s,a,o,c):c?s(i,o):setSourceHelper(i,middlewares["*"],s,a,o,!0)}const MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},getMimetype=function(i=""){const e=getFileExtension(i);return MimetypesKind[e.toLowerCase()]||""},findMimetype=(i,e)=>{if(!e)return"";if(i.cache_.source.src===e&&i.cache_.source.type)return i.cache_.source.type;const s=i.cache_.sources.filter(o=>o.src===e);if(s.length)return s[0].type;const a=i.$$("source");for(let o=0;o<a.length;o++){const c=a[o];if(c.type&&c.src&&c.src===e)return c.type}return getMimetype(e)},filterSource=function(i){if(Array.isArray(i)){let e=[];i.forEach(function(s){s=filterSource(s),Array.isArray(s)?e=e.concat(s):isObject(s)&&e.push(s)}),i=e}else typeof i=="string"&&i.trim()?i=[fixSource({src:i})]:isObject(i)&&typeof i.src=="string"&&i.src&&i.src.trim()?i=[fixSource(i)]:i=[];return i};function fixSource(i){if(!i.type){const e=getMimetype(i.src);e&&(i.type=e)}return i}var icons=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">
      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;class MediaLoader extends Component$1{constructor(e,s,a){const o=merge$1({createEl:!1},s);if(super(e,o,a),!s.playerOptions.sources||s.playerOptions.sources.length===0)for(let c=0,d=s.playerOptions.techOrder;c<d.length;c++){const h=toTitleCase$1(d[c]);let b=Tech.getTech(h);if(h||(b=Component$1.getComponent(h)),b&&b.isSupported()){e.loadTech_(h);break}}else e.src(s.playerOptions.sources)}}Component$1.registerComponent("MediaLoader",MediaLoader);class ClickableComponent extends Component$1{constructor(e,s){super(e,s),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=a=>this.handleMouseOver(a),this.handleMouseOut_=a=>this.handleMouseOut(a),this.handleClick_=a=>this.handleClick(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.emitTapEvents(),this.enable()}createEl(e="div",s={},a={}){s=Object.assign({className:this.buildCSSClass(),tabIndex:0},s),e==="button"&&log$1.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),a=Object.assign({role:"button"},a),this.tabIndex_=s.tabIndex;const o=createEl(e,s,a);return this.player_.options_.experimentalSvgIcons||o.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,s=this.el()){if(e===void 0)return this.controlText_||"Need Text";const a=this.localize(e);this.controlText_=e,textContent(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",a)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){keycode.isEventKey(e,"Space")||keycode.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Component$1.registerComponent("ClickableComponent",ClickableComponent);class PosterImage extends ClickableComponent{constructor(e,s){super(e,s),this.update(),this.update_=a=>this.update(a),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return createEl("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const s=this.player().poster();this.setSrc(s),s?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(createEl("picture",{className:"vjs-poster",tabIndex:-1},{},createEl("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause())}}PosterImage.prototype.crossorigin=PosterImage.prototype.crossOrigin;Component$1.registerComponent("PosterImage",PosterImage);const darkGray="#222",lightGray="#ccc",fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(i,e){let s;if(i.length===4)s=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else if(i.length===7)s=i.slice(1);else throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(s.slice(0,2),16)+","+parseInt(s.slice(2,4),16)+","+parseInt(s.slice(4,6),16)+","+e+")"}function tryUpdateStyle(i,e,s){try{i.style[e]=s}catch{return}}function getCSSPositionValue(i){return i?`${i}px`:""}class TextTrackDisplay extends Component$1{constructor(e,s,a){super(e,s,a);const o=d=>this.updateDisplay(d),c=d=>{this.updateDisplayOverlay(),this.updateDisplay(d)};e.on("loadstart",d=>this.toggleDisplay(d)),e.on("texttrackchange",o),e.on("loadedmetadata",d=>{this.updateDisplayOverlay(),this.preselectTrack(d)}),e.ready(bind_(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",c),e.on("playerresize",c);const d=window$1$1.screen.orientation||window$1$1,h=window$1$1.screen.orientation?"change":"orientationchange";d.addEventListener(h,c),e.on("dispose",()=>d.removeEventListener(h,c));const b=this.options_.playerOptions.tracks||[];for(let tt=0;tt<b.length;tt++)this.player_.addRemoteTextTrack(b[tt],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},s=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage;let o,c,d;for(let h=0;h<s.length;h++){const b=s[h];a&&a.enabled&&a.language&&a.language===b.language&&b.kind in e?b.kind===a.kind?d=b:d||(d=b):a&&!a.enabled?(d=null,o=null,c=null):b.default&&(b.kind==="descriptions"&&!o?o=b:b.kind in e&&!c&&(c=b))}d?d.mode="showing":c?c.mode="showing":o&&(o.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof window$1$1.WebVTT=="function"&&window$1$1.WebVTT.processCues(window$1$1,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){const d=[];for(let h=0;h<e.length;++h){const b=e[h];b.mode==="showing"&&d.push(b)}this.updateForTrack(d);return}let a=null,o=null,c=e.length;for(;c--;){const d=e[c];d.mode==="showing"&&(d.kind==="descriptions"?a=d:o=d)}o?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!window$1$1.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),s=this.player_.currentHeight(),a=e/s,o=this.player_.videoWidth()/this.player_.videoHeight();let c=0,d=0;Math.abs(a-o)>.1&&(a>o?c=Math.round((e-s*o)/2):d=Math.round((s-e/o)/2)),tryUpdateStyle(this.el_,"insetInline",getCSSPositionValue(c)),tryUpdateStyle(this.el_,"insetBlock",getCSSPositionValue(d))}updateDisplayState(e){const s=this.player_.textTrackSettings.getValues(),a=e.activeCues;let o=a.length;for(;o--;){const c=a[o];if(!c)continue;const d=c.displayState;if(s.color&&(d.firstChild.style.color=s.color),s.textOpacity&&tryUpdateStyle(d.firstChild,"color",constructColor(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(d.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&tryUpdateStyle(d.firstChild,"backgroundColor",constructColor(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?tryUpdateStyle(d,"backgroundColor",constructColor(s.windowColor,s.windowOpacity)):d.style.backgroundColor=s.windowColor),s.edgeStyle&&(s.edgeStyle==="dropshadow"?d.firstChild.style.textShadow=`2px 2px 3px ${darkGray}, 2px 2px 4px ${darkGray}, 2px 2px 5px ${darkGray}`:s.edgeStyle==="raised"?d.firstChild.style.textShadow=`1px 1px ${darkGray}, 2px 2px ${darkGray}, 3px 3px ${darkGray}`:s.edgeStyle==="depressed"?d.firstChild.style.textShadow=`1px 1px ${lightGray}, 0 1px ${lightGray}, -1px -1px ${darkGray}, 0 -1px ${darkGray}`:s.edgeStyle==="uniform"&&(d.firstChild.style.textShadow=`0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}`)),s.fontPercent&&s.fontPercent!==1){const h=window$1$1.parseFloat(d.style.fontSize);d.style.fontSize=h*s.fontPercent+"px",d.style.height="auto",d.style.top="auto"}s.fontFamily&&s.fontFamily!=="default"&&(s.fontFamily==="small-caps"?d.firstChild.style.fontVariant="small-caps":d.firstChild.style.fontFamily=fontMap[s.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof window$1$1.WebVTT!="function"||e.every(a=>!a.activeCues))return;const s=[];for(let a=0;a<e.length;++a){const o=e[a];for(let c=0;c<o.activeCues.length;++c)s.push(o.activeCues[c])}window$1$1.WebVTT.processCues(window$1$1,s,this.el_);for(let a=0;a<e.length;++a){const o=e[a];for(let c=0;c<o.activeCues.length;++c){const d=o.activeCues[c].displayState;addClass(d,"vjs-text-track-cue","vjs-text-track-cue-"+(o.language?o.language:a)),o.language&&setAttribute(d,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}}Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);class LoadingSpinner extends Component$1{createEl(){const e=this.player_.isAudio(),s=this.localize(e?"Audio Player":"Video Player"),a=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),o=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Component$1.registerComponent("LoadingSpinner",LoadingSpinner);class Button extends ClickableComponent{createEl(e,s={},a={}){e="button",s=Object.assign({className:this.buildCSSClass()},s),a=Object.assign({type:"button"},a);const o=createEl(e,s,a);return this.player_.options_.experimentalSvgIcons||o.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o}addChild(e,s={}){const a=this.constructor.name;return log$1.warn(`Adding an actionable (user controllable) child to a Button (${a}) is not supported; use a ClickableComponent instead.`),Component$1.prototype.addChild.call(this,e,s)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(keycode.isEventKey(e,"Space")||keycode.isEventKey(e,"Enter")){e.stopPropagation();return}super.handleKeyDown(e)}}Component$1.registerComponent("Button",Button);class BigPlayButton extends Button{constructor(e,s){super(e,s),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",a=>this.handleMouseDown(a))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const s=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){silencePromise(s),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const a=this.player_.getChild("controlBar"),o=a&&a.getChild("playToggle");if(!o){this.player_.tech(!0).focus();return}const c=()=>o.focus();isPromise(s)?s.then(c,()=>{}):this.setTimeout(c,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);class CloseButton extends Button{constructor(e,s){super(e,s),this.setIcon("cancel"),this.controlText(s&&s.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){keycode.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Component$1.registerComponent("CloseButton",CloseButton);class PlayToggle extends Button{constructor(e,s={}){super(e,s),s.replay=s.replay===void 0||s.replay,this.setIcon("play"),this.on(e,"play",a=>this.handlePlay(a)),this.on(e,"pause",a=>this.handlePause(a)),s.replay&&this.on(e,"ended",a=>this.handleEnded(a))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",s=>this.handleSeeked(s))}}PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);class TimeDisplay extends Component$1{constructor(e,s){super(e,s),this.on(e,["timeupdate","ended","seeking"],a=>this.update(a)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),s=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),a=createEl("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return s.appendChild(a),this.contentEl_=createEl("span",{className:`${e}-display`},{role:"presentation"}),s.appendChild(this.contentEl_),s}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=formatTime(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let s=this.textNode_;s&&this.contentEl_.firstChild!==s&&(s=null,log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document$2.createTextNode(this.formattedTime_),this.textNode_&&(s?this.contentEl_.replaceChild(this.textNode_,s):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);class CurrentTimeDisplay extends TimeDisplay{buildCSSClass(){return"vjs-current-time"}updateContent(e){let s;this.player_.ended()?s=this.player_.duration():s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)}}CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);class DurationDisplay extends TimeDisplay{constructor(e,s){super(e,s);const a=o=>this.updateContent(o);this.on(e,"durationchange",a),this.on(e,"loadstart",a),this.on(e,"loadedmetadata",a)}buildCSSClass(){return"vjs-duration"}updateContent(e){const s=this.player_.duration();this.updateTextNode_(s)}}DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);class TimeDivider extends Component$1{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=super.createEl("div"),a=super.createEl("span",{textContent:"/"});return s.appendChild(a),e.appendChild(s),e}}Component$1.registerComponent("TimeDivider",TimeDivider);class RemainingTimeDisplay extends TimeDisplay{constructor(e,s){super(e,s),this.on(e,"durationchange",a=>this.updateContent(a))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let s;this.player_.ended()?s=0:this.player_.remainingTimeDisplay?s=this.player_.remainingTimeDisplay():s=this.player_.remainingTime(),this.updateTextNode_(s)}}RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);class LiveDisplay extends Component$1{constructor(e,s){super(e,s),this.updateShowing(),this.on(this.player(),"durationchange",a=>this.updateShowing(a))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(document$2.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Component$1.registerComponent("LiveDisplay",LiveDisplay);class SeekToLive extends Button{constructor(e,s){super(e,s),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=a=>this.updateLiveEdgeStatus(a),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);function clamp(i,e,s){return i=Number(i),Math.min(s,Math.max(e,isNaN(i)?e:i))}var Num=Object.freeze({__proto__:null,clamp});class Slider extends Component$1{constructor(e,s){super(e,s),this.handleMouseDown_=a=>this.handleMouseDown(a),this.handleMouseUp_=a=>this.handleMouseUp(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.handleClick_=a=>this.handleClick(a),this.handleMouseMove_=a=>this.handleMouseMove(a),this.update_=a=>this.update(a),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,s={},a={}){return s.className=s.className+" vjs-slider",s=Object.assign({tabIndex:0},s),a=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},a),super.createEl(e,s,a)}handleMouseDown(e){const s=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!IS_CHROME&&e.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const s=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(s,"mousemove",this.handleMouseMove_),this.off(s,"mouseup",this.handleMouseUp_),this.off(s,"touchmove",this.handleMouseMove_),this.off(s,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const s=this.vertical()?"height":"width";this.bar.el().style[s]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(clamp(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const s=getPointerPosition(this.el_,e);return this.vertical()?s.y:s.x}handleKeyDown(e){keycode.isEventKey(e,"Left")||keycode.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):keycode.isEventKey(e,"Right")||keycode.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Component$1.registerComponent("Slider",Slider);const percentify=(i,e)=>clamp(i/e*100,0,100).toFixed(2)+"%";class LoadProgressBar extends Component$1{constructor(e,s){super(e,s),this.partEls_=[],this.on(e,"progress",a=>this.update(a))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),s=createEl("span",{className:"vjs-control-text"}),a=createEl("span",{textContent:this.localize("Loaded")}),o=document$2.createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const s=this.player_.liveTracker,a=this.player_.buffered(),o=s&&s.isLive()?s.seekableEnd():this.player_.duration(),c=this.player_.bufferedEnd(),d=this.partEls_,h=percentify(c,o);this.percent_!==h&&(this.el_.style.width=h,textContent(this.percentageEl_,h),this.percent_=h);for(let b=0;b<a.length;b++){const tt=a.start(b),nt=a.end(b);let ft=d[b];ft||(ft=this.el_.appendChild(createEl()),d[b]=ft),!(ft.dataset.start===tt&&ft.dataset.end===nt)&&(ft.dataset.start=tt,ft.dataset.end=nt,ft.style.left=percentify(tt,c),ft.style.width=percentify(nt-tt,c))}for(let b=d.length;b>a.length;b--)this.el_.removeChild(d[b-1]);d.length=a.length})}}Component$1.registerComponent("LoadProgressBar",LoadProgressBar);class TimeTooltip extends Component$1{constructor(e,s){super(e,s),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,s,a){const o=findPosition(this.el_),c=getBoundingClientRect(this.player_.el()),d=e.width*s;if(!c||!o)return;let h=e.left-c.left+d,b=e.width-d+(c.right-e.right);b||(b=e.width-d,h=d);let tt=o.width/2;h<tt?tt+=tt-h:b<tt&&(tt=b),tt<0?tt=0:tt>o.width&&(tt=o.width),tt=Math.round(tt),this.el_.style.right=`-${tt}px`,this.write(a)}write(e){textContent(this.el_,e)}updateTime(e,s,a,o){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let c;const d=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const h=this.player_.liveTracker.liveWindow(),b=h-s*h;c=(b<1?"":"-")+formatTime(b,h)}else c=formatTime(a,d);this.update(e,s,c),o&&o()})}}Component$1.registerComponent("TimeTooltip",TimeTooltip);class PlayProgressBar extends Component$1{constructor(e,s){super(e,s),this.setIcon("circle"),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,s){const a=this.getChild("timeTooltip");if(!a)return;const o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(e,s,o)}}PlayProgressBar.prototype.options_={children:[]};!IS_IOS&&!IS_ANDROID&&PlayProgressBar.prototype.options_.children.push("timeTooltip");Component$1.registerComponent("PlayProgressBar",PlayProgressBar);class MouseTimeDisplay extends Component$1{constructor(e,s){super(e,s),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,s){const a=s*this.player_.duration();this.getChild("timeTooltip").updateTime(e,s,a,()=>{this.el_.style.left=`${e.width*s}px`})}}MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);const STEP_SECONDS=5,PAGE_KEY_MULTIPLIER=12;class SeekBar extends Slider{constructor(e,s){super(e,s),this.setEventHandlers_()}setEventHandlers_(){this.update_=bind_(this,this.update),this.update=throttle(this.update_,UPDATE_REFRESH_INTERVAL),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$2&&"visibilityState"in document$2&&this.on(document$2,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){document$2.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(document$2.visibilityState==="hidden")return;const s=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const a=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),o=this.player_.liveTracker;let c=this.player_.duration();o&&o.isLive()&&(c=this.player_.liveTracker.liveCurrentTime()),this.percent_!==s&&(this.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),this.percent_=s),(this.currentTime_!==a||this.duration_!==c)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(a,c),formatTime(c,c)],"{1} of {2}")),this.currentTime_=a,this.duration_=c),this.bar&&this.bar.update(getBoundingClientRect(this.el()),this.getProgress())}),s}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let s;const a=this.player_.liveTracker;return a&&a.isLive()?(s=(e-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(s=1)):s=e/this.player_.duration(),s}handleMouseDown(e){isSingleLeftClick(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,s=!1){if(!isSingleLeftClick(e)||isNaN(this.player_.duration()))return;!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let a;const o=this.calculateDistance(e),c=this.player_.liveTracker;if(!c||!c.isLive())a=o*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(o>=.99){c.seekToLiveEdge();return}const d=c.seekableStart(),h=c.liveCurrentTime();if(a=d+o*c.liveWindow(),a>=h&&(a=h),a<=d&&(a=d+.1),a===1/0)return}this.userSeek_(a),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+STEP_SECONDS)}stepBack(){this.userSeek_(this.player_.currentTime()-STEP_SECONDS)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const s=this.player_.liveTracker;if(keycode.isEventKey(e,"Space")||keycode.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(keycode.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(keycode.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(keycode(e))){e.preventDefault(),e.stopPropagation();const a=(keycode.codes[keycode(e)]-keycode.codes[0])*10/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else keycode.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER)):keycode.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$2&&"visibilityState"in document$2&&this.off(document$2,"visibilitychange",this.toggleVisibility_),super.dispose()}}SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!IS_IOS&&!IS_ANDROID&&SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Component$1.registerComponent("SeekBar",SeekBar);class ProgressControl extends Component$1{constructor(e,s){super(e,s),this.handleMouseMove=throttle(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.throttledHandleMouseSeek=throttle(bind_(this,this.handleMouseSeek),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.handleMouseDownHandler_=a=>this.handleMouseDown(a),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const s=this.getChild("seekBar");if(!s)return;const a=s.getChild("playProgressBar"),o=s.getChild("mouseTimeDisplay");if(!a&&!o)return;const c=s.el(),d=findPosition(c);let h=getPointerPosition(c,e).x;h=clamp(h,0,1),o&&o.update(d,h),a&&a.update(d,s.getProgress())}handleMouseSeek(e){const s=this.getChild("seekBar");s&&s.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&silencePromise(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const s=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(e),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const s=this.getChild("seekBar");s&&s.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);class PictureInPictureToggle extends Button{constructor(e,s){super(e,s),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],a=>this.handlePictureInPictureChange(a)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],a=>this.handlePictureInPictureEnabledChange(a)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){document$2.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window$1$1?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof document$2.exitPictureInPicture=="function"&&super.show()}}PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);class FullscreenToggle extends Button{constructor(e,s){super(e,s),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",a=>this.handleFullscreenChange(a)),document$2[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);const checkVolumeSupport=function(i,e){e.tech_&&!e.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};class VolumeLevel extends Component$1{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Component$1.registerComponent("VolumeLevel",VolumeLevel);class VolumeLevelTooltip extends Component$1{constructor(e,s){super(e,s),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,s,a,o){if(!a){const c=getBoundingClientRect(this.el_),d=getBoundingClientRect(this.player_.el()),h=e.width*s;if(!d||!c)return;const b=e.left-d.left+h,tt=e.width-h+(d.right-e.right);let nt=c.width/2;b<nt?nt+=nt-b:tt<nt&&(nt=tt),nt<0?nt=0:nt>c.width&&(nt=c.width),this.el_.style.right=`-${nt}px`}this.write(`${o}%`)}write(e){textContent(this.el_,e)}updateVolume(e,s,a,o,c){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,s,a,o.toFixed(0)),c&&c()})}}Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);class MouseVolumeLevelDisplay extends Component$1{constructor(e,s){super(e,s),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,s,a){const o=100*s;this.getChild("volumeLevelTooltip").updateVolume(e,s,a,o,()=>{a?this.el_.style.bottom=`${e.height*s}px`:this.el_.style.left=`${e.width*s}px`})}}MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);class VolumeBar extends Slider{constructor(e,s){super(e,s),this.on("slideractive",a=>this.updateLastVolume_(a)),this.on(e,"volumechange",a=>this.updateARIAAttributes(a)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){isSingleLeftClick(e)&&super.handleMouseDown(e)}handleMouseMove(e){const s=this.getChild("mouseVolumeLevelDisplay");if(s){const a=this.el(),o=getBoundingClientRect(a),c=this.vertical();let d=getPointerPosition(a,e);d=c?d.y:d.x,d=clamp(d,0,1),s.update(o,d,c)}isSingleLeftClick(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!IS_IOS&&!IS_ANDROID&&VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);class VolumeControl extends Component$1{constructor(e,s={}){s.vertical=s.vertical||!1,(typeof s.volumeBar>"u"||isPlain(s.volumeBar))&&(s.volumeBar=s.volumeBar||{},s.volumeBar.vertical=s.vertical),super(e,s),checkVolumeSupport(this,e),this.throttledHandleMouseMove=throttle(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.on("mousedown",a=>this.handleMouseDown(a)),this.on("touchstart",a=>this.handleMouseDown(a)),this.on("mousemove",a=>this.handleMouseMove(a)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);const checkMuteSupport=function(i,e){e.tech_&&!e.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};class MuteToggle extends Button{constructor(e,s){super(e,s),checkMuteSupport(this,e),this.on(e,["loadstart","volumechange"],a=>this.update(a))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const s=this.player_.volume(),a=this.player_.lastVolume_();if(s===0){const o=a<.1?.1:a;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let s=3;this.setIcon("volume-high"),IS_IOS&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),s=0):e<.33?(this.setIcon("volume-low"),s=1):e<.67&&(this.setIcon("volume-medium"),s=2),removeClass(this.el_,[0,1,2,3].reduce((a,o)=>a+`${o?" ":""}vjs-vol-${o}`,"")),addClass(this.el_,`vjs-vol-${s}`)}updateControlText_(){const s=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)}}MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);class VolumePanel extends Component$1{constructor(e,s={}){typeof s.inline<"u"?s.inline=s.inline:s.inline=!0,(typeof s.volumeControl>"u"||isPlain(s.volumeControl))&&(s.volumeControl=s.volumeControl||{},s.volumeControl.vertical=!s.inline),super(e,s),this.handleKeyPressHandler_=a=>this.handleKeyPress(a),this.on(e,["loadstart"],a=>this.volumePanelState_(a)),this.on(this.muteToggle,"keyup",a=>this.handleKeyPress(a)),this.on(this.volumeControl,"keyup",a=>this.handleVolumeControlKeyUp(a)),this.on("keydown",a=>this.handleKeyPress(a)),this.on("mouseover",a=>this.handleMouseOver(a)),this.on("mouseout",a=>this.handleMouseOut(a)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){keycode.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),on(document$2,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),off(document$2,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){keycode.isEventKey(e,"Esc")&&this.handleMouseOut()}}VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);class SkipForward extends Button{constructor(e,s){super(e,s),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const s=this.player_.currentTime(),a=this.player_.liveTracker,o=a&&a.isLive()?a.seekableEnd():this.player_.duration();let c;s+this.skipTime<=o?c=s+this.skipTime:c=o,this.player_.currentTime(c)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}SkipForward.prototype.controlText_="Skip Forward";Component$1.registerComponent("SkipForward",SkipForward);class SkipBackward extends Button{constructor(e,s){super(e,s),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const s=this.player_.currentTime(),a=this.player_.liveTracker,o=a&&a.isLive()&&a.seekableStart();let c;o&&s-this.skipTime<=o?c=o:s>=this.skipTime?c=s-this.skipTime:c=0,this.player_.currentTime(c)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}SkipBackward.prototype.controlText_="Skip Backward";Component$1.registerComponent("SkipBackward",SkipBackward);class Menu extends Component$1{constructor(e,s){super(e,s),s&&(this.menuButton_=s.menuButton),this.focusedChild_=-1,this.on("keydown",a=>this.handleKeyDown(a)),this.boundHandleBlur_=a=>this.handleBlur(a),this.boundHandleTapClick_=a=>this.handleTapClick(a)}addEventListenerForItem(e){e instanceof Component$1&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Component$1&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const s=this.addChild(e);s&&this.addEventListenerForItem(s)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const s=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),on(s,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),s}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const s=e.relatedTarget||document$2.activeElement;if(!this.children().some(a=>a.el()===s)){const a=this.menuButton_;a&&a.buttonPressed_&&s!==a.el().firstChild&&a.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const s=this.children();if(!Array.isArray(s))return;const a=s.filter(o=>o.el()===e.target)[0];if(!a)return;a.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){keycode.isEventKey(e,"Left")||keycode.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(keycode.isEventKey(e,"Right")||keycode.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(e<0?e=0:e>=s.length&&(e=s.length-1),this.focusedChild_=e,s[e].el_.focus())}}Component$1.registerComponent("Menu",Menu);class MenuButton extends Component$1{constructor(e,s={}){super(e,s),this.menuButton_=new Button(e,s),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const a=Button.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+a,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const o=c=>this.handleClick(c);this.handleMenuKeyUp_=c=>this.handleMenuKeyUp(c),this.on(this.menuButton_,"tap",o),this.on(this.menuButton_,"click",o),this.on(this.menuButton_,"keydown",c=>this.handleKeyDown(c)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),on(document$2,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",c=>this.handleMouseLeave(c)),this.on("keydown",c=>this.handleSubmenuKeyDown(c))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Menu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const s=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1}),a=new Component$1(this.player_,{el:s});e.addItem(a)}if(this.items=this.createItems(),this.items)for(let s=0;s<this.items.length;s++)e.addItem(this.items[s]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const s=Button.prototype.buildCSSClass();return`vjs-menu-button ${e} ${s} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,s=this.menuButton_.el()){return this.menuButton_.controlText(e,s)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),off(document$2,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){keycode.isEventKey(e,"Esc")||keycode.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),keycode.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(keycode.isEventKey(e,"Up")||keycode.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(keycode.isEventKey(e,"Esc")||keycode.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(keycode.isEventKey(e,"Esc")||keycode.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),keycode.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),IS_IOS&&isInFrame())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Component$1.registerComponent("MenuButton",MenuButton);class TrackButton extends MenuButton{constructor(e,s){const a=s.tracks;if(super(e,s),this.items.length<=1&&this.hide(),!a)return;const o=bind_(this,this.update);a.addEventListener("removetrack",o),a.addEventListener("addtrack",o),a.addEventListener("labelchange",o),this.player_.on("ready",o),this.player_.on("dispose",function(){a.removeEventListener("removetrack",o),a.removeEventListener("addtrack",o),a.removeEventListener("labelchange",o)})}}Component$1.registerComponent("TrackButton",TrackButton);const MenuKeys=["Tab","Esc","Up","Down","Right","Left"];class MenuItem extends ClickableComponent{constructor(e,s){super(e,s),this.selectable=s.selectable,this.isSelected_=s.selected||!1,this.multiSelectable=s.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,s,a){this.nonIconControl=!0;const o=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},s),a),c=createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?o.appendChild(c):o.replaceChild(c,o.querySelector(".vjs-icon-placeholder")),o}handleKeyDown(e){MenuKeys.some(s=>keycode.isEventKey(e,s))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Component$1.registerComponent("MenuItem",MenuItem);class TextTrackMenuItem extends MenuItem{constructor(e,s){const a=s.track,o=e.textTracks();s.label=a.label||a.language||"Unknown",s.selected=a.mode==="showing",super(e,s),this.track=a,this.kinds=(s.kinds||[s.kind||this.track.kind]).filter(Boolean);const c=(...h)=>{this.handleTracksChange.apply(this,h)},d=(...h)=>{this.handleSelectedLanguageChange.apply(this,h)};if(e.on(["loadstart","texttrackchange"],c),o.addEventListener("change",c),o.addEventListener("selectedlanguagechange",d),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],c),o.removeEventListener("change",c),o.removeEventListener("selectedlanguagechange",d)}),o.onchange===void 0){let h;this.on(["tap","click"],function(){if(typeof window$1$1.Event!="object")try{h=new window$1$1.Event("change")}catch{}h||(h=document$2.createEvent("Event"),h.initEvent("change",!0,!0)),o.dispatchEvent(h)})}this.handleTracksChange()}handleClick(e){const s=this.track,a=this.player_.textTracks();if(super.handleClick(e),!!a)for(let o=0;o<a.length;o++){const c=a[o];this.kinds.indexOf(c.kind)!==-1&&(c===s?c.mode!=="showing"&&(c.mode="showing"):c.mode!=="disabled"&&(c.mode="disabled"))}}handleTracksChange(e){const s=this.track.mode==="showing";s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);class OffTextTrackMenuItem extends TextTrackMenuItem{constructor(e,s){s.track={player:e,kind:s.kind,kinds:s.kinds,default:!1,mode:"disabled"},s.kinds||(s.kinds=[s.kind]),s.label?s.track.label=s.label:s.track.label=s.kinds.join(" and ")+" off",s.selectable=!0,s.multiSelectable=!1,super(e,s)}handleTracksChange(e){const s=this.player().textTracks();let a=!0;for(let o=0,c=s.length;o<c;o++){const d=s[o];if(this.options_.kinds.indexOf(d.kind)>-1&&d.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(e){const s=this.player().textTracks();let a=!0;for(let o=0,c=s.length;o<c;o++){const d=s[o];if(["captions","descriptions","subtitles"].indexOf(d.kind)>-1&&d.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);class TextTrackButton extends TrackButton{constructor(e,s={}){s.tracks=e.textTracks(),super(e,s)}createItems(e=[],s=TextTrackMenuItem){let a;this.label_&&(a=`${this.label_} off`),e.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;const o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let c=0;c<o.length;c++){const d=o[c];if(this.kinds_.indexOf(d.kind)>-1){const h=new s(this.player_,{track:d,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});h.addClass(`vjs-${d.kind}-menu-item`),e.push(h)}}return e}}Component$1.registerComponent("TextTrackButton",TextTrackButton);class ChaptersTrackMenuItem extends MenuItem{constructor(e,s){const a=s.track,o=s.cue,c=e.currentTime();s.selectable=!0,s.multiSelectable=!1,s.label=o.text,s.selected=o.startTime<=c&&c<o.endTime,super(e,s),this.track=a,this.cue=o}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);class ChaptersButton extends TextTrackButton{constructor(e,s,a){super(e,s,a),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(o=>{o.selected(this.track_.activeCues[0]===o.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),super.update()):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let s=e.length-1;s>=0;s--){const a=e[s];if(a.kind===this.kind_)return a}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(toTitleCase$1(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const s=this.track_.cues;if(!s)return e;for(let a=0,o=s.length;a<o;a++){const c=s[a],d=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:c});e.push(d)}return e}}ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);class DescriptionsButton extends TextTrackButton{constructor(e,s,a){super(e,s,a),this.setIcon("audio-description");const o=e.textTracks(),c=bind_(this,this.handleTracksChange);o.addEventListener("change",c),this.on("dispose",function(){o.removeEventListener("change",c)})}handleTracksChange(e){const s=this.player().textTracks();let a=!1;for(let o=0,c=s.length;o<c;o++){const d=s[o];if(d.kind!==this.kind_&&d.mode==="showing"){a=!0;break}}a?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);class SubtitlesButton extends TextTrackButton{constructor(e,s,a){super(e,s,a),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);class CaptionSettingsMenuItem extends TextTrackMenuItem{constructor(e,s){s.track={player:e,kind:s.kind,label:s.kind+" settings",selectable:!1,default:!1,mode:"disabled"},s.selectable=!1,s.name="CaptionSettingsMenuItem",super(e,s),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+s.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);class CaptionsButton extends TextTrackButton{constructor(e,s,a){super(e,s,a),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);class SubsCapsMenuItem extends TextTrackMenuItem{createEl(e,s,a){const o=super.createEl(e,s,a),c=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",o):c.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),c.appendChild(createEl("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),o}}Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);class SubsCapsButton extends TextTrackButton{constructor(e,s={}){super(e,s),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(toTitleCase$1(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,SubsCapsMenuItem),e}}SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);class AudioTrackMenuItem extends MenuItem{constructor(e,s){const a=s.track,o=e.audioTracks();s.label=a.label||a.language||"Unknown",s.selected=a.enabled,super(e,s),this.track=a,this.addClass(`vjs-${a.kind}-menu-item`);const c=(...d)=>{this.handleTracksChange.apply(this,d)};o.addEventListener("change",c),this.on("dispose",()=>{o.removeEventListener("change",c)})}createEl(e,s,a){const o=super.createEl(e,s,a),c=o.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(c.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),c.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const s=this.player_.audioTracks();for(let a=0;a<s.length;a++){const o=s[a];o!==this.track&&(o.enabled=o===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);class AudioTrackButton extends TrackButton{constructor(e,s={}){s.tracks=e.audioTracks(),super(e,s),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const s=this.player_.audioTracks();for(let a=0;a<s.length;a++){const o=s[a];e.push(new AudioTrackMenuItem(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return e}}AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);class PlaybackRateMenuItem extends MenuItem{constructor(e,s){const a=s.rate,o=parseFloat(a,10);s.label=a,s.selected=o===e.playbackRate(),s.selectable=!0,s.multiSelectable=!1,super(e,s),this.label=a,this.rate=o,this.on(e,"ratechange",c=>this.update(c))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);class PlaybackRateMenuButton extends MenuButton{constructor(e,s){super(e,s),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",a=>this.updateVisibility(a)),this.on(e,"ratechange",a=>this.updateLabel(a)),this.on(e,"playbackrateschange",a=>this.handlePlaybackRateschange(a))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),s=[];for(let a=e.length-1;a>=0;a--)s.push(new PlaybackRateMenuItem(this.player(),{rate:e[a]+"x"}));return s}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);class Spacer extends Component$1{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",s={},a={}){return s.className||(s.className=this.buildCSSClass()),super.createEl(e,s,a)}}Component$1.registerComponent("Spacer",Spacer);class CustomControlSpacer extends Spacer{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);class ControlBar extends Component$1{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ControlBar.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Component$1.registerComponent("ControlBar",ControlBar);class ErrorDisplay extends ModalDialog{constructor(e,s){super(e,s),this.on(e,"error",a=>{this.open(a)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}ErrorDisplay.prototype.options_=Object.assign({},ModalDialog.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);const LOCAL_STORAGE_KEY$1="vjs-text-track-settings",COLOR_BLACK=["#000","Black"],COLOR_BLUE=["#00F","Blue"],COLOR_CYAN=["#0FF","Cyan"],COLOR_GREEN=["#0F0","Green"],COLOR_MAGENTA=["#F0F","Magenta"],COLOR_RED=["#F00","Red"],COLOR_WHITE=["#FFF","White"],COLOR_YELLOW=["#FF0","Yellow"],OPACITY_OPAQUE=["1","Opaque"],OPACITY_SEMI=["0.5","Semi-Transparent"],OPACITY_TRANS=["0","Transparent"],selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:i=>i==="1.00"?null:Number(i)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(i,e){if(e&&(i=e(i)),i&&i!=="none")return i}function getSelectedOptionValue(i,e){const s=i.options[i.options.selectedIndex].value;return parseOptionValue(s,e)}function setSelectedOption(i,e,s){if(e){for(let a=0;a<i.options.length;a++)if(parseOptionValue(i.options[a].value,s)===e){i.selectedIndex=a;break}}}class TextTrackSettings extends ModalDialog{constructor(e,s){s.temporary=!1,super(e,s),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=createEl("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),s.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),each(selectConfigs,a=>{this.on(this.$(a.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,s="",a="label"){const o=selectConfigs[e],c=o.id.replace("%s",this.id_),d=[s,c].join(" ").trim(),h=`vjs_select_${newGUID()}`;return[`<${a} id="${c}"${a==="label"?` for="${h}" class="vjs-label"`:""}>`,this.localize(o.label),`</${a}>`,`<select aria-labelledby="${d}" id="${h}">`].concat(o.options.map(b=>{const tt=c+"-"+b[1].replace(/\W+/g,"");return[`<option id="${tt}" value="${b[0]}" `,`aria-labelledby="${d} ${tt}">`,this.localize(b[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return reduce(selectConfigs,(e,s,a)=>{const o=getSelectedOptionValue(this.$(s.selector),s.parser);return o!==void 0&&(e[a]=o),e},{})}setValues(e){each(selectConfigs,(s,a)=>{setSelectedOption(this.$(s.selector),e[a],s.parser)})}setDefaults(){each(selectConfigs,e=>{const s=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=s})}restoreSettings(){let e;try{e=JSON.parse(window$1$1.localStorage.getItem(LOCAL_STORAGE_KEY$1))}catch(s){log$1.warn(s)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?window$1$1.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(e)):window$1$1.localStorage.removeItem(LOCAL_STORAGE_KEY$1)}catch(s){log$1.warn(s)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,s=e&&e.subsCapsButton,a=e&&e.captionsButton;s?s.focus():a&&a.focus()}handleLanguagechange(){this.fill()}}Component$1.registerComponent("TextTrackSettings",TextTrackSettings);class ResizeManager extends Component$1{constructor(e,s){let a=s.ResizeObserver||window$1$1.ResizeObserver;s.ResizeObserver===null&&(a=!1);const o=merge$1({createEl:!a,reportTouchActivity:!1},s);super(e,o),this.ResizeObserver=s.ResizeObserver||window$1$1.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=debounce(()=>{this.resizeHandler()},100,!1,this),a?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const c=this.debouncedHandler_;let d=this.unloadListener_=function(){off(this,"resize",c),off(this,"unload",d),d=null};on(this.el_.contentWindow,"unload",d),on(this.el_.contentWindow,"resize",c)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Component$1.registerComponent("ResizeManager",ResizeManager);const defaults={trackingThreshold:20,liveTolerance:15};class LiveTracker extends Component$1{constructor(e,s){const a=merge$1(defaults,s,{createEl:!1});super(e,a),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=o=>this.handlePlay(o),this.handleFirstTimeupdate_=o=>this.handleFirstTimeupdate(o),this.handleSeeked_=o=>this.handleSeeked(o),this.seekToLiveEdge_=o=>this.seekToLiveEdge(o),this.reset_(),this.on(this.player_,"durationchange",o=>this.handleDurationchange(o)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const s=Number(window$1$1.performance.now().toFixed(4)),a=this.lastTime_===-1?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+a;const o=this.liveCurrentTime(),c=this.player_.currentTime();let d=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-c)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(d=!1),d!==this.behindLiveEdge_&&(this.behindLiveEdge_=d,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),s=[];let a=e?e.length:0;for(;a--;)s.push(e.end(a));return s.length?s.sort()[s.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),s=[];let a=e?e.length:0;for(;a--;)s.push(e.start(a));return s.length?s.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Component$1.registerComponent("LiveTracker",LiveTracker);class TitleBar extends Component$1{constructor(e,s){super(e,s),this.on("statechanged",a=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:createEl("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${newGUID()}`}),description:createEl("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${newGUID()}`})},createEl("div",{className:"vjs-title-bar"},{},values(this.els))}updateDom_(){const e=this.player_.tech_,s=e&&e.el_,a={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(o=>{const c=this.state[o],d=this.els[o],h=a[o];emptyEl(d),c&&textContent(d,c),s&&(s.removeAttribute(h),c&&s.setAttribute(h,d.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,s=e&&e.el_;s&&(s.removeAttribute("aria-labelledby"),s.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Component$1.registerComponent("TitleBar",TitleBar);const sourcesetLoad=i=>{const e=i.el();if(e.hasAttribute("src"))return i.triggerSourceset(e.src),!0;const s=i.$$("source"),a=[];let o="";if(!s.length)return!1;for(let c=0;c<s.length;c++){const d=s[c].src;d&&a.indexOf(d)===-1&&a.push(d)}return a.length?(a.length===1&&(o=a[0]),i.triggerSourceset(o),!0):!1},innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(i){const e=document$2.createElement(this.nodeName.toLowerCase());e.innerHTML=i;const s=document$2.createDocumentFragment();for(;e.childNodes.length;)s.appendChild(e.childNodes[0]);return this.innerText="",window$1$1.Element.prototype.appendChild.call(this,s),this.innerHTML}}),getDescriptor=(i,e)=>{let s={};for(let a=0;a<i.length&&(s=Object.getOwnPropertyDescriptor(i[a],e),!(s&&s.set&&s.get));a++);return s.enumerable=!0,s.configurable=!0,s},getInnerHTMLDescriptor=i=>getDescriptor([i.el(),window$1$1.HTMLMediaElement.prototype,window$1$1.Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML"),firstSourceWatch=function(i){const e=i.el();if(e.resetSourceWatch_)return;const s={},a=getInnerHTMLDescriptor(i),o=c=>(...d)=>{const h=c.apply(e,d);return sourcesetLoad(i),h};["append","appendChild","insertAdjacentHTML"].forEach(c=>{e[c]&&(s[c]=e[c],e[c]=o(s[c]))}),Object.defineProperty(e,"innerHTML",merge$1(a,{set:o(a.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(s).forEach(c=>{e[c]=s[c]}),Object.defineProperty(e,"innerHTML",a)},i.one("sourceset",e.resetSourceWatch_)},srcDescriptorPolyfill=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?getAbsoluteURL(window$1$1.Element.prototype.getAttribute.call(this,"src")):""},set(i){return window$1$1.Element.prototype.setAttribute.call(this,"src",i),i}}),getSrcDescriptor=i=>getDescriptor([i.el(),window$1$1.HTMLMediaElement.prototype,srcDescriptorPolyfill],"src"),setupSourceset=function(i){if(!i.featuresSourceset)return;const e=i.el();if(e.resetSourceset_)return;const s=getSrcDescriptor(i),a=e.setAttribute,o=e.load;Object.defineProperty(e,"src",merge$1(s,{set:c=>{const d=s.set.call(e,c);return i.triggerSourceset(e.src),d}})),e.setAttribute=(c,d)=>{const h=a.call(e,c,d);return/src/i.test(c)&&i.triggerSourceset(e.src),h},e.load=()=>{const c=o.call(e);return sourcesetLoad(i)||(i.triggerSourceset(""),firstSourceWatch(i)),c},e.currentSrc?i.triggerSourceset(e.currentSrc):sourcesetLoad(i)||firstSourceWatch(i),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=o,e.setAttribute=a,Object.defineProperty(e,"src",s),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Html5 extends Tech{constructor(e,s){super(e,s);const a=e.source;let o=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",a&&(this.el_.currentSrc!==a.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(a):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const c=this.el_.childNodes;let d=c.length;const h=[];for(;d--;){const b=c[d];b.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(b),this.remoteTextTracks().addTrack(b.track),this.textTracks().addTrack(b.track),!o&&!this.el_.hasAttribute("crossorigin")&&isCrossOrigin(b.src)&&(o=!0)):h.push(b))}for(let b=0;b<h.length;b++)this.el_.removeChild(h[b])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&o&&log$1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(TOUCH_ENABLED||IS_IPHONE)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){setupSourceset(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let s;const a=()=>{s=[];for(let c=0;c<e.length;c++){const d=e[c];d.kind==="metadata"&&s.push({track:d,storedMode:d.mode})}};a(),e.addEventListener("change",a),this.on("dispose",()=>e.removeEventListener("change",a));const o=()=>{for(let c=0;c<s.length;c++){const d=s[c];d.track.mode==="disabled"&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}e.removeEventListener("change",o)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",a),e.removeEventListener("change",o),e.addEventListener("change",o)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",a),e.addEventListener("change",a),e.removeEventListener("change",o)})}overrideNative_(e,s){if(s!==this[`featuresNative${e}Tracks`])return;const a=e.toLowerCase();this[`${a}TracksListeners_`]&&Object.keys(this[`${a}TracksListeners_`]).forEach(o=>{this.el()[`${a}Tracks`].removeEventListener(o,this[`${a}TracksListeners_`][o])}),this[`featuresNative${e}Tracks`]=!s,this[`${a}TracksListeners_`]=null,this.proxyNativeTracksForType_(a)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const s=NORMAL[e],a=this.el()[s.getterName],o=this[s.getterName]();if(!this[`featuresNative${s.capitalName}Tracks`]||!a||!a.addEventListener)return;const c={change:h=>{const b={type:"change",target:o,currentTarget:o,srcElement:o};o.trigger(b),e==="text"&&this[REMOTE.remoteText.getterName]().trigger(b)},addtrack(h){o.addTrack(h.track)},removetrack(h){o.removeTrack(h.track)}},d=function(){const h=[];for(let b=0;b<o.length;b++){let tt=!1;for(let nt=0;nt<a.length;nt++)if(a[nt]===o[b]){tt=!0;break}tt||h.push(o[b])}for(;h.length;)o.removeTrack(h.shift())};this[s.getterName+"Listeners_"]=c,Object.keys(c).forEach(h=>{const b=c[h];a.addEventListener(h,b),this.on("dispose",tt=>a.removeEventListener(h,b))}),this.on("loadstart",d),this.on("dispose",h=>this.off("loadstart",d))}proxyNativeTracks_(){NORMAL.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const a=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(a,e),Html5.disposeMediaElement(e),e=a}else{e=document$2.createElement("video");const a=this.options_.tag&&getAttributes(this.options_.tag),o=merge$1({},a);(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,setAttributes(e,Object.assign(o,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&setAttribute(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const s=["loop","muted","playsinline","autoplay"];for(let a=0;a<s.length;a++){const o=s[a],c=this.options_[o];typeof c<"u"&&(c?setAttribute(e,o,o):removeAttribute(e,o),e[o]=c)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let a=!1;const o=function(){a=!0};this.on("loadstart",o);const c=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",c),this.ready(function(){this.off("loadstart",o),this.off("loadedmetadata",c),a||this.trigger("loadstart")});return}const s=["loadstart"];s.push("loadedmetadata"),e.readyState>=2&&s.push("loadeddata"),e.readyState>=3&&s.push("canplay"),e.readyState>=4&&s.push("canplaythrough"),this.ready(function(){s.forEach(function(a){this.trigger(a)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI?this.el_.fastSeek(e):this.el_.currentTime=e}catch(s){log$1(s,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",()=>{this.off("webkitbeginfullscreen",s),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{e.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){Html5.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,s,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,s,a):super.addTextTrack(e,s,a)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const s=document$2.createElement("track");return e.kind&&(s.kind=e.kind),e.label&&(s.label=e.label),(e.language||e.srclang)&&(s.srclang=e.language||e.srclang),e.default&&(s.default=e.default),e.id&&(s.id=e.id),e.src&&(s.src=e.src),s}addRemoteTextTrack(e,s){const a=super.addRemoteTextTrack(e,s);return this.featuresNativeTextTracks&&this.el().appendChild(a),a}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const s=this.$$("track");let a=s.length;for(;a--;)(e===s[a]||e===s[a].track)&&this.el().removeChild(s[a])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window$1$1.performance&&(e.creationTime=window$1$1.performance.now()),e}}defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal())return;const i=document$2.createElement("video"),e=document$2.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",i.appendChild(e),i});Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch{return!1}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canPlayType=function(i){return Html5.TEST_VID.canPlayType(i)};Html5.canPlaySource=function(i,e){return Html5.canPlayType(i.type)};Html5.canControlVolume=function(){try{const i=Html5.TEST_VID.volume;Html5.TEST_VID.volume=i/2+.1;const e=i!==Html5.TEST_VID.volume;return e&&IS_IOS?(window$1$1.setTimeout(()=>{Html5&&Html5.prototype&&(Html5.prototype.featuresVolumeControl=i!==Html5.TEST_VID.volume)}),!1):e}catch{return!1}};Html5.canMuteVolume=function(){try{const i=Html5.TEST_VID.muted;return Html5.TEST_VID.muted=!i,Html5.TEST_VID.muted?setAttribute(Html5.TEST_VID,"muted","muted"):removeAttribute(Html5.TEST_VID,"muted","muted"),i!==Html5.TEST_VID.muted}catch{return!1}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58)return!1;try{const i=Html5.TEST_VID.playbackRate;return Html5.TEST_VID.playbackRate=i/2+.1,i!==Html5.TEST_VID.playbackRate}catch{return!1}};Html5.canOverrideAttributes=function(){try{const i=()=>{};Object.defineProperty(document$2.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(document$2.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(document$2.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(document$2.createElement("audio"),"innerHTML",{get:i,set:i})}catch{return!1}return!0};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([i,e]){defineLazyProperty(Html5.prototype,i,()=>Html5[e](),!0)});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=!0;Html5.prototype.featuresProgressEvents=!0;Html5.prototype.featuresTimeupdateEvents=!0;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);Html5.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),typeof i.load=="function"&&function(){try{i.load()}catch{}}()}};Html5.resetMediaElement=function(i){if(!i)return;const e=i.querySelectorAll("source");let s=e.length;for(;s--;)i.removeChild(e[s]);i.removeAttribute("src"),typeof i.load=="function"&&function(){try{i.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){Html5.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){Html5.prototype["set"+toTitleCase$1(i)]=function(e){this.el_[i]=e,e?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){Html5.prototype[i]=function(){return this.el_[i]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){Html5.prototype["set"+toTitleCase$1(i)]=function(e){this.el_[i]=e}});["pause","load","play"].forEach(function(i){Html5.prototype[i]=function(){return this.el_[i]()}});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(i){try{return Html5.TEST_VID.canPlayType(i)}catch{return""}};Html5.nativeSourceHandler.canHandleSource=function(i,e){if(i.type)return Html5.nativeSourceHandler.canPlayType(i.type);if(i.src){const s=getFileExtension(i.src);return Html5.nativeSourceHandler.canPlayType(`video/${s}`)}return""};Html5.nativeSourceHandler.handleSource=function(i,e,s){e.setSrc(i.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);const TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"],BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(i=>{const e=i.charAt(0)==="x"?`x-${i.substring(1)}`:i;BREAKPOINT_CLASSES[i]=`vjs-layout-${e}`});const DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Player extends Component$1{constructor(e,s,a){if(e.id=e.id||s.id||`vjs_video_${newGUID()}`,s=Object.assign(Player.getTagSettings(e),s),s.initChildren=!1,s.createEl=!1,s.evented=!1,s.reportTouchActivity=!1,!s.language){const d=e.closest("[lang]");d&&(s.language=d.getAttribute("lang"))}if(super(null,s,a),this.boundDocumentFullscreenChange_=d=>this.documentFullscreenChange_(d),this.boundFullWindowOnEscKey_=d=>this.fullWindowOnEscKey(d),this.boundUpdateStyleEl_=d=>this.updateStyleEl_(d),this.boundApplyInitTime_=d=>this.applyInitTime_(d),this.boundUpdateCurrentBreakpoint_=d=>this.updateCurrentBreakpoint_(d),this.boundHandleTechClick_=d=>this.handleTechClick_(d),this.boundHandleTechDoubleClick_=d=>this.handleTechDoubleClick_(d),this.boundHandleTechTouchStart_=d=>this.handleTechTouchStart_(d),this.boundHandleTechTouchMove_=d=>this.handleTechTouchMove_(d),this.boundHandleTechTouchEnd_=d=>this.handleTechTouchEnd_(d),this.boundHandleTechTap_=d=>this.handleTechTap_(d),this.isFullscreen_=!1,this.log=createLogger(this.id_),this.fsApi_=FullscreenApi,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&getAttributes(e),this.language(this.options_.language),s.languages){const d={};Object.getOwnPropertyNames(s.languages).forEach(function(h){d[h.toLowerCase()]=s.languages[h]}),this.languages_=d}else this.languages_=Player.prototype.options_.languages;this.resetCache_(),this.poster_=s.poster||"",this.controls_=!!s.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),s.plugins&&Object.keys(s.plugins).forEach(d=>{if(typeof this[d]!="function")throw new Error(`plugin "${d}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),evented(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(on(document$2,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const o=merge$1(this.options_);if(s.plugins&&Object.keys(s.plugins).forEach(d=>{this[d](s.plugins[d])}),s.debug&&this.debug(!0),this.options_.playerOptions=o,this.middleware_=[],this.playbackRates(s.playbackRates),s.experimentalSvgIcons){const h=new window$1$1.DOMParser().parseFromString(icons,"image/svg+xml");if(h.querySelector("parsererror"))log$1.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const tt=h.documentElement;tt.style.display="none",this.el_.appendChild(tt),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),TOUCH_ENABLED&&this.addClass("vjs-touch-enabled"),IS_IOS||this.addClass("vjs-workinghover"),Player.players[this.id_]=this;const c=version$6.split(".")[0];this.addClass(`vjs-v${c}`),this.userActive(!0),this.reportUserActivity(),this.one("play",d=>this.listenForUserActivity_(d)),this.on("keydown",d=>this.handleKeyDown(d)),this.on("languagechange",d=>this.handleLanguagechange(d)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),off(document$2,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off(document$2,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer(this),ALL.names.forEach(e=>{const s=ALL[e],a=this[s.getterName]();a&&a.off&&a.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,s,a=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const o=this.tag.tagName.toLowerCase()==="video-js";a?s=this.el_=e.parentNode:o||(s=this.el_=super.createEl("div"));const c=getAttributes(e);if(o){for(s=this.el_=e,e=this.tag=document$2.createElement("video");s.children.length;)e.appendChild(s.firstChild);hasClass(s,"video-js")||addClass(s,"video-js"),s.appendChild(e),a=this.playerElIngest_=s,Object.keys(s).forEach(b=>{try{e[b]=s[b]}catch{}})}e.setAttribute("tabindex","-1"),c.tabindex="-1",IS_CHROME&&IS_WINDOWS&&(e.setAttribute("role","application"),c.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in c&&delete c.width,"height"in c&&delete c.height,Object.getOwnPropertyNames(c).forEach(function(b){o&&b==="class"||s.setAttribute(b,c[b]),o&&e.setAttribute(b,c[b])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=s.player=this,this.addClass("vjs-paused");const d=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE"].filter(b=>browser[b]).map(b=>"vjs-device-"+b.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...d),window$1$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=createStyleElement("vjs-styles-dimensions");const b=$(".vjs-styles-defaults"),tt=$("head");tt.insertBefore(this.styleEl_,b?b.nextSibling:tt.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const h=e.getElementsByTagName("a");for(let b=0;b<h.length;b++){const tt=h.item(b);addClass(tt,"vjs-hidden"),tt.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!a&&e.parentNode.insertBefore(s,e),prependTo(e,s),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){log$1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,s){const a=e+"_";if(s===void 0)return this[a]||0;if(s===""||s==="auto"){this[a]=void 0,this.updateStyleEl_();return}const o=parseFloat(s);if(isNaN(o)){log$1.error(`Improper value "${s}" supplied for for ${e}`);return}this[a]=o,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,isEvented(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),addEventedCallback(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(window$1$1.VIDEOJS_NO_DYNAMIC_STYLE===!0){const h=typeof this.width_=="number"?this.width_:this.options_.width,b=typeof this.height_=="number"?this.height_:this.options_.height,tt=this.tech_&&this.tech_.el();tt&&(h>=0&&(tt.width=h),b>=0&&(tt.height=b));return}let e,s,a,o;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?a=this.aspectRatio_:this.videoWidth()>0?a=this.videoWidth()+":"+this.videoHeight():a="16:9";const c=a.split(":"),d=c[1]/c[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/d:e=this.videoWidth()||300,this.height_!==void 0?s=this.height_:s=e*d,/^[^a-zA-Z]/.test(this.id())?o="dimensions-"+this.id():o=this.id()+"-dimensions",this.addClass(o),setTextContent(this.styleEl_,`
      .${o} {
        width: ${e}px;
        height: ${s}px;
      }

      .${o}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${d*100}%;
      }
    `)}loadTech_(e,s){this.tech_&&this.unloadTech_();const a=toTitleCase$1(e),o=e.charAt(0).toLowerCase()+e.slice(1);a!=="Html5"&&this.tag&&(Tech.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=a,this.isReady_=!1;let c=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(c=!1);const d={source:s,autoplay:c,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${o}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ALL.names.forEach(b=>{const tt=ALL[b];d[tt.getterName]=this[tt.privateName]}),Object.assign(d,this.options_[a]),Object.assign(d,this.options_[o]),Object.assign(d,this.options_[e.toLowerCase()]),this.tag&&(d.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(d.startTime=this.cache_.currentTime);const h=Tech.getTech(e);if(!h)throw new Error(`No Tech named '${a}' exists! '${a}' should be registered using videojs.registerTech()'`);this.tech_=new h(d),this.tech_.ready(bind_(this,this.handleTechReady_),!0),textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_),TECH_EVENTS_RETRIGGER.forEach(b=>{this.on(this.tech_,b,tt=>this[`handleTech${toTitleCase$1(b)}_`](tt))}),Object.keys(TECH_EVENTS_QUEUE).forEach(b=>{this.on(this.tech_,b,tt=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${TECH_EVENTS_QUEUE[b]}_`].bind(this),event:tt});return}this[`handleTech${TECH_EVENTS_QUEUE[b]}_`](tt)})}),this.on(this.tech_,"loadstart",b=>this.handleTechLoadStart_(b)),this.on(this.tech_,"sourceset",b=>this.handleTechSourceset_(b)),this.on(this.tech_,"waiting",b=>this.handleTechWaiting_(b)),this.on(this.tech_,"ended",b=>this.handleTechEnded_(b)),this.on(this.tech_,"seeking",b=>this.handleTechSeeking_(b)),this.on(this.tech_,"play",b=>this.handleTechPlay_(b)),this.on(this.tech_,"pause",b=>this.handleTechPause_(b)),this.on(this.tech_,"durationchange",b=>this.handleTechDurationChange_(b)),this.on(this.tech_,"fullscreenchange",(b,tt)=>this.handleTechFullscreenChange_(b,tt)),this.on(this.tech_,"fullscreenerror",(b,tt)=>this.handleTechFullscreenError_(b,tt)),this.on(this.tech_,"enterpictureinpicture",b=>this.handleTechEnterPictureInPicture_(b)),this.on(this.tech_,"leavepictureinpicture",b=>this.handleTechLeavePictureInPicture_(b)),this.on(this.tech_,"error",b=>this.handleTechError_(b)),this.on(this.tech_,"posterchange",b=>this.handleTechPosterChange_(b)),this.on(this.tech_,"textdata",b=>this.handleTechTextData_(b)),this.on(this.tech_,"ratechange",b=>this.handleTechRateChange_(b)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(a!=="Html5"||!this.tag)&&prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ALL.names.forEach(e=>{const s=ALL[e];this[s.privateName]=this[s.getterName]()}),this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&log$1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":version$6}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const s=()=>{const o=this.muted();this.muted(!0);const c=()=>{this.muted(o)};this.playTerminatedQueue_.push(c);const d=this.play();if(isPromise(d))return d.catch(h=>{throw c(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${h||""}`)})};let a;if(e==="any"&&!this.muted()?(a=this.play(),isPromise(a)&&(a=a.catch(s))):e==="muted"&&!this.muted()?a=s():a=this.play(),!!isPromise(a))return a.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let s=e,a="";typeof s!="string"&&(s=e.src,a=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!a&&(a=findMimetype(this,s)),this.cache_.source=merge$1({},e,{src:s,type:a});const o=this.cache_.sources.filter(b=>b.src&&b.src===s),c=[],d=this.$$("source"),h=[];for(let b=0;b<d.length;b++){const tt=getAttributes(d[b]);c.push(tt),tt.src&&tt.src===s&&h.push(tt.src)}h.length&&!o.length?this.cache_.sources=c:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s}handleTechSourceset_(e){if(!this.changingSrc_){let s=c=>this.updateSourceCaches_(c);const a=this.currentSource().src,o=e.src;a&&!/^blob:/.test(a)&&/^blob:/.test(o)&&(!this.lastSource_||this.lastSource_.tech!==o&&this.lastSource_.player!==a)&&(s=()=>{}),s(o),e.src||this.tech_.any(["sourceset","loadstart"],c=>{if(c.type==="sourceset")return;const d=this.techGet_("currentSrc");this.lastSource_.tech=d,this.updateSourceCaches_(d)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),s=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",s))};this.on("timeupdate",s)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?silencePromise(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),a=>a.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const s=e.target.player;if(s&&s!==this)return;const a=this.el();let o=document$2[this.fsApi_.fullscreenElement]===a;!o&&a.matches&&(o=a.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}handleTechFullscreenChange_(e,s){s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))}handleTechFullscreenError_(e,s){this.trigger("fullscreenerror",s)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,s){this.ready(function(){if(e in allowedSetters)return set(this.middleware_,this.tech_,e,s);if(e in allowedMediators)return mediate(this.middleware_,this.tech_,e,s);try{this.tech_&&this.tech_[e](s)}catch(a){throw log$1(a),a}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in allowedGetters)return get(this.middleware_,this.tech_,e);if(e in allowedMediators)return mediate(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(s){throw this.tech_[e]===void 0?(log$1(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,s),s):s.name==="TypeError"?(log$1(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,s),this.tech_.isReady_=!1,s):(log$1(s),s)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=silencePromise){this.playCallbacks_.push(e);const s=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),a=!!(IS_ANY_SAFARI||IS_IOS);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=d=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&a&&this.load();return}const o=this.techGet_("play");a&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(s){s()})}runPlayCallbacks_(e){const s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(a){a(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||createTimeRanges$1(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=createTimeRanges$1(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=createTimeRanges$1(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),s=this.duration();let a=e.end(e.length-1);return a>s&&(a=s),a}volume(e){let s;if(e!==void 0){s=Math.max(0,Math.min(1,e)),this.cache_.volume=s,this.techCall_("setVolume",s),s>0&&this.lastVolume_(s);return}return s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const s=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const s=this;return new Promise((a,o)=>{function c(){s.off("fullscreenerror",h),s.off("fullscreenchange",d)}function d(){c(),a()}function h(tt,nt){c(),o(nt)}s.one("fullscreenchange",d),s.one("fullscreenerror",h);const b=s.requestFullscreenHelper_(e);b&&(b.then(c,c),b.then(a,o))})}requestFullscreenHelper_(e){let s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(s=e)),this.fsApi_.requestFullscreen){const a=this.el_[this.fsApi_.requestFullscreen](s);return a&&a.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((s,a)=>{function o(){e.off("fullscreenerror",d),e.off("fullscreenchange",c)}function c(){o(),s()}function d(b,tt){o(),a(tt)}e.one("fullscreenchange",c),e.one("fullscreenerror",d);const h=e.exitFullscreenHelper_();h&&(h.then(o,o),h.then(s,a))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=document$2[this.fsApi_.exitFullscreen]();return e&&silencePromise(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document$2.documentElement.style.overflow,on(document$2,"keydown",this.boundFullWindowOnEscKey_),document$2.documentElement.style.overflow="hidden",addClass(document$2.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){keycode.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off(document$2,"keydown",this.boundFullWindowOnEscKey_),document$2.documentElement.style.overflow=this.docOrigOverflow,removeClass(document$2.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window$1$1.documentPictureInPicture){const e=document$2.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(createEl("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window$1$1.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(s=>(copyStyleSheetsToWindow(s),this.el_.parentNode.insertBefore(e,this.el_),s.document.body.appendChild(this.el_),s.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:s}),s.addEventListener("pagehide",a=>{const o=a.target.querySelector(".video-js");e.parentNode.replaceChild(o,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),s))}return"pictureInPictureEnabled"in document$2&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(window$1$1.documentPictureInPicture&&window$1$1.documentPictureInPicture.window)return window$1$1.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in document$2)return document$2.exitPictureInPicture()}handleKeyDown(e){const{userActions:s}=this.options_;!s||!s.hotkeys||(o=>{const c=o.tagName.toLowerCase();if(o.isContentEditable)return!0;const d=["button","checkbox","hidden","radio","reset","submit"];return c==="input"?d.indexOf(o.type)===-1:["textarea"].indexOf(c)!==-1})(this.el_.ownerDocument.activeElement)||(typeof s.hotkeys=="function"?s.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const s=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:a=d=>keycode.isEventKey(d,"f"),muteKey:o=d=>keycode.isEventKey(d,"m"),playPauseKey:c=d=>keycode.isEventKey(d,"k")||keycode.isEventKey(d,"Space")}=s;if(a.call(this,e)){e.preventDefault(),e.stopPropagation();const d=Component$1.getComponent("FullscreenToggle");document$2[this.fsApi_.fullscreenEnabled]!==!1&&d.prototype.handleClick.call(this,e)}else o.call(this,e)?(e.preventDefault(),e.stopPropagation(),Component$1.getComponent("MuteToggle").prototype.handleClick.call(this,e)):c.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Component$1.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let s;for(let a=0,o=this.options_.techOrder;a<o.length;a++){const c=o[a];let d=Tech.getTech(c);if(d||(d=Component$1.getComponent(c)),!d){log$1.error(`The "${c}" tech is undefined. Skipped browser support check for that tech.`);continue}if(d.isSupported()&&(s=d.canPlayType(e),s))return s}return""}selectSource(e){const s=this.options_.techOrder.map(h=>[h,Tech.getTech(h)]).filter(([h,b])=>b?b.isSupported():(log$1.error(`The "${h}" tech is undefined. Skipped browser support check for that tech.`),!1)),a=function(h,b,tt){let nt;return h.some(ft=>b.some(yt=>{if(nt=tt(ft,yt),nt)return!0})),nt};let o;const c=h=>(b,tt)=>h(tt,b),d=([h,b],tt)=>{if(b.canPlaySource(tt,this.options_[h.toLowerCase()]))return{source:tt,tech:h}};return this.options_.sourceOrder?o=a(e,s,c(d)):o=a(s,e,d),o||!1}handleSrc_(e,s){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const a=filterSource(e);if(!a.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,s||(this.cache_.sources=a),this.updateSourceCaches_(a[0]),setSource(this,a[0],(o,c)=>{if(this.middleware_=c,s||(this.cache_.sources=a),this.updateSourceCaches_(o),this.src_(o)){if(a.length>1)return this.handleSrc_(a.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}setTech(c,this.tech_)}),a.length>1){const o=()=>{this.error(null),this.handleSrc_(a.slice(1),!0)},c=()=>{this.off("error",o)};this.one("error",o),this.one("playing",c),this.resetRetryOnError_=()=>{this.off("error",o),this.off("playing",c)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const s=this.selectSource([e]);return s?titleCaseEquals(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();silencePromise(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),isEvented(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:s,progressControl:a,remainingTimeDisplay:o}=this.controlBar||{},{seekBar:c}=a||{};e&&e.updateContent(),s&&s.updateContent(),o&&o.updateContent(),c&&(c.update(),c.loadProgressBar&&c.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),s=[];return Object.keys(e).length!==0&&s.push(e),this.cache_.sources||s}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let s;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),s=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(hooks("beforeerror").forEach(s=>{const a=s(this,e);if(!(isObject(a)&&!Array.isArray(a)||typeof a=="string"||typeof a=="number"||a===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=a}),this.options_.suppressNotSupportedError&&e&&e.code===4){const s=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new MediaError(e),this.addClass("vjs-error"),log$1.error(`(CODE:${this.error_.code} ${MediaError.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),hooks("error").forEach(s=>s(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,s,a;const o=bind_(this,this.reportUserActivity),c=function(ft){(ft.screenX!==s||ft.screenY!==a)&&(s=ft.screenX,a=ft.screenY,o())},d=function(){o(),this.clearInterval(e),e=this.setInterval(o,250)},h=function(ft){o(),this.clearInterval(e)};this.on("mousedown",d),this.on("mousemove",c),this.on("mouseup",h),this.on("mouseleave",h);const b=this.getChild("controlBar");b&&!IS_IOS&&!IS_ANDROID&&(b.on("mouseenter",function(ft){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),b.on("mouseleave",function(ft){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);let tt;const nt=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(tt);const ft=this.options_.inactivityTimeout;ft<=0||(tt=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},ft))};this.setInterval(nt,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),s=this.getChild("ControlBar"),a=s&&s.currentHeight();e.forEach(o=>{o!==s&&o.el_&&!o.hasClass("vjs-hidden")&&(o.hide(),this.audioOnlyCache_.hiddenChildren.push(o))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(a),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const s=[];return this.isInPictureInPicture()&&s.push(this.exitPictureInPicture()),this.isFullscreen()&&s.push(this.exitFullscreen()),this.audioPosterMode()&&s.push(this.audioPosterMode(!1)),Promise.all(s).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,s,a){if(this.tech_)return this.tech_.addTextTrack(e,s,a)}addRemoteTextTrack(e,s){if(this.tech_)return this.tech_.addRemoteTextTrack(e,s)}removeRemoteTextTrack(e={}){let{track:s}=e;if(s||(s=e),this.tech_)return this.tech_.removeRemoteTextTrack(s)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),isEvented(this)&&this.trigger("languagechange"))}languages(){return merge$1(Player.prototype.options_.languages,this.languages_)}toJSON(){const e=merge$1(this.options_),s=e.tracks;e.tracks=[];for(let a=0;a<s.length;a++){let o=s[a];o=merge$1(o),o.player=void 0,e.tracks[a]=o}return e}createModal(e,s){s=s||{},s.content=e||"";const a=new ModalDialog(this,s);return this.addChild(a),a.on("dispose",()=>{this.removeChild(a)}),a.open(),a}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),s=this.currentWidth();for(let a=0;a<BREAKPOINT_ORDER.length;a++){const o=BREAKPOINT_ORDER[a],c=this.breakpoints_[o];if(s<=c){if(e===o)return;e&&this.removeClass(BREAKPOINT_CLASSES[e]),this.addClass(BREAKPOINT_CLASSES[o]),this.breakpoint_=o;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},DEFAULT_BREAKPOINTS,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const s=this.responsive_;if(e!==s)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||""}loadMedia(e,s){if(!e||typeof e!="object")return;const a=this.crossOrigin();this.reset(),this.cache_.media=merge$1(e);const{artist:o,artwork:c,description:d,poster:h,src:b,textTracks:tt,title:nt}=this.cache_.media;!c&&h&&(this.cache_.media.artwork=[{src:h,type:getMimetype(h)}]),a&&this.crossOrigin(a),b&&this.src(b),h&&this.poster(h),Array.isArray(tt)&&tt.forEach(ft=>this.addRemoteTextTrack(ft,!1)),this.titleBar&&this.titleBar.update({title:nt,description:d||o||""}),this.ready(s)}getMedia(){if(!this.cache_.media){const e=this.poster(),s=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),c=>({kind:c.kind,label:c.label,language:c.language,src:c.src})),o={src:s,textTracks:a};return e&&(o.poster=e,o.artwork=[{src:o.poster,type:getMimetype(o.poster)}]),o}return merge$1(this.cache_.media)}static getTagSettings(e){const s={sources:[],tracks:[]},a=getAttributes(e),o=a["data-setup"];if(hasClass(e,"vjs-fill")&&(a.fill=!0),hasClass(e,"vjs-fluid")&&(a.fluid=!0),o!==null){const[c,d]=safeParseTuple(o||"{}");c&&log$1.error(c),Object.assign(a,d)}if(Object.assign(s,a),e.hasChildNodes()){const c=e.childNodes;for(let d=0,h=c.length;d<h;d++){const b=c[d],tt=b.nodeName.toLowerCase();tt==="source"?s.sources.push(getAttributes(b)):tt==="track"&&s.tracks.push(getAttributes(b))}}return s}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(s=>typeof s=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ALL.names.forEach(function(i){const e=ALL[i];Player.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};const navigator$1=window$1$1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,enableSmoothSeeking:!1};TECH_EVENTS_RETRIGGER.forEach(function(i){Player.prototype[`handleTech${toTitleCase$1(i)}_`]=function(){return this.trigger(i)}});Component$1.registerComponent("Player",Player);const BASE_PLUGIN_NAME="plugin",PLUGIN_CACHE_KEY="activePlugins_",pluginStorage={},pluginExists=i=>pluginStorage.hasOwnProperty(i),getPlugin=i=>pluginExists(i)?pluginStorage[i]:void 0,markPluginAsActive=(i,e)=>{i[PLUGIN_CACHE_KEY]=i[PLUGIN_CACHE_KEY]||{},i[PLUGIN_CACHE_KEY][e]=!0},triggerSetupEvent=(i,e,s)=>{const a=(s?"before":"")+"pluginsetup";i.trigger(a,e),i.trigger(a+":"+e.name,e)},createBasicPlugin=function(i,e){const s=function(){triggerSetupEvent(this,{name:i,plugin:e,instance:null},!0);const a=e.apply(this,arguments);return markPluginAsActive(this,i),triggerSetupEvent(this,{name:i,plugin:e,instance:a}),a};return Object.keys(e).forEach(function(a){s[a]=e[a]}),s},createPluginFactory=(i,e)=>(e.prototype.name=i,function(...s){triggerSetupEvent(this,{name:i,plugin:e,instance:null},!0);const a=new e(this,...s);return this[i]=()=>a,triggerSetupEvent(this,a.getEventHash()),a});class Plugin{constructor(e){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),markPluginAsActive(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,s={}){return trigger(this.eventBusEl_,e,this.getEventHash(s))}handleStateChanged(e){}dispose(){const{name:e,player:s}=this;this.trigger("dispose"),this.off(),s.off("dispose",this.dispose),s[PLUGIN_CACHE_KEY][e]=!1,this.player=this.state=null,s[e]=createPluginFactory(e,pluginStorage[e])}static isBasic(e){const s=typeof e=="string"?getPlugin(e):e;return typeof s=="function"&&!Plugin.prototype.isPrototypeOf(s.prototype)}static registerPlugin(e,s){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(pluginExists(e))log$1.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Player.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof s!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof s}.`);return pluginStorage[e]=s,e!==BASE_PLUGIN_NAME&&(Plugin.isBasic(s)?Player.prototype[e]=createBasicPlugin(e,s):Player.prototype[e]=createPluginFactory(e,s)),s}static deregisterPlugin(e){if(e===BASE_PLUGIN_NAME)throw new Error("Cannot de-register base plugin.");pluginExists(e)&&(delete pluginStorage[e],delete Player.prototype[e])}static getPlugins(e=Object.keys(pluginStorage)){let s;return e.forEach(a=>{const o=getPlugin(a);o&&(s=s||{},s[a]=o)}),s}static getPluginVersion(e){const s=getPlugin(e);return s&&s.VERSION||""}}Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(i){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][i]===!0};Player.prototype.hasPlugin=function(i){return!!pluginExists(i)};function deprecate(i,e){let s=!1;return function(...a){return s||log$1.warn(i),s=!0,e.apply(this,a)}}function deprecateForMajor(i,e,s,a){return deprecate(`${e} is deprecated and will be removed in ${i}.0; please use ${s} instead.`,a)}var VjsErrors={UnsupportedSidxContainer:"unsupported-sidx-container-error",DashManifestSidxParsingError:"dash-manifest-sidx-parsing-error",HlsPlaylistRequestError:"hls-playlist-request-error",SegmentUnsupportedMediaFormat:"segment-unsupported-media-format-error",UnsupportedMediaInitialization:"unsupported-media-initialization-error",SegmentSwitchError:"segment-switch-error",SegmentExceedsSourceBufferQuota:"segment-exceeds-source-buffer-quota-error",SegmentAppendError:"segment-append-error",VttLoadError:"vtt-load-error",VttCueParsingError:"vtt-cue-parsing-error",AdsBeforePrerollError:"ads-before-preroll-error",AdsPrerollError:"ads-preroll-error",AdsMidrollError:"ads-midroll-error",AdsPostrollError:"ads-postroll-error",AdsMacroReplacementFailed:"ads-macro-replacement-failed",AdsResumeContentFailed:"ads-resume-content-failed",EMEFailedToRequestMediaKeySystemAccess:"eme-failed-request-media-key-system-access",EMEFailedToCreateMediaKeys:"eme-failed-create-media-keys",EMEFailedToAttachMediaKeysToVideoElement:"eme-failed-attach-media-keys-to-video",EMEFailedToCreateMediaKeySession:"eme-failed-create-media-key-session",EMEFailedToSetServerCertificate:"eme-failed-set-server-certificate",EMEFailedToGenerateLicenseRequest:"eme-failed-generate-license-request",EMEFailedToUpdateSessionWithReceivedLicenseKeys:"eme-failed-update-session",EMEFailedToCloseSession:"eme-failed-close-session",EMEFailedToRemoveKeysFromSession:"eme-failed-remove-keys",EMEFailedToLoadSessionBySessionId:"eme-failed-load-session"};const normalizeId=i=>i.indexOf("#")===0?i.slice(1):i;function videojs(i,e,s){let a=videojs.getPlayer(i);if(a)return e&&log$1.warn(`Player "${i}" is already initialised. Options will not be applied.`),s&&a.ready(s),a;const o=typeof i=="string"?$("#"+normalizeId(i)):i;if(!isEl(o))throw new TypeError("The element or ID supplied is not valid. (videojs)");const d=("getRootNode"in o?o.getRootNode()instanceof window$1$1.ShadowRoot:!1)?o.getRootNode():o.ownerDocument.body;(!o.ownerDocument.defaultView||!d.contains(o))&&log$1.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(o.parentNode&&o.parentNode.hasAttribute("data-vjs-player")?o.parentNode:o).cloneNode(!0)),hooks("beforesetup").forEach(b=>{const tt=b(o,merge$1(e));if(!isObject(tt)||Array.isArray(tt)){log$1.error("please return an object in beforesetup hooks");return}e=merge$1(e,tt)});const h=Component$1.getComponent("Player");return a=new h(o,e,s),hooks("setup").forEach(b=>b(a)),a}videojs.hooks_=hooks_;videojs.hooks=hooks;videojs.hook=hook;videojs.hookOnce=hookOnce;videojs.removeHook=removeHook;if(window$1$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&isReal()){let i=$(".vjs-styles-defaults");if(!i){i=createStyleElement("vjs-styles-defaults");const e=$("head");e&&e.insertBefore(i,e.firstChild),setTextContent(i,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}autoSetupTimeout(1,videojs);videojs.VERSION=version$6;videojs.options=Player.prototype.options_;videojs.getPlayers=()=>Player.players;videojs.getPlayer=i=>{const e=Player.players;let s;if(typeof i=="string"){const a=normalizeId(i),o=e[a];if(o)return o;s=$("#"+a)}else s=i;if(isEl(s)){const{player:a,playerId:o}=s;if(a||e[o])return a||e[o]}};videojs.getAllPlayers=()=>Object.keys(Player.players).map(i=>Player.players[i]).filter(Boolean);videojs.players=Player.players;videojs.getComponent=Component$1.getComponent;videojs.registerComponent=(i,e)=>(Tech.isTech(e)&&log$1.warn(`The ${i} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Component$1.registerComponent.call(Component$1,i,e));videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TERMINATOR,writeable:!1,enumerable:!0});videojs.browser=browser;videojs.obj=Obj;videojs.mergeOptions=deprecateForMajor(9,"videojs.mergeOptions","videojs.obj.merge",merge$1);videojs.defineLazyProperty=deprecateForMajor(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",defineLazyProperty);videojs.bind=deprecateForMajor(9,"videojs.bind","native Function.prototype.bind",bind_);videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=(i,e)=>(log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Plugin.registerPlugin(i,e));videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(i,e){return i=(""+i).toLowerCase(),videojs.options.languages=merge$1(videojs.options.languages,{[i]:e}),videojs.options.languages[i]};videojs.log=log$1;videojs.createLogger=createLogger;videojs.time=Time;videojs.createTimeRange=deprecateForMajor(9,"videojs.createTimeRange","videojs.time.createTimeRanges",createTimeRanges$1);videojs.createTimeRanges=deprecateForMajor(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",createTimeRanges$1);videojs.formatTime=deprecateForMajor(9,"videojs.formatTime","videojs.time.formatTime",formatTime);videojs.setFormatTime=deprecateForMajor(9,"videojs.setFormatTime","videojs.time.setFormatTime",setFormatTime);videojs.resetFormatTime=deprecateForMajor(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",resetFormatTime);videojs.parseUrl=deprecateForMajor(9,"videojs.parseUrl","videojs.url.parseUrl",parseUrl);videojs.isCrossOrigin=deprecateForMajor(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",isCrossOrigin);videojs.EventTarget=EventTarget$2;videojs.any=any;videojs.on=on;videojs.one=one;videojs.off=off;videojs.trigger=trigger;videojs.xhr=XHR;videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(i=>{videojs[i]=function(){return log$1.warn(`videojs.${i}() is deprecated; use videojs.dom.${i}() instead`),Dom[i].apply(null,arguments)}});videojs.computedStyle=deprecateForMajor(9,"videojs.computedStyle","videojs.dom.computedStyle",computedStyle);videojs.dom=Dom;videojs.fn=Fn;videojs.num=Num;videojs.str=Str;videojs.url=Url;videojs.Error=VjsErrors;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class QualityLevel{constructor(e){let s=this;return s.id=e.id,s.label=s.id,s.width=e.width,s.height=e.height,s.bitrate=e.bandwidth,s.frameRate=e.frameRate,s.enabled_=e.enabled,Object.defineProperty(s,"enabled",{get(){return s.enabled_()},set(a){s.enabled_(a)}}),s}}class QualityLevelList extends videojs.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let s=this.getQualityLevelById(e.id);if(s)return s;const a=this.levels_.length;return s=new QualityLevel(e),""+a in this||Object.defineProperty(this,a,{get(){return this.levels_[a]}}),this.levels_.push(s),this.trigger({qualityLevel:s,type:"addqualitylevel"}),s}removeQualityLevel(e){let s=null;for(let a=0,o=this.length;a<o;a++)if(this[a]===e){s=this.levels_.splice(a,1)[0],this.selectedIndex_===a?this.selectedIndex_=-1:this.selectedIndex_>a&&this.selectedIndex_--;break}return s&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),s}getQualityLevelById(e){for(let s=0,a=this.length;s<a;s++){const o=this[s];if(o.id===e)return o}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}QualityLevelList.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const i in QualityLevelList.prototype.allowedEvents_)QualityLevelList.prototype["on"+i]=null;var version$5="4.1.0";const initPlugin$1=function(i,e){const s=i.qualityLevels,a=new QualityLevelList,o=function(){a.dispose(),i.qualityLevels=s,i.off("dispose",o)};return i.on("dispose",o),i.qualityLevels=()=>a,i.qualityLevels.VERSION=version$5,a},qualityLevels=function(i){return initPlugin$1(this,videojs.obj.merge({},i))};videojs.registerPlugin("qualityLevels",qualityLevels);qualityLevels.VERSION=version$5;/*! @name @videojs/http-streaming @version 3.12.1 @license Apache-2.0 */const resolveUrl=resolveUrl$1,resolveManifestRedirect=(i,e)=>e&&e.responseURL&&i!==e.responseURL?e.responseURL:i,logger=i=>videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",`${i} >`):function(){};function merge(...i){const e=videojs.obj||videojs;return(e.merge||e.mergeOptions).apply(e,i)}function createTimeRanges(...i){const e=videojs.time||videojs;return(e.createTimeRanges||e.createTimeRanges).apply(e,i)}function bufferedRangesToString(i){if(i.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let s=0;s<i.length;s++){const a=i.start(s),o=i.end(s);e+=`${a} --> ${o}. Duration (${o-a})
`}return e}const TIME_FUDGE_FACTOR=1/30,SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3,filterRanges=function(i,e){const s=[];let a;if(i&&i.length)for(a=0;a<i.length;a++)e(i.start(a),i.end(a))&&s.push([i.start(a),i.end(a)]);return createTimeRanges(s)},findRange=function(i,e){return filterRanges(i,function(s,a){return s-SAFE_TIME_DELTA<=e&&a+SAFE_TIME_DELTA>=e})},findNextRange=function(i,e){return filterRanges(i,function(s){return s-TIME_FUDGE_FACTOR>=e})},findGaps=function(i){if(i.length<2)return createTimeRanges();const e=[];for(let s=1;s<i.length;s++){const a=i.end(s-1),o=i.start(s);e.push([a,o])}return createTimeRanges(e)},bufferIntersection=function(i,e){let s=null,a=null,o=0;const c=[],d=[];if(!i||!i.length||!e||!e.length)return createTimeRanges();let h=i.length;for(;h--;)c.push({time:i.start(h),type:"start"}),c.push({time:i.end(h),type:"end"});for(h=e.length;h--;)c.push({time:e.start(h),type:"start"}),c.push({time:e.end(h),type:"end"});for(c.sort(function(b,tt){return b.time-tt.time}),h=0;h<c.length;h++)c[h].type==="start"?(o++,o===2&&(s=c[h].time)):c[h].type==="end"&&(o--,o===1&&(a=c[h].time)),s!==null&&a!==null&&(d.push([s,a]),s=null,a=null);return createTimeRanges(d)},printableRange=i=>{const e=[];if(!i||!i.length)return"";for(let s=0;s<i.length;s++)e.push(i.start(s)+" => "+i.end(s));return e.join(", ")},timeUntilRebuffer=function(i,e,s=1){return((i.length?i.end(i.length-1):0)-e)/s},timeRangesToArray=i=>{const e=[];for(let s=0;s<i.length;s++)e.push({start:i.start(s),end:i.end(s)});return e},isRangeDifferent=function(i,e){if(i===e)return!1;if(!i&&e||!e&&i||i.length!==e.length)return!0;for(let s=0;s<i.length;s++)if(i.start(s)!==e.start(s)||i.end(s)!==e.end(s))return!0;return!1},lastBufferedEnd=function(i){if(!(!i||!i.length||!i.end))return i.end(i.length-1)},timeAheadOf=function(i,e){let s=0;if(!i||!i.length)return s;for(let a=0;a<i.length;a++){const o=i.start(a),c=i.end(a);if(!(e>c)){if(e>o&&e<=c){s+=c-e;continue}s+=c-o}}return s},segmentDurationWithParts=(i,e)=>{if(!e.preload)return e.duration;let s=0;return(e.parts||[]).forEach(function(a){s+=a.duration}),(e.preloadHints||[]).forEach(function(a){a.type==="PART"&&(s+=i.partTargetDuration)}),s},getPartsAndSegments=i=>(i.segments||[]).reduce((e,s,a)=>(s.parts?s.parts.forEach(function(o,c){e.push({duration:o.duration,segmentIndex:a,partIndex:c,part:o,segment:s})}):e.push({duration:s.duration,segmentIndex:a,partIndex:null,segment:s,part:null}),e),[]),getLastParts=i=>{const e=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return e&&e.parts||[]},getKnownPartCount=({preloadSegment:i})=>{if(!i)return;const{parts:e,preloadHints:s}=i;let a=(s||[]).reduce((o,c)=>o+(c.type==="PART"?1:0),0);return a+=e&&e.length?e.length:0,a},liveEdgeDelay=(i,e)=>{if(e.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;const s=getLastParts(e).length>0;return s&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:s&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},backwardDuration=function(i,e){let s=0,a=e-i.mediaSequence,o=i.segments[a];if(o){if(typeof o.start<"u")return{result:o.start,precise:!0};if(typeof o.end<"u")return{result:o.end-o.duration,precise:!0}}for(;a--;){if(o=i.segments[a],typeof o.end<"u")return{result:s+o.end,precise:!0};if(s+=segmentDurationWithParts(i,o),typeof o.start<"u")return{result:s+o.start,precise:!0}}return{result:s,precise:!1}},forwardDuration=function(i,e){let s=0,a,o=e-i.mediaSequence;for(;o<i.segments.length;o++){if(a=i.segments[o],typeof a.start<"u")return{result:a.start-s,precise:!0};if(s+=segmentDurationWithParts(i,a),typeof a.end<"u")return{result:a.end-s,precise:!0}}return{result:-1,precise:!1}},intervalDuration=function(i,e,s){if(typeof e>"u"&&(e=i.mediaSequence+i.segments.length),e<i.mediaSequence)return 0;const a=backwardDuration(i,e);if(a.precise)return a.result;const o=forwardDuration(i,e);return o.precise?o.result:a.result+s},duration=function(i,e,s){if(!i)return 0;if(typeof s!="number"&&(s=0),typeof e>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return window$1$1.Infinity}return intervalDuration(i,e,s)},sumDurations=function({defaultDuration:i,durationList:e,startIndex:s,endIndex:a}){let o=0;if(s>a&&([s,a]=[a,s]),s<0){for(let c=s;c<Math.min(0,a);c++)o+=i;s=0}for(let c=s;c<a;c++)o+=e[c].duration;return o},playlistEnd=function(i,e,s,a){if(!i||!i.segments)return null;if(i.endList)return duration(i);if(e===null)return null;e=e||0;let o=intervalDuration(i,i.mediaSequence+i.segments.length,e);return s&&(a=typeof a=="number"?a:liveEdgeDelay(null,i),o-=a),Math.max(0,o)},seekable=function(i,e,s){const o=e||0;let c=playlistEnd(i,e,!0,s);return c===null?createTimeRanges():(c<o&&(c=o),createTimeRanges(o,c))},getMediaInfoForTime=function({playlist:i,currentTime:e,startingSegmentIndex:s,startingPartIndex:a,startTime:o,exactManifestTimings:c}){let d=e-o;const h=getPartsAndSegments(i);let b=0;for(let tt=0;tt<h.length;tt++){const nt=h[tt];if(s===nt.segmentIndex&&!(typeof a=="number"&&typeof nt.partIndex=="number"&&a!==nt.partIndex)){b=tt;break}}if(d<0){if(b>0)for(let tt=b-1;tt>=0;tt--){const nt=h[tt];if(d+=nt.duration,c){if(d<0)continue}else if(d+TIME_FUDGE_FACTOR<=0)continue;return{partIndex:nt.partIndex,segmentIndex:nt.segmentIndex,startTime:o-sumDurations({defaultDuration:i.targetDuration,durationList:h,startIndex:b,endIndex:tt})}}return{partIndex:h[0]&&h[0].partIndex||null,segmentIndex:h[0]&&h[0].segmentIndex||0,startTime:e}}if(b<0){for(let tt=b;tt<0;tt++)if(d-=i.targetDuration,d<0)return{partIndex:h[0]&&h[0].partIndex||null,segmentIndex:h[0]&&h[0].segmentIndex||0,startTime:e};b=0}for(let tt=b;tt<h.length;tt++){const nt=h[tt];d-=nt.duration;const ft=nt.duration>TIME_FUDGE_FACTOR,yt=d===0,Tt=ft&&d+TIME_FUDGE_FACTOR>=0;if(!((yt||Tt)&&tt!==h.length-1)){if(c){if(d>0)continue}else if(d-TIME_FUDGE_FACTOR>=0)continue;return{partIndex:nt.partIndex,segmentIndex:nt.segmentIndex,startTime:o+sumDurations({defaultDuration:i.targetDuration,durationList:h,startIndex:b,endIndex:tt})}}}return{segmentIndex:h[h.length-1].segmentIndex,partIndex:h[h.length-1].partIndex,startTime:e}},isExcluded=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},isIncompatible=function(i){return i.excludeUntil&&i.excludeUntil===1/0},isEnabled=function(i){const e=isExcluded(i);return!i.disabled&&!e},isDisabled=function(i){return i.disabled},isAes=function(i){for(let e=0;e<i.segments.length;e++)if(i.segments[e].key)return!0;return!1},hasAttribute=function(i,e){return e.attributes&&e.attributes[i]},estimateSegmentRequestTime=function(i,e,s,a=0){return hasAttribute("BANDWIDTH",s)?(i*s.attributes.BANDWIDTH-a*8)/e:NaN},isLowestEnabledRendition=(i,e)=>{if(i.playlists.length===1)return!0;const s=e.attributes.BANDWIDTH||Number.MAX_VALUE;return i.playlists.filter(a=>isEnabled(a)?(a.attributes.BANDWIDTH||0)<s:!1).length===0},playlistMatch=(i,e)=>!i&&!e||!i&&e||i&&!e?!1:!!(i===e||i.id&&e.id&&i.id===e.id||i.resolvedUri&&e.resolvedUri&&i.resolvedUri===e.resolvedUri||i.uri&&e.uri&&i.uri===e.uri),someAudioVariant=function(i,e){const s=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{};let a=!1;for(const o in s){for(const c in s[o])if(a=e(s[o][c]),a)break;if(a)break}return!!a},isAudioOnly=i=>{if(!i||!i.playlists||!i.playlists.length)return someAudioVariant(i,s=>s.playlists&&s.playlists.length||s.uri);for(let e=0;e<i.playlists.length;e++){const s=i.playlists[e],a=s.attributes&&s.attributes.CODECS;if(!(a&&a.split(",").every(c=>isAudioCodec(c))||someAudioVariant(i,c=>playlistMatch(s,c))))return!1}return!0};var Playlist={liveEdgeDelay,duration,seekable,getMediaInfoForTime,isEnabled,isDisabled,isExcluded,isIncompatible,playlistEnd,isAes,hasAttribute,estimateSegmentRequestTime,isLowestEnabledRendition,isAudioOnly,playlistMatch,segmentDurationWithParts};const{log}=videojs,createPlaylistID=(i,e)=>`${i}-${e}`,groupID=(i,e,s)=>`placeholder-uri-${i}-${e}-${s}`,parseManifest=({onwarn:i,oninfo:e,manifestString:s,customTagParsers:a=[],customTagMappers:o=[],llhls:c})=>{const d=new Parser;i&&d.on("warn",i),e&&d.on("info",e),a.forEach(tt=>d.addParser(tt)),o.forEach(tt=>d.addTagMapper(tt)),d.push(s),d.end();const h=d.manifest;if(c||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(tt){h.hasOwnProperty(tt)&&delete h[tt]}),h.segments&&h.segments.forEach(function(tt){["parts","preloadHints"].forEach(function(nt){tt.hasOwnProperty(nt)&&delete tt[nt]})})),!h.targetDuration){let tt=10;h.segments&&h.segments.length&&(tt=h.segments.reduce((nt,ft)=>Math.max(nt,ft.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${tt}`}),h.targetDuration=tt}const b=getLastParts(h);if(b.length&&!h.partTargetDuration){const tt=b.reduce((nt,ft)=>Math.max(nt,ft.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${tt}`}),log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=tt}return h},forEachMediaGroup=(i,e)=>{i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(s=>{if(i.mediaGroups[s])for(const a in i.mediaGroups[s])for(const o in i.mediaGroups[s][a]){const c=i.mediaGroups[s][a][o];e(c,s,a,o)}})},setupMediaPlaylist=({playlist:i,uri:e,id:s})=>{i.id=s,i.playlistErrors_=0,e&&(i.uri=e),i.attributes=i.attributes||{}},setupMediaPlaylists=i=>{let e=i.playlists.length;for(;e--;){const s=i.playlists[e];setupMediaPlaylist({playlist:s,id:createPlaylistID(e,s.uri)}),s.resolvedUri=resolveUrl(i.uri,s.uri),i.playlists[s.id]=s,i.playlists[s.uri]=s,s.attributes.BANDWIDTH||log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},resolveMediaGroupUris=i=>{forEachMediaGroup(i,e=>{e.uri&&(e.resolvedUri=resolveUrl(i.uri,e.uri))})},mainForMedia=(i,e)=>{const s=createPlaylistID(0,e),a={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window$1$1.location.href,resolvedUri:window$1$1.location.href,playlists:[{uri:e,id:s,resolvedUri:e,attributes:{}}]};return a.playlists[s]=a.playlists[0],a.playlists[e]=a.playlists[0],a},addPropertiesToMain=(i,e,s=groupID)=>{i.uri=e;for(let o=0;o<i.playlists.length;o++)if(!i.playlists[o].uri){const c=`placeholder-uri-${o}`;i.playlists[o].uri=c}const a=isAudioOnly(i);forEachMediaGroup(i,(o,c,d,h)=>{if(!o.playlists||!o.playlists.length){if(a&&c==="AUDIO"&&!o.uri)for(let b=0;b<i.playlists.length;b++){const tt=i.playlists[b];if(tt.attributes&&tt.attributes.AUDIO&&tt.attributes.AUDIO===d)return}o.playlists=[_extends$2({},o)]}o.playlists.forEach(function(b,tt){const nt=s(c,d,h,b),ft=createPlaylistID(tt,nt);b.uri?b.resolvedUri=b.resolvedUri||resolveUrl(i.uri,b.uri):(b.uri=tt===0?nt:ft,b.resolvedUri=b.uri),b.id=b.id||ft,b.attributes=b.attributes||{},i.playlists[b.id]=b,i.playlists[b.uri]=b})}),setupMediaPlaylists(i),resolveMediaGroupUris(i)};class DateRangesStorage{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[s]=e;s.programDateTime!==void 0&&(this.offset_=s.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[s]=e,a=s.startDate.getTime();this.trimProcessedDateRanges_(a),this.pendingDateRanges_=e.reduce((o,c)=>(o.set(c.id,c),o),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},s=[];this.pendingDateRanges_.forEach((a,o)=>{if(!this.processedDateRanges_.has(o)&&(a.startTime=a.startDate.getTime()/1e3-this.offset_,a.processDateRange=()=>this.processDateRange(a),s.push(a),!!a.class))if(e[a.class]){const c=e[a.class].push(a);a.classListIndex=c-1}else e[a.class]=[a],a.classListIndex=0});for(const a of s){const o=e[a.class]||[];a.endDate?a.endTime=a.endDate.getTime()/1e3-this.offset_:a.endOnNext&&o[a.classListIndex+1]?a.endTime=o[a.classListIndex+1].startTime:a.duration?a.endTime=a.startTime+a.duration:a.plannedDuration?a.endTime=a.startTime+a.plannedDuration:a.endTime=a.startTime}return s}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((a,o)=>{a.startDate.getTime()<e&&this.processedDateRanges_.delete(o)})}}const{EventTarget:EventTarget$1}=videojs,addLLHLSQueryDirectives=(i,e)=>{if(e.endList||!e.serverControl)return i;const s={};if(e.serverControl.canBlockReload){const{preloadSegment:a}=e;let o=e.mediaSequence+e.segments.length;if(a){const c=a.parts||[],d=getKnownPartCount(e)-1;d>-1&&d!==c.length-1&&(s._HLS_part=d),(d>-1||c.length)&&o--}s._HLS_msn=o}if(e.serverControl&&e.serverControl.canSkipUntil&&(s._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(s).length){const a=new window$1$1.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(o){s.hasOwnProperty(o)&&a.searchParams.set(o,s[o])}),i=a.toString()}return i},updateSegment=(i,e)=>{if(!i)return e;const s=merge(i,e);if(i.preloadHints&&!e.preloadHints&&delete s.preloadHints,i.parts&&!e.parts)delete s.parts;else if(i.parts&&e.parts)for(let a=0;a<e.parts.length;a++)i.parts&&i.parts[a]&&(s.parts[a]=merge(i.parts[a],e.parts[a]));return!i.skipped&&e.skipped&&(s.skipped=!1),i.preload&&!e.preload&&(s.preload=!1),s},updateSegments=(i,e,s)=>{const a=i.slice(),o=e.slice();s=s||0;const c=[];let d;for(let h=0;h<o.length;h++){const b=a[h+s],tt=o[h];b?(d=b.map||d,c.push(updateSegment(b,tt))):(d&&!tt.map&&(tt.map=d),c.push(tt))}return c},resolveSegmentUris=(i,e)=>{!i.resolvedUri&&i.uri&&(i.resolvedUri=resolveUrl(e,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=resolveUrl(e,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=resolveUrl(e,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=resolveUrl(e,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(s=>{s.resolvedUri||(s.resolvedUri=resolveUrl(e,s.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(s=>{s.resolvedUri||(s.resolvedUri=resolveUrl(e,s.uri))})},getAllSegments=function(i){const e=i.segments||[],s=i.preloadSegment;if(s&&s.parts&&s.parts.length){if(s.preloadHints){for(let a=0;a<s.preloadHints.length;a++)if(s.preloadHints[a].type==="MAP")return e}s.duration=i.targetDuration,s.preload=!0,e.push(s)}return e},isPlaylistUnchanged=(i,e)=>i===e||i.segments&&e.segments&&i.segments.length===e.segments.length&&i.endList===e.endList&&i.mediaSequence===e.mediaSequence&&i.preloadSegment===e.preloadSegment,updateMain$1=(i,e,s=isPlaylistUnchanged)=>{const a=merge(i,{}),o=a.playlists[e.id];if(!o||s(o,e))return null;e.segments=getAllSegments(e);const c=merge(o,e);if(c.preloadSegment&&!e.preloadSegment&&delete c.preloadSegment,o.segments){if(e.skip){e.segments=e.segments||[];for(let d=0;d<e.skip.skippedSegments;d++)e.segments.unshift({skipped:!0})}c.segments=updateSegments(o.segments,e.segments,e.mediaSequence-o.mediaSequence)}c.segments.forEach(d=>{resolveSegmentUris(d,c.resolvedUri)});for(let d=0;d<a.playlists.length;d++)a.playlists[d].id===e.id&&(a.playlists[d]=c);return a.playlists[e.id]=c,a.playlists[e.uri]=c,forEachMediaGroup(i,(d,h,b,tt)=>{if(d.playlists)for(let nt=0;nt<d.playlists.length;nt++)e.id===d.playlists[nt].id&&(d.playlists[nt]=c)}),a},refreshDelay=(i,e)=>{const s=i.segments||[],a=s[s.length-1],o=a&&a.parts&&a.parts[a.parts.length-1],c=o&&o.duration||a&&a.duration;return e&&c?c*1e3:(i.partTargetDuration||i.targetDuration||10)*500};class PlaylistLoader extends EventTarget$1{constructor(e,s,a={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=logger("PlaylistLoader");const{withCredentials:o=!1}=a;this.src=e,this.vhs_=s,this.withCredentials=o,this.addDateRangesToTextTrack_=a.addDateRangesToTextTrack;const c=s.options_;this.customTagParsers=c&&c.customTagParsers||[],this.customTagMappers=c&&c.customTagMappers||[],this.llhls=c&&c.llhls,this.dateRangesStorage_=new DateRangesStorage,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const s=this.dateRangesStorage_.getDateRangesToProcess();!s.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(s)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let s=resolveUrl(this.main.uri,e.uri);this.llhls&&(s=addLLHLSQueryDirectives(s,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,o)=>{if(this.request){if(a)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,s,a){const{uri:o,id:c}=s;this.request=null,a&&(this.state=a),this.error={playlist:this.main.playlists[c],status:e.status,message:`HLS playlist request error at URL: ${o}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:{errorType:videojs.Error.HlsPlaylistRequestError}},this.trigger("error")}parseManifest_({url:e,manifestString:s}){return parseManifest({onwarn:({message:a})=>this.logger_(`m3u8-parser warn for ${e}: ${a}`),oninfo:({message:a})=>this.logger_(`m3u8-parser info for ${e}: ${a}`),manifestString:s,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:s,url:a,id:o}){this.request=null,this.state="HAVE_METADATA";const c=s||this.parseManifest_({url:a,manifestString:e});c.lastRequest=Date.now(),setupMediaPlaylist({playlist:c,uri:a,id:o});const d=updateMain$1(this.main,c);this.targetDuration=c.partTargetDuration||c.targetDuration,this.pendingMedia_=null,d?(this.main=d,this.media_=this.main.playlists[o]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!d)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window$1$1.clearTimeout(this.mediaUpdateTimeout),window$1$1.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new DateRangesStorage,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,s){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(window$1$1.clearTimeout(this.finalRenditionTimeout),s){const d=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window$1$1.setTimeout(this.media.bind(this,e,!1),d);return}const a=this.state,o=!this.media_||e.id!==this.media_.id,c=this.main.playlists[e.id];if(c&&c.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,o&&(this.trigger("mediachanging"),a==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(refreshDelay(e,!0)),!!o){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(d,h)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=resolveManifestRedirect(e.resolvedUri,h),d)return this.playlistRequestError(this.request,e,a);this.haveMetadata({playlistString:h.responseText,url:e.uri,id:e.id}),a==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const s=this.media();if(e){const a=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},a);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=window$1$1.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e,s)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:s.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:s.responseText,code:2,metadata:{errorType:videojs.Error.HlsPlaylistRequestError}},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=resolveManifestRedirect(this.src,s);const a=this.parseManifest_({manifestString:s.responseText,url:this.src});this.setupInitialPlaylist(a)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,addPropertiesToMain(this.main,this.srcUri()),e.playlists.forEach(a=>{a.segments=getAllSegments(a),a.segments.forEach(o=>{resolveSegmentUris(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const s=this.srcUri()||window$1$1.location.href;this.main=mainForMedia(e,s),this.haveMetadata({playlistObject:e,url:s,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,s){const a=this.main,o=e.ID;let c=a.playlists.length;for(;c--;){const d=a.playlists[c];if(d.attributes["PATHWAY-ID"]===o){const h=d.resolvedUri,b=d.id;if(s){const tt=this.createCloneURI_(d.resolvedUri,e),nt=createPlaylistID(o,tt),ft=this.createCloneAttributes_(o,d.attributes),yt=this.createClonePlaylist_(d,nt,e,ft);a.playlists[c]=yt,a.playlists[nt]=yt,a.playlists[tt]=yt}else a.playlists.splice(c,1);delete a.playlists[b],delete a.playlists[h]}}this.updateOrDeleteCloneMedia(e,s)}updateOrDeleteCloneMedia(e,s){const a=this.main,o=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(c=>{if(!(!a.mediaGroups[c]||!a.mediaGroups[c][o])){for(const d in a.mediaGroups[c])if(d===o){for(const h in a.mediaGroups[c][d])a.mediaGroups[c][d][h].playlists.forEach((tt,nt)=>{const ft=a.playlists[tt.id],yt=ft.id,Tt=ft.resolvedUri;delete a.playlists[yt],delete a.playlists[Tt]});delete a.mediaGroups[c][d]}}}),s&&this.createClonedMediaGroups_(e)}addClonePathway(e,s={}){const a=this.main,o=a.playlists.length,c=this.createCloneURI_(s.resolvedUri,e),d=createPlaylistID(e.ID,c),h=this.createCloneAttributes_(e.ID,s.attributes),b=this.createClonePlaylist_(s,d,e,h);a.playlists[o]=b,a.playlists[d]=b,a.playlists[c]=b,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const s=e.ID,a=e["BASE-ID"],o=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(c=>{if(!(!o.mediaGroups[c]||o.mediaGroups[c][s]))for(const d in o.mediaGroups[c]){if(d===a)o.mediaGroups[c][s]={};else continue;for(const h in o.mediaGroups[c][d]){const b=o.mediaGroups[c][d][h];o.mediaGroups[c][s][h]=_extends$2({},b);const tt=o.mediaGroups[c][s][h],nt=this.createCloneURI_(b.resolvedUri,e);tt.resolvedUri=nt,tt.uri=nt,tt.playlists=[],b.playlists.forEach((ft,yt)=>{const Tt=o.playlists[ft.id],gt=groupID(c,s,h),St=createPlaylistID(s,gt);if(Tt&&!o.playlists[St]){const wt=this.createClonePlaylist_(Tt,St,e),Et=wt.resolvedUri;o.playlists[St]=wt,o.playlists[Et]=wt}tt.playlists[yt]=this.createClonePlaylist_(ft,St,e)})}}})}createClonePlaylist_(e,s,a,o){const c=this.createCloneURI_(e.resolvedUri,a),d={resolvedUri:c,uri:c,id:s};return e.segments&&(d.segments=[]),o&&(d.attributes=o),merge(e,d)}createCloneURI_(e,s){const a=new URL(e);a.hostname=s["URI-REPLACEMENT"].HOST;const o=s["URI-REPLACEMENT"].PARAMS;for(const c of Object.keys(o))a.searchParams.set(c,o[c]);return a.href}createCloneAttributes_(e,s){const a={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(o=>{s[o]&&(a[o]=e)}),a}getKeyIdSet(e){if(e.contentProtection){const s=new Set;for(const a in e.contentProtection){const o=e.contentProtection[a].attributes.keyId;o&&s.add(o.toLowerCase())}return s}}}const callbackWrapper=function(i,e,s,a){const o=i.responseType==="arraybuffer"?i.response:i.responseText;!e&&o&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=o.byteLength||o.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),s.headers&&(i.responseHeaders=s.headers),e&&e.code==="ETIMEDOUT"&&(i.timedout=!0),!e&&!i.aborted&&s.statusCode!==200&&s.statusCode!==206&&s.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(i&&(o||i.responseText)))),a(e,i)},callAllRequestHooks=(i,e)=>{if(!i||!i.size)return;let s=e;return i.forEach(a=>{s=a(s)}),s},callAllResponseHooks=(i,e,s,a)=>{!i||!i.size||i.forEach(o=>{o(e,s,a)})},xhrFactory=function(){const i=function e(s,a){s=merge({timeout:45e3},s);const o=e.beforeRequest||videojs.Vhs.xhr.beforeRequest,c=e._requestCallbackSet||videojs.Vhs.xhr._requestCallbackSet||new Set,d=e._responseCallbackSet||videojs.Vhs.xhr._responseCallbackSet;o&&typeof o=="function"&&(videojs.log.warn("beforeRequest is deprecated, use onRequest instead."),c.add(o));const h=videojs.Vhs.xhr.original===!0?videojs.xhr:videojs.Vhs.xhr,b=callAllRequestHooks(c,s);c.delete(o);const tt=h(b||s,function(ft,yt){return callAllResponseHooks(d,tt,ft,yt),callbackWrapper(tt,ft,yt,a)}),nt=tt.abort;return tt.abort=function(){return tt.aborted=!0,nt.apply(tt,arguments)},tt.uri=s.uri,tt.requestTime=Date.now(),tt};return i.original=!0,i},byterangeStr=function(i){let e;const s=i.offset;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=window$1$1.BigInt(i.offset)+window$1$1.BigInt(i.length)-window$1$1.BigInt(1):e=i.offset+i.length-1,"bytes="+s+"-"+e},segmentXhrHeaders=function(i){const e={};return i.byterange&&(e.Range=byterangeStr(i.byterange)),e},textRange=function(i,e){return i.start(e)+"-"+i.end(e)},formatHexString=function(i,e){const s=i.toString(16);return"00".substring(0,2-s.length)+s+(e%2?" ":"")},formatAsciiString=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},createTransferableMessage=function(i){const e={};return Object.keys(i).forEach(s=>{const a=i[s];isArrayBufferView(a)?e[s]={bytes:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength}:e[s]=a}),e},initSegmentId=function(i){const e=i.byterange||{length:1/0,offset:0};return[e.length,e.offset,i.resolvedUri].join(",")},segmentKeyId=function(i){return i.resolvedUri},hexDump=i=>{const e=Array.prototype.slice.call(i),s=16;let a="",o,c;for(let d=0;d<e.length/s;d++)o=e.slice(d*s,d*s+s).map(formatHexString).join(""),c=e.slice(d*s,d*s+s).map(formatAsciiString).join(""),a+=o+" "+c+`
`;return a},tagDump=({bytes:i})=>hexDump(i),textRanges=i=>{let e="",s;for(s=0;s<i.length;s++)e+=textRange(i,s)+" ";return e};var utils=Object.freeze({__proto__:null,createTransferableMessage,initSegmentId,segmentKeyId,hexDump,tagDump,textRanges});const SEGMENT_END_FUDGE_PERCENT=.25,playerTimeToProgramTime=(i,e)=>{if(!e.dateTimeObject)return null;const s=e.videoTimingInfo.transmuxerPrependedSeconds,o=e.videoTimingInfo.transmuxedPresentationStart+s,c=i-o;return new Date(e.dateTimeObject.getTime()+c*1e3)},originalSegmentVideoDuration=i=>i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds,findSegmentForProgramTime=(i,e)=>{let s;try{s=new Date(i)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let a=e.segments[0];if(s<new Date(a.dateTimeObject))return null;for(let b=0;b<e.segments.length-1;b++){a=e.segments[b];const tt=new Date(e.segments[b+1].dateTimeObject);if(s<tt)break}const o=e.segments[e.segments.length-1],c=o.dateTimeObject,d=o.videoTimingInfo?originalSegmentVideoDuration(o.videoTimingInfo):o.duration+o.duration*SEGMENT_END_FUDGE_PERCENT,h=new Date(c.getTime()+d*1e3);return s>h?null:(s>new Date(c)&&(a=o),{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(e,e.mediaSequence+e.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"})},findSegmentForPlayerTime=(i,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let s=0,a;for(let c=0;c<e.segments.length&&(a=e.segments[c],s=a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationEnd:s+a.duration,!(i<=s));c++);const o=e.segments[e.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>s){if(i>s+o.duration*SEGMENT_END_FUDGE_PERCENT)return null;a=o}return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:s-a.duration,type:a.videoTimingInfo?"accurate":"estimate"}},getOffsetFromTimestamp=(i,e)=>{let s,a;try{s=new Date(i),a=new Date(e)}catch{}const o=s.getTime();return(a.getTime()-o)/1e3},verifyProgramDateTimeTags=i=>{if(!i.segments||i.segments.length===0)return!1;for(let e=0;e<i.segments.length;e++)if(!i.segments[e].dateTimeObject)return!1;return!0},getProgramTime=({playlist:i,time:e=void 0,callback:s})=>{if(!s)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return s({message:"getProgramTime: playlist and time must be provided"});const a=findSegmentForPlayerTime(e,i);if(!a)return s({message:"valid programTime was not found"});if(a.type==="estimate")return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});const o={mediaSeconds:e},c=playerTimeToProgramTime(e,a.segment);return c&&(o.programDateTime=c.toISOString()),s(null,o)},seekToProgramTime=({programTime:i,playlist:e,retryCount:s=2,seekTo:a,pauseAfterSeek:o=!0,tech:c,callback:d})=>{if(!d)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!e||!a)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!c.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!verifyProgramDateTimeTags(e))return d({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const h=findSegmentForProgramTime(i,e);if(!h)return d({message:`${i} was not found in the stream`});const b=h.segment,tt=getOffsetFromTimestamp(b.dateTimeObject,i);if(h.type==="estimate"){if(s===0)return d({message:`${i} is not buffered yet. Try again`});a(h.estimatedStart+tt),c.one("seeked",()=>{seekToProgramTime({programTime:i,playlist:e,retryCount:s-1,seekTo:a,pauseAfterSeek:o,tech:c,callback:d})});return}const nt=b.start+tt,ft=()=>d(null,c.currentTime());c.one("seeked",ft),o&&c.pause(),a(nt)},callbackOnCompleted=(i,e)=>{if(i.readyState===4)return e()},containerRequest=(i,e,s)=>{let a=[],o,c=!1;const d=function(nt,ft,yt,Tt){return ft.abort(),c=!0,s(nt,ft,yt,Tt)},h=function(nt,ft){if(c)return;if(nt)return d(nt,ft,"",a);const yt=ft.responseText.substring(a&&a.byteLength||0,ft.responseText.length);if(a=concatTypedArrays(a,stringToBytes(yt,!0)),o=o||getId3Offset(a),a.length<10||o&&a.length<o+2)return callbackOnCompleted(ft,()=>d(nt,ft,"",a));const Tt=detectContainerForBytes(a);return Tt==="ts"&&a.length<188?callbackOnCompleted(ft,()=>d(nt,ft,"",a)):!Tt&&a.length<376?callbackOnCompleted(ft,()=>d(nt,ft,"",a)):d(null,ft,Tt,a)},tt=e({uri:i,beforeSend(nt){nt.overrideMimeType("text/plain; charset=x-user-defined"),nt.addEventListener("progress",function({total:ft,loaded:yt}){return callbackWrapper(nt,null,{statusCode:nt.status},h)})}},function(nt,ft){return callbackWrapper(tt,nt,ft,h)});return tt},{EventTarget}=videojs,dashPlaylistUnchanged=function(i,e){if(!isPlaylistUnchanged(i,e)||i.sidx&&e.sidx&&(i.sidx.offset!==e.sidx.offset||i.sidx.length!==e.sidx.length))return!1;if(!i.sidx&&e.sidx||i.sidx&&!e.sidx||i.segments&&!e.segments||!i.segments&&e.segments)return!1;if(!i.segments&&!e.segments)return!0;for(let s=0;s<i.segments.length;s++){const a=i.segments[s],o=e.segments[s];if(a.uri!==o.uri)return!1;if(!a.byterange&&!o.byterange)continue;const c=a.byterange,d=o.byterange;if(c&&!d||!c&&d||c.offset!==d.offset||c.length!==d.length)return!1}return!0},dashGroupId=(i,e,s,a)=>{const o=a.attributes.NAME||s;return`placeholder-uri-${i}-${e}-${o}`},parseMainXml=({mainXml:i,srcUrl:e,clientOffset:s,sidxMapping:a,previousManifest:o})=>{const c=parse(i,{manifestUri:e,clientOffset:s,sidxMapping:a,previousManifest:o});return addPropertiesToMain(c,e,dashGroupId),c},removeOldMediaGroupLabels=(i,e)=>{forEachMediaGroup(i,(s,a,o,c)=>{c in e.mediaGroups[a][o]||delete i.mediaGroups[a][o][c]})},updateMain=(i,e,s)=>{let a=!0,o=merge(i,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let c=0;c<e.playlists.length;c++){const d=e.playlists[c];if(d.sidx){const b=generateSidxKey(d.sidx);s&&s[b]&&s[b].sidx&&addSidxSegmentsToPlaylist$1(d,s[b].sidx,d.sidx.resolvedUri)}const h=updateMain$1(o,d,dashPlaylistUnchanged);h&&(o=h,a=!1)}return forEachMediaGroup(e,(c,d,h,b)=>{if(c.playlists&&c.playlists.length){const tt=c.playlists[0].id,nt=updateMain$1(o,c.playlists[0],dashPlaylistUnchanged);nt&&(o=nt,b in o.mediaGroups[d][h]||(o.mediaGroups[d][h][b]=c),o.mediaGroups[d][h][b].playlists[0]=o.playlists[tt],a=!1)}}),removeOldMediaGroupLabels(o,e),e.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(a=!1),a?null:o},equivalentSidx=(i,e)=>(!i.map&&!e.map||!!(i.map&&e.map&&i.map.byterange.offset===e.map.byterange.offset&&i.map.byterange.length===e.map.byterange.length))&&i.uri===e.uri&&i.byterange.offset===e.byterange.offset&&i.byterange.length===e.byterange.length,compareSidxEntry=(i,e)=>{const s={};for(const a in i){const c=i[a].sidx;if(c){const d=generateSidxKey(c);if(!e[d])break;const h=e[d].sidxInfo;equivalentSidx(h,c)&&(s[d]=e[d])}}return s},filterChangedSidxMappings=(i,e)=>{let a=compareSidxEntry(i.playlists,e);return forEachMediaGroup(i,(o,c,d,h)=>{if(o.playlists&&o.playlists.length){const b=o.playlists;a=merge(a,compareSidxEntry(b,e))}}),a};class DashPlaylistLoader extends EventTarget{constructor(e,s,a={},o){super(),this.mainPlaylistLoader_=o||this,o||(this.isMain_=!0);const{withCredentials:c=!1}=a;if(this.vhs_=s,this.withCredentials=c,this.addMetadataToTextTrack=a.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=logger("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,s,a){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2,metadata:e.metadata},a&&(this.state=a),this.trigger("error"),!0}addSidxSegments_(e,s,a){const o=e.sidx&&generateSidxKey(e.sidx);if(!e.sidx||!o||this.mainPlaylistLoader_.sidxMapping_[o]){this.mediaRequest_=window$1$1.setTimeout(()=>a(!1),0);return}const c=resolveManifestRedirect(e.sidx.resolvedUri),d=(h,b)=>{if(this.requestErrored_(h,b,s))return;const tt=this.mainPlaylistLoader_.sidxMapping_;let nt;try{nt=parseSidx$1(toUint8(b.response).subarray(8))}catch(ft){ft.metadata={errorType:videojs.Error.DashManifestSidxParsingError},this.requestErrored_(ft,b,s);return}return tt[o]={sidxInfo:e.sidx,sidx:nt},addSidxSegmentsToPlaylist$1(e,nt,e.sidx.resolvedUri),a(!0)};this.request=containerRequest(c,this.vhs_.xhr,(h,b,tt,nt)=>{if(h)return d(h,b);if(!tt||tt!=="mp4"){const Tt=tt||"unknown";return d({status:b.status,message:`Unsupported ${Tt} container type for sidx segment at URL: ${c}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2,metadata:{errorType:videojs.Error.UnsupportedSidxContainer,sidxContainer:Tt}},b)}const{offset:ft,length:yt}=e.sidx.byterange;if(nt.length>=yt+ft)return d(h,{response:nt.subarray(ft,ft+yt),status:b.status,uri:b.uri});this.request=this.vhs_.xhr({uri:c,responseType:"arraybuffer",headers:segmentXhrHeaders({byterange:e.sidx.byterange})},d)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window$1$1.clearTimeout(this.minimumUpdatePeriodTimeout_),window$1$1.clearTimeout(this.mediaRequest_),window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const s=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const a=!this.media_||e.id!==this.media_.id;if(a&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,a&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}a&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,s,o=>{this.haveMetadata({startingState:s,playlist:e})}))}haveMetadata({startingState:e,playlist:s}){this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window$1$1.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const s=this.media();if(e){const a=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=window$1$1.setTimeout(()=>this.load(),a);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=window$1$1.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,s)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(s,a)=>{if(this.requestErrored_(s,a)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}const o=a.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=a.responseText,a.responseHeaders&&a.responseHeaders.date?this.mainLoaded_=Date.parse(a.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=resolveManifestRedirect(this.mainPlaylistLoader_.srcUrl,a),o){this.handleMain_(),this.syncClientServerClock_(()=>e(a,o));return}return e(a,o)})}syncClientServerClock_(e){const s=parseUTCTiming(this.mainPlaylistLoader_.mainXml_);if(s===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(s.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=s.value-Date.now(),e();this.request=this.vhs_.xhr({uri:resolveUrl(this.mainPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(a,o)=>{if(!this.request)return;if(a)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let c;s.method==="HEAD"?!o.responseHeaders||!o.responseHeaders.date?c=this.mainLoaded_:c=Date.parse(o.responseHeaders.date):c=Date.parse(o.responseText),this.mainPlaylistLoader_.clientOffset_=c-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let s=parseMainXml({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(s=updateMain(e,s,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s||e;const a=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return a&&a!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=a),(!e||s&&s.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s),!!s}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(window$1$1.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let s=e.main&&e.main.minimumUpdatePeriod;if(s===0&&(e.media()?s=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof s!="number"||s<=0){s<0&&this.logger_(`found invalid minimumUpdatePeriod of ${s}, not setting a timeout`);return}this.createMUPTimeout_(s)}createMUPTimeout_(e){const s=this.mainPlaylistLoader_;s.minimumUpdatePeriodTimeout_=window$1$1.setTimeout(()=>{s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,s)=>{s&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,a=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const s=this.mainPlaylistLoader_.main.playlists,a=!this.media_||this.media_!==s[e];if(a?this.media_=s[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const o=()=>{this.media().endList||(this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.trigger("mediaupdatetimeout"),o()},refreshDelay(this.media(),!!a)))};o()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const s=this.mainPlaylistLoader_.main.eventStream.map(a=>({cueTime:a.start,frames:[{data:a.messageData}]}));this.addMetadataToTextTrack("EventStream",s,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const s=new Set;for(const a in e.contentProtection){const o=e.contentProtection[a].attributes["cenc:default_KID"];o&&s.add(o.replace(/-/g,"").toLowerCase())}return s}}}var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const stringToArrayBuffer=i=>{const e=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)e[s]=i.charCodeAt(s);return e.buffer},browserWorkerPolyFill=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},createObjectURL=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch{const s=new BlobBuilder;return s.append(i),URL.createObjectURL(s.getBlob())}},factory=function(i){return function(){const e=createObjectURL(i),s=browserWorkerPolyFill(new Worker(e));s.objURL=e;const a=s.terminate;return s.on=s.addEventListener,s.off=s.removeEventListener,s.terminate=function(){return URL.revokeObjectURL(e),a.call(this)},s}},transform=function(i){return`var browserWorkerPolyFill = ${browserWorkerPolyFill.toString()};
browserWorkerPolyFill(self);
`+i},getWorkerString=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},workerCode$1=transform(getWorkerString(function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var et={};this.on=function(rt,ht){et[rt]||(et[rt]=[]),et[rt]=et[rt].concat(ht)},this.off=function(rt,ht){var dt;return et[rt]?(dt=et[rt].indexOf(ht),et[rt]=et[rt].slice(),et[rt].splice(dt,1),dt>-1):!1},this.trigger=function(rt){var ht,dt,mt,_t;if(ht=et[rt],!!ht)if(arguments.length===2)for(mt=ht.length,dt=0;dt<mt;++dt)ht[dt].call(this,arguments[1]);else{for(_t=[],dt=arguments.length,dt=1;dt<arguments.length;++dt)_t.push(arguments[dt]);for(mt=ht.length,dt=0;dt<mt;++dt)ht[dt].apply(this,_t)}},this.dispose=function(){et={}}}};e.prototype.pipe=function(et){return this.on("data",function(rt){et.push(rt)}),this.on("done",function(rt){et.flush(rt)}),this.on("partialdone",function(rt){et.partialFlush(rt)}),this.on("endedtimeline",function(rt){et.endTimeline(rt)}),this.on("reset",function(rt){et.reset(rt)}),et},e.prototype.push=function(et){this.trigger("data",et)},e.prototype.flush=function(et){this.trigger("done",et)},e.prototype.partialFlush=function(et){this.trigger("partialdone",et)},e.prototype.endTimeline=function(et){this.trigger("endedtimeline",et)},e.prototype.reset=function(et){this.trigger("reset",et)};var s=e,a=Math.pow(2,32),o=function(et){var rt=new DataView(et.buffer,et.byteOffset,et.byteLength),ht;return rt.getBigUint64?(ht=rt.getBigUint64(0),ht<Number.MAX_SAFE_INTEGER?Number(ht):ht):rt.getUint32(0)*a+rt.getUint32(4)},c={getUint64:o,MAX_UINT32:a},d=c.MAX_UINT32,h,b,tt,nt,ft,yt,Tt,gt,St,wt,Et,vt,xt,At,kt,It,Rt,Lt,jt,Ft,qt,Xt,Ut,Wt,an,Kt,Jt,Mt,Ht,zt,Yt,Qt,fn,dn,mn,un;(function(){var et;if(Ut={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(et in Ut)Ut.hasOwnProperty(et)&&(Ut[et]=[et.charCodeAt(0),et.charCodeAt(1),et.charCodeAt(2),et.charCodeAt(3)]);Wt=new Uint8Array([105,115,111,109]),Kt=new Uint8Array([97,118,99,49]),an=new Uint8Array([0,0,0,1]),Jt=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Mt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Ht={video:Jt,audio:Mt},Qt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Yt=new Uint8Array([0,0,0,0,0,0,0,0]),fn=new Uint8Array([0,0,0,0,0,0,0,0]),dn=fn,mn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),un=fn,zt=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),h=function(et){var rt=[],ht=0,dt,mt,_t;for(dt=1;dt<arguments.length;dt++)rt.push(arguments[dt]);for(dt=rt.length;dt--;)ht+=rt[dt].byteLength;for(mt=new Uint8Array(ht+8),_t=new DataView(mt.buffer,mt.byteOffset,mt.byteLength),_t.setUint32(0,mt.byteLength),mt.set(et,4),dt=0,ht=8;dt<rt.length;dt++)mt.set(rt[dt],ht),ht+=rt[dt].byteLength;return mt},b=function(){return h(Ut.dinf,h(Ut.dref,Qt))},tt=function(et){return h(Ut.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,et.audioobjecttype<<3|et.samplingfrequencyindex>>>1,et.samplingfrequencyindex<<7|et.channelcount<<3,6,1,2]))},nt=function(){return h(Ut.ftyp,Wt,an,Wt,Kt)},It=function(et){return h(Ut.hdlr,Ht[et])},ft=function(et){return h(Ut.mdat,et)},kt=function(et){var rt=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,et.duration>>>24&255,et.duration>>>16&255,et.duration>>>8&255,et.duration&255,85,196,0,0]);return et.samplerate&&(rt[12]=et.samplerate>>>24&255,rt[13]=et.samplerate>>>16&255,rt[14]=et.samplerate>>>8&255,rt[15]=et.samplerate&255),h(Ut.mdhd,rt)},At=function(et){return h(Ut.mdia,kt(et),It(et.type),Tt(et))},yt=function(et){return h(Ut.mfhd,new Uint8Array([0,0,0,0,(et&4278190080)>>24,(et&16711680)>>16,(et&65280)>>8,et&255]))},Tt=function(et){return h(Ut.minf,et.type==="video"?h(Ut.vmhd,zt):h(Ut.smhd,Yt),b(),Lt(et))},gt=function(et,rt){for(var ht=[],dt=rt.length;dt--;)ht[dt]=Ft(rt[dt]);return h.apply(null,[Ut.moof,yt(et)].concat(ht))},St=function(et){for(var rt=et.length,ht=[];rt--;)ht[rt]=vt(et[rt]);return h.apply(null,[Ut.moov,Et(4294967295)].concat(ht).concat(wt(et)))},wt=function(et){for(var rt=et.length,ht=[];rt--;)ht[rt]=qt(et[rt]);return h.apply(null,[Ut.mvex].concat(ht))},Et=function(et){var rt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(et&4278190080)>>24,(et&16711680)>>16,(et&65280)>>8,et&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h(Ut.mvhd,rt)},Rt=function(et){var rt=et.samples||[],ht=new Uint8Array(4+rt.length),dt,mt;for(mt=0;mt<rt.length;mt++)dt=rt[mt].flags,ht[mt+4]=dt.dependsOn<<4|dt.isDependedOn<<2|dt.hasRedundancy;return h(Ut.sdtp,ht)},Lt=function(et){return h(Ut.stbl,jt(et),h(Ut.stts,un),h(Ut.stsc,dn),h(Ut.stsz,mn),h(Ut.stco,fn))},function(){var et,rt;jt=function(ht){return h(Ut.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),ht.type==="video"?et(ht):rt(ht))},et=function(ht){var dt=ht.sps||[],mt=ht.pps||[],_t=[],bt=[],Ct,Dt;for(Ct=0;Ct<dt.length;Ct++)_t.push((dt[Ct].byteLength&65280)>>>8),_t.push(dt[Ct].byteLength&255),_t=_t.concat(Array.prototype.slice.call(dt[Ct]));for(Ct=0;Ct<mt.length;Ct++)bt.push((mt[Ct].byteLength&65280)>>>8),bt.push(mt[Ct].byteLength&255),bt=bt.concat(Array.prototype.slice.call(mt[Ct]));if(Dt=[Ut.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(ht.width&65280)>>8,ht.width&255,(ht.height&65280)>>8,ht.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h(Ut.avcC,new Uint8Array([1,ht.profileIdc,ht.profileCompatibility,ht.levelIdc,255].concat([dt.length],_t,[mt.length],bt))),h(Ut.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],ht.sarRatio){var $t=ht.sarRatio[0],Pt=ht.sarRatio[1];Dt.push(h(Ut.pasp,new Uint8Array([($t&4278190080)>>24,($t&16711680)>>16,($t&65280)>>8,$t&255,(Pt&4278190080)>>24,(Pt&16711680)>>16,(Pt&65280)>>8,Pt&255])))}return h.apply(null,Dt)},rt=function(ht){return h(Ut.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(ht.channelcount&65280)>>8,ht.channelcount&255,(ht.samplesize&65280)>>8,ht.samplesize&255,0,0,0,0,(ht.samplerate&65280)>>8,ht.samplerate&255,0,0]),tt(ht))}}(),xt=function(et){var rt=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(et.id&4278190080)>>24,(et.id&16711680)>>16,(et.id&65280)>>8,et.id&255,0,0,0,0,(et.duration&4278190080)>>24,(et.duration&16711680)>>16,(et.duration&65280)>>8,et.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(et.width&65280)>>8,et.width&255,0,0,(et.height&65280)>>8,et.height&255,0,0]);return h(Ut.tkhd,rt)},Ft=function(et){var rt,ht,dt,mt,_t,bt,Ct;return rt=h(Ut.tfhd,new Uint8Array([0,0,0,58,(et.id&4278190080)>>24,(et.id&16711680)>>16,(et.id&65280)>>8,et.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),bt=Math.floor(et.baseMediaDecodeTime/d),Ct=Math.floor(et.baseMediaDecodeTime%d),ht=h(Ut.tfdt,new Uint8Array([1,0,0,0,bt>>>24&255,bt>>>16&255,bt>>>8&255,bt&255,Ct>>>24&255,Ct>>>16&255,Ct>>>8&255,Ct&255])),_t=92,et.type==="audio"?(dt=Xt(et,_t),h(Ut.traf,rt,ht,dt)):(mt=Rt(et),dt=Xt(et,mt.length+_t),h(Ut.traf,rt,ht,dt,mt))},vt=function(et){return et.duration=et.duration||4294967295,h(Ut.trak,xt(et),At(et))},qt=function(et){var rt=new Uint8Array([0,0,0,0,(et.id&4278190080)>>24,(et.id&16711680)>>16,(et.id&65280)>>8,et.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return et.type!=="video"&&(rt[rt.length-1]=0),h(Ut.trex,rt)},function(){var et,rt,ht;ht=function(dt,mt){var _t=0,bt=0,Ct=0,Dt=0;return dt.length&&(dt[0].duration!==void 0&&(_t=1),dt[0].size!==void 0&&(bt=2),dt[0].flags!==void 0&&(Ct=4),dt[0].compositionTimeOffset!==void 0&&(Dt=8)),[0,0,_t|bt|Ct|Dt,1,(dt.length&4278190080)>>>24,(dt.length&16711680)>>>16,(dt.length&65280)>>>8,dt.length&255,(mt&4278190080)>>>24,(mt&16711680)>>>16,(mt&65280)>>>8,mt&255]},rt=function(dt,mt){var _t,bt,Ct,Dt,$t,Pt;for(Dt=dt.samples||[],mt+=20+16*Dt.length,Ct=ht(Dt,mt),bt=new Uint8Array(Ct.length+Dt.length*16),bt.set(Ct),_t=Ct.length,Pt=0;Pt<Dt.length;Pt++)$t=Dt[Pt],bt[_t++]=($t.duration&4278190080)>>>24,bt[_t++]=($t.duration&16711680)>>>16,bt[_t++]=($t.duration&65280)>>>8,bt[_t++]=$t.duration&255,bt[_t++]=($t.size&4278190080)>>>24,bt[_t++]=($t.size&16711680)>>>16,bt[_t++]=($t.size&65280)>>>8,bt[_t++]=$t.size&255,bt[_t++]=$t.flags.isLeading<<2|$t.flags.dependsOn,bt[_t++]=$t.flags.isDependedOn<<6|$t.flags.hasRedundancy<<4|$t.flags.paddingValue<<1|$t.flags.isNonSyncSample,bt[_t++]=$t.flags.degradationPriority&61440,bt[_t++]=$t.flags.degradationPriority&15,bt[_t++]=($t.compositionTimeOffset&4278190080)>>>24,bt[_t++]=($t.compositionTimeOffset&16711680)>>>16,bt[_t++]=($t.compositionTimeOffset&65280)>>>8,bt[_t++]=$t.compositionTimeOffset&255;return h(Ut.trun,bt)},et=function(dt,mt){var _t,bt,Ct,Dt,$t,Pt;for(Dt=dt.samples||[],mt+=20+8*Dt.length,Ct=ht(Dt,mt),_t=new Uint8Array(Ct.length+Dt.length*8),_t.set(Ct),bt=Ct.length,Pt=0;Pt<Dt.length;Pt++)$t=Dt[Pt],_t[bt++]=($t.duration&4278190080)>>>24,_t[bt++]=($t.duration&16711680)>>>16,_t[bt++]=($t.duration&65280)>>>8,_t[bt++]=$t.duration&255,_t[bt++]=($t.size&4278190080)>>>24,_t[bt++]=($t.size&16711680)>>>16,_t[bt++]=($t.size&65280)>>>8,_t[bt++]=$t.size&255;return h(Ut.trun,_t)},Xt=function(dt,mt){return dt.type==="audio"?et(dt,mt):rt(dt,mt)}}();var gn={ftyp:nt,mdat:ft,moof:gt,moov:St,initSegment:function(et){var rt=nt(),ht=St(et),dt;return dt=new Uint8Array(rt.byteLength+ht.byteLength),dt.set(rt),dt.set(ht,rt.byteLength),dt}},wn=function(et){var rt,ht,dt=[],mt=[];for(mt.byteLength=0,mt.nalCount=0,mt.duration=0,dt.byteLength=0,rt=0;rt<et.length;rt++)ht=et[rt],ht.nalUnitType==="access_unit_delimiter_rbsp"?(dt.length&&(dt.duration=ht.dts-dt.dts,mt.byteLength+=dt.byteLength,mt.nalCount+=dt.length,mt.duration+=dt.duration,mt.push(dt)),dt=[ht],dt.byteLength=ht.data.byteLength,dt.pts=ht.pts,dt.dts=ht.dts):(ht.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(dt.keyFrame=!0),dt.duration=ht.dts-dt.dts,dt.byteLength+=ht.data.byteLength,dt.push(ht));return mt.length&&(!dt.duration||dt.duration<=0)&&(dt.duration=mt[mt.length-1].duration),mt.byteLength+=dt.byteLength,mt.nalCount+=dt.length,mt.duration+=dt.duration,mt.push(dt),mt},En=function(et){var rt,ht,dt=[],mt=[];for(dt.byteLength=0,dt.nalCount=0,dt.duration=0,dt.pts=et[0].pts,dt.dts=et[0].dts,mt.byteLength=0,mt.nalCount=0,mt.duration=0,mt.pts=et[0].pts,mt.dts=et[0].dts,rt=0;rt<et.length;rt++)ht=et[rt],ht.keyFrame?(dt.length&&(mt.push(dt),mt.byteLength+=dt.byteLength,mt.nalCount+=dt.nalCount,mt.duration+=dt.duration),dt=[ht],dt.nalCount=ht.length,dt.byteLength=ht.byteLength,dt.pts=ht.pts,dt.dts=ht.dts,dt.duration=ht.duration):(dt.duration+=ht.duration,dt.nalCount+=ht.length,dt.byteLength+=ht.byteLength,dt.push(ht));return mt.length&&dt.duration<=0&&(dt.duration=mt[mt.length-1].duration),mt.byteLength+=dt.byteLength,mt.nalCount+=dt.nalCount,mt.duration+=dt.duration,mt.push(dt),mt},Mn=function(et){var rt;return!et[0][0].keyFrame&&et.length>1&&(rt=et.shift(),et.byteLength-=rt.byteLength,et.nalCount-=rt.nalCount,et[0][0].dts=rt.dts,et[0][0].pts=rt.pts,et[0][0].duration+=rt.duration),et},Pn=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},yn=function(et,rt){var ht=Pn();return ht.dataOffset=rt,ht.compositionTimeOffset=et.pts-et.dts,ht.duration=et.duration,ht.size=4*et.length,ht.size+=et.byteLength,et.keyFrame&&(ht.flags.dependsOn=2,ht.flags.isNonSyncSample=0),ht},js=function(et,rt){var ht,dt,mt,_t,bt,Ct=rt||0,Dt=[];for(ht=0;ht<et.length;ht++)for(_t=et[ht],dt=0;dt<_t.length;dt++)bt=_t[dt],mt=yn(bt,Ct),Ct+=mt.size,Dt.push(mt);return Dt},Fs=function(et){var rt,ht,dt,mt,_t,bt,Ct=0,Dt=et.byteLength,$t=et.nalCount,Pt=Dt+4*$t,Ot=new Uint8Array(Pt),Bt=new DataView(Ot.buffer);for(rt=0;rt<et.length;rt++)for(mt=et[rt],ht=0;ht<mt.length;ht++)for(_t=mt[ht],dt=0;dt<_t.length;dt++)bt=_t[dt],Bt.setUint32(Ct,bt.data.byteLength),Ct+=4,Ot.set(bt.data,Ct),Ct+=bt.data.byteLength;return Ot},Us=function(et,rt){var ht,dt=rt||0,mt=[];return ht=yn(et,dt),mt.push(ht),mt},Hs=function(et){var rt,ht,dt=0,mt=et.byteLength,_t=et.length,bt=mt+4*_t,Ct=new Uint8Array(bt),Dt=new DataView(Ct.buffer);for(rt=0;rt<et.length;rt++)ht=et[rt],Dt.setUint32(dt,ht.data.byteLength),dt+=4,Ct.set(ht.data,dt),dt+=ht.data.byteLength;return Ct},Vs={groupNalsIntoFrames:wn,groupFramesIntoGops:En,extendFirstKeyFrame:Mn,generateSampleTable:js,concatenateNalData:Fs,generateSampleTableForFrame:Us,concatenateNalDataForFrame:Hs},bn=[33,16,5,32,164,27],Sr=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Zt=function(et){for(var rt=[];et--;)rt.push(0);return rt},zs=function(et){return Object.keys(et).reduce(function(rt,ht){return rt[ht]=new Uint8Array(et[ht].reduce(function(dt,mt){return dt.concat(mt)},[])),rt},{})},xr,qs=function(){if(!xr){var et={96e3:[bn,[227,64],Zt(154),[56]],88200:[bn,[231],Zt(170),[56]],64e3:[bn,[248,192],Zt(240),[56]],48e3:[bn,[255,192],Zt(268),[55,148,128],Zt(54),[112]],44100:[bn,[255,192],Zt(268),[55,163,128],Zt(84),[112]],32e3:[bn,[255,192],Zt(268),[55,234],Zt(226),[112]],24e3:[bn,[255,192],Zt(268),[55,255,128],Zt(268),[111,112],Zt(126),[224]],16e3:[bn,[255,192],Zt(268),[55,255,128],Zt(268),[111,255],Zt(269),[223,108],Zt(195),[1,192]],12e3:[Sr,Zt(268),[3,127,248],Zt(268),[6,255,240],Zt(268),[13,255,224],Zt(268),[27,253,128],Zt(259),[56]],11025:[Sr,Zt(268),[3,127,248],Zt(268),[6,255,240],Zt(268),[13,255,224],Zt(268),[27,255,192],Zt(268),[55,175,128],Zt(108),[112]],8e3:[Sr,Zt(268),[3,121,16],Zt(47),[7]]};xr=zs(et)}return xr},br=9e4,Cr,wr,Qn,Ar,Gr,Wr,Kr;Cr=function(et){return et*br},wr=function(et,rt){return et*rt},Qn=function(et){return et/br},Ar=function(et,rt){return et/rt},Gr=function(et,rt){return Cr(Ar(et,rt))},Wr=function(et,rt){return wr(Qn(et),rt)},Kr=function(et,rt,ht){return Qn(ht?et:et-rt)};var tn={ONE_SECOND_IN_TS:br,secondsToVideoTs:Cr,secondsToAudioTs:wr,videoTsToSeconds:Qn,audioTsToSeconds:Ar,audioTsToVideoTs:Gr,videoTsToAudioTs:Wr,metadataTsToSeconds:Kr},Gs=qs,Jn=tn,Ws=function(et){var rt,ht,dt=0;for(rt=0;rt<et.length;rt++)ht=et[rt],dt+=ht.data.byteLength;return dt},Ks=function(et,rt,ht,dt){var mt,_t=0,bt=0,Ct=0,Dt=0,$t,Pt,Ot;if(rt.length&&(mt=Jn.audioTsToVideoTs(et.baseMediaDecodeTime,et.samplerate),_t=Math.ceil(Jn.ONE_SECOND_IN_TS/(et.samplerate/1024)),ht&&dt&&(bt=mt-Math.max(ht,dt),Ct=Math.floor(bt/_t),Dt=Ct*_t),!(Ct<1||Dt>Jn.ONE_SECOND_IN_TS/2))){for($t=Gs()[et.samplerate],$t||($t=rt[0].data),Pt=0;Pt<Ct;Pt++)Ot=rt[0],rt.splice(0,0,{data:$t,dts:Ot.dts-_t,pts:Ot.pts-_t});return et.baseMediaDecodeTime-=Math.floor(Jn.videoTsToAudioTs(Dt,et.samplerate)),Dt}},Xs=function(et,rt,ht){return rt.minSegmentDts>=ht?et:(rt.minSegmentDts=1/0,et.filter(function(dt){return dt.dts>=ht?(rt.minSegmentDts=Math.min(rt.minSegmentDts,dt.dts),rt.minSegmentPts=rt.minSegmentDts,!0):!1}))},Ys=function(et){var rt,ht,dt=[];for(rt=0;rt<et.length;rt++)ht=et[rt],dt.push({size:ht.data.byteLength,duration:1024});return dt},Qs=function(et){var rt,ht,dt=0,mt=new Uint8Array(Ws(et));for(rt=0;rt<et.length;rt++)ht=et[rt],mt.set(ht.data,dt),dt+=ht.data.byteLength;return mt},Js={prefixWithSilence:Ks,trimAdtsFramesByEarliestDts:Xs,generateSampleTable:Ys,concatenateFrameData:Qs},Zs=tn.ONE_SECOND_IN_TS,na=function(et,rt){typeof rt.pts=="number"&&(et.timelineStartInfo.pts===void 0&&(et.timelineStartInfo.pts=rt.pts),et.minSegmentPts===void 0?et.minSegmentPts=rt.pts:et.minSegmentPts=Math.min(et.minSegmentPts,rt.pts),et.maxSegmentPts===void 0?et.maxSegmentPts=rt.pts:et.maxSegmentPts=Math.max(et.maxSegmentPts,rt.pts)),typeof rt.dts=="number"&&(et.timelineStartInfo.dts===void 0&&(et.timelineStartInfo.dts=rt.dts),et.minSegmentDts===void 0?et.minSegmentDts=rt.dts:et.minSegmentDts=Math.min(et.minSegmentDts,rt.dts),et.maxSegmentDts===void 0?et.maxSegmentDts=rt.dts:et.maxSegmentDts=Math.max(et.maxSegmentDts,rt.dts))},ga=function(et){delete et.minSegmentDts,delete et.maxSegmentDts,delete et.minSegmentPts,delete et.maxSegmentPts},_a=function(et,rt){var ht,dt,mt=et.minSegmentDts;return rt||(mt-=et.timelineStartInfo.dts),ht=et.timelineStartInfo.baseMediaDecodeTime,ht+=mt,ht=Math.max(0,ht),et.type==="audio"&&(dt=et.samplerate/Zs,ht*=dt,ht=Math.floor(ht)),ht},xa={clearDtsInfo:ga,calculateTrackBaseMediaDecodeTime:_a,collectDtsInfo:na},Xr=4,ba=128,$a=function(et){for(var rt=0,ht={payloadType:-1,payloadSize:0},dt=0,mt=0;rt<et.byteLength&&et[rt]!==ba;){for(;et[rt]===255;)dt+=255,rt++;for(dt+=et[rt++];et[rt]===255;)mt+=255,rt++;if(mt+=et[rt++],!ht.payload&&dt===Xr){var _t=String.fromCharCode(et[rt+3],et[rt+4],et[rt+5],et[rt+6]);if(_t==="GA94"){ht.payloadType=dt,ht.payloadSize=mt,ht.payload=et.subarray(rt,rt+mt);break}else ht.payload=void 0}rt+=mt,dt=0,mt=0}return ht},eo=function(et){return et.payload[0]!==181||(et.payload[1]<<8|et.payload[2])!==49||String.fromCharCode(et.payload[3],et.payload[4],et.payload[5],et.payload[6])!=="GA94"||et.payload[7]!==3?null:et.payload.subarray(8,et.payload.length-1)},to=function(et,rt){var ht=[],dt,mt,_t,bt;if(!(rt[0]&64))return ht;for(mt=rt[0]&31,dt=0;dt<mt;dt++)_t=dt*3,bt={type:rt[_t+2]&3,pts:et},rt[_t+2]&4&&(bt.ccData=rt[_t+3]<<8|rt[_t+4],ht.push(bt));return ht},io=function(et){for(var rt=et.byteLength,ht=[],dt=1,mt,_t;dt<rt-2;)et[dt]===0&&et[dt+1]===0&&et[dt+2]===3?(ht.push(dt+2),dt+=2):dt++;if(ht.length===0)return et;mt=rt-ht.length,_t=new Uint8Array(mt);var bt=0;for(dt=0;dt<mt;bt++,dt++)bt===ht[0]&&(bt++,ht.shift()),_t[dt]=et[bt];return _t},Yr={parseSei:$a,parseUserData:eo,parseCaptionPackets:to,discardEmulationPreventionBytes:io,USER_DATA_REGISTERED_ITU_T_T35:Xr},kr=s,Zn=Yr,hn=function(et){et=et||{},hn.prototype.init.call(this),this.parse708captions_=typeof et.parse708captions=="boolean"?et.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new nn(0,0),new nn(0,1),new nn(1,0),new nn(1,1)],this.parse708captions_&&(this.cc708Stream_=new en({captionServices:et.captionServices})),this.reset(),this.ccStreams_.forEach(function(rt){rt.on("data",this.trigger.bind(this,"data")),rt.on("partialdone",this.trigger.bind(this,"partialdone")),rt.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};hn.prototype=new kr,hn.prototype.push=function(et){var rt,ht,dt;if(et.nalUnitType==="sei_rbsp"&&(rt=Zn.parseSei(et.escapedRBSP),!!rt.payload&&rt.payloadType===Zn.USER_DATA_REGISTERED_ITU_T_T35&&(ht=Zn.parseUserData(rt),!!ht))){if(et.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(et.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}dt=Zn.parseCaptionPackets(et.pts,ht),this.captionPackets_=this.captionPackets_.concat(dt),this.latestDts_!==et.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=et.dts}},hn.prototype.flushCCStreams=function(et){this.ccStreams_.forEach(function(rt){return et==="flush"?rt.flush():rt.partialFlush()},this)},hn.prototype.flushStream=function(et){if(!this.captionPackets_.length){this.flushCCStreams(et);return}this.captionPackets_.forEach(function(rt,ht){rt.presortIndex=ht}),this.captionPackets_.sort(function(rt,ht){return rt.pts===ht.pts?rt.presortIndex-ht.presortIndex:rt.pts-ht.pts}),this.captionPackets_.forEach(function(rt){rt.type<2?this.dispatchCea608Packet(rt):this.dispatchCea708Packet(rt)},this),this.captionPackets_.length=0,this.flushCCStreams(et)},hn.prototype.flush=function(){return this.flushStream("flush")},hn.prototype.partialFlush=function(){return this.flushStream("partialFlush")},hn.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(et){et.reset()})},hn.prototype.dispatchCea608Packet=function(et){this.setsTextOrXDSActive(et)?this.activeCea608Channel_[et.type]=null:this.setsChannel1Active(et)?this.activeCea608Channel_[et.type]=0:this.setsChannel2Active(et)&&(this.activeCea608Channel_[et.type]=1),this.activeCea608Channel_[et.type]!==null&&this.ccStreams_[(et.type<<1)+this.activeCea608Channel_[et.type]].push(et)},hn.prototype.setsChannel1Active=function(et){return(et.ccData&30720)===4096},hn.prototype.setsChannel2Active=function(et){return(et.ccData&30720)===6144},hn.prototype.setsTextOrXDSActive=function(et){return(et.ccData&28928)===256||(et.ccData&30974)===4138||(et.ccData&30974)===6186},hn.prototype.dispatchCea708Packet=function(et){this.parse708captions_&&this.cc708Stream_.push(et)};var no={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ro=function(et){var rt=no[et]||et;return et&4096&&et===rt?"":String.fromCharCode(rt)},er=function(et){return 32<=et&&et<=127||160<=et&&et<=255},Sn=function(et){this.windowNum=et,this.reset()};Sn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Sn.prototype.getText=function(){return this.rows.join(`
`)},Sn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Sn.prototype.newLine=function(et){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(et),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Sn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Sn.prototype.addText=function(et){this.rows[this.rowIdx]+=et},Sn.prototype.backspace=function(){if(!this.isEmpty()){var et=this.rows[this.rowIdx];this.rows[this.rowIdx]=et.substr(0,et.length-1)}};var tr=function(et,rt,ht){this.serviceNum=et,this.text="",this.currentWindow=new Sn(-1),this.windows=[],this.stream=ht,typeof rt=="string"&&this.createTextDecoder(rt)};tr.prototype.init=function(et,rt){this.startPts=et;for(var ht=0;ht<8;ht++)this.windows[ht]=new Sn(ht),typeof rt=="function"&&(this.windows[ht].beforeRowOverflow=rt)},tr.prototype.setCurrentWindow=function(et){this.currentWindow=this.windows[et]},tr.prototype.createTextDecoder=function(et){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(et)}catch(rt){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+et+" encoding. "+rt})}};var en=function(et){et=et||{},en.prototype.init.call(this);var rt=this,ht=et.captionServices||{},dt={},mt;Object.keys(ht).forEach(_t=>{mt=ht[_t],/^SERVICE/.test(_t)&&(dt[_t]=mt.encoding)}),this.serviceEncodings=dt,this.current708Packet=null,this.services={},this.push=function(_t){_t.type===3?(rt.new708Packet(),rt.add708Bytes(_t)):(rt.current708Packet===null&&rt.new708Packet(),rt.add708Bytes(_t))}};en.prototype=new kr,en.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},en.prototype.add708Bytes=function(et){var rt=et.ccData,ht=rt>>>8,dt=rt&255;this.current708Packet.ptsVals.push(et.pts),this.current708Packet.data.push(ht),this.current708Packet.data.push(dt)},en.prototype.push708Packet=function(){var et=this.current708Packet,rt=et.data,ht=null,dt=null,mt=0,_t=rt[mt++];for(et.seq=_t>>6,et.sizeCode=_t&63;mt<rt.length;mt++)_t=rt[mt++],ht=_t>>5,dt=_t&31,ht===7&&dt>0&&(_t=rt[mt++],ht=_t),this.pushServiceBlock(ht,mt,dt),dt>0&&(mt+=dt-1)},en.prototype.pushServiceBlock=function(et,rt,ht){var dt,mt=rt,_t=this.current708Packet.data,bt=this.services[et];for(bt||(bt=this.initService(et,mt));mt<rt+ht&&mt<_t.length;mt++)dt=_t[mt],er(dt)?mt=this.handleText(mt,bt):dt===24?mt=this.multiByteCharacter(mt,bt):dt===16?mt=this.extendedCommands(mt,bt):128<=dt&&dt<=135?mt=this.setCurrentWindow(mt,bt):152<=dt&&dt<=159?mt=this.defineWindow(mt,bt):dt===136?mt=this.clearWindows(mt,bt):dt===140?mt=this.deleteWindows(mt,bt):dt===137?mt=this.displayWindows(mt,bt):dt===138?mt=this.hideWindows(mt,bt):dt===139?mt=this.toggleWindows(mt,bt):dt===151?mt=this.setWindowAttributes(mt,bt):dt===144?mt=this.setPenAttributes(mt,bt):dt===145?mt=this.setPenColor(mt,bt):dt===146?mt=this.setPenLocation(mt,bt):dt===143?bt=this.reset(mt,bt):dt===8?bt.currentWindow.backspace():dt===12?bt.currentWindow.clearText():dt===13?bt.currentWindow.pendingNewLine=!0:dt===14?bt.currentWindow.clearText():dt===141&&mt++},en.prototype.extendedCommands=function(et,rt){var ht=this.current708Packet.data,dt=ht[++et];return er(dt)&&(et=this.handleText(et,rt,{isExtended:!0})),et},en.prototype.getPts=function(et){return this.current708Packet.ptsVals[Math.floor(et/2)]},en.prototype.initService=function(et,rt){var dt="SERVICE"+et,ht=this,dt,mt;return dt in this.serviceEncodings&&(mt=this.serviceEncodings[dt]),this.services[et]=new tr(et,mt,ht),this.services[et].init(this.getPts(rt),function(_t){ht.flushDisplayed(_t,ht.services[et])}),this.services[et]},en.prototype.handleText=function(et,rt,ht){var dt=ht&&ht.isExtended,mt=ht&&ht.isMultiByte,_t=this.current708Packet.data,bt=dt?4096:0,Ct=_t[et],Dt=_t[et+1],$t=rt.currentWindow,Pt,Ot;function Bt(Nt){return Nt.map(Vt=>("0"+(Vt&255).toString(16)).slice(-2)).join("")}if(mt?(Ot=[Ct,Dt],et++):Ot=[Ct],rt.textDecoder_&&!dt)Pt=rt.textDecoder_.decode(new Uint8Array(Ot));else if(mt){const Nt=Bt(Ot);Pt=String.fromCharCode(parseInt(Nt,16))}else Pt=ro(bt|Ct);return $t.pendingNewLine&&!$t.isEmpty()&&$t.newLine(this.getPts(et)),$t.pendingNewLine=!1,$t.addText(Pt),et},en.prototype.multiByteCharacter=function(et,rt){var ht=this.current708Packet.data,dt=ht[et+1],mt=ht[et+2];return er(dt)&&er(mt)&&(et=this.handleText(++et,rt,{isMultiByte:!0})),et},en.prototype.setCurrentWindow=function(et,rt){var ht=this.current708Packet.data,dt=ht[et],mt=dt&7;return rt.setCurrentWindow(mt),et},en.prototype.defineWindow=function(et,rt){var ht=this.current708Packet.data,dt=ht[et],mt=dt&7;rt.setCurrentWindow(mt);var _t=rt.currentWindow;return dt=ht[++et],_t.visible=(dt&32)>>5,_t.rowLock=(dt&16)>>4,_t.columnLock=(dt&8)>>3,_t.priority=dt&7,dt=ht[++et],_t.relativePositioning=(dt&128)>>7,_t.anchorVertical=dt&127,dt=ht[++et],_t.anchorHorizontal=dt,dt=ht[++et],_t.anchorPoint=(dt&240)>>4,_t.rowCount=dt&15,dt=ht[++et],_t.columnCount=dt&63,dt=ht[++et],_t.windowStyle=(dt&56)>>3,_t.penStyle=dt&7,_t.virtualRowCount=_t.rowCount+1,et},en.prototype.setWindowAttributes=function(et,rt){var ht=this.current708Packet.data,dt=ht[et],mt=rt.currentWindow.winAttr;return dt=ht[++et],mt.fillOpacity=(dt&192)>>6,mt.fillRed=(dt&48)>>4,mt.fillGreen=(dt&12)>>2,mt.fillBlue=dt&3,dt=ht[++et],mt.borderType=(dt&192)>>6,mt.borderRed=(dt&48)>>4,mt.borderGreen=(dt&12)>>2,mt.borderBlue=dt&3,dt=ht[++et],mt.borderType+=(dt&128)>>5,mt.wordWrap=(dt&64)>>6,mt.printDirection=(dt&48)>>4,mt.scrollDirection=(dt&12)>>2,mt.justify=dt&3,dt=ht[++et],mt.effectSpeed=(dt&240)>>4,mt.effectDirection=(dt&12)>>2,mt.displayEffect=dt&3,et},en.prototype.flushDisplayed=function(et,rt){for(var ht=[],dt=0;dt<8;dt++)rt.windows[dt].visible&&!rt.windows[dt].isEmpty()&&ht.push(rt.windows[dt].getText());rt.endPts=et,rt.text=ht.join(`

`),this.pushCaption(rt),rt.startPts=et},en.prototype.pushCaption=function(et){et.text!==""&&(this.trigger("data",{startPts:et.startPts,endPts:et.endPts,text:et.text,stream:"cc708_"+et.serviceNum}),et.text="",et.startPts=et.endPts)},en.prototype.displayWindows=function(et,rt){var ht=this.current708Packet.data,dt=ht[++et],mt=this.getPts(et);this.flushDisplayed(mt,rt);for(var _t=0;_t<8;_t++)dt&1<<_t&&(rt.windows[_t].visible=1);return et},en.prototype.hideWindows=function(et,rt){var ht=this.current708Packet.data,dt=ht[++et],mt=this.getPts(et);this.flushDisplayed(mt,rt);for(var _t=0;_t<8;_t++)dt&1<<_t&&(rt.windows[_t].visible=0);return et},en.prototype.toggleWindows=function(et,rt){var ht=this.current708Packet.data,dt=ht[++et],mt=this.getPts(et);this.flushDisplayed(mt,rt);for(var _t=0;_t<8;_t++)dt&1<<_t&&(rt.windows[_t].visible^=1);return et},en.prototype.clearWindows=function(et,rt){var ht=this.current708Packet.data,dt=ht[++et],mt=this.getPts(et);this.flushDisplayed(mt,rt);for(var _t=0;_t<8;_t++)dt&1<<_t&&rt.windows[_t].clearText();return et},en.prototype.deleteWindows=function(et,rt){var ht=this.current708Packet.data,dt=ht[++et],mt=this.getPts(et);this.flushDisplayed(mt,rt);for(var _t=0;_t<8;_t++)dt&1<<_t&&rt.windows[_t].reset();return et},en.prototype.setPenAttributes=function(et,rt){var ht=this.current708Packet.data,dt=ht[et],mt=rt.currentWindow.penAttr;return dt=ht[++et],mt.textTag=(dt&240)>>4,mt.offset=(dt&12)>>2,mt.penSize=dt&3,dt=ht[++et],mt.italics=(dt&128)>>7,mt.underline=(dt&64)>>6,mt.edgeType=(dt&56)>>3,mt.fontStyle=dt&7,et},en.prototype.setPenColor=function(et,rt){var ht=this.current708Packet.data,dt=ht[et],mt=rt.currentWindow.penColor;return dt=ht[++et],mt.fgOpacity=(dt&192)>>6,mt.fgRed=(dt&48)>>4,mt.fgGreen=(dt&12)>>2,mt.fgBlue=dt&3,dt=ht[++et],mt.bgOpacity=(dt&192)>>6,mt.bgRed=(dt&48)>>4,mt.bgGreen=(dt&12)>>2,mt.bgBlue=dt&3,dt=ht[++et],mt.edgeRed=(dt&48)>>4,mt.edgeGreen=(dt&12)>>2,mt.edgeBlue=dt&3,et},en.prototype.setPenLocation=function(et,rt){var ht=this.current708Packet.data,dt=ht[et],mt=rt.currentWindow.penLoc;return rt.currentWindow.pendingNewLine=!0,dt=ht[++et],mt.row=dt&15,dt=ht[++et],mt.column=dt&63,et},en.prototype.reset=function(et,rt){var ht=this.getPts(et);return this.flushDisplayed(ht,rt),this.initService(rt.serviceNum,et)};var so={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ir=function(et){return et===null?"":(et=so[et]||et,String.fromCharCode(et))},nr=14,ao=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],An=function(){for(var et=[],rt=nr+1;rt--;)et.push({text:"",indent:0,offset:0});return et},nn=function(et,rt){nn.prototype.init.call(this),this.field_=et||0,this.dataChannel_=rt||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(ht){var dt,mt,_t,bt,Ct;if(dt=ht.ccData&32639,dt===this.lastControlCode_){this.lastControlCode_=null;return}if((dt&61440)===4096?this.lastControlCode_=dt:dt!==this.PADDING_&&(this.lastControlCode_=null),_t=dt>>>8,bt=dt&255,dt!==this.PADDING_)if(dt===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(dt===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(ht.pts),this.flushDisplayed(ht.pts),mt=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=mt,this.startPts_=ht.pts;else if(dt===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(ht.pts);else if(dt===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(ht.pts);else if(dt===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(ht.pts);else if(dt===this.CARRIAGE_RETURN_)this.clearFormatting(ht.pts),this.flushDisplayed(ht.pts),this.shiftRowsUp_(),this.startPts_=ht.pts;else if(dt===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(dt===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(ht.pts),this.displayed_=An();else if(dt===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=An();else if(dt===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(ht.pts),this.displayed_=An()),this.mode_="paintOn",this.startPts_=ht.pts;else if(this.isSpecialCharacter(_t,bt))_t=(_t&3)<<8,Ct=ir(_t|bt),this[this.mode_](ht.pts,Ct),this.column_++;else if(this.isExtCharacter(_t,bt))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),_t=(_t&3)<<8,Ct=ir(_t|bt),this[this.mode_](ht.pts,Ct),this.column_++;else if(this.isMidRowCode(_t,bt))this.clearFormatting(ht.pts),this[this.mode_](ht.pts," "),this.column_++,(bt&14)===14&&this.addFormatting(ht.pts,["i"]),(bt&1)===1&&this.addFormatting(ht.pts,["u"]);else if(this.isOffsetControlCode(_t,bt)){const $t=bt&3;this.nonDisplayed_[this.row_].offset=$t,this.column_+=$t}else if(this.isPAC(_t,bt)){var Dt=ao.indexOf(dt&7968);if(this.mode_==="rollUp"&&(Dt-this.rollUpRows_+1<0&&(Dt=this.rollUpRows_-1),this.setRollUp(ht.pts,Dt)),Dt!==this.row_&&Dt>=0&&Dt<=14&&(this.clearFormatting(ht.pts),this.row_=Dt),bt&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(ht.pts,["u"]),(dt&16)===16){const $t=(dt&14)>>1;this.column_=$t*4,this.nonDisplayed_[this.row_].indent+=$t}this.isColorPAC(bt)&&(bt&14)===14&&this.addFormatting(ht.pts,["i"])}else this.isNormalChar(_t)&&(bt===0&&(bt=null),Ct=ir(_t),Ct+=ir(bt),this[this.mode_](ht.pts,Ct),this.column_+=Ct.length)}};nn.prototype=new kr,nn.prototype.flushDisplayed=function(et){const rt=dt=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+dt+"."})},ht=[];this.displayed_.forEach((dt,mt)=>{if(dt&&dt.text&&dt.text.length){try{dt.text=dt.text.trim()}catch{rt(mt)}dt.text.length&&ht.push({text:dt.text,line:mt+1,position:10+Math.min(70,dt.indent*10)+dt.offset*2.5})}else dt==null&&rt(mt)}),ht.length&&this.trigger("data",{startPts:this.startPts_,endPts:et,content:ht,stream:this.name_})},nn.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=An(),this.nonDisplayed_=An(),this.lastControlCode_=null,this.column_=0,this.row_=nr,this.rollUpRows_=2,this.formatting_=[]},nn.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},nn.prototype.isSpecialCharacter=function(et,rt){return et===this.EXT_&&rt>=48&&rt<=63},nn.prototype.isExtCharacter=function(et,rt){return(et===this.EXT_+1||et===this.EXT_+2)&&rt>=32&&rt<=63},nn.prototype.isMidRowCode=function(et,rt){return et===this.EXT_&&rt>=32&&rt<=47},nn.prototype.isOffsetControlCode=function(et,rt){return et===this.OFFSET_&&rt>=33&&rt<=35},nn.prototype.isPAC=function(et,rt){return et>=this.BASE_&&et<this.BASE_+8&&rt>=64&&rt<=127},nn.prototype.isColorPAC=function(et){return et>=64&&et<=79||et>=96&&et<=127},nn.prototype.isNormalChar=function(et){return et>=32&&et<=127},nn.prototype.setRollUp=function(et,rt){if(this.mode_!=="rollUp"&&(this.row_=nr,this.mode_="rollUp",this.flushDisplayed(et),this.nonDisplayed_=An(),this.displayed_=An()),rt!==void 0&&rt!==this.row_)for(var ht=0;ht<this.rollUpRows_;ht++)this.displayed_[rt-ht]=this.displayed_[this.row_-ht],this.displayed_[this.row_-ht]={text:"",indent:0,offset:0};rt===void 0&&(rt=this.row_),this.topRow_=rt-this.rollUpRows_+1},nn.prototype.addFormatting=function(et,rt){this.formatting_=this.formatting_.concat(rt);var ht=rt.reduce(function(dt,mt){return dt+"<"+mt+">"},"");this[this.mode_](et,ht)},nn.prototype.clearFormatting=function(et){if(this.formatting_.length){var rt=this.formatting_.reverse().reduce(function(ht,dt){return ht+"</"+dt+">"},"");this.formatting_=[],this[this.mode_](et,rt)}},nn.prototype.popOn=function(et,rt){var ht=this.nonDisplayed_[this.row_].text;ht+=rt,this.nonDisplayed_[this.row_].text=ht},nn.prototype.rollUp=function(et,rt){var ht=this.displayed_[this.row_].text;ht+=rt,this.displayed_[this.row_].text=ht},nn.prototype.shiftRowsUp_=function(){var et;for(et=0;et<this.topRow_;et++)this.displayed_[et]={text:"",indent:0,offset:0};for(et=this.row_+1;et<nr+1;et++)this.displayed_[et]={text:"",indent:0,offset:0};for(et=this.topRow_;et<this.row_;et++)this.displayed_[et]=this.displayed_[et+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},nn.prototype.paintOn=function(et,rt){var ht=this.displayed_[this.row_].text;ht+=rt,this.displayed_[this.row_].text=ht};var Qr={CaptionStream:hn,Cea608Stream:nn,Cea708Stream:en},rr={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},oo=s,lo=8589934592,uo=4294967296,Jr="shared",Dr=function(et,rt){var ht=1;for(et>rt&&(ht=-1);Math.abs(rt-et)>uo;)et+=ht*lo;return et},$r=function(et){var rt,ht;$r.prototype.init.call(this),this.type_=et||Jr,this.push=function(dt){if(dt.type==="metadata"){this.trigger("data",dt);return}this.type_!==Jr&&dt.type!==this.type_||(ht===void 0&&(ht=dt.dts),dt.dts=Dr(dt.dts,ht),dt.pts=Dr(dt.pts,ht),rt=dt.dts,this.trigger("data",dt))},this.flush=function(){ht=rt,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){ht=void 0,rt=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};$r.prototype=new oo;var Zr={TimestampRolloverStream:$r,handleRollover:Dr},co=(et,rt,ht)=>{if(!et)return-1;for(var dt=ht;dt<et.length;dt++)if(et[dt]===rt)return dt;return-1},ho={typedArrayIndexOf:co},sr=ho.typedArrayIndexOf,ar={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},es=function(et,rt,ht){var dt,mt="";for(dt=rt;dt<ht;dt++)mt+="%"+("00"+et[dt].toString(16)).slice(-2);return mt},Bn=function(et,rt,ht){return decodeURIComponent(es(et,rt,ht))},jn=function(et,rt,ht){return unescape(es(et,rt,ht))},Un=function(et){return et[0]<<21|et[1]<<14|et[2]<<7|et[3]},Hn={APIC:function(et){var rt=1,ht,dt,mt="-->";et.data[0]===ar.Utf8&&(ht=sr(et.data,0,rt),!(ht<0)&&(et.mimeType=jn(et.data,rt,ht),rt=ht+1,et.pictureType=et.data[rt],rt++,dt=sr(et.data,0,rt),!(dt<0)&&(et.description=Bn(et.data,rt,dt),rt=dt+1,et.mimeType===mt?et.url=jn(et.data,rt,et.data.length):et.pictureData=et.data.subarray(rt,et.data.length))))},"T*":function(et){et.data[0]===ar.Utf8&&(et.value=Bn(et.data,1,et.data.length).replace(/\0*$/,""),et.values=et.value.split("\0"))},TXXX:function(et){var rt;et.data[0]===ar.Utf8&&(rt=sr(et.data,0,1),rt!==-1&&(et.description=Bn(et.data,1,rt),et.value=Bn(et.data,rt+1,et.data.length).replace(/\0*$/,""),et.data=et.value))},"W*":function(et){et.url=jn(et.data,0,et.data.length).replace(/\0.*$/,"")},WXXX:function(et){var rt;et.data[0]===ar.Utf8&&(rt=sr(et.data,0,1),rt!==-1&&(et.description=Bn(et.data,1,rt),et.url=jn(et.data,rt+1,et.data.length).replace(/\0.*$/,"")))},PRIV:function(et){var rt;for(rt=0;rt<et.data.length;rt++)if(et.data[rt]===0){et.owner=jn(et.data,0,rt);break}et.privateData=et.data.subarray(rt+1),et.data=et.privateData}},fo=function(et){var rt,ht,dt=10,mt=0,_t=[];if(!(et.length<10||et[0]!==73||et[1]!==68||et[2]!==51)){mt=Un(et.subarray(6,10)),mt+=10;var bt=et[5]&64;bt&&(dt+=4,dt+=Un(et.subarray(10,14)),mt-=Un(et.subarray(16,20)));do{if(rt=Un(et.subarray(dt+4,dt+8)),rt<1)break;ht=String.fromCharCode(et[dt],et[dt+1],et[dt+2],et[dt+3]);var Ct={id:ht,data:et.subarray(dt+10,dt+rt+10)};Ct.key=Ct.id,Hn[Ct.id]?Hn[Ct.id](Ct):Ct.id[0]==="T"?Hn["T*"](Ct):Ct.id[0]==="W"&&Hn["W*"](Ct),_t.push(Ct),dt+=10,dt+=rt}while(dt<mt);return _t}},ts={parseId3Frames:fo,parseSyncSafeInteger:Un,frameParsers:Hn},po=s,mo=rr,Cn=ts,or;or=function(et){var rt={descriptor:et&&et.descriptor},ht=0,dt=[],mt=0,_t;if(or.prototype.init.call(this),this.dispatchType=mo.METADATA_STREAM_TYPE.toString(16),rt.descriptor)for(_t=0;_t<rt.descriptor.length;_t++)this.dispatchType+=("00"+rt.descriptor[_t].toString(16)).slice(-2);this.push=function(bt){var Ct,Dt,$t,Pt,Ot,Bt;if(bt.type==="timed-metadata"){if(bt.dataAlignmentIndicator&&(mt=0,dt.length=0),dt.length===0&&(bt.data.length<10||bt.data[0]!==73||bt.data[1]!==68||bt.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(dt.push(bt),mt+=bt.data.byteLength,dt.length===1&&(ht=Cn.parseSyncSafeInteger(bt.data.subarray(6,10)),ht+=10),!(mt<ht)){for(Ct={data:new Uint8Array(ht),frames:[],pts:dt[0].pts,dts:dt[0].dts},Ot=0;Ot<ht;)Ct.data.set(dt[0].data.subarray(0,ht-Ot),Ot),Ot+=dt[0].data.byteLength,mt-=dt[0].data.byteLength,dt.shift();Dt=10,Ct.data[5]&64&&(Dt+=4,Dt+=Cn.parseSyncSafeInteger(Ct.data.subarray(10,14)),ht-=Cn.parseSyncSafeInteger(Ct.data.subarray(16,20)));do{if($t=Cn.parseSyncSafeInteger(Ct.data.subarray(Dt+4,Dt+8)),$t<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Bt=String.fromCharCode(Ct.data[Dt],Ct.data[Dt+1],Ct.data[Dt+2],Ct.data[Dt+3]),Pt={id:Bt,data:Ct.data.subarray(Dt+10,Dt+$t+10)},Pt.key=Pt.id,Cn.frameParsers[Pt.id]?Cn.frameParsers[Pt.id](Pt):Pt.id[0]==="T"?Cn.frameParsers["T*"](Pt):Pt.id[0]==="W"&&Cn.frameParsers["W*"](Pt),Pt.owner==="com.apple.streaming.transportStreamTimestamp"){var Nt=Pt.data,Vt=(Nt[3]&1)<<30|Nt[4]<<22|Nt[5]<<14|Nt[6]<<6|Nt[7]>>>2;Vt*=4,Vt+=Nt[7]&3,Pt.timeStamp=Vt,Ct.pts===void 0&&Ct.dts===void 0&&(Ct.pts=Pt.timeStamp,Ct.dts=Pt.timeStamp),this.trigger("timestamp",Pt)}Ct.frames.push(Pt),Dt+=10,Dt+=$t}while(Dt<ht);this.trigger("data",Ct)}}}},or.prototype=new po;var go=or,Ir=s,Pr=Qr,_n=rr,yo=Zr.TimestampRolloverStream,lr,Vn,ur,Rn=188,Rr=71;lr=function(){var et=new Uint8Array(Rn),rt=0;lr.prototype.init.call(this),this.push=function(ht){var dt=0,mt=Rn,_t;for(rt?(_t=new Uint8Array(ht.byteLength+rt),_t.set(et.subarray(0,rt)),_t.set(ht,rt),rt=0):_t=ht;mt<_t.byteLength;){if(_t[dt]===Rr&&_t[mt]===Rr){this.trigger("data",_t.subarray(dt,mt)),dt+=Rn,mt+=Rn;continue}dt++,mt++}dt<_t.byteLength&&(et.set(_t.subarray(dt),0),rt=_t.byteLength-dt)},this.flush=function(){rt===Rn&&et[0]===Rr&&(this.trigger("data",et),rt=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){rt=0,this.trigger("reset")}},lr.prototype=new Ir,Vn=function(){var et,rt,ht,dt;Vn.prototype.init.call(this),dt=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,et=function(mt,_t){var bt=0;_t.payloadUnitStartIndicator&&(bt+=mt[bt]+1),_t.type==="pat"?rt(mt.subarray(bt),_t):ht(mt.subarray(bt),_t)},rt=function(mt,_t){_t.section_number=mt[7],_t.last_section_number=mt[8],dt.pmtPid=(mt[10]&31)<<8|mt[11],_t.pmtPid=dt.pmtPid},ht=function(mt,_t){var bt,Ct,Dt,$t;if(mt[5]&1){for(dt.programMapTable={video:null,audio:null,"timed-metadata":{}},bt=(mt[1]&15)<<8|mt[2],Ct=3+bt-4,Dt=(mt[10]&15)<<8|mt[11],$t=12+Dt;$t<Ct;){var Pt=mt[$t],Ot=(mt[$t+1]&31)<<8|mt[$t+2];Pt===_n.H264_STREAM_TYPE&&dt.programMapTable.video===null?dt.programMapTable.video=Ot:Pt===_n.ADTS_STREAM_TYPE&&dt.programMapTable.audio===null?dt.programMapTable.audio=Ot:Pt===_n.METADATA_STREAM_TYPE&&(dt.programMapTable["timed-metadata"][Ot]=Pt),$t+=((mt[$t+3]&15)<<8|mt[$t+4])+5}_t.programMapTable=dt.programMapTable}},this.push=function(mt){var _t={},bt=4;if(_t.payloadUnitStartIndicator=!!(mt[1]&64),_t.pid=mt[1]&31,_t.pid<<=8,_t.pid|=mt[2],(mt[3]&48)>>>4>1&&(bt+=mt[bt]+1),_t.pid===0)_t.type="pat",et(mt.subarray(bt),_t),this.trigger("data",_t);else if(_t.pid===this.pmtPid)for(_t.type="pmt",et(mt.subarray(bt),_t),this.trigger("data",_t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([mt,bt,_t]):this.processPes_(mt,bt,_t)},this.processPes_=function(mt,_t,bt){bt.pid===this.programMapTable.video?bt.streamType=_n.H264_STREAM_TYPE:bt.pid===this.programMapTable.audio?bt.streamType=_n.ADTS_STREAM_TYPE:bt.streamType=this.programMapTable["timed-metadata"][bt.pid],bt.type="pes",bt.data=mt.subarray(_t),this.trigger("data",bt)}},Vn.prototype=new Ir,Vn.STREAM_TYPES={h264:27,adts:15},ur=function(){var et=this,rt=!1,ht={data:[],size:0},dt={data:[],size:0},mt={data:[],size:0},_t,bt=function(Dt,$t){var Pt;const Ot=Dt[0]<<16|Dt[1]<<8|Dt[2];$t.data=new Uint8Array,Ot===1&&($t.packetLength=6+(Dt[4]<<8|Dt[5]),$t.dataAlignmentIndicator=(Dt[6]&4)!==0,Pt=Dt[7],Pt&192&&($t.pts=(Dt[9]&14)<<27|(Dt[10]&255)<<20|(Dt[11]&254)<<12|(Dt[12]&255)<<5|(Dt[13]&254)>>>3,$t.pts*=4,$t.pts+=(Dt[13]&6)>>>1,$t.dts=$t.pts,Pt&64&&($t.dts=(Dt[14]&14)<<27|(Dt[15]&255)<<20|(Dt[16]&254)<<12|(Dt[17]&255)<<5|(Dt[18]&254)>>>3,$t.dts*=4,$t.dts+=(Dt[18]&6)>>>1)),$t.data=Dt.subarray(9+Dt[8]))},Ct=function(Dt,$t,Pt){var Ot=new Uint8Array(Dt.size),Bt={type:$t},Nt=0,Vt=0,Gt=!1,ln;if(!(!Dt.data.length||Dt.size<9)){for(Bt.trackId=Dt.data[0].pid,Nt=0;Nt<Dt.data.length;Nt++)ln=Dt.data[Nt],Ot.set(ln.data,Vt),Vt+=ln.data.byteLength;bt(Ot,Bt),Gt=$t==="video"||Bt.packetLength<=Dt.size,(Pt||Gt)&&(Dt.size=0,Dt.data.length=0),Gt&&et.trigger("data",Bt)}};ur.prototype.init.call(this),this.push=function(Dt){({pat:function(){},pes:function(){var $t,Pt;switch(Dt.streamType){case _n.H264_STREAM_TYPE:$t=ht,Pt="video";break;case _n.ADTS_STREAM_TYPE:$t=dt,Pt="audio";break;case _n.METADATA_STREAM_TYPE:$t=mt,Pt="timed-metadata";break;default:return}Dt.payloadUnitStartIndicator&&Ct($t,Pt,!0),$t.data.push(Dt),$t.size+=Dt.data.byteLength},pmt:function(){var $t={type:"metadata",tracks:[]};_t=Dt.programMapTable,_t.video!==null&&$t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_t.video,codec:"avc",type:"video"}),_t.audio!==null&&$t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_t.audio,codec:"adts",type:"audio"}),rt=!0,et.trigger("data",$t)}})[Dt.type]()},this.reset=function(){ht.size=0,ht.data.length=0,dt.size=0,dt.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Ct(ht,"video"),Ct(dt,"audio"),Ct(mt,"timed-metadata")},this.flush=function(){if(!rt&&_t){var Dt={type:"metadata",tracks:[]};_t.video!==null&&Dt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_t.video,codec:"avc",type:"video"}),_t.audio!==null&&Dt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_t.audio,codec:"adts",type:"audio"}),et.trigger("data",Dt)}rt=!1,this.flushStreams_(),this.trigger("done")}},ur.prototype=new Ir;var is={PAT_PID:0,MP2T_PACKET_LENGTH:Rn,TransportPacketStream:lr,TransportParseStream:Vn,ElementaryStream:ur,TimestampRolloverStream:yo,CaptionStream:Pr.CaptionStream,Cea608Stream:Pr.Cea608Stream,Cea708Stream:Pr.Cea708Stream,MetadataStream:go};for(var Or in _n)_n.hasOwnProperty(Or)&&(is[Or]=_n[Or]);var _o=is,vo=s,To=tn.ONE_SECOND_IN_TS,cr,ns=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];cr=function(et){var rt,ht=0;cr.prototype.init.call(this),this.skipWarn_=function(dt,mt){this.trigger("log",{level:"warn",message:`adts skiping bytes ${dt} to ${mt} in frame ${ht} outside syncword`})},this.push=function(dt){var mt=0,_t,bt,Ct,Dt,$t;if(et||(ht=0),dt.type==="audio"){rt&&rt.length?(Ct=rt,rt=new Uint8Array(Ct.byteLength+dt.data.byteLength),rt.set(Ct),rt.set(dt.data,Ct.byteLength)):rt=dt.data;for(var Pt;mt+7<rt.length;){if(rt[mt]!==255||(rt[mt+1]&246)!==240){typeof Pt!="number"&&(Pt=mt),mt++;continue}if(typeof Pt=="number"&&(this.skipWarn_(Pt,mt),Pt=null),bt=(~rt[mt+1]&1)*2,_t=(rt[mt+3]&3)<<11|rt[mt+4]<<3|(rt[mt+5]&224)>>5,Dt=((rt[mt+6]&3)+1)*1024,$t=Dt*To/ns[(rt[mt+2]&60)>>>2],rt.byteLength-mt<_t)break;this.trigger("data",{pts:dt.pts+ht*$t,dts:dt.dts+ht*$t,sampleCount:Dt,audioobjecttype:(rt[mt+2]>>>6&3)+1,channelcount:(rt[mt+2]&1)<<2|(rt[mt+3]&192)>>>6,samplerate:ns[(rt[mt+2]&60)>>>2],samplingfrequencyindex:(rt[mt+2]&60)>>>2,samplesize:16,data:rt.subarray(mt+7+bt,mt+_t)}),ht++,mt+=_t}typeof Pt=="number"&&(this.skipWarn_(Pt,mt),Pt=null),rt=rt.subarray(mt)}},this.flush=function(){ht=0,this.trigger("done")},this.reset=function(){rt=void 0,this.trigger("reset")},this.endTimeline=function(){rt=void 0,this.trigger("endedtimeline")}},cr.prototype=new vo;var Eo=cr,rs;rs=function(et){var rt=et.byteLength,ht=0,dt=0;this.length=function(){return 8*rt},this.bitsAvailable=function(){return 8*rt+dt},this.loadWord=function(){var mt=et.byteLength-rt,_t=new Uint8Array(4),bt=Math.min(4,rt);if(bt===0)throw new Error("no bytes available");_t.set(et.subarray(mt,mt+bt)),ht=new DataView(_t.buffer).getUint32(0),dt=bt*8,rt-=bt},this.skipBits=function(mt){var _t;dt>mt?(ht<<=mt,dt-=mt):(mt-=dt,_t=Math.floor(mt/8),mt-=_t*8,rt-=_t,this.loadWord(),ht<<=mt,dt-=mt)},this.readBits=function(mt){var _t=Math.min(dt,mt),bt=ht>>>32-_t;return dt-=_t,dt>0?ht<<=_t:rt>0&&this.loadWord(),_t=mt-_t,_t>0?bt<<_t|this.readBits(_t):bt},this.skipLeadingZeros=function(){var mt;for(mt=0;mt<dt;++mt)if(ht&2147483648>>>mt)return ht<<=mt,dt-=mt,mt;return this.loadWord(),mt+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var mt=this.skipLeadingZeros();return this.readBits(mt+1)-1},this.readExpGolomb=function(){var mt=this.readUnsignedExpGolomb();return 1&mt?1+mt>>>1:-1*(mt>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var So=rs,ss=s,xo=So,dr,zn,as;zn=function(){var et=0,rt,ht;zn.prototype.init.call(this),this.push=function(dt){var mt;ht?(mt=new Uint8Array(ht.byteLength+dt.data.byteLength),mt.set(ht),mt.set(dt.data,ht.byteLength),ht=mt):ht=dt.data;for(var _t=ht.byteLength;et<_t-3;et++)if(ht[et+2]===1){rt=et+5;break}for(;rt<_t;)switch(ht[rt]){case 0:if(ht[rt-1]!==0){rt+=2;break}else if(ht[rt-2]!==0){rt++;break}et+3!==rt-2&&this.trigger("data",ht.subarray(et+3,rt-2));do rt++;while(ht[rt]!==1&&rt<_t);et=rt-2,rt+=3;break;case 1:if(ht[rt-1]!==0||ht[rt-2]!==0){rt+=3;break}this.trigger("data",ht.subarray(et+3,rt-2)),et=rt-2,rt+=3;break;default:rt+=3;break}ht=ht.subarray(et),rt-=et,et=0},this.reset=function(){ht=null,et=0,this.trigger("reset")},this.flush=function(){ht&&ht.byteLength>3&&this.trigger("data",ht.subarray(et+3)),ht=null,et=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},zn.prototype=new ss,as={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},dr=function(){var et=new zn,rt,ht,dt,mt,_t,bt,Ct;dr.prototype.init.call(this),rt=this,this.push=function(Dt){Dt.type==="video"&&(ht=Dt.trackId,dt=Dt.pts,mt=Dt.dts,et.push(Dt))},et.on("data",function(Dt){var $t={trackId:ht,pts:dt,dts:mt,data:Dt,nalUnitTypeCode:Dt[0]&31};switch($t.nalUnitTypeCode){case 5:$t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:$t.nalUnitType="sei_rbsp",$t.escapedRBSP=_t(Dt.subarray(1));break;case 7:$t.nalUnitType="seq_parameter_set_rbsp",$t.escapedRBSP=_t(Dt.subarray(1)),$t.config=bt($t.escapedRBSP);break;case 8:$t.nalUnitType="pic_parameter_set_rbsp";break;case 9:$t.nalUnitType="access_unit_delimiter_rbsp";break}rt.trigger("data",$t)}),et.on("done",function(){rt.trigger("done")}),et.on("partialdone",function(){rt.trigger("partialdone")}),et.on("reset",function(){rt.trigger("reset")}),et.on("endedtimeline",function(){rt.trigger("endedtimeline")}),this.flush=function(){et.flush()},this.partialFlush=function(){et.partialFlush()},this.reset=function(){et.reset()},this.endTimeline=function(){et.endTimeline()},Ct=function(Dt,$t){var Pt=8,Ot=8,Bt,Nt;for(Bt=0;Bt<Dt;Bt++)Ot!==0&&(Nt=$t.readExpGolomb(),Ot=(Pt+Nt+256)%256),Pt=Ot===0?Pt:Ot},_t=function(Dt){for(var $t=Dt.byteLength,Pt=[],Ot=1,Bt,Nt;Ot<$t-2;)Dt[Ot]===0&&Dt[Ot+1]===0&&Dt[Ot+2]===3?(Pt.push(Ot+2),Ot+=2):Ot++;if(Pt.length===0)return Dt;Bt=$t-Pt.length,Nt=new Uint8Array(Bt);var Vt=0;for(Ot=0;Ot<Bt;Vt++,Ot++)Vt===Pt[0]&&(Vt++,Pt.shift()),Nt[Ot]=Dt[Vt];return Nt},bt=function(Dt){var $t=0,Pt=0,Ot=0,Bt=0,Nt,Vt,Gt,ln,pn,$n,Os,Ns,Ls,qr,Ms,sn=[1,1],Bs,In;if(Nt=new xo(Dt),Vt=Nt.readUnsignedByte(),ln=Nt.readUnsignedByte(),Gt=Nt.readUnsignedByte(),Nt.skipUnsignedExpGolomb(),as[Vt]&&(pn=Nt.readUnsignedExpGolomb(),pn===3&&Nt.skipBits(1),Nt.skipUnsignedExpGolomb(),Nt.skipUnsignedExpGolomb(),Nt.skipBits(1),Nt.readBoolean()))for(Ms=pn!==3?8:12,In=0;In<Ms;In++)Nt.readBoolean()&&(In<6?Ct(16,Nt):Ct(64,Nt));if(Nt.skipUnsignedExpGolomb(),$n=Nt.readUnsignedExpGolomb(),$n===0)Nt.readUnsignedExpGolomb();else if($n===1)for(Nt.skipBits(1),Nt.skipExpGolomb(),Nt.skipExpGolomb(),Os=Nt.readUnsignedExpGolomb(),In=0;In<Os;In++)Nt.skipExpGolomb();if(Nt.skipUnsignedExpGolomb(),Nt.skipBits(1),Ns=Nt.readUnsignedExpGolomb(),Ls=Nt.readUnsignedExpGolomb(),qr=Nt.readBits(1),qr===0&&Nt.skipBits(1),Nt.skipBits(1),Nt.readBoolean()&&($t=Nt.readUnsignedExpGolomb(),Pt=Nt.readUnsignedExpGolomb(),Ot=Nt.readUnsignedExpGolomb(),Bt=Nt.readUnsignedExpGolomb()),Nt.readBoolean()&&Nt.readBoolean()){switch(Bs=Nt.readUnsignedByte(),Bs){case 1:sn=[1,1];break;case 2:sn=[12,11];break;case 3:sn=[10,11];break;case 4:sn=[16,11];break;case 5:sn=[40,33];break;case 6:sn=[24,11];break;case 7:sn=[20,11];break;case 8:sn=[32,11];break;case 9:sn=[80,33];break;case 10:sn=[18,11];break;case 11:sn=[15,11];break;case 12:sn=[64,33];break;case 13:sn=[160,99];break;case 14:sn=[4,3];break;case 15:sn=[3,2];break;case 16:sn=[2,1];break;case 255:{sn=[Nt.readUnsignedByte()<<8|Nt.readUnsignedByte(),Nt.readUnsignedByte()<<8|Nt.readUnsignedByte()];break}}sn&&sn[0]/sn[1]}return{profileIdc:Vt,levelIdc:Gt,profileCompatibility:ln,width:(Ns+1)*16-$t*2-Pt*2,height:(2-qr)*(Ls+1)*16-Ot*2-Bt*2,sarRatio:sn}}},dr.prototype=new ss;var bo={H264Stream:dr,NalByteStream:zn},Co=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],os=function(et,rt){var ht=et[rt+6]<<21|et[rt+7]<<14|et[rt+8]<<7|et[rt+9],dt=et[rt+5],mt=(dt&16)>>4;return ht=ht>=0?ht:0,mt?ht+20:ht+10},ls=function(et,rt){return et.length-rt<10||et[rt]!==73||et[rt+1]!==68||et[rt+2]!==51?rt:(rt+=os(et,rt),ls(et,rt))},wo=function(et){var rt=ls(et,0);return et.length>=rt+2&&(et[rt]&255)===255&&(et[rt+1]&240)===240&&(et[rt+1]&22)===16},us=function(et){return et[0]<<21|et[1]<<14|et[2]<<7|et[3]},Ao=function(et,rt,ht){var dt,mt="";for(dt=rt;dt<ht;dt++)mt+="%"+("00"+et[dt].toString(16)).slice(-2);return mt},ko=function(et,rt,ht){return unescape(Ao(et,rt,ht))},Do=function(et,rt){var ht=(et[rt+5]&224)>>5,dt=et[rt+4]<<3,mt=et[rt+3]&6144;return mt|dt|ht},$o=function(et,rt){return et[rt]===73&&et[rt+1]===68&&et[rt+2]===51?"timed-metadata":et[rt]&!0&&(et[rt+1]&240)===240?"audio":null},Io=function(et){for(var rt=0;rt+5<et.length;){if(et[rt]!==255||(et[rt+1]&246)!==240){rt++;continue}return Co[(et[rt+2]&60)>>>2]}return null},Po=function(et){var rt,ht,dt,mt;rt=10,et[5]&64&&(rt+=4,rt+=us(et.subarray(10,14)));do{if(ht=us(et.subarray(rt+4,rt+8)),ht<1)return null;if(mt=String.fromCharCode(et[rt],et[rt+1],et[rt+2],et[rt+3]),mt==="PRIV"){dt=et.subarray(rt+10,rt+ht+10);for(var _t=0;_t<dt.byteLength;_t++)if(dt[_t]===0){var bt=ko(dt,0,_t);if(bt==="com.apple.streaming.transportStreamTimestamp"){var Ct=dt.subarray(_t+1),Dt=(Ct[3]&1)<<30|Ct[4]<<22|Ct[5]<<14|Ct[6]<<6|Ct[7]>>>2;return Dt*=4,Dt+=Ct[7]&3,Dt}break}}rt+=10,rt+=ht}while(rt<et.byteLength);return null},Nr={isLikelyAacData:wo,parseId3TagSize:os,parseAdtsSize:Do,parseType:$o,parseSampleRate:Io,parseAacTimestamp:Po},Ro=s,cs=Nr,hr;hr=function(){var et=new Uint8Array,rt=0;hr.prototype.init.call(this),this.setTimestamp=function(ht){rt=ht},this.push=function(ht){var dt=0,mt=0,_t,bt,Ct,Dt;for(et.length?(Dt=et.length,et=new Uint8Array(ht.byteLength+Dt),et.set(et.subarray(0,Dt)),et.set(ht,Dt)):et=ht;et.length-mt>=3;){if(et[mt]===73&&et[mt+1]===68&&et[mt+2]===51){if(et.length-mt<10||(dt=cs.parseId3TagSize(et,mt),mt+dt>et.length))break;bt={type:"timed-metadata",data:et.subarray(mt,mt+dt)},this.trigger("data",bt),mt+=dt;continue}else if((et[mt]&255)===255&&(et[mt+1]&240)===240){if(et.length-mt<7||(dt=cs.parseAdtsSize(et,mt),mt+dt>et.length))break;Ct={type:"audio",data:et.subarray(mt,mt+dt),pts:rt,dts:rt},this.trigger("data",Ct),mt+=dt;continue}mt++}_t=et.length-mt,_t>0?et=et.subarray(mt):et=new Uint8Array},this.reset=function(){et=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){et=new Uint8Array,this.trigger("endedtimeline")}},hr.prototype=new Ro;var Oo=hr,No=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Lo=No,Mo=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Bo=Mo,fr=s,qn=gn,Gn=Vs,pr=Js,vn=xa,xn=_o,mr=tn,ds=Eo,jo=bo.H264Stream,Fo=Oo,Uo=Nr.isLikelyAacData,Ho=tn.ONE_SECOND_IN_TS,Lr=Lo,Mr=Bo,Wn,On,gr,kn,Vo=function(et,rt){rt.stream=et,this.trigger("log",rt)},hs=function(et,rt){for(var ht=Object.keys(rt),dt=0;dt<ht.length;dt++){var mt=ht[dt];mt==="headOfPipeline"||!rt[mt].on||rt[mt].on("log",Vo.bind(et,mt))}},fs=function(et,rt){var ht;if(et.length!==rt.length)return!1;for(ht=0;ht<et.length;ht++)if(et[ht]!==rt[ht])return!1;return!0},Br=function(et,rt,ht,dt,mt,_t){var bt=ht-rt,Ct=dt-rt,Dt=mt-ht;return{start:{dts:et,pts:et+bt},end:{dts:et+Ct,pts:et+Dt},prependedContentDuration:_t,baseMediaDecodeTime:et}};On=function(et,rt){var ht=[],dt,mt=0,_t=0,bt=1/0;rt=rt||{},dt=rt.firstSequenceNumber||0,On.prototype.init.call(this),this.push=function(Ct){vn.collectDtsInfo(et,Ct),et&&Lr.forEach(function(Dt){et[Dt]=Ct[Dt]}),ht.push(Ct)},this.setEarliestDts=function(Ct){mt=Ct},this.setVideoBaseMediaDecodeTime=function(Ct){bt=Ct},this.setAudioAppendStart=function(Ct){_t=Ct},this.flush=function(){var Ct,Dt,$t,Pt,Ot,Bt,Nt;if(ht.length===0){this.trigger("done","AudioSegmentStream");return}Ct=pr.trimAdtsFramesByEarliestDts(ht,et,mt),et.baseMediaDecodeTime=vn.calculateTrackBaseMediaDecodeTime(et,rt.keepOriginalTimestamps),Nt=pr.prefixWithSilence(et,Ct,_t,bt),et.samples=pr.generateSampleTable(Ct),$t=qn.mdat(pr.concatenateFrameData(Ct)),ht=[],Dt=qn.moof(dt,[et]),Pt=new Uint8Array(Dt.byteLength+$t.byteLength),dt++,Pt.set(Dt),Pt.set($t,Dt.byteLength),vn.clearDtsInfo(et),Ot=Math.ceil(Ho*1024/et.samplerate),Ct.length&&(Bt=Ct.length*Ot,this.trigger("segmentTimingInfo",Br(mr.audioTsToVideoTs(et.baseMediaDecodeTime,et.samplerate),Ct[0].dts,Ct[0].pts,Ct[0].dts+Bt,Ct[0].pts+Bt,Nt||0)),this.trigger("timingInfo",{start:Ct[0].pts,end:Ct[0].pts+Bt})),this.trigger("data",{track:et,boxes:Pt}),this.trigger("done","AudioSegmentStream")},this.reset=function(){vn.clearDtsInfo(et),ht=[],this.trigger("reset")}},On.prototype=new fr,Wn=function(et,rt){var ht,dt=[],mt=[],_t,bt;rt=rt||{},ht=rt.firstSequenceNumber||0,Wn.prototype.init.call(this),delete et.minPTS,this.gopCache_=[],this.push=function(Ct){vn.collectDtsInfo(et,Ct),Ct.nalUnitType==="seq_parameter_set_rbsp"&&!_t&&(_t=Ct.config,et.sps=[Ct.data],Mr.forEach(function(Dt){et[Dt]=_t[Dt]},this)),Ct.nalUnitType==="pic_parameter_set_rbsp"&&!bt&&(bt=Ct.data,et.pps=[Ct.data]),dt.push(Ct)},this.flush=function(){for(var Ct,Dt,$t,Pt,Ot,Bt,Nt=0,Vt,Gt;dt.length&&dt[0].nalUnitType!=="access_unit_delimiter_rbsp";)dt.shift();if(dt.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Ct=Gn.groupNalsIntoFrames(dt),$t=Gn.groupFramesIntoGops(Ct),$t[0][0].keyFrame||(Dt=this.getGopForFusion_(dt[0],et),Dt?(Nt=Dt.duration,$t.unshift(Dt),$t.byteLength+=Dt.byteLength,$t.nalCount+=Dt.nalCount,$t.pts=Dt.pts,$t.dts=Dt.dts,$t.duration+=Dt.duration):$t=Gn.extendFirstKeyFrame($t)),mt.length){var ln;if(rt.alignGopsAtEnd?ln=this.alignGopsAtEnd_($t):ln=this.alignGopsAtStart_($t),!ln){this.gopCache_.unshift({gop:$t.pop(),pps:et.pps,sps:et.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),dt=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}vn.clearDtsInfo(et),$t=ln}vn.collectDtsInfo(et,$t),et.samples=Gn.generateSampleTable($t),Ot=qn.mdat(Gn.concatenateNalData($t)),et.baseMediaDecodeTime=vn.calculateTrackBaseMediaDecodeTime(et,rt.keepOriginalTimestamps),this.trigger("processedGopsInfo",$t.map(function(pn){return{pts:pn.pts,dts:pn.dts,byteLength:pn.byteLength}})),Vt=$t[0],Gt=$t[$t.length-1],this.trigger("segmentTimingInfo",Br(et.baseMediaDecodeTime,Vt.dts,Vt.pts,Gt.dts+Gt.duration,Gt.pts+Gt.duration,Nt)),this.trigger("timingInfo",{start:$t[0].pts,end:$t[$t.length-1].pts+$t[$t.length-1].duration}),this.gopCache_.unshift({gop:$t.pop(),pps:et.pps,sps:et.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),dt=[],this.trigger("baseMediaDecodeTime",et.baseMediaDecodeTime),this.trigger("timelineStartInfo",et.timelineStartInfo),Pt=qn.moof(ht,[et]),Bt=new Uint8Array(Pt.byteLength+Ot.byteLength),ht++,Bt.set(Pt),Bt.set(Ot,Pt.byteLength),this.trigger("data",{track:et,boxes:Bt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),dt=[],this.gopCache_.length=0,mt.length=0,this.trigger("reset")},this.resetStream_=function(){vn.clearDtsInfo(et),_t=void 0,bt=void 0},this.getGopForFusion_=function(Ct){var Dt=45e3,$t=1e4,Pt=1/0,Ot,Bt,Nt,Vt,Gt;for(Gt=0;Gt<this.gopCache_.length;Gt++)Vt=this.gopCache_[Gt],Nt=Vt.gop,!(!(et.pps&&fs(et.pps[0],Vt.pps[0]))||!(et.sps&&fs(et.sps[0],Vt.sps[0])))&&(Nt.dts<et.timelineStartInfo.dts||(Ot=Ct.dts-Nt.dts-Nt.duration,Ot>=-$t&&Ot<=Dt&&(!Bt||Pt>Ot)&&(Bt=Vt,Pt=Ot)));return Bt?Bt.gop:null},this.alignGopsAtStart_=function(Ct){var Dt,$t,Pt,Ot,Bt,Nt,Vt,Gt;for(Bt=Ct.byteLength,Nt=Ct.nalCount,Vt=Ct.duration,Dt=$t=0;Dt<mt.length&&$t<Ct.length&&(Pt=mt[Dt],Ot=Ct[$t],Pt.pts!==Ot.pts);){if(Ot.pts>Pt.pts){Dt++;continue}$t++,Bt-=Ot.byteLength,Nt-=Ot.nalCount,Vt-=Ot.duration}return $t===0?Ct:$t===Ct.length?null:(Gt=Ct.slice($t),Gt.byteLength=Bt,Gt.duration=Vt,Gt.nalCount=Nt,Gt.pts=Gt[0].pts,Gt.dts=Gt[0].dts,Gt)},this.alignGopsAtEnd_=function(Ct){var Dt,$t,Pt,Ot,Bt,Nt;for(Dt=mt.length-1,$t=Ct.length-1,Bt=null,Nt=!1;Dt>=0&&$t>=0;){if(Pt=mt[Dt],Ot=Ct[$t],Pt.pts===Ot.pts){Nt=!0;break}if(Pt.pts>Ot.pts){Dt--;continue}Dt===mt.length-1&&(Bt=$t),$t--}if(!Nt&&Bt===null)return null;var Vt;if(Nt?Vt=$t:Vt=Bt,Vt===0)return Ct;var Gt=Ct.slice(Vt),ln=Gt.reduce(function(pn,$n){return pn.byteLength+=$n.byteLength,pn.duration+=$n.duration,pn.nalCount+=$n.nalCount,pn},{byteLength:0,duration:0,nalCount:0});return Gt.byteLength=ln.byteLength,Gt.duration=ln.duration,Gt.nalCount=ln.nalCount,Gt.pts=Gt[0].pts,Gt.dts=Gt[0].dts,Gt},this.alignGopsWith=function(Ct){mt=Ct}},Wn.prototype=new fr,kn=function(et,rt){this.numberOfTracks=0,this.metadataStream=rt,et=et||{},typeof et.remux<"u"?this.remuxTracks=!!et.remux:this.remuxTracks=!0,typeof et.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=et.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,kn.prototype.init.call(this),this.push=function(ht){if(ht.content||ht.text)return this.pendingCaptions.push(ht);if(ht.frames)return this.pendingMetadata.push(ht);this.pendingTracks.push(ht.track),this.pendingBytes+=ht.boxes.byteLength,ht.track.type==="video"&&(this.videoTrack=ht.track,this.pendingBoxes.push(ht.boxes)),ht.track.type==="audio"&&(this.audioTrack=ht.track,this.pendingBoxes.unshift(ht.boxes))}},kn.prototype=new fr,kn.prototype.flush=function(et){var rt=0,ht={captions:[],captionStreams:{},metadata:[],info:{}},dt,mt,_t,bt=0,Ct;if(this.pendingTracks.length<this.numberOfTracks){if(et!=="VideoSegmentStream"&&et!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(bt=this.videoTrack.timelineStartInfo.pts,Mr.forEach(function(Dt){ht.info[Dt]=this.videoTrack[Dt]},this)):this.audioTrack&&(bt=this.audioTrack.timelineStartInfo.pts,Lr.forEach(function(Dt){ht.info[Dt]=this.audioTrack[Dt]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?ht.type=this.pendingTracks[0].type:ht.type="combined",this.emittedTracks+=this.pendingTracks.length,_t=qn.initSegment(this.pendingTracks),ht.initSegment=new Uint8Array(_t.byteLength),ht.initSegment.set(_t),ht.data=new Uint8Array(this.pendingBytes),Ct=0;Ct<this.pendingBoxes.length;Ct++)ht.data.set(this.pendingBoxes[Ct],rt),rt+=this.pendingBoxes[Ct].byteLength;for(Ct=0;Ct<this.pendingCaptions.length;Ct++)dt=this.pendingCaptions[Ct],dt.startTime=mr.metadataTsToSeconds(dt.startPts,bt,this.keepOriginalTimestamps),dt.endTime=mr.metadataTsToSeconds(dt.endPts,bt,this.keepOriginalTimestamps),ht.captionStreams[dt.stream]=!0,ht.captions.push(dt);for(Ct=0;Ct<this.pendingMetadata.length;Ct++)mt=this.pendingMetadata[Ct],mt.cueTime=mr.metadataTsToSeconds(mt.pts,bt,this.keepOriginalTimestamps),ht.metadata.push(mt);for(ht.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",ht),Ct=0;Ct<ht.captions.length;Ct++)dt=ht.captions[Ct],this.trigger("caption",dt);for(Ct=0;Ct<ht.metadata.length;Ct++)mt=ht.metadata[Ct],this.trigger("id3Frame",mt)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},kn.prototype.setRemux=function(et){this.remuxTracks=et},gr=function(et){var rt=this,ht=!0,dt,mt;gr.prototype.init.call(this),et=et||{},this.baseMediaDecodeTime=et.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var _t={};this.transmuxPipeline_=_t,_t.type="aac",_t.metadataStream=new xn.MetadataStream,_t.aacStream=new Fo,_t.audioTimestampRolloverStream=new xn.TimestampRolloverStream("audio"),_t.timedMetadataTimestampRolloverStream=new xn.TimestampRolloverStream("timed-metadata"),_t.adtsStream=new ds,_t.coalesceStream=new kn(et,_t.metadataStream),_t.headOfPipeline=_t.aacStream,_t.aacStream.pipe(_t.audioTimestampRolloverStream).pipe(_t.adtsStream),_t.aacStream.pipe(_t.timedMetadataTimestampRolloverStream).pipe(_t.metadataStream).pipe(_t.coalesceStream),_t.metadataStream.on("timestamp",function(bt){_t.aacStream.setTimestamp(bt.timeStamp)}),_t.aacStream.on("data",function(bt){bt.type!=="timed-metadata"&&bt.type!=="audio"||_t.audioSegmentStream||(mt=mt||{timelineStartInfo:{baseMediaDecodeTime:rt.baseMediaDecodeTime},codec:"adts",type:"audio"},_t.coalesceStream.numberOfTracks++,_t.audioSegmentStream=new On(mt,et),_t.audioSegmentStream.on("log",rt.getLogTrigger_("audioSegmentStream")),_t.audioSegmentStream.on("timingInfo",rt.trigger.bind(rt,"audioTimingInfo")),_t.adtsStream.pipe(_t.audioSegmentStream).pipe(_t.coalesceStream),rt.trigger("trackinfo",{hasAudio:!!mt,hasVideo:!!dt}))}),_t.coalesceStream.on("data",this.trigger.bind(this,"data")),_t.coalesceStream.on("done",this.trigger.bind(this,"done")),hs(this,_t)},this.setupTsPipeline=function(){var _t={};this.transmuxPipeline_=_t,_t.type="ts",_t.metadataStream=new xn.MetadataStream,_t.packetStream=new xn.TransportPacketStream,_t.parseStream=new xn.TransportParseStream,_t.elementaryStream=new xn.ElementaryStream,_t.timestampRolloverStream=new xn.TimestampRolloverStream,_t.adtsStream=new ds,_t.h264Stream=new jo,_t.captionStream=new xn.CaptionStream(et),_t.coalesceStream=new kn(et,_t.metadataStream),_t.headOfPipeline=_t.packetStream,_t.packetStream.pipe(_t.parseStream).pipe(_t.elementaryStream).pipe(_t.timestampRolloverStream),_t.timestampRolloverStream.pipe(_t.h264Stream),_t.timestampRolloverStream.pipe(_t.adtsStream),_t.timestampRolloverStream.pipe(_t.metadataStream).pipe(_t.coalesceStream),_t.h264Stream.pipe(_t.captionStream).pipe(_t.coalesceStream),_t.elementaryStream.on("data",function(bt){var Ct;if(bt.type==="metadata"){for(Ct=bt.tracks.length;Ct--;)!dt&&bt.tracks[Ct].type==="video"?(dt=bt.tracks[Ct],dt.timelineStartInfo.baseMediaDecodeTime=rt.baseMediaDecodeTime):!mt&&bt.tracks[Ct].type==="audio"&&(mt=bt.tracks[Ct],mt.timelineStartInfo.baseMediaDecodeTime=rt.baseMediaDecodeTime);dt&&!_t.videoSegmentStream&&(_t.coalesceStream.numberOfTracks++,_t.videoSegmentStream=new Wn(dt,et),_t.videoSegmentStream.on("log",rt.getLogTrigger_("videoSegmentStream")),_t.videoSegmentStream.on("timelineStartInfo",function(Dt){mt&&!et.keepOriginalTimestamps&&(mt.timelineStartInfo=Dt,_t.audioSegmentStream.setEarliestDts(Dt.dts-rt.baseMediaDecodeTime))}),_t.videoSegmentStream.on("processedGopsInfo",rt.trigger.bind(rt,"gopInfo")),_t.videoSegmentStream.on("segmentTimingInfo",rt.trigger.bind(rt,"videoSegmentTimingInfo")),_t.videoSegmentStream.on("baseMediaDecodeTime",function(Dt){mt&&_t.audioSegmentStream.setVideoBaseMediaDecodeTime(Dt)}),_t.videoSegmentStream.on("timingInfo",rt.trigger.bind(rt,"videoTimingInfo")),_t.h264Stream.pipe(_t.videoSegmentStream).pipe(_t.coalesceStream)),mt&&!_t.audioSegmentStream&&(_t.coalesceStream.numberOfTracks++,_t.audioSegmentStream=new On(mt,et),_t.audioSegmentStream.on("log",rt.getLogTrigger_("audioSegmentStream")),_t.audioSegmentStream.on("timingInfo",rt.trigger.bind(rt,"audioTimingInfo")),_t.audioSegmentStream.on("segmentTimingInfo",rt.trigger.bind(rt,"audioSegmentTimingInfo")),_t.adtsStream.pipe(_t.audioSegmentStream).pipe(_t.coalesceStream)),rt.trigger("trackinfo",{hasAudio:!!mt,hasVideo:!!dt})}}),_t.coalesceStream.on("data",this.trigger.bind(this,"data")),_t.coalesceStream.on("id3Frame",function(bt){bt.dispatchType=_t.metadataStream.dispatchType,rt.trigger("id3Frame",bt)}),_t.coalesceStream.on("caption",this.trigger.bind(this,"caption")),_t.coalesceStream.on("done",this.trigger.bind(this,"done")),hs(this,_t)},this.setBaseMediaDecodeTime=function(_t){var bt=this.transmuxPipeline_;et.keepOriginalTimestamps||(this.baseMediaDecodeTime=_t),mt&&(mt.timelineStartInfo.dts=void 0,mt.timelineStartInfo.pts=void 0,vn.clearDtsInfo(mt),bt.audioTimestampRolloverStream&&bt.audioTimestampRolloverStream.discontinuity()),dt&&(bt.videoSegmentStream&&(bt.videoSegmentStream.gopCache_=[]),dt.timelineStartInfo.dts=void 0,dt.timelineStartInfo.pts=void 0,vn.clearDtsInfo(dt),bt.captionStream.reset()),bt.timestampRolloverStream&&bt.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(_t){mt&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(_t)},this.setRemux=function(_t){var bt=this.transmuxPipeline_;et.remux=_t,bt&&bt.coalesceStream&&bt.coalesceStream.setRemux(_t)},this.alignGopsWith=function(_t){dt&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(_t)},this.getLogTrigger_=function(_t){var bt=this;return function(Ct){Ct.stream=_t,bt.trigger("log",Ct)}},this.push=function(_t){if(ht){var bt=Uo(_t);bt&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!bt&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),ht=!1}this.transmuxPipeline_.headOfPipeline.push(_t)},this.flush=function(){ht=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},gr.prototype=new fr;var zo={Transmuxer:gr,VideoSegmentStream:Wn,AudioSegmentStream:On,AUDIO_PROPERTIES:Lr,VIDEO_PROPERTIES:Mr,generateSegmentTimingInfo:Br},qo=function(et){return et>>>0},Go=function(et){return("00"+et.toString(16)).slice(-2)},yr={toUnsigned:qo,toHexString:Go},Wo=function(et){var rt="";return rt+=String.fromCharCode(et[0]),rt+=String.fromCharCode(et[1]),rt+=String.fromCharCode(et[2]),rt+=String.fromCharCode(et[3]),rt},ps=Wo,Ko=yr.toUnsigned,Xo=ps,ms=function(et,rt){var ht=[],dt,mt,_t,bt,Ct;if(!rt.length)return null;for(dt=0;dt<et.byteLength;)mt=Ko(et[dt]<<24|et[dt+1]<<16|et[dt+2]<<8|et[dt+3]),_t=Xo(et.subarray(dt+4,dt+8)),bt=mt>1?dt+mt:et.byteLength,_t===rt[0]&&(rt.length===1?ht.push(et.subarray(dt+8,bt)):(Ct=ms(et.subarray(dt+8,bt),rt.slice(1)),Ct.length&&(ht=ht.concat(Ct)))),dt=bt;return ht},gs=ms,Yo=yr.toUnsigned,Qo=c.getUint64,Jo=function(et){var rt={version:et[0],flags:new Uint8Array(et.subarray(1,4))};return rt.version===1?rt.baseMediaDecodeTime=Qo(et.subarray(4)):rt.baseMediaDecodeTime=Yo(et[4]<<24|et[5]<<16|et[6]<<8|et[7]),rt},ys=Jo,Zo=function(et){return{isLeading:(et[0]&12)>>>2,dependsOn:et[0]&3,isDependedOn:(et[1]&192)>>>6,hasRedundancy:(et[1]&48)>>>4,paddingValue:(et[1]&14)>>>1,isNonSyncSample:et[1]&1,degradationPriority:et[2]<<8|et[3]}},yl=Zo,_s=yl,_l=function(et){var rt={version:et[0],flags:new Uint8Array(et.subarray(1,4)),samples:[]},ht=new DataView(et.buffer,et.byteOffset,et.byteLength),dt=rt.flags[2]&1,mt=rt.flags[2]&4,_t=rt.flags[1]&1,bt=rt.flags[1]&2,Ct=rt.flags[1]&4,Dt=rt.flags[1]&8,$t=ht.getUint32(4),Pt=8,Ot;for(dt&&(rt.dataOffset=ht.getInt32(Pt),Pt+=4),mt&&$t&&(Ot={flags:_s(et.subarray(Pt,Pt+4))},Pt+=4,_t&&(Ot.duration=ht.getUint32(Pt),Pt+=4),bt&&(Ot.size=ht.getUint32(Pt),Pt+=4),Dt&&(rt.version===1?Ot.compositionTimeOffset=ht.getInt32(Pt):Ot.compositionTimeOffset=ht.getUint32(Pt),Pt+=4),rt.samples.push(Ot),$t--);$t--;)Ot={},_t&&(Ot.duration=ht.getUint32(Pt),Pt+=4),bt&&(Ot.size=ht.getUint32(Pt),Pt+=4),Ct&&(Ot.flags=_s(et.subarray(Pt,Pt+4)),Pt+=4),Dt&&(rt.version===1?Ot.compositionTimeOffset=ht.getInt32(Pt):Ot.compositionTimeOffset=ht.getUint32(Pt),Pt+=4),rt.samples.push(Ot);return rt},vs=_l,Tl=function(et){var rt=new DataView(et.buffer,et.byteOffset,et.byteLength),ht={version:et[0],flags:new Uint8Array(et.subarray(1,4)),trackId:rt.getUint32(4)},dt=ht.flags[2]&1,mt=ht.flags[2]&2,_t=ht.flags[2]&8,bt=ht.flags[2]&16,Ct=ht.flags[2]&32,Dt=ht.flags[0]&65536,$t=ht.flags[0]&131072,Pt;return Pt=8,dt&&(Pt+=4,ht.baseDataOffset=rt.getUint32(12),Pt+=4),mt&&(ht.sampleDescriptionIndex=rt.getUint32(Pt),Pt+=4),_t&&(ht.defaultSampleDuration=rt.getUint32(Pt),Pt+=4),bt&&(ht.defaultSampleSize=rt.getUint32(Pt),Pt+=4),Ct&&(ht.defaultSampleFlags=rt.getUint32(Pt)),Dt&&(ht.durationIsEmpty=!0),!dt&&$t&&(ht.baseDataOffsetIsMoof=!0),ht},Ts=Tl,Kn;typeof window<"u"?Kn=window:typeof i<"u"?Kn=i:typeof self<"u"?Kn=self:Kn={};var Es=Kn,El=Yr.discardEmulationPreventionBytes,Sl=Qr.CaptionStream,Xn=gs,xl=ys,Cl=vs,wl=Ts,Ss=Es,Al=function(et,rt){for(var ht=et,dt=0;dt<rt.length;dt++){var mt=rt[dt];if(ht<mt.size)return mt;ht-=mt.size}return null},Dl=function(et,rt,ht){var dt=new DataView(et.buffer,et.byteOffset,et.byteLength),mt={logs:[],seiNals:[]},_t,bt,Ct,Dt;for(bt=0;bt+4<et.length;bt+=Ct)if(Ct=dt.getUint32(bt),bt+=4,!(Ct<=0))switch(et[bt]&31){case 6:var $t=et.subarray(bt+1,bt+1+Ct),Pt=Al(bt,rt);if(_t={nalUnitType:"sei_rbsp",size:Ct,data:$t,escapedRBSP:El($t),trackId:ht},Pt)_t.pts=Pt.pts,_t.dts=Pt.dts,Dt=Pt;else if(Dt)_t.pts=Dt.pts,_t.dts=Dt.dts;else{mt.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+bt+" for trackId "+ht+". See mux.js#223."});break}mt.seiNals.push(_t);break}return mt},$l=function(et,rt,ht){var dt=rt,mt=ht.defaultSampleDuration||0,_t=ht.defaultSampleSize||0,bt=ht.trackId,Ct=[];return et.forEach(function(Dt){var $t=Cl(Dt),Pt=$t.samples;Pt.forEach(function(Ot){Ot.duration===void 0&&(Ot.duration=mt),Ot.size===void 0&&(Ot.size=_t),Ot.trackId=bt,Ot.dts=dt,Ot.compositionTimeOffset===void 0&&(Ot.compositionTimeOffset=0),typeof dt=="bigint"?(Ot.pts=dt+Ss.BigInt(Ot.compositionTimeOffset),dt+=Ss.BigInt(Ot.duration)):(Ot.pts=dt+Ot.compositionTimeOffset,dt+=Ot.duration)}),Ct=Ct.concat(Pt)}),Ct},Il=function(et,rt){var ht=Xn(et,["moof","traf"]),dt=Xn(et,["mdat"]),mt={},_t=[];return dt.forEach(function(bt,Ct){var Dt=ht[Ct];_t.push({mdat:bt,traf:Dt})}),_t.forEach(function(bt){var Ct=bt.mdat,Dt=bt.traf,$t=Xn(Dt,["tfhd"]),Pt=wl($t[0]),Ot=Pt.trackId,Bt=Xn(Dt,["tfdt"]),Nt=Bt.length>0?xl(Bt[0]).baseMediaDecodeTime:0,Vt=Xn(Dt,["trun"]),Gt,ln;rt===Ot&&Vt.length>0&&(Gt=$l(Vt,Nt,Pt),ln=Dl(Ct,Gt,Ot),mt[Ot]||(mt[Ot]={seiNals:[],logs:[]}),mt[Ot].seiNals=mt[Ot].seiNals.concat(ln.seiNals),mt[Ot].logs=mt[Ot].logs.concat(ln.logs))}),mt},Pl=function(et,rt,ht){var dt;if(rt===null)return null;dt=Il(et,rt);var mt=dt[rt]||{};return{seiNals:mt.seiNals,logs:mt.logs,timescale:ht}},Rl=function(){var et=!1,rt,ht,dt,mt,_t,bt;this.isInitialized=function(){return et},this.init=function(Ct){rt=new Sl,et=!0,bt=Ct?Ct.isPartial:!1,rt.on("data",function(Dt){Dt.startTime=Dt.startPts/mt,Dt.endTime=Dt.endPts/mt,_t.captions.push(Dt),_t.captionStreams[Dt.stream]=!0}),rt.on("log",function(Dt){_t.logs.push(Dt)})},this.isNewInit=function(Ct,Dt){return Ct&&Ct.length===0||Dt&&typeof Dt=="object"&&Object.keys(Dt).length===0?!1:dt!==Ct[0]||mt!==Dt[dt]},this.parse=function(Ct,Dt,$t){var Pt;if(this.isInitialized()){if(!Dt||!$t)return null;if(this.isNewInit(Dt,$t))dt=Dt[0],mt=$t[dt];else if(dt===null||!mt)return ht.push(Ct),null}else return null;for(;ht.length>0;){var Ot=ht.shift();this.parse(Ot,Dt,$t)}return Pt=Pl(Ct,dt,mt),Pt&&Pt.logs&&(_t.logs=_t.logs.concat(Pt.logs)),Pt===null||!Pt.seiNals?_t.logs.length?{logs:_t.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Pt.seiNals),this.flushStream(),_t)},this.pushNals=function(Ct){if(!this.isInitialized()||!Ct||Ct.length===0)return null;Ct.forEach(function(Dt){rt.push(Dt)})},this.flushStream=function(){if(!this.isInitialized())return null;bt?rt.partialFlush():rt.flush()},this.clearParsedCaptions=function(){_t.captions=[],_t.captionStreams={},_t.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;rt.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){ht=[],dt=null,mt=null,_t?this.clearParsedCaptions():_t={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ol=Rl,Nl=function(et){for(var rt=0,ht=String.fromCharCode(et[rt]),dt="";ht!=="\0";)dt+=ht,rt++,ht=String.fromCharCode(et[rt]);return dt+=ht,dt},Ll={uint8ToCString:Nl},_r=Ll.uint8ToCString,Ml=c.getUint64,Bl=function(et){var rt=4,ht=et[0],dt,mt,_t,bt,Ct,Dt,$t,Pt;if(ht===0){dt=_r(et.subarray(rt)),rt+=dt.length,mt=_r(et.subarray(rt)),rt+=mt.length;var Ot=new DataView(et.buffer);_t=Ot.getUint32(rt),rt+=4,Ct=Ot.getUint32(rt),rt+=4,Dt=Ot.getUint32(rt),rt+=4,$t=Ot.getUint32(rt),rt+=4}else if(ht===1){var Ot=new DataView(et.buffer);_t=Ot.getUint32(rt),rt+=4,bt=Ml(et.subarray(rt)),rt+=8,Dt=Ot.getUint32(rt),rt+=4,$t=Ot.getUint32(rt),rt+=4,dt=_r(et.subarray(rt)),rt+=dt.length,mt=_r(et.subarray(rt)),rt+=mt.length}Pt=new Uint8Array(et.subarray(rt,et.byteLength));var Bt={scheme_id_uri:dt,value:mt,timescale:_t||1,presentation_time:bt,presentation_time_delta:Ct,event_duration:Dt,id:$t,message_data:Pt};return Ul(ht,Bt)?Bt:void 0},Fl=function(et,rt,ht,dt){return et||et===0?et/rt:dt+ht/rt},Ul=function(et,rt){var ht=rt.scheme_id_uri!=="\0",dt=et===0&&xs(rt.presentation_time_delta)&&ht,mt=et===1&&xs(rt.presentation_time)&&ht;return!(et>1)&&dt||mt},xs=function(et){return et!==void 0||et!==null},Hl={parseEmsgBox:Bl,scaleTime:Fl},vr=yr.toUnsigned,Yn=yr.toHexString,rn=gs,Nn=ps,jr=Hl,Vl=Ts,zl=vs,Gl=ys,Wl=c.getUint64,bs,Cs,ws,As,ks,Fr,Ds,Ur=Es,Kl=ts.parseId3Frames;bs=function(et){var rt={},ht=rn(et,["moov","trak"]);return ht.reduce(function(dt,mt){var _t,bt,Ct,Dt,$t;return _t=rn(mt,["tkhd"])[0],!_t||(bt=_t[0],Ct=bt===0?12:20,Dt=vr(_t[Ct]<<24|_t[Ct+1]<<16|_t[Ct+2]<<8|_t[Ct+3]),$t=rn(mt,["mdia","mdhd"])[0],!$t)?null:(bt=$t[0],Ct=bt===0?12:20,dt[Dt]=vr($t[Ct]<<24|$t[Ct+1]<<16|$t[Ct+2]<<8|$t[Ct+3]),dt)},rt)},Cs=function(et,rt){var ht;ht=rn(rt,["moof","traf"]);var dt=ht.reduce(function(mt,_t){var bt=rn(_t,["tfhd"])[0],Ct=vr(bt[4]<<24|bt[5]<<16|bt[6]<<8|bt[7]),Dt=et[Ct]||9e4,$t=rn(_t,["tfdt"])[0],Pt=new DataView($t.buffer,$t.byteOffset,$t.byteLength),Ot;$t[0]===1?Ot=Wl($t.subarray(4,12)):Ot=Pt.getUint32(4);let Bt;return typeof Ot=="bigint"?Bt=Ot/Ur.BigInt(Dt):typeof Ot=="number"&&!isNaN(Ot)&&(Bt=Ot/Dt),Bt<Number.MAX_SAFE_INTEGER&&(Bt=Number(Bt)),Bt<mt&&(mt=Bt),mt},1/0);return typeof dt=="bigint"||isFinite(dt)?dt:0},ws=function(et,rt){var ht=rn(rt,["moof","traf"]),dt=0,mt=0,_t;if(ht&&ht.length){var bt=rn(ht[0],["tfhd"])[0],Ct=rn(ht[0],["trun"])[0],Dt=rn(ht[0],["tfdt"])[0];if(bt){var $t=Vl(bt);_t=$t.trackId}if(Dt){var Pt=Gl(Dt);dt=Pt.baseMediaDecodeTime}if(Ct){var Ot=zl(Ct);Ot.samples&&Ot.samples.length&&(mt=Ot.samples[0].compositionTimeOffset||0)}}var Bt=et[_t]||9e4;typeof dt=="bigint"&&(mt=Ur.BigInt(mt),Bt=Ur.BigInt(Bt));var Nt=(dt+mt)/Bt;return typeof Nt=="bigint"&&Nt<Number.MAX_SAFE_INTEGER&&(Nt=Number(Nt)),Nt},As=function(et){var rt=rn(et,["moov","trak"]),ht=[];return rt.forEach(function(dt){var mt=rn(dt,["mdia","hdlr"]),_t=rn(dt,["tkhd"]);mt.forEach(function(bt,Ct){var Dt=Nn(bt.subarray(8,12)),$t=_t[Ct],Pt,Ot,Bt;Dt==="vide"&&(Pt=new DataView($t.buffer,$t.byteOffset,$t.byteLength),Ot=Pt.getUint8(0),Bt=Ot===0?Pt.getUint32(12):Pt.getUint32(20),ht.push(Bt))})}),ht},Fr=function(et){var rt=et[0],ht=rt===0?12:20;return vr(et[ht]<<24|et[ht+1]<<16|et[ht+2]<<8|et[ht+3])},ks=function(et){var rt=rn(et,["moov","trak"]),ht=[];return rt.forEach(function(dt){var mt={},_t=rn(dt,["tkhd"])[0],bt,Ct;_t&&(bt=new DataView(_t.buffer,_t.byteOffset,_t.byteLength),Ct=bt.getUint8(0),mt.id=Ct===0?bt.getUint32(12):bt.getUint32(20));var Dt=rn(dt,["mdia","hdlr"])[0];if(Dt){var $t=Nn(Dt.subarray(8,12));$t==="vide"?mt.type="video":$t==="soun"?mt.type="audio":mt.type=$t}var Pt=rn(dt,["mdia","minf","stbl","stsd"])[0];if(Pt){var Ot=Pt.subarray(8);mt.codec=Nn(Ot.subarray(4,8));var Bt=rn(Ot,[mt.codec])[0],Nt,Vt;Bt&&(/^[asm]vc[1-9]$/i.test(mt.codec)?(Nt=Bt.subarray(78),Vt=Nn(Nt.subarray(4,8)),Vt==="avcC"&&Nt.length>11?(mt.codec+=".",mt.codec+=Yn(Nt[9]),mt.codec+=Yn(Nt[10]),mt.codec+=Yn(Nt[11])):mt.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(mt.codec)?(Nt=Bt.subarray(28),Vt=Nn(Nt.subarray(4,8)),Vt==="esds"&&Nt.length>20&&Nt[19]!==0?(mt.codec+="."+Yn(Nt[19]),mt.codec+="."+Yn(Nt[20]>>>2&63).replace(/^0/,"")):mt.codec="mp4a.40.2"):mt.codec=mt.codec.toLowerCase())}var Gt=rn(dt,["mdia","mdhd"])[0];Gt&&(mt.timescale=Fr(Gt)),ht.push(mt)}),ht},Ds=function(et,rt=0){var ht=rn(et,["emsg"]);return ht.map(dt=>{var mt=jr.parseEmsgBox(new Uint8Array(dt)),_t=Kl(mt.message_data);return{cueTime:jr.scaleTime(mt.presentation_time,mt.timescale,mt.presentation_time_delta,rt),duration:jr.scaleTime(mt.event_duration,mt.timescale),frames:_t}})};var Hr={findBox:rn,parseType:Nn,timescale:bs,startTime:Cs,compositionStartTime:ws,videoTrackIds:As,tracks:ks,getTimescaleFromMediaHeader:Fr,getEmsgID3:Ds},Vr=rr,$s=function(et){var rt=et[1]&31;return rt<<=8,rt|=et[2],rt},Tr=function(et){return!!(et[1]&64)},Er=function(et){var rt=0;return(et[3]&48)>>>4>1&&(rt+=et[4]+1),rt},Xl=function(et,rt){var ht=$s(et);return ht===0?"pat":ht===rt?"pmt":rt?"pes":null},Yl=function(et){var rt=Tr(et),ht=4+Er(et);return rt&&(ht+=et[ht]+1),(et[ht+10]&31)<<8|et[ht+11]},Ql=function(et){var rt={},ht=Tr(et),dt=4+Er(et);if(ht&&(dt+=et[dt]+1),!!(et[dt+5]&1)){var mt,_t,bt;mt=(et[dt+1]&15)<<8|et[dt+2],_t=3+mt-4,bt=(et[dt+10]&15)<<8|et[dt+11];for(var Ct=12+bt;Ct<_t;){var Dt=dt+Ct;rt[(et[Dt+1]&31)<<8|et[Dt+2]]=et[Dt],Ct+=((et[Dt+3]&15)<<8|et[Dt+4])+5}return rt}},Jl=function(et,rt){var ht=$s(et),dt=rt[ht];switch(dt){case Vr.H264_STREAM_TYPE:return"video";case Vr.ADTS_STREAM_TYPE:return"audio";case Vr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Zl=function(et){var rt=Tr(et);if(!rt)return null;var ht=4+Er(et);if(ht>=et.byteLength)return null;var dt=null,mt;return mt=et[ht+7],mt&192&&(dt={},dt.pts=(et[ht+9]&14)<<27|(et[ht+10]&255)<<20|(et[ht+11]&254)<<12|(et[ht+12]&255)<<5|(et[ht+13]&254)>>>3,dt.pts*=4,dt.pts+=(et[ht+13]&6)>>>1,dt.dts=dt.pts,mt&64&&(dt.dts=(et[ht+14]&14)<<27|(et[ht+15]&255)<<20|(et[ht+16]&254)<<12|(et[ht+17]&255)<<5|(et[ht+18]&254)>>>3,dt.dts*=4,dt.dts+=(et[ht+18]&6)>>>1)),dt},zr=function(et){switch(et){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},eu=function(et){for(var rt=4+Er(et),ht=et.subarray(rt),dt=0,mt=0,_t=!1,bt;mt<ht.byteLength-3;mt++)if(ht[mt+2]===1){dt=mt+5;break}for(;dt<ht.byteLength;)switch(ht[dt]){case 0:if(ht[dt-1]!==0){dt+=2;break}else if(ht[dt-2]!==0){dt++;break}mt+3!==dt-2&&(bt=zr(ht[mt+3]&31),bt==="slice_layer_without_partitioning_rbsp_idr"&&(_t=!0));do dt++;while(ht[dt]!==1&&dt<ht.length);mt=dt-2,dt+=3;break;case 1:if(ht[dt-1]!==0||ht[dt-2]!==0){dt+=3;break}bt=zr(ht[mt+3]&31),bt==="slice_layer_without_partitioning_rbsp_idr"&&(_t=!0),mt=dt-2,dt+=3;break;default:dt+=3;break}return ht=ht.subarray(mt),dt-=mt,mt=0,ht&&ht.byteLength>3&&(bt=zr(ht[mt+3]&31),bt==="slice_layer_without_partitioning_rbsp_idr"&&(_t=!0)),_t},tu={parseType:Xl,parsePat:Yl,parsePmt:Ql,parsePayloadUnitStartIndicator:Tr,parsePesType:Jl,parsePesTime:Zl,videoPacketContainsKeyFrame:eu},Is=rr,Ln=Zr.handleRollover,_i={};_i.ts=tu,_i.aac=Nr;var Dn=tn.ONE_SECOND_IN_TS,cn=188,Tn=71,iu=function(et,rt){for(var ht=0,dt=cn,mt,_t;dt<et.byteLength;){if(et[ht]===Tn&&et[dt]===Tn){switch(mt=et.subarray(ht,dt),_t=_i.ts.parseType(mt,rt.pid),_t){case"pat":rt.pid=_i.ts.parsePat(mt);break;case"pmt":var bt=_i.ts.parsePmt(mt);rt.table=rt.table||{},Object.keys(bt).forEach(function(Ct){rt.table[Ct]=bt[Ct]});break}ht+=cn,dt+=cn;continue}ht++,dt++}},Ps=function(et,rt,ht){for(var dt=0,mt=cn,_t,bt,Ct,Dt,$t,Pt=!1;mt<=et.byteLength;){if(et[dt]===Tn&&(et[mt]===Tn||mt===et.byteLength)){switch(_t=et.subarray(dt,mt),bt=_i.ts.parseType(_t,rt.pid),bt){case"pes":Ct=_i.ts.parsePesType(_t,rt.table),Dt=_i.ts.parsePayloadUnitStartIndicator(_t),Ct==="audio"&&Dt&&($t=_i.ts.parsePesTime(_t),$t&&($t.type="audio",ht.audio.push($t),Pt=!0));break}if(Pt)break;dt+=cn,mt+=cn;continue}dt++,mt++}for(mt=et.byteLength,dt=mt-cn,Pt=!1;dt>=0;){if(et[dt]===Tn&&(et[mt]===Tn||mt===et.byteLength)){switch(_t=et.subarray(dt,mt),bt=_i.ts.parseType(_t,rt.pid),bt){case"pes":Ct=_i.ts.parsePesType(_t,rt.table),Dt=_i.ts.parsePayloadUnitStartIndicator(_t),Ct==="audio"&&Dt&&($t=_i.ts.parsePesTime(_t),$t&&($t.type="audio",ht.audio.push($t),Pt=!0));break}if(Pt)break;dt-=cn,mt-=cn;continue}dt--,mt--}},nu=function(et,rt,ht){for(var dt=0,mt=cn,_t,bt,Ct,Dt,$t,Pt,Ot,Bt,Nt=!1,Vt={data:[],size:0};mt<et.byteLength;){if(et[dt]===Tn&&et[mt]===Tn){switch(_t=et.subarray(dt,mt),bt=_i.ts.parseType(_t,rt.pid),bt){case"pes":if(Ct=_i.ts.parsePesType(_t,rt.table),Dt=_i.ts.parsePayloadUnitStartIndicator(_t),Ct==="video"&&(Dt&&!Nt&&($t=_i.ts.parsePesTime(_t),$t&&($t.type="video",ht.video.push($t),Nt=!0)),!ht.firstKeyFrame)){if(Dt&&Vt.size!==0){for(Pt=new Uint8Array(Vt.size),Ot=0;Vt.data.length;)Bt=Vt.data.shift(),Pt.set(Bt,Ot),Ot+=Bt.byteLength;if(_i.ts.videoPacketContainsKeyFrame(Pt)){var Gt=_i.ts.parsePesTime(Pt);Gt?(ht.firstKeyFrame=Gt,ht.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Vt.size=0}Vt.data.push(_t),Vt.size+=_t.byteLength}break}if(Nt&&ht.firstKeyFrame)break;dt+=cn,mt+=cn;continue}dt++,mt++}for(mt=et.byteLength,dt=mt-cn,Nt=!1;dt>=0;){if(et[dt]===Tn&&et[mt]===Tn){switch(_t=et.subarray(dt,mt),bt=_i.ts.parseType(_t,rt.pid),bt){case"pes":Ct=_i.ts.parsePesType(_t,rt.table),Dt=_i.ts.parsePayloadUnitStartIndicator(_t),Ct==="video"&&Dt&&($t=_i.ts.parsePesTime(_t),$t&&($t.type="video",ht.video.push($t),Nt=!0));break}if(Nt)break;dt-=cn,mt-=cn;continue}dt--,mt--}},ru=function(et,rt){if(et.audio&&et.audio.length){var ht=rt;(typeof ht>"u"||isNaN(ht))&&(ht=et.audio[0].dts),et.audio.forEach(function(_t){_t.dts=Ln(_t.dts,ht),_t.pts=Ln(_t.pts,ht),_t.dtsTime=_t.dts/Dn,_t.ptsTime=_t.pts/Dn})}if(et.video&&et.video.length){var dt=rt;if((typeof dt>"u"||isNaN(dt))&&(dt=et.video[0].dts),et.video.forEach(function(_t){_t.dts=Ln(_t.dts,dt),_t.pts=Ln(_t.pts,dt),_t.dtsTime=_t.dts/Dn,_t.ptsTime=_t.pts/Dn}),et.firstKeyFrame){var mt=et.firstKeyFrame;mt.dts=Ln(mt.dts,dt),mt.pts=Ln(mt.pts,dt),mt.dtsTime=mt.dts/Dn,mt.ptsTime=mt.pts/Dn}}},su=function(et){for(var rt=!1,ht=0,dt=null,mt=null,_t=0,bt=0,Ct;et.length-bt>=3;){var Dt=_i.aac.parseType(et,bt);switch(Dt){case"timed-metadata":if(et.length-bt<10){rt=!0;break}if(_t=_i.aac.parseId3TagSize(et,bt),_t>et.length){rt=!0;break}mt===null&&(Ct=et.subarray(bt,bt+_t),mt=_i.aac.parseAacTimestamp(Ct)),bt+=_t;break;case"audio":if(et.length-bt<7){rt=!0;break}if(_t=_i.aac.parseAdtsSize(et,bt),_t>et.length){rt=!0;break}dt===null&&(Ct=et.subarray(bt,bt+_t),dt=_i.aac.parseSampleRate(Ct)),ht++,bt+=_t;break;default:bt++;break}if(rt)return null}if(dt===null||mt===null)return null;var $t=Dn/dt,Pt={audio:[{type:"audio",dts:mt,pts:mt},{type:"audio",dts:mt+ht*1024*$t,pts:mt+ht*1024*$t}]};return Pt},au=function(et){var rt={pid:null,table:null},ht={};iu(et,rt);for(var dt in rt.table)if(rt.table.hasOwnProperty(dt)){var mt=rt.table[dt];switch(mt){case Is.H264_STREAM_TYPE:ht.video=[],nu(et,rt,ht),ht.video.length===0&&delete ht.video;break;case Is.ADTS_STREAM_TYPE:ht.audio=[],Ps(et,rt,ht),ht.audio.length===0&&delete ht.audio;break}}return ht},ou=function(et,rt){var ht=_i.aac.isLikelyAacData(et),dt;return ht?dt=su(et):dt=au(et),!dt||!dt.audio&&!dt.video?null:(ru(dt,rt),dt)},lu={inspect:ou,parseAudioPes_:Ps};const uu=function(et,rt){rt.on("data",function(ht){const dt=ht.initSegment;ht.initSegment={data:dt.buffer,byteOffset:dt.byteOffset,byteLength:dt.byteLength};const mt=ht.data;ht.data=mt.buffer,et.postMessage({action:"data",segment:ht,byteOffset:mt.byteOffset,byteLength:mt.byteLength},[ht.data])}),rt.on("done",function(ht){et.postMessage({action:"done"})}),rt.on("gopInfo",function(ht){et.postMessage({action:"gopInfo",gopInfo:ht})}),rt.on("videoSegmentTimingInfo",function(ht){const dt={start:{decode:tn.videoTsToSeconds(ht.start.dts),presentation:tn.videoTsToSeconds(ht.start.pts)},end:{decode:tn.videoTsToSeconds(ht.end.dts),presentation:tn.videoTsToSeconds(ht.end.pts)},baseMediaDecodeTime:tn.videoTsToSeconds(ht.baseMediaDecodeTime)};ht.prependedContentDuration&&(dt.prependedContentDuration=tn.videoTsToSeconds(ht.prependedContentDuration)),et.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:dt})}),rt.on("audioSegmentTimingInfo",function(ht){const dt={start:{decode:tn.videoTsToSeconds(ht.start.dts),presentation:tn.videoTsToSeconds(ht.start.pts)},end:{decode:tn.videoTsToSeconds(ht.end.dts),presentation:tn.videoTsToSeconds(ht.end.pts)},baseMediaDecodeTime:tn.videoTsToSeconds(ht.baseMediaDecodeTime)};ht.prependedContentDuration&&(dt.prependedContentDuration=tn.videoTsToSeconds(ht.prependedContentDuration)),et.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:dt})}),rt.on("id3Frame",function(ht){et.postMessage({action:"id3Frame",id3Frame:ht})}),rt.on("caption",function(ht){et.postMessage({action:"caption",caption:ht})}),rt.on("trackinfo",function(ht){et.postMessage({action:"trackinfo",trackInfo:ht})}),rt.on("audioTimingInfo",function(ht){et.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:tn.videoTsToSeconds(ht.start),end:tn.videoTsToSeconds(ht.end)}})}),rt.on("videoTimingInfo",function(ht){et.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:tn.videoTsToSeconds(ht.start),end:tn.videoTsToSeconds(ht.end)}})}),rt.on("log",function(ht){et.postMessage({action:"log",log:ht})})};class Rs{constructor(rt,ht){this.options=ht||{},this.self=rt,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new zo.Transmuxer(this.options),uu(this.self,this.transmuxer)}pushMp4Captions(rt){this.captionParser||(this.captionParser=new Ol,this.captionParser.init());const ht=new Uint8Array(rt.data,rt.byteOffset,rt.byteLength),dt=this.captionParser.parse(ht,rt.trackIds,rt.timescales);this.self.postMessage({action:"mp4Captions",captions:dt&&dt.captions||[],logs:dt&&dt.logs||[],data:ht.buffer},[ht.buffer])}probeMp4StartTime({timescales:rt,data:ht}){const dt=Hr.startTime(rt,ht);this.self.postMessage({action:"probeMp4StartTime",startTime:dt,data:ht},[ht.buffer])}probeMp4Tracks({data:rt}){const ht=Hr.tracks(rt);this.self.postMessage({action:"probeMp4Tracks",tracks:ht,data:rt},[rt.buffer])}probeEmsgID3({data:rt,offset:ht}){const dt=Hr.getEmsgID3(rt,ht);this.self.postMessage({action:"probeEmsgID3",id3Frames:dt,emsgData:rt},[rt.buffer])}probeTs({data:rt,baseStartTime:ht}){const dt=typeof ht=="number"&&!isNaN(ht)?ht*tn.ONE_SECOND_IN_TS:void 0,mt=lu.inspect(rt,dt);let _t=null;mt&&(_t={hasVideo:mt.video&&mt.video.length===2||!1,hasAudio:mt.audio&&mt.audio.length===2||!1},_t.hasVideo&&(_t.videoStart=mt.video[0].ptsTime),_t.hasAudio&&(_t.audioStart=mt.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:_t,data:rt},[rt.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(rt){const ht=new Uint8Array(rt.data,rt.byteOffset,rt.byteLength);this.transmuxer.push(ht)}reset(){this.transmuxer.reset()}setTimestampOffset(rt){const ht=rt.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(tn.secondsToVideoTs(ht)))}setAudioAppendStart(rt){this.transmuxer.setAudioAppendStart(Math.ceil(tn.secondsToVideoTs(rt.appendStart)))}setRemux(rt){this.transmuxer.setRemux(rt.remux)}flush(rt){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(rt){this.transmuxer.alignGopsWith(rt.gopsToAlignWith.slice())}}self.onmessage=function(et){if(et.data.action==="init"&&et.data.options){this.messageHandlers=new Rs(self,et.data.options);return}this.messageHandlers||(this.messageHandlers=new Rs(self)),et.data&&et.data.action&&et.data.action!=="init"&&this.messageHandlers[et.data.action]&&this.messageHandlers[et.data.action](et.data)}}));var TransmuxWorker=factory(workerCode$1);const handleData_=(i,e,s)=>{const{type:a,initSegment:o,captions:c,captionStreams:d,metadata:h,videoFrameDtsTime:b,videoFramePtsTime:tt}=i.data.segment;e.buffer.push({captions:c,captionStreams:d,metadata:h});const nt=i.data.segment.boxes||{data:i.data.segment.data},ft={type:a,data:new Uint8Array(nt.data,nt.data.byteOffset,nt.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};typeof b<"u"&&(ft.videoFrameDtsTime=b),typeof tt<"u"&&(ft.videoFramePtsTime=tt),s(ft)},handleDone_=({transmuxedData:i,callback:e})=>{i.buffer=[],e(i)},handleGopInfo_=(i,e)=>{e.gopInfo=i.data.gopInfo},processTransmux=i=>{const{transmuxer:e,bytes:s,audioAppendStart:a,gopsToAlignWith:o,remux:c,onData:d,onTrackInfo:h,onAudioTimingInfo:b,onVideoTimingInfo:tt,onVideoSegmentTimingInfo:nt,onAudioSegmentTimingInfo:ft,onId3:yt,onCaptions:Tt,onDone:gt,onEndedTimeline:St,onTransmuxerLog:wt,isEndOfTimeline:Et}=i,vt={buffer:[]};let xt=Et;const At=kt=>{e.currentTransmux===i&&(kt.data.action==="data"&&handleData_(kt,vt,d),kt.data.action==="trackinfo"&&h(kt.data.trackInfo),kt.data.action==="gopInfo"&&handleGopInfo_(kt,vt),kt.data.action==="audioTimingInfo"&&b(kt.data.audioTimingInfo),kt.data.action==="videoTimingInfo"&&tt(kt.data.videoTimingInfo),kt.data.action==="videoSegmentTimingInfo"&&nt(kt.data.videoSegmentTimingInfo),kt.data.action==="audioSegmentTimingInfo"&&ft(kt.data.audioSegmentTimingInfo),kt.data.action==="id3Frame"&&yt([kt.data.id3Frame],kt.data.id3Frame.dispatchType),kt.data.action==="caption"&&Tt(kt.data.caption),kt.data.action==="endedtimeline"&&(xt=!1,St()),kt.data.action==="log"&&wt(kt.data.log),kt.data.type==="transmuxed"&&(xt||(e.onmessage=null,handleDone_({transmuxedData:vt,callback:gt}),dequeue(e))))};if(e.onmessage=At,a&&e.postMessage({action:"setAudioAppendStart",appendStart:a}),Array.isArray(o)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:o}),typeof c<"u"&&e.postMessage({action:"setRemux",remux:c}),s.byteLength){const kt=s instanceof ArrayBuffer?s:s.buffer,It=s instanceof ArrayBuffer?0:s.byteOffset;e.postMessage({action:"push",data:kt,byteOffset:It,byteLength:s.byteLength},[kt])}Et&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},dequeue=i=>{i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),typeof i.currentTransmux=="function"?i.currentTransmux():processTransmux(i.currentTransmux))},processAction=(i,e)=>{i.postMessage({action:e}),dequeue(i)},enqueueAction=(i,e)=>{if(!e.currentTransmux){e.currentTransmux=i,processAction(e,i);return}e.transmuxQueue.push(processAction.bind(null,e,i))},reset=i=>{enqueueAction("reset",i)},endTimeline=i=>{enqueueAction("endTimeline",i)},transmux=i=>{if(!i.transmuxer.currentTransmux){i.transmuxer.currentTransmux=i,processTransmux(i);return}i.transmuxer.transmuxQueue.push(i)},createTransmuxer=i=>{const e=new TransmuxWorker;e.currentTransmux=null,e.transmuxQueue=[];const s=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,s.call(e)),e.postMessage({action:"init",options:i}),e};var segmentTransmuxer={reset,endTimeline,transmux,createTransmuxer};const workerCallback=function(i){const e=i.transmuxer,s=i.endAction||i.action,a=i.callback,o=_extends$2({},i,{endAction:null,transmuxer:null,callback:null}),c=d=>{d.data.action===s&&(e.removeEventListener("message",c),d.data.data&&(d.data.data=new Uint8Array(d.data.data,i.byteOffset||0,i.byteLength||d.data.data.byteLength),i.data&&(i.data=d.data.data)),a(d.data))};if(e.addEventListener("message",c),i.data){const d=i.data instanceof ArrayBuffer;o.byteOffset=d?0:i.data.byteOffset,o.byteLength=i.data.byteLength;const h=[d?i.data:i.data.buffer];e.postMessage(o,h)}else e.postMessage(o)},REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102},abortAll=i=>{i.forEach(e=>{e.abort()})},getRequestStats=i=>({bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}),getProgressStats=i=>{const e=i.target,a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return a.bytesReceived=i.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a},handleErrors=(i,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:REQUEST_ERRORS.ABORTED,xhr:e}:i?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:REQUEST_ERRORS.FAILURE,xhr:e}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:REQUEST_ERRORS.FAILURE,xhr:e}:null,handleKeyResponse=(i,e,s)=>(a,o)=>{const c=o.response,d=handleErrors(a,o);if(d)return s(d,i);if(c.byteLength!==16)return s({status:o.status,message:"Invalid HLS key at URL: "+o.uri,code:REQUEST_ERRORS.FAILURE,xhr:o},i);const h=new DataView(c),b=new Uint32Array([h.getUint32(0),h.getUint32(4),h.getUint32(8),h.getUint32(12)]);for(let tt=0;tt<e.length;tt++)e[tt].bytes=b;return s(null,i)},parseInitSegment=(i,e)=>{const s=detectContainerForBytes(i.map.bytes);if(s!=="mp4"){const a=i.map.resolvedUri||i.map.uri,o=s||"unknown";return e({internal:!0,message:`Found unsupported ${o} container for initialization segment at URL: ${a}`,code:REQUEST_ERRORS.FAILURE,metadata:{errorType:videojs.Error.UnsupportedMediaInitialization,mediaType:o}})}workerCallback({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:({tracks:a,data:o})=>(i.map.bytes=o,a.forEach(function(c){i.map.tracks=i.map.tracks||{},!i.map.tracks[c.type]&&(i.map.tracks[c.type]=c,typeof c.id=="number"&&c.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[c.id]=c.timescale))}),e(null))})},handleInitSegmentResponse=({segment:i,finishProcessingFn:e})=>(s,a)=>{const o=handleErrors(s,a);if(o)return e(o,i);const c=new Uint8Array(a.response);if(i.map.key)return i.map.encryptedBytes=c,e(null,i);i.map.bytes=c,parseInitSegment(i,function(d){if(d)return d.xhr=a,d.status=a.status,e(d,i);e(null,i)})},handleSegmentResponse=({segment:i,finishProcessingFn:e,responseType:s})=>(a,o)=>{const c=handleErrors(a,o);if(c)return e(c,i);const d=s==="arraybuffer"||!o.responseText?o.response:stringToArrayBuffer(o.responseText.substring(i.lastReachedChar||0));return i.stats=getRequestStats(o),i.key?i.encryptedBytes=new Uint8Array(d):i.bytes=new Uint8Array(d),e(null,i)},transmuxAndNotify=({segment:i,bytes:e,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})=>{const Tt=i.map&&i.map.tracks||{},gt=!!(Tt.audio&&Tt.video);let St=a.bind(null,i,"audio","start");const wt=a.bind(null,i,"audio","end");let Et=a.bind(null,i,"video","start");const vt=a.bind(null,i,"video","end"),xt=()=>transmux({bytes:e,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:gt,onData:At=>{At.type=At.type==="combined"?"video":At.type,nt(i,At)},onTrackInfo:At=>{s&&(gt&&(At.isMuxed=!0),s(i,At))},onAudioTimingInfo:At=>{St&&typeof At.start<"u"&&(St(At.start),St=null),wt&&typeof At.end<"u"&&wt(At.end)},onVideoTimingInfo:At=>{Et&&typeof At.start<"u"&&(Et(At.start),Et=null),vt&&typeof At.end<"u"&&vt(At.end)},onVideoSegmentTimingInfo:At=>{o(At)},onAudioSegmentTimingInfo:At=>{c(At)},onId3:(At,kt)=>{d(i,At,kt)},onCaptions:At=>{h(i,[At])},isEndOfTimeline:b,onEndedTimeline:()=>{tt()},onTransmuxerLog:yt,onDone:At=>{ft&&(At.type=At.type==="combined"?"video":At.type,ft(null,i,At))}});workerCallback({action:"probeTs",transmuxer:i.transmuxer,data:e,baseStartTime:i.baseStartTime,callback:At=>{i.bytes=e=At.data;const kt=At.result;kt&&(s(i,{hasAudio:kt.hasAudio,hasVideo:kt.hasVideo,isMuxed:gt}),s=null),xt()}})},handleSegmentBytes=({segment:i,bytes:e,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})=>{let Tt=new Uint8Array(e);if(isLikelyFmp4MediaSegment(Tt)){i.isFmp4=!0;const{tracks:gt}=i.map,St={isFmp4:!0,hasVideo:!!gt.video,hasAudio:!!gt.audio};gt.audio&&gt.audio.codec&&gt.audio.codec!=="enca"&&(St.audioCodec=gt.audio.codec),gt.video&&gt.video.codec&&gt.video.codec!=="encv"&&(St.videoCodec=gt.video.codec),gt.video&&gt.audio&&(St.isMuxed=!0),s(i,St);const wt=(Et,vt)=>{nt(i,{data:Tt,type:St.hasAudio&&!St.isMuxed?"audio":"video"}),vt&&vt.length&&d(i,vt),Et&&Et.length&&h(i,Et),ft(null,i,{})};workerCallback({action:"probeMp4StartTime",timescales:i.map.timescales,data:Tt,transmuxer:i.transmuxer,callback:({data:Et,startTime:vt})=>{e=Et.buffer,i.bytes=Tt=Et,St.hasAudio&&!St.isMuxed&&a(i,"audio","start",vt),St.hasVideo&&a(i,"video","start",vt),workerCallback({action:"probeEmsgID3",data:Tt,transmuxer:i.transmuxer,offset:vt,callback:({emsgData:xt,id3Frames:At})=>{if(e=xt.buffer,i.bytes=Tt=xt,!gt.video||!xt.byteLength||!i.transmuxer){wt(void 0,At);return}workerCallback({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:Tt,timescales:i.map.timescales,trackIds:[gt.video.id],callback:kt=>{e=kt.data.buffer,i.bytes=Tt=kt.data,kt.logs.forEach(function(It){yt(merge(It,{stream:"mp4CaptionParser"}))}),wt(kt.captions,At)}})}})}});return}if(!i.transmuxer){ft(null,i,{});return}if(typeof i.container>"u"&&(i.container=detectContainerForBytes(Tt)),i.container!=="ts"&&i.container!=="aac"){s(i,{hasAudio:!1,hasVideo:!1}),ft(null,i,{});return}transmuxAndNotify({segment:i,bytes:e,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})},decrypt=function({id:i,key:e,encryptedBytes:s,decryptionWorker:a},o){const c=h=>{if(h.data.source===i){a.removeEventListener("message",c);const b=h.data.decrypted;o(new Uint8Array(b.bytes,b.byteOffset,b.byteLength))}};a.addEventListener("message",c);let d;e.bytes.slice?d=e.bytes.slice():d=new Uint32Array(Array.prototype.slice.call(e.bytes)),a.postMessage(createTransferableMessage({source:i,encrypted:s,key:d,iv:e.iv}),[s.buffer,d.buffer])},decryptSegment=({decryptionWorker:i,segment:e,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})=>{decrypt({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:i},Tt=>{e.bytes=Tt,handleSegmentBytes({segment:e,bytes:e.bytes,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})})},waitForCompletion=({activeXhrs:i,decryptionWorker:e,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})=>{let Tt=0,gt=!1;return(St,wt)=>{if(!gt){if(St)return gt=!0,abortAll(i),ft(St,wt);if(Tt+=1,Tt===i.length){const Et=function(){if(wt.encryptedBytes)return decryptSegment({decryptionWorker:e,segment:wt,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt});handleSegmentBytes({segment:wt,bytes:wt.bytes,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt,doneFn:ft,onTransmuxerLog:yt})};if(wt.endOfAllRequests=Date.now(),wt.map&&wt.map.encryptedBytes&&!wt.map.bytes)return decrypt({decryptionWorker:e,id:wt.requestId+"-init",encryptedBytes:wt.map.encryptedBytes,key:wt.map.key},vt=>{wt.map.bytes=vt,parseInitSegment(wt,xt=>{if(xt)return abortAll(i),ft(xt,wt);Et()})});Et()}}}},handleLoadEnd=({loadendState:i,abortFn:e})=>s=>{s.target.aborted&&e&&!i.calledAbortFn&&(e(),i.calledAbortFn=!0)},handleProgress=({segment:i,progressFn:e,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:b,endedTimelineFn:tt,dataFn:nt})=>ft=>{if(!ft.target.aborted)return i.stats=merge(i.stats,getProgressStats(ft)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),e(ft,i)},mediaSegmentRequest=({xhr:i,xhrOptions:e,decryptionWorker:s,segment:a,abortFn:o,progressFn:c,trackInfoFn:d,timingInfoFn:h,videoSegmentTimingInfoFn:b,audioSegmentTimingInfoFn:tt,id3Fn:nt,captionsFn:ft,isEndOfTimeline:yt,endedTimelineFn:Tt,dataFn:gt,doneFn:St,onTransmuxerLog:wt})=>{const Et=[],vt=waitForCompletion({activeXhrs:Et,decryptionWorker:s,trackInfoFn:d,timingInfoFn:h,videoSegmentTimingInfoFn:b,audioSegmentTimingInfoFn:tt,id3Fn:nt,captionsFn:ft,isEndOfTimeline:yt,endedTimelineFn:Tt,dataFn:gt,doneFn:St,onTransmuxerLog:wt});if(a.key&&!a.key.bytes){const Rt=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&Rt.push(a.map.key);const Lt=merge(e,{uri:a.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),jt=handleKeyResponse(a,Rt,vt),Ft=i(Lt,jt);Et.push(Ft)}if(a.map&&!a.map.bytes){if(a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri)){const qt=merge(e,{uri:a.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),Xt=handleKeyResponse(a,[a.map.key],vt),Ut=i(qt,Xt);Et.push(Ut)}const Lt=merge(e,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(a.map),requestType:"segment-media-initialization"}),jt=handleInitSegmentResponse({segment:a,finishProcessingFn:vt}),Ft=i(Lt,jt);Et.push(Ft)}const xt=merge(e,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(a),requestType:"segment"}),At=handleSegmentResponse({segment:a,finishProcessingFn:vt,responseType:xt.responseType}),kt=i(xt,At);kt.addEventListener("progress",handleProgress({segment:a,progressFn:c,trackInfoFn:d,timingInfoFn:h,videoSegmentTimingInfoFn:b,audioSegmentTimingInfoFn:tt,id3Fn:nt,captionsFn:ft,isEndOfTimeline:yt,endedTimelineFn:Tt,dataFn:gt})),Et.push(kt);const It={};return Et.forEach(Rt=>{Rt.addEventListener("loadend",handleLoadEnd({loadendState:It,abortFn:o}))}),()=>abortAll(Et)},logFn$1=logger("CodecUtils"),getCodecs=function(i){const e=i.attributes||{};if(e.CODECS)return parseCodecs(e.CODECS)},isMaat=(i,e)=>{const s=e.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&s.AUDIO&&i.mediaGroups.AUDIO[s.AUDIO]},isMuxed=(i,e)=>{if(!isMaat(i,e))return!0;const s=e.attributes||{},a=i.mediaGroups.AUDIO[s.AUDIO];for(const o in a)if(!a[o].uri&&!a[o].playlists)return!0;return!1},unwrapCodecList=function(i){const e={};return i.forEach(({mediaType:s,type:a,details:o})=>{e[s]=e[s]||[],e[s].push(translateLegacyCodec(`${a}${o}`))}),Object.keys(e).forEach(function(s){if(e[s].length>1){logFn$1(`multiple ${s} codecs found as attributes: ${e[s].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[s]=null;return}e[s]=e[s][0]}),e},codecCount=function(i){let e=0;return i.audio&&e++,i.video&&e++,e},codecsForPlaylist=function(i,e){const s=e.attributes||{},a=unwrapCodecList(getCodecs(e)||[]);if(isMaat(i,e)&&!a.audio&&!isMuxed(i,e)){const o=unwrapCodecList(codecsFromDefault(i,s.AUDIO)||[]);o.audio&&(a.audio=o.audio)}return a},logFn=logger("PlaylistSelector"),representationToString=function(i){if(!i||!i.playlist)return;const e=i.playlist;return JSON.stringify({id:e.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:e.attributes&&e.attributes.CODECS||""})},safeGetComputedStyle=function(i,e){if(!i)return"";const s=window$1$1.getComputedStyle(i);return s?s[e]:""},stableSort=function(i,e){const s=i.slice();i.sort(function(a,o){const c=e(a,o);return c===0?s.indexOf(a)-s.indexOf(o):c})},comparePlaylistBandwidth=function(i,e){let s,a;return i.attributes.BANDWIDTH&&(s=i.attributes.BANDWIDTH),s=s||window$1$1.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(a=e.attributes.BANDWIDTH),a=a||window$1$1.Number.MAX_VALUE,s-a},comparePlaylistResolution=function(i,e){let s,a;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(s=i.attributes.RESOLUTION.width),s=s||window$1$1.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(a=e.attributes.RESOLUTION.width),a=a||window$1$1.Number.MAX_VALUE,s===a&&i.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?i.attributes.BANDWIDTH-e.attributes.BANDWIDTH:s-a};let simpleSelector=function(i,e,s,a,o,c){if(!i)return;const d={bandwidth:e,width:s,height:a,limitRenditionByPlayerDimensions:o};let h=i.playlists;Playlist.isAudioOnly(i)&&(h=c.getAudioTrackPlaylists_(),d.audioOnly=!0);let b=h.map(kt=>{let It;const Rt=kt.attributes&&kt.attributes.RESOLUTION&&kt.attributes.RESOLUTION.width,Lt=kt.attributes&&kt.attributes.RESOLUTION&&kt.attributes.RESOLUTION.height;return It=kt.attributes&&kt.attributes.BANDWIDTH,It=It||window$1$1.Number.MAX_VALUE,{bandwidth:It,width:Rt,height:Lt,playlist:kt}});stableSort(b,(kt,It)=>kt.bandwidth-It.bandwidth),b=b.filter(kt=>!Playlist.isIncompatible(kt.playlist));let tt=b.filter(kt=>Playlist.isEnabled(kt.playlist));tt.length||(tt=b.filter(kt=>!Playlist.isDisabled(kt.playlist)));const nt=tt.filter(kt=>kt.bandwidth*Config.BANDWIDTH_VARIANCE<e);let ft=nt[nt.length-1];const yt=nt.filter(kt=>kt.bandwidth===ft.bandwidth)[0];if(o===!1){const kt=yt||tt[0]||b[0];if(kt&&kt.playlist){let It="sortedPlaylistReps";return yt&&(It="bandwidthBestRep"),tt[0]&&(It="enabledPlaylistReps"),logFn(`choosing ${representationToString(kt)} using ${It} with options`,d),kt.playlist}return logFn("could not choose a playlist with options",d),null}const Tt=nt.filter(kt=>kt.width&&kt.height);stableSort(Tt,(kt,It)=>kt.width-It.width);const gt=Tt.filter(kt=>kt.width===s&&kt.height===a);ft=gt[gt.length-1];const St=gt.filter(kt=>kt.bandwidth===ft.bandwidth)[0];let wt,Et,vt;St||(wt=Tt.filter(kt=>kt.width>s||kt.height>a),Et=wt.filter(kt=>kt.width===wt[0].width&&kt.height===wt[0].height),ft=Et[Et.length-1],vt=Et.filter(kt=>kt.bandwidth===ft.bandwidth)[0]);let xt;if(c.leastPixelDiffSelector){const kt=Tt.map(It=>(It.pixelDiff=Math.abs(It.width-s)+Math.abs(It.height-a),It));stableSort(kt,(It,Rt)=>It.pixelDiff===Rt.pixelDiff?Rt.bandwidth-It.bandwidth:It.pixelDiff-Rt.pixelDiff),xt=kt[0]}const At=xt||vt||St||yt||tt[0]||b[0];if(At&&At.playlist){let kt="sortedPlaylistReps";return xt?kt="leastPixelDiffRep":vt?kt="resolutionPlusOneRep":St?kt="resolutionBestRep":yt?kt="bandwidthBestRep":tt[0]&&(kt="enabledPlaylistReps"),logFn(`choosing ${representationToString(At)} using ${kt} with options`,d),At.playlist}return logFn("could not choose a playlist with options",d),null};const lastBandwidthSelector=function(){let i=this.useDevicePixelRatio&&window$1$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),simpleSelector(this.playlists.main,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*i,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)},movingAverageBandwidthSelector=function(i){let e=-1,s=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let a=this.useDevicePixelRatio&&window$1$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(a=this.customPixelRatio),e<0&&(e=this.systemBandwidth,s=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==s&&(e=i*this.systemBandwidth+(1-i)*e,s=this.systemBandwidth),simpleSelector(this.playlists.main,e,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*a,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.playlistController_)}},minRebufferMaxBandwidthSelector=function(i){const{main:e,currentTime:s,bandwidth:a,duration:o,segmentDuration:c,timeUntilRebuffer:d,currentTimeline:h,syncController:b}=i,tt=e.playlists.filter(gt=>!Playlist.isIncompatible(gt));let nt=tt.filter(Playlist.isEnabled);nt.length||(nt=tt.filter(gt=>!Playlist.isDisabled(gt)));const yt=nt.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH")).map(gt=>{const wt=b.getSyncPoint(gt,o,h,s)?1:2,vt=Playlist.estimateSegmentRequestTime(c,a,gt)*wt-d;return{playlist:gt,rebufferingImpact:vt}}),Tt=yt.filter(gt=>gt.rebufferingImpact<=0);return stableSort(Tt,(gt,St)=>comparePlaylistBandwidth(St.playlist,gt.playlist)),Tt.length?Tt[0]:(stableSort(yt,(gt,St)=>gt.rebufferingImpact-St.rebufferingImpact),yt[0]||null)},lowestBitrateCompatibleVariantSelector=function(){const i=this.playlists.main.playlists.filter(Playlist.isEnabled);return stableSort(i,(s,a)=>comparePlaylistBandwidth(s,a)),i.filter(s=>!!codecsForPlaylist(this.playlists.main,s).video)[0]||null},concatSegments=i=>{let e=0,s;return i.bytes&&(s=new Uint8Array(i.bytes),i.segments.forEach(a=>{s.set(a,e),e+=a.byteLength})),s};function compactSegmentUrlDescription(i){try{return new URL(i).pathname.split("/").slice(-2).join("/")}catch{return""}}const createCaptionsTrackIfNotExists=function(i,e,s){if(!i[s]){e.trigger({type:"usage",name:"vhs-608"});let a=s;/^cc708_/.test(s)&&(a="SERVICE"+s.split("_")[1]);const o=e.textTracks().getTrackById(a);if(o)i[s]=o;else{const c=e.options_.vhs&&e.options_.vhs.captionServices||{};let d=s,h=s,b=!1;const tt=c[a];tt&&(d=tt.label,h=tt.language,b=tt.default),i[s]=e.addRemoteTextTrack({kind:"captions",id:a,default:b,label:d,language:h},!1).track}}},addCaptionData=function({inbandTextTracks:i,captionArray:e,timestampOffset:s}){if(!e)return;const a=window$1$1.WebKitDataCue||window$1$1.VTTCue;e.forEach(o=>{const c=o.stream;o.content?o.content.forEach(d=>{const h=new a(o.startTime+s,o.endTime+s,d.text);h.line=d.line,h.align="left",h.position=d.position,h.positionAlign="line-left",i[c].addCue(h)}):i[c].addCue(new a(o.startTime+s,o.endTime+s,o.text))})},deprecateOldCue=function(i){Object.defineProperties(i.frame,{id:{get(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})},addMetadata=({inbandTextTracks:i,metadataArray:e,timestampOffset:s,videoDuration:a})=>{if(!e)return;const o=window$1$1.WebKitDataCue||window$1$1.VTTCue,c=i.metadataTrack_;if(!c||(e.forEach(nt=>{const ft=nt.cueTime+s;typeof ft!="number"||window$1$1.isNaN(ft)||ft<0||!(ft<1/0)||!nt.frames||!nt.frames.length||nt.frames.forEach(yt=>{const Tt=new o(ft,ft,yt.value||yt.url||yt.data||"");Tt.frame=yt,Tt.value=yt,deprecateOldCue(Tt),c.addCue(Tt)})}),!c.cues||!c.cues.length))return;const d=c.cues,h=[];for(let nt=0;nt<d.length;nt++)d[nt]&&h.push(d[nt]);const b=h.reduce((nt,ft)=>{const yt=nt[ft.startTime]||[];return yt.push(ft),nt[ft.startTime]=yt,nt},{}),tt=Object.keys(b).sort((nt,ft)=>Number(nt)-Number(ft));tt.forEach((nt,ft)=>{const yt=b[nt],Tt=isFinite(a)?a:nt,gt=Number(tt[ft+1])||Tt;yt.forEach(St=>{St.endTime=gt})})},dateRangeAttr={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},dateRangeKeysToOmit=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),addDateRangeMetadata=({inbandTextTracks:i,dateRanges:e})=>{const s=i.metadataTrack_;if(!s)return;const a=window$1$1.WebKitDataCue||window$1$1.VTTCue;e.forEach(o=>{for(const c of Object.keys(o)){if(dateRangeKeysToOmit.has(c))continue;const d=new a(o.startTime,o.endTime,"");d.id=o.id,d.type="com.apple.quicktime.HLS",d.value={key:dateRangeAttr[c],data:o[c]},(c==="scte35Out"||c==="scte35In")&&(d.value.data=new Uint8Array(d.value.data.match(/[\da-f]{2}/gi)).buffer),s.addCue(d)}o.processDateRange()})},createMetadataTrackIfNotExists=(i,e,s)=>{i.metadataTrack_||(i.metadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,videojs.browser.IS_ANY_SAFARI||(i.metadataTrack_.inBandMetadataTrackDispatchType=e))},removeCuesFromTrack=function(i,e,s){let a,o;if(s&&s.cues)for(a=s.cues.length;a--;)o=s.cues[a],o.startTime>=i&&o.endTime<=e&&s.removeCue(o)},removeDuplicateCuesFromTrack=function(i){const e=i.cues;if(!e)return;const s={};for(let a=e.length-1;a>=0;a--){const o=e[a],c=`${o.startTime}-${o.endTime}-${o.text}`;s[c]?i.removeCue(o):s[c]=o}},gopsSafeToAlignWith=(i,e,s)=>{if(typeof e>"u"||e===null||!i.length)return[];const a=Math.ceil((e-s+3)*clock.ONE_SECOND_IN_TS);let o;for(o=0;o<i.length&&!(i[o].pts>a);o++);return i.slice(o)},updateGopBuffer=(i,e,s)=>{if(!e.length)return i;if(s)return e.slice();const a=e[0].pts;let o=0;for(o;o<i.length&&!(i[o].pts>=a);o++);return i.slice(0,o).concat(e)},removeGopBuffer=(i,e,s,a)=>{const o=Math.ceil((e-a)*clock.ONE_SECOND_IN_TS),c=Math.ceil((s-a)*clock.ONE_SECOND_IN_TS),d=i.slice();let h=i.length;for(;h--&&!(i[h].pts<=c););if(h===-1)return d;let b=h+1;for(;b--&&!(i[b].pts<=o););return b=Math.max(b,0),d.splice(b,h-b+1),d},shallowEqual=function(i,e){if(!i&&!e||!i&&e||i&&!e)return!1;if(i===e)return!0;const s=Object.keys(i).sort(),a=Object.keys(e).sort();if(s.length!==a.length)return!1;for(let o=0;o<s.length;o++){const c=s[o];if(c!==a[o]||i[c]!==e[c])return!1}return!0},QUOTA_EXCEEDED_ERR=22,getSyncSegmentCandidate=function(i,e,s){e=e||[];const a=[];let o=0;for(let c=0;c<e.length;c++){const d=e[c];if(i===d.timeline&&(a.push(c),o+=d.duration,o>s))return c}return a.length===0?0:a[a.length-1]},MIN_BACK_BUFFER=1,CHECK_BUFFER_DELAY=500,finite=i=>typeof i=="number"&&isFinite(i),MIN_SEGMENT_DURATION_TO_SAVE_STATS=1/60,illegalMediaSwitch=(i,e,s)=>i!=="main"||!e||!s?null:!s.hasAudio&&!s.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!s.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&s.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,safeBackBufferTrimTime=(i,e,s)=>{let a=e-Config.BACK_BUFFER_LENGTH;i.length&&(a=Math.max(a,i.start(0)));const o=e-s;return Math.min(o,a)},segmentInfoString=i=>{const{startOfSegment:e,duration:s,segment:a,part:o,playlist:{mediaSequence:c,id:d,segments:h=[]},mediaIndex:b,partIndex:tt,timeline:nt}=i,ft=h.length-1;let yt="mediaIndex/partIndex increment";i.getMediaInfoForTime?yt=`getMediaInfoForTime (${i.getMediaInfoForTime})`:i.isSyncRequest&&(yt="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(yt+=` with independent ${i.independent}`);const Tt=typeof tt=="number",gt=i.segment.uri?"segment":"pre-segment",St=Tt?getKnownPartCount({preloadSegment:a})-1:0;return`${gt} [${c+b}/${c+ft}]`+(Tt?` part [${tt}/${St}]`:"")+` segment start/end [${a.start} => ${a.end}]`+(Tt?` part start/end [${o.start} => ${o.end}]`:"")+` startOfSegment [${e}] duration [${s}] timeline [${nt}] selected by [${yt}] playlist [${d}]`},timingInfoPropertyForMedia=i=>`${i}TimingInfo`,timestampOffsetForSegment=({segmentTimeline:i,currentTimeline:e,startOfSegment:s,buffered:a,overrideCheck:o})=>!o&&i===e?null:i<e?s:a.length?a.end(a.length-1):s,shouldWaitForTimelineChange=({timelineChangeController:i,currentTimeline:e,segmentTimeline:s,loaderType:a,audioDisabled:o})=>{if(e===s)return!1;if(a==="audio"){const c=i.lastTimelineChange({type:"main"});return!c||c.to!==s}if(a==="main"&&o){const c=i.pendingTimelineChange({type:"audio"});return!(c&&c.to===s)}return!1},mediaDuration=i=>{let e=0;return["video","audio"].forEach(function(s){const a=i[`${s}TimingInfo`];if(!a)return;const{start:o,end:c}=a;let d;typeof o=="bigint"||typeof c=="bigint"?d=window$1$1.BigInt(c)-window$1$1.BigInt(o):typeof o=="number"&&typeof c=="number"&&(d=c-o),typeof d<"u"&&d>e&&(e=d)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},segmentTooLong=({segmentDuration:i,maxDuration:e})=>i?Math.round(i)>e+TIME_FUDGE_FACTOR:!1,getTroublesomeSegmentDurationMessage=(i,e)=>{if(e!=="hls")return null;const s=mediaDuration({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!s)return null;const a=i.playlist.targetDuration,o=segmentTooLong({segmentDuration:s,maxDuration:a*2}),c=segmentTooLong({segmentDuration:s,maxDuration:a}),d=`Segment with index ${i.mediaIndex} from playlist ${i.playlist.id} has a duration of ${s} when the reported duration is ${i.duration} and the target duration is ${a}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return o||c?{severity:o?"warn":"info",message:d}:null};class SegmentLoader extends videojs.EventTarget{constructor(e,s={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=logger(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(a){a!==this.state_&&(this.logger_(`${this.state_} -> ${a}`),this.state_=a,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return segmentTransmuxer.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window$1$1.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return createTimeRanges();if(this.loaderType_==="main"){const{hasAudio:s,hasVideo:a,isMuxed:o}=e;if(a&&s&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,s=!1){if(!e)return null;const a=initSegmentId(e);let o=this.initSegments_[a];return s&&!o&&e.bytes&&(this.initSegments_[a]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e}segmentKey(e,s=!1){if(!e)return null;const a=segmentKeyId(e);let o=this.keyCache_[a];this.cacheEncryptionKeys_&&s&&!o&&e.bytes&&(this.keyCache_[a]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});const c={resolvedUri:(o||e).resolvedUri};return o&&(c.bytes=o.bytes),c}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,s={}){if(!e)return;const a=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=s,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let c=null;if(a&&(a.id?c=a.id:a.uri&&(c=a.uri)),this.logger_(`playlist update [${c} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${lastBufferedEnd(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const d=e.mediaSequence-a.mediaSequence;if(this.logger_(`live window shift [${d}]`),this.mediaIndex!==null)if(this.mediaIndex-=d,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const h=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!h.parts||!h.parts.length||!h.parts[this.partIndex])){const b=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=b}}o&&(o.mediaIndex-=d,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,e)}pause(){this.checkBufferTimeout_&&(window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,s,a=()=>{},o=!1){if(s===1/0&&(s=this.duration_()),s<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let c=1;const d=()=>{c--,c===0&&a()};(o||!this.audioDisabled_)&&(c++,this.sourceUpdater_.removeAudio(e,s,d)),(o||this.loaderType_==="main")&&(this.gopBuffer_=removeGopBuffer(this.gopBuffer_,e,s,this.timeMapping_),c++,this.sourceUpdater_.removeVideo(e,s,d));for(const h in this.inbandTextTracks_)removeCuesFromTrack(e,s,this.inbandTextTracks_[h]);removeCuesFromTrack(e,s,this.segmentMetadataTrack_),d()}monitorBuffer_(){this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1$1.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1$1.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,s=this.playlist_,a=this.partIndex){if(!s||!this.mediaSource_)return!1;const o=typeof e=="number"&&s.segments[e],c=e+1===s.segments.length,d=!o||!o.parts||a+1===o.parts.length;return s.endList&&this.mediaSource_.readyState==="open"&&c&&d}chooseNextRequest_(){const e=this.buffered_(),s=lastBufferedEnd(e)||0,a=timeAheadOf(e,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,c=a>=this.goalBufferLength_(),d=this.playlist_.segments;if(!d.length||o||c)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const h={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(h.isSyncRequest)h.mediaIndex=getSyncSegmentCandidate(this.currentTimeline_,d,s),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${h.mediaIndex}`);else if(this.mediaIndex!==null){const yt=d[this.mediaIndex],Tt=typeof this.partIndex=="number"?this.partIndex:-1;h.startOfSegment=yt.end?yt.end:s,yt.parts&&yt.parts[Tt+1]?(h.mediaIndex=this.mediaIndex,h.partIndex=Tt+1):h.mediaIndex=this.mediaIndex+1}else{let yt,Tt,gt;const St=this.fetchAtBuffer_?s:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${St}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${s}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const wt=this.getSyncInfoFromMediaSequenceSync_(St);if(!wt)return this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null;this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${wt.start} --> ${wt.end})`),yt=wt.segmentIndex,Tt=wt.partIndex,gt=wt.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const wt=Playlist.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:St,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});yt=wt.segmentIndex,Tt=wt.partIndex,gt=wt.startTime}h.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${St}`:`currentTime ${St}`,h.mediaIndex=yt,h.startOfSegment=gt,h.partIndex=Tt,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${h.mediaIndex} `)}const b=d[h.mediaIndex];let tt=b&&typeof h.partIndex=="number"&&b.parts&&b.parts[h.partIndex];if(!b||typeof h.partIndex=="number"&&!tt)return null;typeof h.partIndex!="number"&&b.parts&&(h.partIndex=0,tt=b.parts[0]);const nt=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!a&&tt&&!nt&&!tt.independent)if(h.partIndex===0){const yt=d[h.mediaIndex-1],Tt=yt.parts&&yt.parts.length&&yt.parts[yt.parts.length-1];Tt&&Tt.independent&&(h.mediaIndex-=1,h.partIndex=yt.parts.length-1,h.independent="previous segment")}else b.parts[h.partIndex-1].independent&&(h.partIndex-=1,h.independent="previous part");const ft=this.mediaSource_&&this.mediaSource_.readyState==="ended";return h.mediaIndex>=d.length-1&&ft&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,h.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(h))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const s=Math.max(e,this.mediaSequenceSync_.start);e!==s&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${s}`);const a=this.mediaSequenceSync_.getSyncInfoForTime(s);if(!a)return null;if(!a.isAppended)return a;const o=this.mediaSequenceSync_.getSyncInfoForTime(a.end);return o?(o.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),o):null}generateSegmentInfo_(e){const{independent:s,playlist:a,mediaIndex:o,startOfSegment:c,isSyncRequest:d,partIndex:h,forceTimestampOffset:b,getMediaInfoForTime:tt}=e,nt=a.segments[o],ft=typeof h=="number"&&nt.parts[h],yt={requestId:"segment-loader-"+Math.random(),uri:ft&&ft.resolvedUri||nt.resolvedUri,mediaIndex:o,partIndex:ft?h:null,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:nt.timeline,duration:ft&&ft.duration||nt.duration,segment:nt,part:ft,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:tt,independent:s},Tt=typeof b<"u"?b:this.isPendingTimestampOffset_;yt.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:nt.timeline,currentTimeline:this.currentTimeline_,startOfSegment:c,buffered:this.buffered_(),overrideCheck:Tt});const gt=lastBufferedEnd(this.sourceUpdater_.audioBuffered());return typeof gt=="number"&&(yt.audioAppendStart=gt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(yt.gopsToAlignWith=gopsSafeToAlignWith(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),yt}timestampOffsetForSegment_(e){return timestampOffsetForSegment(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const s=this.currentTime_(),a=e.bandwidth,o=this.pendingSegment_.duration,c=Playlist.estimateSegmentRequestTime(o,a,this.playlist_,e.bytesReceived),d=timeUntilRebuffer(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(c<=d)return;const h=minRebufferMaxBandwidthSelector({main:this.vhs_.playlists.main,currentTime:s,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:d,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!h)return;const tt=c-d-h.rebufferingImpact;let nt=.5;d<=TIME_FUDGE_FACTOR&&(nt=1),!(!h.playlist||h.playlist.uri===this.playlist_.uri||tt<nt)&&(this.bandwidth=h.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${segmentInfoString(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")}handleTrackInfo_(e,s){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(s)||(s=s||{},shallowEqual(this.currentMediaInfo_,s)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,s,a,o){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const c=this.pendingSegment_,d=timingInfoPropertyForMedia(s);c[d]=c[d]||{},c[d][a]=o,this.logger_(`timinginfo: ${s} - ${a} - ${o}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(s.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,s));return}const o=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),c={};s.forEach(d=>{c[d.stream]=c[d.stream]||{startTime:1/0,captions:[],endTime:0};const h=c[d.stream];h.startTime=Math.min(h.startTime,d.startTime+o),h.endTime=Math.max(h.endTime,d.endTime+o),h.captions.push(d)}),Object.keys(c).forEach(d=>{const{startTime:h,endTime:b,captions:tt}=c[d],nt=this.inbandTextTracks_;this.logger_(`adding cues from ${h} -> ${b} for ${d}`),createCaptionsTrackIfNotExists(nt,this.vhs_.tech_,d),removeCuesFromTrack(h,b,nt[d]),addCaptionData({captionArray:tt,inbandTextTracks:nt,timestampOffset:o})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,s,a){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,s,a));return}this.addMetadataToTextTrack(a,s,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(s=>s())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(s=>s())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,s=this.getCurrentMediaInfo_();if(!e||!s)return!1;const{hasAudio:a,hasVideo:o,isMuxed:c}=s;return!(o&&!e.videoTimingInfo||a&&!this.audioDisabled_&&!c&&!e.audioTimingInfo||shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,s));return}const a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),a.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),a.isFmp4=e.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[timingInfoPropertyForMedia(s.type)].start;else{const o=this.getCurrentMediaInfo_(),c=this.loaderType_==="main"&&o&&o.hasVideo;let d;c&&(d=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:c,firstVideoFrameTimeForData:d,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,s.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"});const o=this.chooseNextRequest_();if(o.mediaIndex!==a.mediaIndex||o.partIndex!==a.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,s)}}updateAppendInitSegmentStatus(e,s){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==e.playlist&&(this.appendInitSegment_[s]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:s,map:a,playlist:o}){if(a){const c=initSegmentId(a);if(this.activeInitSegmentId_===c)return null;s=this.initSegmentForMap(a,!0).bytes,this.activeInitSegmentId_=c}return s&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=o,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,s):null}handleQuotaExceededError_({segmentInfo:e,type:s,bytes:a},o){const c=this.sourceUpdater_.audioBuffered(),d=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+timeRangesToArray(c).join(", ")),d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+timeRangesToArray(d).join(", "));const h=c.length?c.start(0):0,b=c.length?c.end(c.length-1):0,tt=d.length?d.start(0):0,nt=d.length?d.end(d.length-1):0;if(b-h<=MIN_BACK_BUFFER&&nt-tt<=MIN_BACK_BUFFER){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${a.byteLength}, audio buffer: ${timeRangesToArray(c).join(", ")}, video buffer: ${timeRangesToArray(d).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0,metadata:{errorType:videojs.Error.SegmentExceedsSourceBufferQuota}}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:s,bytes:a}));const yt=this.currentTime_()-MIN_BACK_BUFFER;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${yt}`),this.remove(0,yt,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${MIN_BACK_BUFFER}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window$1$1.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},MIN_BACK_BUFFER*1e3)},!0)}handleAppendError_({segmentInfo:e,type:s,bytes:a},o){if(o){if(o.code===QUOTA_EXCEEDED_ERR){this.handleQuotaExceededError_({segmentInfo:e,type:s,bytes:a});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",o),this.error({message:`${s} append of ${a.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:videojs.Error.SegmentAppendError}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:a,data:o,bytes:c}){if(!c){const d=[o];let h=o.byteLength;a&&(d.unshift(a),h+=a.byteLength),c=concatSegments({bytes:h,segments:d})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:s,bytes:c},this.handleAppendError_.bind(this,{segmentInfo:e,type:s,bytes:c}))}handleSegmentTimingInfo_(e,s,a){if(!this.pendingSegment_||s!==this.pendingSegment_.requestId)return;const o=this.pendingSegment_.segment,c=`${e}TimingInfo`;o[c]||(o[c]={}),o[c].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[c].transmuxedPresentationStart=a.start.presentation,o[c].transmuxedDecodeStart=a.start.decode,o[c].transmuxedPresentationEnd=a.end.presentation,o[c].transmuxedDecodeEnd=a.end.decode,o[c].baseMediaDecodeTime=a.baseMediaDecodeTime}appendData_(e,s){const{type:a,data:o}=s;if(!o||!o.byteLength||a==="audio"&&this.audioDisabled_)return;const c=this.getInitSegmentAndUpdateState_({type:a,initSegment:s.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:a,initSegment:c,data:o})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{const s=_extends$2({},e,{forceTimestampOffset:!0});_extends$2(e,this.generateSegmentInfo_(s)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const s=this.createSimplifiedSegmentObj_(e),a=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),o=this.mediaIndex!==null,c=e.timeline!==this.currentTimeline_&&e.timeline>0,d=a||o&&c;this.logger_(`Requesting
${compactSegmentUrlDescription(e.uri)}
${segmentInfoString(e)}`),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=mediaSegmentRequest({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:d,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:h,level:b,stream:tt})=>{this.logger_(`${segmentInfoString(e)} logged from transmuxer stream ${tt} as a ${b}: ${h}`)}})}trimBackBuffer_(e){const s=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)}createSimplifiedSegmentObj_(e){const s=e.segment,a=e.part,o={resolvedUri:a?a.resolvedUri:s.resolvedUri,byterange:a?a.byterange:s.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},c=e.playlist.segments[e.mediaIndex-1];if(c&&c.timeline===s.timeline&&(c.videoTimingInfo?o.baseStartTime=c.videoTimingInfo.transmuxedDecodeEnd:c.audioTimingInfo&&(o.baseStartTime=c.audioTimingInfo.transmuxedDecodeEnd)),s.key){const d=s.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(s.key),o.key.iv=d}return s.map&&(o.map=this.initSegmentForMap(s.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,s){if(this.pendingSegment_.byteLength=s.bytesReceived,e<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,s,a){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,s,a));return}if(this.saveTransferStats_(s.stats),!this.pendingSegment_||s.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===REQUEST_ERRORS.ABORTED)return;if(this.pause(),e.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,s.stats),o.endOfAllRequests=s.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=updateGopBuffer(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}setTimeMapping_(e){const s=this.syncController_.mappingForTimeline(e);s!==null&&(this.timeMapping_=s)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:s,mediaIndex:a,firstVideoFrameTimeForData:o,currentVideoTimestampOffset:c,useVideoTimingInfo:d,videoTimingInfo:h,audioTimingInfo:b}){if(typeof e<"u")return e;if(!d)return b.start;const tt=s.segments[a-1];return a===0||!tt||typeof tt.start>"u"||tt.end!==o+c?o:h.start}waitForAppendsToComplete_(e){const s=this.getCurrentMediaInfo_(e);if(!s){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0,metadata:{errorType:videojs.Error.SegmentUnsupportedMediaFormat}}),this.trigger("error");return}const{hasAudio:a,hasVideo:o,isMuxed:c}=s,d=this.loaderType_==="main"&&o,h=!this.audioDisabled_&&a&&!c;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}d&&e.waitingOnAppends++,h&&e.waitingOnAppends++,d&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),h&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const s=illegalMediaSwitch(this.loaderType_,this.getCurrentMediaInfo_(),e);return s?(this.error({message:s,playlistExclusionDuration:1/0,metadata:{errorType:videojs.Error.SegmentSwitchError}}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let s=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),s=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:s,timingInfo:a}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:a.start:a.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const s=this.getMediaInfo_(),o=this.loaderType_==="main"&&s&&s.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;o&&(e.timingInfo.end=typeof o.end=="number"?o.end:o.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=getTroublesomeSegmentDurationMessage(e,this.sourceType_);if(s&&(s.severity==="warn"?videojs.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${segmentInfoString(e)}`);return}this.logger_(`Appended ${segmentInfoString(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const a=e.segment,o=e.part,c=a.end&&this.currentTime_()-a.end>e.playlist.targetDuration*3,d=o&&o.end&&this.currentTime_()-o.end>e.playlist.partTargetDuration*3;if(c||d){this.logger_(`bad ${c?"segment":"part"} ${segmentInfoString(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const s=this.throughput.rate,a=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/a*8*1e3);this.throughput.rate+=(o-s)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const s=e.segment,a=s.start,o=s.end;if(!finite(a)||!finite(o))return;removeCuesFromTrack(a,o,this.segmentMetadataTrack_);const c=window$1$1.WebKitDataCue||window$1$1.VTTCue,d={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,programDateTime:s.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:a,end:o},h=JSON.stringify(d),b=new c(a,o,h);b.value=d,this.segmentMetadataTrack_.addCue(b)}}function noop(){}const toTitleCase=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},bufferTypes=["video","audio"],updating=(i,e)=>{const s=e[`${i}Buffer`];return s&&s.updating||e.queuePending[i]},nextQueueIndexOfType=(i,e)=>{for(let s=0;s<e.length;s++){const a=e[s];if(a.type==="mediaSource")return null;if(a.type===i)return s}return null},shiftQueue=(i,e)=>{if(e.queue.length===0)return;let s=0,a=e.queue[s];if(a.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),a.action(e),a.doneFn&&a.doneFn(),shiftQueue("audio",e),shiftQueue("video",e));return}if(i!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||updating(i,e))){if(a.type!==i){if(s=nextQueueIndexOfType(i,e.queue),s===null)return;a=e.queue[s]}if(e.queue.splice(s,1),e.queuePending[i]=a,a.action(i,e),!a.doneFn){e.queuePending[i]=null,shiftQueue(i,e);return}}},cleanupBuffer=(i,e)=>{const s=e[`${i}Buffer`],a=toTitleCase(i);s&&(s.removeEventListener("updateend",e[`on${a}UpdateEnd_`]),s.removeEventListener("error",e[`on${a}Error_`]),e.codecs[i]=null,e[`${i}Buffer`]=null)},inSourceBuffers=(i,e)=>i&&e&&Array.prototype.indexOf.call(i.sourceBuffers,e)!==-1,actions={appendBuffer:(i,e,s)=>(a,o)=>{const c=o[`${a}Buffer`];if(inSourceBuffers(o.mediaSource,c)){o.logger_(`Appending segment ${e.mediaIndex}'s ${i.length} bytes to ${a}Buffer`);try{c.appendBuffer(i)}catch(d){o.logger_(`Error with code ${d.code} `+(d.code===QUOTA_EXCEEDED_ERR?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${a}Buffer`),o.queuePending[a]=null,s(d)}}},remove:(i,e)=>(s,a)=>{const o=a[`${s}Buffer`];if(inSourceBuffers(a.mediaSource,o)){a.logger_(`Removing ${i} to ${e} from ${s}Buffer`);try{o.remove(i,e)}catch{a.logger_(`Remove ${i} to ${e} from ${s}Buffer failed`)}}},timestampOffset:i=>(e,s)=>{const a=s[`${e}Buffer`];inSourceBuffers(s.mediaSource,a)&&(s.logger_(`Setting ${e}timestampOffset to ${i}`),a.timestampOffset=i)},callback:i=>(e,s)=>{i()},endOfStream:i=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${i||""})`);try{e.mediaSource.endOfStream(i)}catch(s){videojs.log.warn("Failed to call media source endOfStream",s)}}},duration:i=>e=>{e.logger_(`Setting mediaSource duration to ${i}`);try{e.mediaSource.duration=i}catch(s){videojs.log.warn("Failed to set media source duration",s)}},abort:()=>(i,e)=>{if(e.mediaSource.readyState!=="open")return;const s=e[`${i}Buffer`];if(inSourceBuffers(e.mediaSource,s)){e.logger_(`calling abort on ${i}Buffer`);try{s.abort()}catch(a){videojs.log.warn(`Failed to abort on ${i}Buffer`,a)}}},addSourceBuffer:(i,e)=>s=>{const a=toTitleCase(i),o=getMimeForCodec(e);s.logger_(`Adding ${i}Buffer with codec ${e} to mediaSource`);const c=s.mediaSource.addSourceBuffer(o);c.addEventListener("updateend",s[`on${a}UpdateEnd_`]),c.addEventListener("error",s[`on${a}Error_`]),s.codecs[i]=e,s[`${i}Buffer`]=c},removeSourceBuffer:i=>e=>{const s=e[`${i}Buffer`];if(cleanupBuffer(i,e),!!inSourceBuffers(e.mediaSource,s)){e.logger_(`Removing ${i}Buffer with codec ${e.codecs[i]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(s)}catch(a){videojs.log.warn(`Failed to removeSourceBuffer ${i}Buffer`,a)}}},changeType:i=>(e,s)=>{const a=s[`${e}Buffer`],o=getMimeForCodec(i);if(!inSourceBuffers(s.mediaSource,a))return;const c=i.substring(0,i.indexOf(".")),d=s.codecs[e];if(d.substring(0,d.indexOf("."))!==c){s.logger_(`changing ${e}Buffer codec from ${s.codecs[e]} to ${i}`);try{a.changeType(o),s.codecs[e]=i}catch(b){videojs.log.warn(`Failed to changeType on ${e}Buffer`,b)}}}},pushQueue=({type:i,sourceUpdater:e,action:s,doneFn:a,name:o})=>{e.queue.push({type:i,action:s,doneFn:a,name:o}),shiftQueue(i,e)},onUpdateend=(i,e)=>s=>{const a=e[`${i}Buffered`](),o=bufferedRangesToString(a);if(e.logger_(`received "updateend" event for ${i} Source Buffer: `,o),e.queuePending[i]){const c=e.queuePending[i].doneFn;e.queuePending[i]=null,c&&c(e[`${i}Error_`])}shiftQueue(i,e)};class SourceUpdater extends videojs.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>shiftQueue("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=logger("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=onUpdateend("video",this),this.onAudioUpdateEnd_=onUpdateend("audio",this),this.onVideoError_=s=>{this.videoError_=s},this.onAudioError_=s=>{this.audioError_=s},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,s){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.addSourceBuffer(e,s),name:"addSourceBuffer"})}abort(e){pushQueue({type:e,sourceUpdater:this,action:actions.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){videojs.log.error("removeSourceBuffer is not supported!");return}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!videojs.browser.IS_FIREFOX&&window$1$1.MediaSource&&window$1$1.MediaSource.prototype&&typeof window$1$1.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return window$1$1.SourceBuffer&&window$1$1.SourceBuffer.prototype&&typeof window$1$1.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,s){if(!this.canChangeType()){videojs.log.error("changeType is not supported!");return}pushQueue({type:e,sourceUpdater:this,action:actions.changeType(s),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(s=>{const a=e[s];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(s,a);this.canChangeType()&&this.changeType(s,a)})}appendBuffer(e,s){const{segmentInfo:a,type:o,bytes:c}=e;if(this.processedAppend_=!0,o==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,s]),this.logger_(`delayed audio append of ${c.length} until video append`);return}const d=s;if(pushQueue({type:o,sourceUpdater:this,action:actions.appendBuffer(c,a||{mediaIndex:-1},d),doneFn:s,name:"appendBuffer"}),o==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const h=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${h.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,h.forEach(b=>{this.appendBuffer.apply(this,b)})}}audioBuffered(){return inSourceBuffers(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:createTimeRanges()}videoBuffered(){return inSourceBuffers(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:createTimeRanges()}buffered(){const e=inSourceBuffers(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=inSourceBuffers(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!e?this.audioBuffered():e&&!s?this.videoBuffered():bufferIntersection(this.audioBuffered(),this.videoBuffered())}setDuration(e,s=noop){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.duration(e),name:"duration",doneFn:s})}endOfStream(e=null,s=noop){typeof e!="string"&&(e=void 0),pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.endOfStream(e),name:"endOfStream",doneFn:s})}removeAudio(e,s,a=noop){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){a();return}pushQueue({type:"audio",sourceUpdater:this,action:actions.remove(e,s),doneFn:a,name:"remove"})}removeVideo(e,s,a=noop){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){a();return}pushQueue({type:"video",sourceUpdater:this,action:actions.remove(e,s),doneFn:a,name:"remove"})}updating(){return!!(updating("audio",this)||updating("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(pushQueue({type:"audio",sourceUpdater:this,action:actions.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(pushQueue({type:"video",sourceUpdater:this,action:actions.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&pushQueue({type:"audio",sourceUpdater:this,action:actions.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&pushQueue({type:"video",sourceUpdater:this,action:actions.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),bufferTypes.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>cleanupBuffer(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const uint8ToUtf8=i=>decodeURIComponent(escape(String.fromCharCode.apply(null,i))),bufferToHexString=i=>{const e=new Uint8Array(i);return Array.from(e).map(s=>s.toString(16).padStart(2,"0")).join("")},VTT_LINE_TERMINATORS=new Uint8Array(`

`.split("").map(i=>i.charCodeAt(0)));class NoVttJsError extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class VTTSegmentLoader extends SegmentLoader{constructor(e,s={}){super(e,s),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return createTimeRanges();const e=this.subtitlesTrack_.cues,s=e[0].startTime,a=e[e.length-1].startTime;return createTimeRanges([[s,a]])}initSegmentForMap(e,s=!1){if(!e)return null;const a=initSegmentId(e);let o=this.initSegments_[a];if(s&&!o&&e.bytes){const c=VTT_LINE_TERMINATORS.byteLength+e.bytes.byteLength,d=new Uint8Array(c);d.set(e.bytes),d.set(VTT_LINE_TERMINATORS,e.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:d}}return o||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,s){removeCuesFromTrack(e,s,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const s=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,s,a){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(s.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===REQUEST_ERRORS.TIMEOUT&&this.handleTimeout_(),e.code===REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");const c=o.segment;if(c.map&&(c.map.bytes=s.map.bytes),o.bytes=s.bytes,typeof window$1$1.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,s,a),()=>this.stopForError({message:"Error loading vtt.js",metadata:{errorType:videojs.Error.VttLoadError}}));return}c.requested=!0;try{this.parseVTTCues_(o)}catch(d){this.stopForError({message:d.message,metadata:{errorType:videojs.Error.VttCueParsingError}});return}if(this.updateTimeMapping_(o,this.syncController_.timelines[o.timeline],this.playlist_),o.cues.length?o.timingInfo={start:o.cues[0].startTime,end:o.cues[o.cues.length-1].endTime}:o.timingInfo={start:o.startOfSegment,end:o.startOfSegment+o.duration},o.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}o.byteLength=o.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,o.cues.forEach(d=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window$1$1.VTTCue(d.startTime,d.endTime,d.text):d)}),removeDuplicateCuesFromTrack(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let s,a=!1;if(typeof window$1$1.WebVTT!="function")throw new NoVttJsError;typeof window$1$1.TextDecoder=="function"?s=new window$1$1.TextDecoder("utf8"):(s=window$1$1.WebVTT.StringDecoder(),a=!0);const o=new window$1$1.WebVTT.Parser(window$1$1,window$1$1.vttjs,s);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=d=>{e.timestampmap=d},o.onparsingerror=d=>{videojs.log.warn("Error encountered when parsing cues: "+d.message)},e.segment.map){let d=e.segment.map.bytes;a&&(d=uint8ToUtf8(d)),o.parse(d)}let c=e.bytes;a&&(c=uint8ToUtf8(c)),o.parse(c),o.flush()}updateTimeMapping_(e,s,a){const o=e.segment;if(!s)return;if(!e.cues.length){o.empty=!0;return}const{MPEGTS:c,LOCAL:d}=e.timestampmap,b=c/clock.ONE_SECOND_IN_TS-d+s.mapping;if(e.cues.forEach(tt=>{const nt=tt.endTime-tt.startTime,ft=c===0?tt.startTime+b:this.handleRollover_(tt.startTime+b,s.time);tt.startTime=Math.max(ft,0),tt.endTime=Math.max(ft+nt,0)}),!a.syncInfo){const tt=e.cues[0].startTime,nt=e.cues[e.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:Math.min(tt,nt-o.duration)}}}handleRollover_(e,s){if(s===null)return e;let a=e*clock.ONE_SECOND_IN_TS;const o=s*clock.ONE_SECOND_IN_TS;let c;for(o<a?c=-8589934592:c=8589934592;Math.abs(a-o)>4294967296;)a+=c;return a/clock.ONE_SECOND_IN_TS}}const findAdCue=function(i,e){const s=i.cues;for(let a=0;a<s.length;a++){const o=s[a];if(e>=o.adStartTime&&e<=o.adEndTime)return o}return null},updateAdCues=function(i,e,s=0){if(!i.segments)return;let a=s,o;for(let c=0;c<i.segments.length;c++){const d=i.segments[c];if(o||(o=findAdCue(e,a+d.duration/2)),o){if("cueIn"in d){o.endTime=a,o.adEndTime=a,a+=d.duration,o=null;continue}if(a<o.endTime){a+=d.duration;continue}o.endTime+=d.duration}else if("cueOut"in d&&(o=new window$1$1.VTTCue(a,a+d.duration,d.cueOut),o.adStartTime=a,o.adEndTime=a+parseFloat(d.cueOut),e.addCue(o)),"cueOutCont"in d){const[h,b]=d.cueOutCont.split("/").map(parseFloat);o=new window$1$1.VTTCue(a,a+d.duration,""),o.adStartTime=a-h,o.adEndTime=o.adStartTime+b,e.addCue(o)}a+=d.duration}};class SyncInfo{constructor({start:e,end:s,segmentIndex:a,partIndex:o=null,appended:c=!1}){this.start_=e,this.end_=s,this.segmentIndex_=a,this.partIndex_=o,this.appended_=c}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class SyncInfoData{constructor(e,s=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=s}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class MediaSequenceSync{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,s){const{mediaSequence:a,segments:o}=e;if(this.isReliable_=this.isReliablePlaylist_(a,o),!!this.isReliable_)return this.updateStorage_(o,a,this.calculateBaseTime_(a,s))}getSyncInfoForTime(e){for(const{segmentSyncInfo:s,partsSyncInfo:a}of this.storage_.values())if(a.length){for(const o of a)if(o.isInRange(e))return o}else if(s.isInRange(e))return s;return null}updateStorage_(e,s,a){const o=new Map;let c=`
`,d=a,h=s;this.start_=d,e.forEach((b,tt)=>{const nt=this.storage_.get(h),ft=d,yt=ft+b.duration,Tt=!!(nt&&nt.segmentSyncInfo&&nt.segmentSyncInfo.isAppended),gt=new SyncInfo({start:ft,end:yt,appended:Tt,segmentIndex:tt});b.syncInfo=gt;let St=d;const wt=(b.parts||[]).map((Et,vt)=>{const xt=St,At=St+Et.duration,kt=!!(nt&&nt.partsSyncInfo&&nt.partsSyncInfo[vt]&&nt.partsSyncInfo[vt].isAppended),It=new SyncInfo({start:xt,end:At,appended:kt,segmentIndex:tt,partIndex:vt});return St=At,c+=`Media Sequence: ${h}.${vt} | Range: ${xt} --> ${At} | Appended: ${kt}
`,Et.syncInfo=It,It});o.set(h,new SyncInfoData(gt,wt)),c+=`${compactSegmentUrlDescription(b.resolvedUri)} | Media Sequence: ${h} | Range: ${ft} --> ${yt} | Appended: ${Tt}
`,h++,d=yt}),this.end_=d,this.storage_=o,this.diagnostics_=c}calculateBaseTime_(e,s){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:s:0}isReliablePlaylist_(e,s){return e!=null&&Array.isArray(s)&&s.length}}const MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC=86400,syncPointStrategies=[{name:"VOD",run:(i,e,s,a,o)=>s!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(i,e,s,a,o,c)=>{const d=i.getMediaSequenceSync(c);if(!d||!d.isReliable)return null;const h=d.getSyncInfoForTime(o);return h?{time:h.start,partIndex:h.partIndex,segmentIndex:h.segmentIndex}:null}},{name:"ProgramDateTime",run:(i,e,s,a,o)=>{if(!Object.keys(i.timelineToDatetimeMappings).length)return null;let c=null,d=null;const h=getPartsAndSegments(e);o=o||0;for(let b=0;b<h.length;b++){const tt=e.endList||o===0?b:h.length-(b+1),nt=h[tt],ft=nt.segment,yt=i.timelineToDatetimeMappings[ft.timeline];if(!yt||!ft.dateTimeObject)continue;let gt=ft.dateTimeObject.getTime()/1e3+yt;if(ft.parts&&typeof nt.partIndex=="number")for(let wt=0;wt<nt.partIndex;wt++)gt+=ft.parts[wt].duration;const St=Math.abs(o-gt);if(d!==null&&(St===0||d<St))break;d=St,c={time:gt,segmentIndex:nt.segmentIndex,partIndex:nt.partIndex}}return c}},{name:"Segment",run:(i,e,s,a,o)=>{let c=null,d=null;o=o||0;const h=getPartsAndSegments(e);for(let b=0;b<h.length;b++){const tt=e.endList||o===0?b:h.length-(b+1),nt=h[tt],ft=nt.segment,yt=nt.part&&nt.part.start||ft&&ft.start;if(ft.timeline===a&&typeof yt<"u"){const Tt=Math.abs(o-yt);if(d!==null&&d<Tt)break;(!c||d===null||d>=Tt)&&(d=Tt,c={time:yt,segmentIndex:nt.segmentIndex,partIndex:nt.partIndex})}}return c}},{name:"Discontinuity",run:(i,e,s,a,o)=>{let c=null;if(o=o||0,e.discontinuityStarts&&e.discontinuityStarts.length){let d=null;for(let h=0;h<e.discontinuityStarts.length;h++){const b=e.discontinuityStarts[h],tt=e.discontinuitySequence+h+1,nt=i.discontinuities[tt];if(nt){const ft=Math.abs(o-nt.time);if(d!==null&&d<ft)break;(!c||d===null||d>=ft)&&(d=ft,c={time:nt.time,segmentIndex:b,partIndex:null})}}}return c}},{name:"Playlist",run:(i,e,s,a,o)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class SyncController extends videojs.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.mediaSequenceStorage_={main:new MediaSequenceSync,audio:new MediaSequenceSync,vtt:new MediaSequenceSync},this.logger_=logger("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,s,a,o,c){if(s!==1/0)return syncPointStrategies.find(({name:b})=>b==="VOD").run(this,e,s);const d=this.runStrategies_(e,s,a,o,c);if(!d.length)return null;for(const h of d){const{syncPoint:b,strategy:tt}=h,{segmentIndex:nt,time:ft}=b;if(nt<0)continue;const yt=e.segments[nt],Tt=ft,gt=Tt+yt.duration;if(this.logger_(`Strategy: ${tt}. Current time: ${o}. selected segment: ${nt}. Time: [${Tt} -> ${gt}]}`),o>=Tt&&o<gt)return this.logger_("Found sync point with exact match: ",b),b}return this.selectSyncPoint_(d,{key:"time",value:o})}getExpiredTime(e,s){if(!e||!e.segments)return null;const a=this.runStrategies_(e,s,e.discontinuitySequence,0);if(!a.length)return null;const o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+sumDurations({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))}runStrategies_(e,s,a,o,c){const d=[];for(let h=0;h<syncPointStrategies.length;h++){const b=syncPointStrategies[h],tt=b.run(this,e,s,a,o,c);tt&&(tt.strategy=b.name,d.push({strategy:b.name,syncPoint:tt}))}return d}selectSyncPoint_(e,s){let a=e[0].syncPoint,o=Math.abs(e[0].syncPoint[s.key]-s.value),c=e[0].strategy;for(let d=1;d<e.length;d++){const h=Math.abs(e[d].syncPoint[s.key]-s.value);h<o&&(o=h,a=e[d].syncPoint,c=e[d].strategy)}return this.logger_(`syncPoint for [${s.key}: ${s.value}] chosen with strategy [${c}]: [time:${a.time}, segmentIndex:${a.segmentIndex}`+(typeof a.partIndex=="number"?`,partIndex:${a.partIndex}`:"")+"]"),a}saveExpiredSegmentInfo(e,s){const a=s.mediaSequence-e.mediaSequence;if(a>MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC){videojs.log.warn(`Not saving expired segment info. Media sequence gap ${a} is too large.`);return}for(let o=a-1;o>=0;o--){const c=e.segments[o];if(c&&typeof c.start<"u"){s.syncInfo={mediaSequence:e.mediaSequence+o,time:c.start},this.logger_(`playlist refresh sync: [time:${s.syncInfo.time}, mediaSequence: ${s.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const s=e.segments[0],a=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-a}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:s}){const a=this.calculateSegmentTimeMapping_(e,e.timingInfo,s),o=e.segment;a&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:o.start}));const c=o.dateTimeObject;o.discontinuity&&s&&c&&(this.timelineToDatetimeMappings[o.timeline]=-(c.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,s,a){const o=e.segment,c=e.part;let d=this.timelines[e.timeline],h,b;if(typeof e.timestampOffset=="number")d={time:e.startOfSegment,mapping:e.startOfSegment-s.start},a&&(this.timelines[e.timeline]=d,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${d.time}] [mapping: ${d.mapping}]`)),h=e.startOfSegment,b=s.end+d.mapping;else if(d)h=s.start+d.mapping,b=s.end+d.mapping;else return!1;return c&&(c.start=h,c.end=b),(!o.start||h<o.start)&&(o.start=h),o.end=b,!0}saveDiscontinuitySyncInfo_(e){const s=e.playlist,a=e.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(let o=0;o<s.discontinuityStarts.length;o++){const c=s.discontinuityStarts[o],d=s.discontinuitySequence+o+1,h=c-e.mediaIndex,b=Math.abs(h);if(!this.discontinuities[d]||this.discontinuities[d].accuracy>b){let tt;h<0?tt=a.start-sumDurations({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:e.mediaIndex,endIndex:c}):tt=a.end+sumDurations({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:e.mediaIndex+1,endIndex:c}),this.discontinuities[d]={time:tt,accuracy:b}}}}dispose(){this.trigger("dispose"),this.off()}}class TimelineChangeController extends videojs.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:s,to:a}){return typeof s=="number"&&typeof a=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:s,to:a},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:s,to:a}){return typeof s=="number"&&typeof a=="number"&&(this.lastTimelineChanges_[e]={type:e,from:s,to:a},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const workerCode=transform(getWorkerString(function(){var i=function(){function St(){this.listeners={}}var wt=St.prototype;return wt.on=function(vt,xt){this.listeners[vt]||(this.listeners[vt]=[]),this.listeners[vt].push(xt)},wt.off=function(vt,xt){if(!this.listeners[vt])return!1;var At=this.listeners[vt].indexOf(xt);return this.listeners[vt]=this.listeners[vt].slice(0),this.listeners[vt].splice(At,1),At>-1},wt.trigger=function(vt){var xt=this.listeners[vt];if(xt)if(arguments.length===2)for(var At=xt.length,kt=0;kt<At;++kt)xt[kt].call(this,arguments[1]);else for(var It=Array.prototype.slice.call(arguments,1),Rt=xt.length,Lt=0;Lt<Rt;++Lt)xt[Lt].apply(this,It)},wt.dispose=function(){this.listeners={}},wt.pipe=function(vt){this.on("data",function(xt){vt.push(xt)})},St}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(St){return St.subarray(0,St.byteLength-St[St.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const s=function(){const St=[[[],[],[],[],[]],[[],[],[],[],[]]],wt=St[0],Et=St[1],vt=wt[4],xt=Et[4];let At,kt,It;const Rt=[],Lt=[];let jt,Ft,qt,Xt,Ut,Wt;for(At=0;At<256;At++)Lt[(Rt[At]=At<<1^(At>>7)*283)^At]=At;for(kt=It=0;!vt[kt];kt^=jt||1,It=Lt[It]||1)for(Xt=It^It<<1^It<<2^It<<3^It<<4,Xt=Xt>>8^Xt&255^99,vt[kt]=Xt,xt[Xt]=kt,qt=Rt[Ft=Rt[jt=Rt[kt]]],Wt=qt*16843009^Ft*65537^jt*257^kt*16843008,Ut=Rt[Xt]*257^Xt*16843008,At=0;At<4;At++)wt[At][kt]=Ut=Ut<<24^Ut>>>8,Et[At][Xt]=Wt=Wt<<24^Wt>>>8;for(At=0;At<5;At++)wt[At]=wt[At].slice(0),Et[At]=Et[At].slice(0);return St};let a=null;class o{constructor(wt){a||(a=s()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];let Et,vt,xt;const At=this._tables[0][4],kt=this._tables[1],It=wt.length;let Rt=1;if(It!==4&&It!==6&&It!==8)throw new Error("Invalid aes key size");const Lt=wt.slice(0),jt=[];for(this._key=[Lt,jt],Et=It;Et<4*It+28;Et++)xt=Lt[Et-1],(Et%It===0||It===8&&Et%It===4)&&(xt=At[xt>>>24]<<24^At[xt>>16&255]<<16^At[xt>>8&255]<<8^At[xt&255],Et%It===0&&(xt=xt<<8^xt>>>24^Rt<<24,Rt=Rt<<1^(Rt>>7)*283)),Lt[Et]=Lt[Et-It]^xt;for(vt=0;Et;vt++,Et--)xt=Lt[vt&3?Et:Et-4],Et<=4||vt<4?jt[vt]=xt:jt[vt]=kt[0][At[xt>>>24]]^kt[1][At[xt>>16&255]]^kt[2][At[xt>>8&255]]^kt[3][At[xt&255]]}decrypt(wt,Et,vt,xt,At,kt){const It=this._key[1];let Rt=wt^It[0],Lt=xt^It[1],jt=vt^It[2],Ft=Et^It[3],qt,Xt,Ut;const Wt=It.length/4-2;let an,Kt=4;const Jt=this._tables[1],Mt=Jt[0],Ht=Jt[1],zt=Jt[2],Yt=Jt[3],Qt=Jt[4];for(an=0;an<Wt;an++)qt=Mt[Rt>>>24]^Ht[Lt>>16&255]^zt[jt>>8&255]^Yt[Ft&255]^It[Kt],Xt=Mt[Lt>>>24]^Ht[jt>>16&255]^zt[Ft>>8&255]^Yt[Rt&255]^It[Kt+1],Ut=Mt[jt>>>24]^Ht[Ft>>16&255]^zt[Rt>>8&255]^Yt[Lt&255]^It[Kt+2],Ft=Mt[Ft>>>24]^Ht[Rt>>16&255]^zt[Lt>>8&255]^Yt[jt&255]^It[Kt+3],Kt+=4,Rt=qt,Lt=Xt,jt=Ut;for(an=0;an<4;an++)At[(3&-an)+kt]=Qt[Rt>>>24]<<24^Qt[Lt>>16&255]<<16^Qt[jt>>8&255]<<8^Qt[Ft&255]^It[Kt++],qt=Rt,Rt=Lt,Lt=jt,jt=Ft,Ft=qt}}class c extends i{constructor(){super(i),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(wt){this.jobs.push(wt),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const d=function(St){return St<<24|(St&65280)<<8|(St&16711680)>>8|St>>>24},h=function(St,wt,Et){const vt=new Int32Array(St.buffer,St.byteOffset,St.byteLength>>2),xt=new o(Array.prototype.slice.call(wt)),At=new Uint8Array(St.byteLength),kt=new Int32Array(At.buffer);let It,Rt,Lt,jt,Ft,qt,Xt,Ut,Wt;for(It=Et[0],Rt=Et[1],Lt=Et[2],jt=Et[3],Wt=0;Wt<vt.length;Wt+=4)Ft=d(vt[Wt]),qt=d(vt[Wt+1]),Xt=d(vt[Wt+2]),Ut=d(vt[Wt+3]),xt.decrypt(Ft,qt,Xt,Ut,kt,Wt),kt[Wt]=d(kt[Wt]^It),kt[Wt+1]=d(kt[Wt+1]^Rt),kt[Wt+2]=d(kt[Wt+2]^Lt),kt[Wt+3]=d(kt[Wt+3]^jt),It=Ft,Rt=qt,Lt=Xt,jt=Ut;return At};class b{constructor(wt,Et,vt,xt){const At=b.STEP,kt=new Int32Array(wt.buffer),It=new Uint8Array(wt.byteLength);let Rt=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(kt.subarray(Rt,Rt+At),Et,vt,It)),Rt=At;Rt<kt.length;Rt+=At)vt=new Uint32Array([d(kt[Rt-4]),d(kt[Rt-3]),d(kt[Rt-2]),d(kt[Rt-1])]),this.asyncStream_.push(this.decryptChunk_(kt.subarray(Rt,Rt+At),Et,vt,It));this.asyncStream_.push(function(){xt(null,e(It))})}static get STEP(){return 32e3}decryptChunk_(wt,Et,vt,xt){return function(){const At=h(wt,Et,vt);xt.set(At,wt.byteOffset)}}}var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nt;typeof window<"u"?nt=window:typeof tt<"u"?nt=tt:typeof self<"u"?nt=self:nt={};var ft=nt,yt=function(wt){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(wt):wt&&wt.buffer instanceof ArrayBuffer},Tt=ft.BigInt||Number;Tt("0x1"),Tt("0x100"),Tt("0x10000"),Tt("0x1000000"),Tt("0x100000000"),Tt("0x10000000000"),Tt("0x1000000000000"),Tt("0x100000000000000"),Tt("0x10000000000000000"),function(){var St=new Uint16Array([65484]),wt=new Uint8Array(St.buffer,St.byteOffset,St.byteLength);return wt[0]===255?"big":wt[0]===204?"little":"unknown"}();const gt=function(St){const wt={};return Object.keys(St).forEach(Et=>{const vt=St[Et];yt(vt)?wt[Et]={bytes:vt.buffer,byteOffset:vt.byteOffset,byteLength:vt.byteLength}:wt[Et]=vt}),wt};self.onmessage=function(St){const wt=St.data,Et=new Uint8Array(wt.encrypted.bytes,wt.encrypted.byteOffset,wt.encrypted.byteLength),vt=new Uint32Array(wt.key.bytes,wt.key.byteOffset,wt.key.byteLength/4),xt=new Uint32Array(wt.iv.bytes,wt.iv.byteOffset,wt.iv.byteLength/4);new b(Et,vt,xt,function(At,kt){self.postMessage(gt({source:wt.source,decrypted:kt}),[kt.buffer])})}}));var Decrypter=factory(workerCode);const audioTrackKind_=i=>{let e=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},stopLoaders=(i,e)=>{i.abort(),i.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},startLoaders=(i,e)=>{e.activePlaylistLoader=i,i.load()},onGroupChanged=(i,e)=>()=>{const{segmentLoaders:{[i]:s,main:a},mediaTypes:{[i]:o}}=e,c=o.activeTrack(),d=o.getActiveGroup(),h=o.activePlaylistLoader,b=o.lastGroup_;if(!(d&&b&&d.id===b.id)&&(o.lastGroup_=d,o.lastTrack_=c,stopLoaders(s,o),!(!d||d.isMainPlaylist))){if(!d.playlistLoader){h&&a.resetEverything();return}s.resyncLoader(),startLoaders(d.playlistLoader,o)}},onGroupChanging=(i,e)=>()=>{const{segmentLoaders:{[i]:s},mediaTypes:{[i]:a}}=e;a.lastGroup_=null,s.abort(),s.pause()},onTrackChanged=(i,e)=>()=>{const{mainPlaylistLoader:s,segmentLoaders:{[i]:a,main:o},mediaTypes:{[i]:c}}=e,d=c.activeTrack(),h=c.getActiveGroup(),b=c.activePlaylistLoader,tt=c.lastTrack_;if(!(tt&&d&&tt.id===d.id)&&(c.lastGroup_=h,c.lastTrack_=d,stopLoaders(a,c),!!h)){if(h.isMainPlaylist){if(!d||!tt||d.id===tt.id)return;const nt=e.vhs.playlistController_,ft=nt.selectPlaylist();if(nt.media()===ft)return;c.logger_(`track change. Switching main audio from ${tt.id} to ${d.id}`),s.pause(),o.resetEverything(),nt.fastQualityChange_(ft);return}if(i==="AUDIO"){if(!h.playlistLoader){o.setAudio(!0),o.resetEverything();return}a.setAudio(!0),o.setAudio(!1)}if(b===h.playlistLoader){startLoaders(h.playlistLoader,c);return}a.track&&a.track(d),a.resetEverything(),startLoaders(h.playlistLoader,c)}},onError={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:s},excludePlaylist:a}=e,o=s.activeTrack(),c=s.activeGroup(),d=(c.filter(b=>b.default)[0]||c[0]).id,h=s.tracks[d];if(o===h){a({error:{message:"Problem encountered loading the default audio track."}});return}videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const b in s.tracks)s.tracks[b].enabled=s.tracks[b]===h;s.onTrackChanged()},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:s}}=e;videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const a=s.activeTrack();a&&(a.mode="disabled"),s.onTrackChanged()}},setupListeners={AUDIO:(i,e,s)=>{if(!e)return;const{tech:a,requestOptions:o,segmentLoaders:{[i]:c}}=s;e.on("loadedmetadata",()=>{const d=e.media();c.playlist(d,o),(!a.paused()||d.endList&&a.preload()!=="none")&&c.load()}),e.on("loadedplaylist",()=>{c.playlist(e.media(),o),a.paused()||c.load()}),e.on("error",onError[i](i,s))},SUBTITLES:(i,e,s)=>{const{tech:a,requestOptions:o,segmentLoaders:{[i]:c},mediaTypes:{[i]:d}}=s;e.on("loadedmetadata",()=>{const h=e.media();c.playlist(h,o),c.track(d.activeTrack()),(!a.paused()||h.endList&&a.preload()!=="none")&&c.load()}),e.on("loadedplaylist",()=>{c.playlist(e.media(),o),a.paused()||c.load()}),e.on("error",onError[i](i,s))}},initialize={AUDIO:(i,e)=>{const{vhs:s,sourceType:a,segmentLoaders:{[i]:o},requestOptions:c,main:{mediaGroups:d},mediaTypes:{[i]:{groups:h,tracks:b,logger_:tt}},mainPlaylistLoader:nt}=e,ft=isAudioOnly(nt.main);(!d[i]||Object.keys(d[i]).length===0)&&(d[i]={main:{default:{default:!0}}},ft&&(d[i].main.default.playlists=nt.main.playlists));for(const yt in d[i]){h[yt]||(h[yt]=[]);for(const Tt in d[i][yt]){let gt=d[i][yt][Tt],St;if(ft?(tt(`AUDIO group '${yt}' label '${Tt}' is a main playlist`),gt.isMainPlaylist=!0,St=null):a==="vhs-json"&&gt.playlists?St=new PlaylistLoader(gt.playlists[0],s,c):gt.resolvedUri?St=new PlaylistLoader(gt.resolvedUri,s,c):gt.playlists&&a==="dash"?St=new DashPlaylistLoader(gt.playlists[0],s,c,nt):St=null,gt=merge({id:Tt,playlistLoader:St},gt),setupListeners[i](i,gt.playlistLoader,e),h[yt].push(gt),typeof b[Tt]>"u"){const wt=new videojs.AudioTrack({id:Tt,kind:audioTrackKind_(gt),enabled:!1,language:gt.language,default:gt.default,label:Tt});b[Tt]=wt}}}o.on("error",onError[i](i,e))},SUBTITLES:(i,e)=>{const{tech:s,vhs:a,sourceType:o,segmentLoaders:{[i]:c},requestOptions:d,main:{mediaGroups:h},mediaTypes:{[i]:{groups:b,tracks:tt}},mainPlaylistLoader:nt}=e;for(const ft in h[i]){b[ft]||(b[ft]=[]);for(const yt in h[i][ft]){if(!a.options_.useForcedSubtitles&&h[i][ft][yt].forced)continue;let Tt=h[i][ft][yt],gt;if(o==="hls")gt=new PlaylistLoader(Tt.resolvedUri,a,d);else if(o==="dash"){if(!Tt.playlists.filter(wt=>wt.excludeUntil!==1/0).length)return;gt=new DashPlaylistLoader(Tt.playlists[0],a,d,nt)}else o==="vhs-json"&&(gt=new PlaylistLoader(Tt.playlists?Tt.playlists[0]:Tt.resolvedUri,a,d));if(Tt=merge({id:yt,playlistLoader:gt},Tt),setupListeners[i](i,Tt.playlistLoader,e),b[ft].push(Tt),typeof tt[yt]>"u"){const St=s.addRemoteTextTrack({id:yt,kind:"subtitles",default:Tt.default&&Tt.autoselect,language:Tt.language,label:yt},!1).track;tt[yt]=St}}}c.on("error",onError[i](i,e))},"CLOSED-CAPTIONS":(i,e)=>{const{tech:s,main:{mediaGroups:a},mediaTypes:{[i]:{groups:o,tracks:c}}}=e;for(const d in a[i]){o[d]||(o[d]=[]);for(const h in a[i][d]){const b=a[i][d][h];if(!/^(?:CC|SERVICE)/.test(b.instreamId))continue;const tt=s.options_.vhs&&s.options_.vhs.captionServices||{};let nt={label:h,language:b.language,instreamId:b.instreamId,default:b.default&&b.autoselect};if(tt[nt.instreamId]&&(nt=merge(nt,tt[nt.instreamId])),nt.default===void 0&&delete nt.default,o[d].push(merge({id:h},b)),typeof c[h]>"u"){const ft=s.addRemoteTextTrack({id:nt.instreamId,kind:"captions",default:nt.default,language:nt.language,label:nt.label},!1).track;c[h]=ft}}}}},groupMatch=(i,e)=>{for(let s=0;s<i.length;s++)if(playlistMatch(e,i[s])||i[s].playlists&&groupMatch(i[s].playlists,e))return!0;return!1},activeGroup=(i,e)=>s=>{const{mainPlaylistLoader:a,mediaTypes:{[i]:{groups:o}}}=e,c=a.media();if(!c)return null;let d=null;c.attributes[i]&&(d=o[c.attributes[i]]);const h=Object.keys(o);if(!d)if(i==="AUDIO"&&h.length>1&&isAudioOnly(e.main))for(let b=0;b<h.length;b++){const tt=o[h[b]];if(groupMatch(tt,c)){d=tt;break}}else o.main?d=o.main:h.length===1&&(d=o[h[0]]);return typeof s>"u"?d:s===null||!d?null:d.filter(b=>b.id===s.id)[0]||null},activeTrack={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:s}}}=e;for(const a in s)if(s[a].enabled)return s[a];return null},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:s}}}=e;for(const a in s)if(s[a].mode==="showing"||s[a].mode==="hidden")return s[a];return null}},getActiveGroup=(i,{mediaTypes:e})=>()=>{const s=e[i].activeTrack();return s?e[i].activeGroup(s):null},setupMediaGroups=i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(tt=>{initialize[tt](tt,i)});const{mediaTypes:e,mainPlaylistLoader:s,tech:a,vhs:o,segmentLoaders:{["AUDIO"]:c,main:d}}=i;["AUDIO","SUBTITLES"].forEach(tt=>{e[tt].activeGroup=activeGroup(tt,i),e[tt].activeTrack=activeTrack[tt](tt,i),e[tt].onGroupChanged=onGroupChanged(tt,i),e[tt].onGroupChanging=onGroupChanging(tt,i),e[tt].onTrackChanged=onTrackChanged(tt,i),e[tt].getActiveGroup=getActiveGroup(tt,i)});const h=e.AUDIO.activeGroup();if(h){const tt=(h.filter(ft=>ft.default)[0]||h[0]).id;e.AUDIO.tracks[tt].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(d.setAudio(!1),c.setAudio(!0)):d.setAudio(!0)}s.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(tt=>e[tt].onGroupChanged())}),s.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(tt=>e[tt].onGroupChanging())});const b=()=>{e.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"vhs-audio-change"})};a.audioTracks().addEventListener("change",b),a.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),o.on("dispose",()=>{a.audioTracks().removeEventListener("change",b),a.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),a.clearTracks("audio");for(const tt in e.AUDIO.tracks)a.audioTracks().addTrack(e.AUDIO.tracks[tt])},createMediaTypes=()=>{const i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{i[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:logger(`MediaGroups[${e}]`)}}),i};class SteeringManifest{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=resolveUrl(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(s=>[s.ID,s])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class ContentSteeringController extends videojs.EventTarget{constructor(e,s){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=logger("Content Steering"),this.xhr_=e,this.getBandwidth_=s}assignTagProperties(e,s){this.manifestType_=s.serverUri?"HLS":"DASH";const a=s.serverUri||s.serverURL;if(!a){this.logger_(`steering manifest URL is ${a}, cannot request steering manifest.`),this.trigger("error");return}if(a.startsWith("data:")){this.decodeDataUriManifest_(a.substring(a.indexOf(",")+1));return}this.steeringManifest.reloadUri=resolveUrl(e,a),this.defaultPathway=s.pathwayId||s.defaultServiceLocation,this.queryBeforeStart=s.queryBeforeStart,this.proxyServerUrl_=s.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const s=this.steeringManifest.reloadUri;if(!s)return;const a=e?s:this.getRequestURI(s);if(!a){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}this.request_=this.xhr_({uri:a,requestType:"content-steering-manifest"},(o,c)=>{if(o){if(c.status===410){this.logger_(`manifest request 410 ${o}.`),this.logger_(`There will be no more content steering requests to ${a} this session.`),this.excludedSteeringManifestURLs.add(a);return}if(c.status===429){const h=c.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${o}.`),this.logger_(`content steering will retry in ${h} seconds.`),this.startTTLTimeout_(parseInt(h,10));return}this.logger_(`manifest failed to load ${o}.`),this.startTTLTimeout_();return}const d=JSON.parse(this.request_.responseText);this.assignSteeringProperties_(d),this.startTTLTimeout_()})}setProxyServerUrl_(e){const s=new window$1$1.URL(e),a=new window$1$1.URL(this.proxyServerUrl_);return a.searchParams.set("url",encodeURI(s.toString())),this.setSteeringParams_(a.toString())}decodeDataUriManifest_(e){const s=JSON.parse(window$1$1.atob(e));this.assignSteeringProperties_(s)}setSteeringParams_(e){const s=new window$1$1.URL(e),a=this.getPathway(),o=this.getBandwidth_();if(a){const c=`_${this.manifestType_}_pathway`;s.searchParams.set(c,a)}if(o){const c=`_${this.manifestType_}_throughput`;s.searchParams.set(c,o)}return s.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const a=(o=>{for(const c of o)if(this.availablePathways_.has(c))return c;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==a&&(this.currentPathway=a,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const s=o=>this.excludedSteeringManifestURLs.has(o);if(this.proxyServerUrl_){const o=this.setProxyServerUrl_(e);if(!s(o))return o}const a=this.setSteeringParams_(e);return s(a)?null:a}startTTLTimeout_(e=this.steeringManifest.ttl){const s=e*1e3;this.ttlTimeout_=window$1$1.setTimeout(()=>{this.requestSteeringManifest()},s)}clearTTLTimeout_(){window$1$1.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,s){return!s&&this.steeringManifest.reloadUri||s&&(resolveUrl(e,s.serverURL)!==this.steeringManifest.reloadUri||s.defaultServiceLocation!==this.defaultPathway||s.queryBeforeStart!==this.queryBeforeStart||s.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const ABORT_EARLY_EXCLUSION_SECONDS=10;let Vhs$1;const loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sumLoaderStat=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},shouldSwitchToMedia=function({currentPlaylist:i,buffered:e,currentTime:s,nextPlaylist:a,bufferLowWaterLine:o,bufferHighWaterLine:c,duration:d,bufferBasedABR:h,log:b}){if(!a)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;const tt=`allowing switch ${i&&i.id||"null"} -> ${a.id}`;if(!i)return b(`${tt} as current playlist is not set`),!0;if(a.id===i.id)return!1;const nt=!!findRange(e,s).length;if(!i.endList)return!nt&&typeof i.partTargetDuration=="number"?(b(`not ${tt} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(b(`${tt} as current playlist is live`),!0);const ft=timeAheadOf(e,s),yt=h?Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Config.MAX_BUFFER_LOW_WATER_LINE;if(d<yt)return b(`${tt} as duration < max low water line (${d} < ${yt})`),!0;const Tt=a.attributes.BANDWIDTH,gt=i.attributes.BANDWIDTH;if(Tt<gt&&(!h||ft<c)){let St=`${tt} as next bandwidth < current bandwidth (${Tt} < ${gt})`;return h&&(St+=` and forwardBuffer < bufferHighWaterLine (${ft} < ${c})`),b(St),!0}if((!h||Tt>gt)&&ft>=o){let St=`${tt} as forwardBuffer >= bufferLowWaterLine (${ft} >= ${o})`;return h&&(St+=` and next bandwidth > current bandwidth (${Tt} > ${gt})`),b(St),!0}return b(`not ${tt} as no switching criteria met`),!1};class PlaylistController extends videojs.EventTarget{constructor(e){super();const{src:s,withCredentials:a,tech:o,bandwidth:c,externVhs:d,useCueTags:h,playlistExclusionDuration:b,enableLowInitialPlaylist:tt,sourceType:nt,cacheEncryptionKeys:ft,bufferBasedABR:yt,leastPixelDiffSelector:Tt,captionServices:gt}=e;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:St}=e;(St===null||typeof St>"u")&&(St=1/0),Vhs$1=d,this.bufferBasedABR=!!yt,this.leastPixelDiffSelector=!!Tt,this.withCredentials=a,this.tech_=o,this.vhs_=o.vhs,this.sourceType_=nt,this.useCueTags_=h,this.playlistExclusionDuration=b,this.maxPlaylistRetries=St,this.enableLowInitialPlaylist=tt,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:a,maxPlaylistRetries:St,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=createMediaTypes(),this.mediaSource=new window$1$1.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=createTimeRanges(),this.hasPlayed_=!1,this.syncController_=new SyncController(e),this.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Decrypter,this.sourceUpdater_=new SourceUpdater(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new TimelineChangeController,this.keyStatusMap_=new Map;const wt={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:gt,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:c,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:ft,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new DashPlaylistLoader(s,this.vhs_,merge(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new PlaylistLoader(s,this.vhs_,merge(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new SegmentLoader(merge(wt,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new SegmentLoader(merge(wt,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new VTTSegmentLoader(merge(wt,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((xt,At)=>{function kt(){o.off("vttjserror",It),xt()}function It(){o.off("vttjsloaded",kt),At()}o.one("vttjsloaded",kt),o.one("vttjserror",It),o.addWebVttScript_()})}),e);const Et=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new ContentSteeringController(this.vhs_.xhr,Et),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),loaderStats.forEach(xt=>{this[xt+"_"]=sumLoaderStat.bind(this,xt)}),this.logger_=logger("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const vt=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(vt,()=>{const xt=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-xt,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return e===-1||s===-1?-1:e+s}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,e)}switchMedia_(e,s,a){const o=this.media(),c=o&&(o.id||o.uri),d=e&&(e.id||e.uri);c&&c!==d&&(this.logger_(`switch media ${c} -> ${d} from ${s}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${s}`})),this.mainPlaylistLoader_.media(e,a)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const s=this.mediaTypes_[e],a=s?s.activeGroup():null,o=this.contentSteeringController_.getPathway();if(a&&o){const d=(a.length?a[0].playlists:a.playlists).filter(h=>h.attributes.serviceLocation===o);d.length&&this.mediaTypes_[e].activePlaylistLoader.media(d[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window$1$1.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window$1$1.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),s=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return s;const a=e.mediaGroups.AUDIO,o=Object.keys(a);let c;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)c=this.mediaTypes_.AUDIO.activeTrack();else{const h=a.main||o.length&&a[o[0]];for(const b in h)if(h[b].default){c={label:b};break}}if(!c)return s;const d=[];for(const h in a)if(a[h][c.label]){const b=a[h][c.label];if(b.playlists&&b.playlists.length)d.push.apply(d,b.playlists);else if(b.uri)d.push(b);else if(e.playlists.length)for(let tt=0;tt<e.playlists.length;tt++){const nt=e.playlists[tt];nt.attributes&&nt.attributes.AUDIO&&nt.attributes.AUDIO===h&&d.push(nt)}}return d.length?d:s}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),s=e.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,e.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),setupMediaGroups({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let s;if(this.enableLowInitialPlaylist&&(s=this.selectInitialPlaylist()),s||(s=this.selectPlaylist()),!s||!this.shouldSwitchToMedia_(s)||(this.initialMedia_=s,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),s=e.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();if(e.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,s){const a=e.mediaGroups||{};let o=!0;const c=Object.keys(a.AUDIO);for(const d in a.AUDIO)for(const h in a.AUDIO[d])a.AUDIO[d][h].uri||(o=!1);o&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Vhs$1.Playlist.isAes(s)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),c.length&&Object.keys(a.AUDIO[c[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const s=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),c=this.bufferHighWaterLine(),d=this.tech_.buffered();return shouldSwitchToMedia({buffered:d,currentTime:a,currentPlaylist:s,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:c,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const s=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:s.playlist,error:s})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",s=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:ABORT_EARLY_EXCLUSION_SECONDS}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const s=this.getCodecsOrExclude_();s&&this.sourceUpdater_.addOrChangeSourceBuffers(s)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const s=this.seekable();if(!s.length)return!1;const a=s.end(0);let o=a;if(e.start){const c=e.start.timeOffset;c<0?o=Math.max(a+c,s.start(0)):o=Math.min(a,c)}this.trigger("firstplay"),this.tech_.setCurrentTime(o)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,s=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const s=this.duration();e[e.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const s=this.mainSegmentLoader_.getCurrentMediaInfo_();!s||s.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const a=this.syncController_.getExpiredTime(e,this.duration());if(a===null)return!1;const o=Vhs$1.Playlist.playlistEnd(e,a),c=this.tech_.currentTime(),d=this.tech_.buffered();if(!d.length)return o-c<=SAFE_TIME_DELTA;const h=d.end(d.length-1);return h-c<=SAFE_TIME_DELTA&&o-h<=SAFE_TIME_DELTA}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:s={},playlistExclusionDuration:a}){if(e=e||this.mainPlaylistLoader_.media(),a=a||s.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=s,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const o=this.mainPlaylistLoader_.main.playlists,c=o.filter(isEnabled),d=c.length===1&&c[0]===e;if(o.length===1&&a!==1/0)return videojs.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(d);if(d){if(this.main().contentSteering){const gt=this.pathwayAttribute_(e),St=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(gt),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(gt)},St);return}let Tt=!1;o.forEach(gt=>{if(gt===e)return;const St=gt.excludeUntil;typeof St<"u"&&St!==1/0&&(Tt=!0,delete gt.excludeUntil)}),Tt&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let h;e.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+a*1e3,e.excludeUntil=h,s.reason&&(e.lastExcludeReason_=s.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const b=this.selectPlaylist();if(!b){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const tt=s.internal?this.logger_:videojs.log.warn,nt=s.message?" "+s.message:"";tt(`${s.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${nt} Switching to playlist ${b.id}.`),b.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),b.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const ft=b.targetDuration/2*1e3||5*1e3,yt=typeof b.lastRequest=="number"&&Date.now()-b.lastRequest<=ft;return this.switchMedia_(b,"exclude",d||yt)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,s){const a=[],o=e==="all";(o||e==="main")&&a.push(this.mainPlaylistLoader_);const c=[];(o||e==="audio")&&c.push("AUDIO"),(o||e==="subtitle")&&(c.push("CLOSED-CAPTIONS"),c.push("SUBTITLES")),c.forEach(d=>{const h=this.mediaTypes_[d]&&this.mediaTypes_[d].activePlaylistLoader;h&&a.push(h)}),["main","audio","subtitle"].forEach(d=>{const h=this[`${d}SegmentLoader_`];h&&(e===d||e==="all")&&a.push(h)}),a.forEach(d=>s.forEach(h=>{typeof d[h]=="function"&&d[h]()}))}setCurrentTime(e){const s=findRange(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(s&&s.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Vhs$1.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let s=this.mainPlaylistLoader_.media();if(!s)return;let a=this.syncController_.getExpiredTime(s,this.duration());if(a===null)return;const o=this.mainPlaylistLoader_.main,c=Vhs$1.Playlist.seekable(s,a,Vhs$1.Playlist.liveEdgeDelay(o,s));if(c.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.duration()),a===null||(e=Vhs$1.Playlist.seekable(s,a,Vhs$1.Playlist.liveEdgeDelay(o,s)),e.length===0)))return;let d,h;this.seekable_&&this.seekable_.length&&(d=this.seekable_.end(0),h=this.seekable_.start(0)),e?e.start(0)>c.end(0)||c.start(0)>e.end(0)?this.seekable_=c:this.seekable_=createTimeRanges([[e.start(0)>c.start(0)?e.start(0):c.start(0),e.end(0)<c.end(0)?e.end(0):c.end(0)]]):this.seekable_=c,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===d&&this.seekable_.start(0)===h)&&(this.logger_(`seekable updated [${printableRange(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const o=this.seekable();if(!o.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<o.end(o.length-1))&&this.sourceUpdater_.setDuration(o.end(o.length-1));return}const s=this.tech_.buffered();let a=Vhs$1.Playlist.duration(this.mainPlaylistLoader_.media());s.length>0&&(a=Math.max(a,s.end(s.length-1))),this.mediaSource.duration!==a&&this.sourceUpdater_.setDuration(a)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const s=this.mediaTypes_[e].groups;for(const a in s)s[a].forEach(o=>{o.playlistLoader&&o.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!s||!a)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const a=codecsForPlaylist(this.main(),s),o={},c=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(o.video=a.video||e.main.videoCodec||DEFAULT_VIDEO_CODEC),e.main.isMuxed&&(o.video+=`,${a.audio||e.main.audioCodec||DEFAULT_AUDIO_CODEC}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||c)&&(o.audio=a.audio||e.main.audioCodec||e.audio.audioCodec||DEFAULT_AUDIO_CODEC,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!o.audio&&!o.video){this.excludePlaylist({playlistToExclude:s,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const d=(tt,nt)=>tt?browserSupportsCodec(nt):muxerSupportsCodec(nt),h={};let b;if(["video","audio"].forEach(function(tt){if(o.hasOwnProperty(tt)&&!d(e[tt].isFmp4,o[tt])){const nt=e[tt].isFmp4?"browser":"muxer";h[nt]=h[nt]||[],h[nt].push(o[tt]),tt==="audio"&&(b=nt)}}),c&&b&&s.attributes.AUDIO){const tt=s.attributes.AUDIO;this.main().playlists.forEach(nt=>{(nt.attributes&&nt.attributes.AUDIO)===tt&&nt!==s&&(nt.excludeUntil=1/0)}),this.logger_(`excluding audio group ${tt} as ${b} does not support codec(s): "${o.audio}"`)}if(Object.keys(h).length){const tt=Object.keys(h).reduce((nt,ft)=>(nt&&(nt+=", "),nt+=`${ft} does not support codec(s): "${h[ft].join(",")}"`,nt),"")+".";this.excludePlaylist({playlistToExclude:s,error:{internal:!0,message:tt},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const tt=[];if(["video","audio"].forEach(nt=>{const ft=(parseCodecs(this.sourceUpdater_.codecs[nt]||"")[0]||{}).type,yt=(parseCodecs(o[nt]||"")[0]||{}).type;ft&&yt&&ft.toLowerCase()!==yt.toLowerCase()&&tt.push(`"${this.sourceUpdater_.codecs[nt]}" -> "${o[nt]}"`)}),tt.length){this.excludePlaylist({playlistToExclude:s,error:{message:`Codec switching not supported: ${tt.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return o}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const s=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}excludeUnsupportedVariants_(){const e=this.main().playlists,s=[];Object.keys(e).forEach(a=>{const o=e[a];if(s.indexOf(o.id)!==-1)return;s.push(o.id);const c=codecsForPlaylist(this.main,o),d=[];c.audio&&!muxerSupportsCodec(c.audio)&&!browserSupportsCodec(c.audio)&&d.push(`audio codec ${c.audio}`),c.video&&!muxerSupportsCodec(c.video)&&!browserSupportsCodec(c.video)&&d.push(`video codec ${c.video}`),c.text&&c.text==="stpp.ttml.im1t"&&d.push(`text codec ${c.text}`),d.length&&(o.excludeUntil=1/0,this.logger_(`excluding ${o.id} for unsupported: ${d.join(", ")}`))})}excludeIncompatibleVariants_(e){const s=[],a=this.main().playlists,o=unwrapCodecList(parseCodecs(e)),c=codecCount(o),d=o.video&&parseCodecs(o.video)[0]||null,h=o.audio&&parseCodecs(o.audio)[0]||null;Object.keys(a).forEach(b=>{const tt=a[b];if(s.indexOf(tt.id)!==-1||tt.excludeUntil===1/0)return;s.push(tt.id);const nt=[],ft=codecsForPlaylist(this.mainPlaylistLoader_.main,tt),yt=codecCount(ft);if(!(!ft.audio&&!ft.video)){if(yt!==c&&nt.push(`codec count "${yt}" !== "${c}"`),!this.sourceUpdater_.canChangeType()){const Tt=ft.video&&parseCodecs(ft.video)[0]||null,gt=ft.audio&&parseCodecs(ft.audio)[0]||null;Tt&&d&&Tt.type.toLowerCase()!==d.type.toLowerCase()&&nt.push(`video codec "${Tt.type}" !== "${d.type}"`),gt&&h&&gt.type.toLowerCase()!==h.type.toLowerCase()&&nt.push(`audio codec "${gt.type}" !== "${h.type}"`)}nt.length&&(tt.excludeUntil=1/0,this.logger_(`excluding ${tt.id}: ${nt.join(" && ")}`))}})}updateAdCues_(e){let s=0;const a=this.seekable();a.length&&(s=a.start(0)),updateAdCues(e,this.cueTagsTrack_,s)}goalBufferLength(){const e=this.tech_.currentTime(),s=Config.GOAL_BUFFER_LENGTH,a=Config.GOAL_BUFFER_LENGTH_RATE,o=Math.max(s,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+e*a,o)}bufferLowWaterLine(){const e=this.tech_.currentTime(),s=Config.BUFFER_LOW_WATER_LINE,a=Config.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(s,Config.MAX_BUFFER_LOW_WATER_LINE),c=Math.max(s,Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+e*a,this.bufferBasedABR?c:o)}bufferHighWaterLine(){return Config.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){createMetadataTrackIfNotExists(this.inbandTextTracks_,"com.apple.streaming",this.tech_),addDateRangeMetadata({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,s,a){const o=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();createMetadataTrackIfNotExists(this.inbandTextTracks_,e,this.tech_),addMetadata({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:o,videoDuration:a})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const s of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(s));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const e=this.main();(this.contentSteeringController_.didDASHTagChange(e.uri,e.contentSteering)||(()=>{const o=this.contentSteeringController_.getAvailablePathways(),c=[];for(const d of e.playlists){const h=d.attributes.serviceLocation;if(h&&(c.push(h),!o.has(h)))return!0}return!!(!c.length&&o.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const a=this.main().playlists,o=new Set;let c=!1;Object.keys(a).forEach(d=>{const h=a[d],b=this.pathwayAttribute_(h),tt=b&&e!==b;h.excludeUntil===1/0&&h.lastExcludeReason_==="content-steering"&&!tt&&(delete h.excludeUntil,delete h.lastExcludeReason_,c=!0);const ft=!h.excludeUntil&&h.excludeUntil!==1/0;!o.has(h.id)&&tt&&ft&&(o.add(h.id),h.excludeUntil=1/0,h.lastExcludeReason_="content-steering",this.logger_(`excluding ${h.id} for ${h.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(d=>{const h=this.mediaTypes_[d];if(h.activePlaylistLoader){const b=h.activePlaylistLoader.media_;b&&b.attributes.serviceLocation!==e&&(c=!0)}}),c&&this.changeSegmentPathway_()}handlePathwayClones_(){const s=this.main().playlists,a=this.contentSteeringController_.currentPathwayClones,o=this.contentSteeringController_.nextPathwayClones;if(a&&a.size||o&&o.size){for(const[d,h]of a.entries())o.get(d)||(this.mainPlaylistLoader_.updateOrDeleteClone(h),this.contentSteeringController_.excludePathway(d));for(const[d,h]of o.entries()){const b=a.get(d);if(!b){s.filter(nt=>nt.attributes["PATHWAY-ID"]===h["BASE-ID"]).forEach(nt=>{this.mainPlaylistLoader_.addClonePathway(h,nt)}),this.contentSteeringController_.addAvailablePathway(d);continue}this.equalPathwayClones_(b,h)||(this.mainPlaylistLoader_.updateOrDeleteClone(h,!0),this.contentSteeringController_.addAvailablePathway(d))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...o])))}}equalPathwayClones_(e,s){if(e["BASE-ID"]!==s["BASE-ID"]||e.ID!==s.ID||e["URI-REPLACEMENT"].HOST!==s["URI-REPLACEMENT"].HOST)return!1;const a=e["URI-REPLACEMENT"].PARAMS,o=s["URI-REPLACEMENT"].PARAMS;for(const c in a)if(a[c]!==o[c])return!1;for(const c in o)if(a[c]!==o[c])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const s="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(a=>{const o=this.mainPlaylistLoader_.getKeyIdSet(a);!o||!o.size||o.forEach(c=>{const d="usable",h=this.keyStatusMap_.has(c)&&this.keyStatusMap_.get(c)===d,b=a.lastExcludeReason_===s&&a.excludeUntil===1/0;h?h&&b&&(delete a.excludeUntil,delete a.lastExcludeReason_,this.logger_(`enabling playlist ${a.id} because key ID ${c} is ${d}`)):(a.excludeUntil!==1/0&&a.lastExcludeReason_!==s&&(a.excludeUntil=1/0,a.lastExcludeReason_=s,this.logger_(`excluding playlist ${a.id} because the key ID ${c} doesn't exist in the keyStatusMap or is not ${d}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(a=>{const o=a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height<720,c=a.excludeUntil===1/0&&a.lastExcludeReason_===s;o&&c&&(delete a.excludeUntil,videojs.log.warn(`enabling non-HD playlist ${a.id} because all playlists were excluded due to ${s} key IDs`))})}addKeyStatus_(e,s){const c=(typeof e=="string"?e:bufferToHexString(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${s}' with key ID ${c} added to the keyStatusMap`),this.keyStatusMap_.set(c,s)}updatePlaylistByKeyStatus(e,s){this.addKeyStatus_(e,s),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const enableFunction=(i,e,s)=>a=>{const o=i.main.playlists[e],c=isIncompatible(o),d=isEnabled(o);return typeof a>"u"?d:(a?delete o.disabled:o.disabled=!0,a!==d&&!c&&(s(o),a?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),a)};class Representation{constructor(e,s,a){const{playlistController_:o}=e,c=o.fastQualityChange_.bind(o);if(s.attributes){const d=s.attributes.RESOLUTION;this.width=d&&d.width,this.height=d&&d.height,this.bandwidth=s.attributes.BANDWIDTH,this.frameRate=s.attributes["FRAME-RATE"]}this.codecs=codecsForPlaylist(o.main(),s),this.playlist=s,this.id=a,this.enabled=enableFunction(e.playlists,s.id,c)}}const renditionSelectionMixin=function(i){i.representations=()=>{const e=i.playlistController_.main(),s=isAudioOnly(e)?i.playlistController_.getAudioTrackPlaylists_():e.playlists;return s?s.filter(a=>!isIncompatible(a)).map((a,o)=>new Representation(i,a,a.id)):[]}},timerCancelEvents=["seeking","seeked","pause","playing","error"];class PlaybackWatcher{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=logger("PlaybackWatcher"),this.logger_("initialize");const s=()=>this.monitorCurrentTime_(),a=()=>this.monitorCurrentTime_(),o=()=>this.techWaiting_(),c=()=>this.resetTimeUpdate_(),d=this.playlistController_,h=["main","subtitle","audio"],b={};h.forEach(nt=>{b[nt]={reset:()=>this.resetSegmentDownloads_(nt),updateend:()=>this.checkSegmentDownloads_(nt)},d[`${nt}SegmentLoader_`].on("appendsdone",b[nt].updateend),d[`${nt}SegmentLoader_`].on("playlistupdate",b[nt].reset),this.tech_.on(["seeked","seeking"],b[nt].reset)});const tt=nt=>{["main","audio"].forEach(ft=>{d[`${ft}SegmentLoader_`][nt]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),tt("off"))},this.clearSeekingAppendCheck_=()=>tt("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),tt("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",o),this.tech_.on(timerCancelEvents,c),this.tech_.on("canplay",a),this.tech_.one("play",s),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",o),this.tech_.off(timerCancelEvents,c),this.tech_.off("canplay",a),this.tech_.off("play",s),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),h.forEach(nt=>{d[`${nt}SegmentLoader_`].off("appendsdone",b[nt].updateend),d[`${nt}SegmentLoader_`].off("playlistupdate",b[nt].reset),this.tech_.off(["seeked","seeking"],b[nt].reset)}),this.checkCurrentTimeTimeout_&&window$1$1.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window$1$1.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window$1$1.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const s=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=s.buffered_()}checkSegmentDownloads_(e){const s=this.playlistController_,a=s[`${e}SegmentLoader_`],o=a.buffered_(),c=isRangeDifferent(this[`${e}Buffered_`],o);if(this[`${e}Buffered_`]=o,c){this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:a.playlist_&&a.playlist_.id,buffered:timeRangesToArray(o)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&s.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),s=this.tech_.buffered();if(this.lastRecordedTime===e&&(!s.length||e+SAFE_TIME_DELTA>=s.end(s.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const s=this.seekable(),a=this.tech_.currentTime(),o=this.afterSeekableWindow_(s,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let c;if(o&&(c=s.end(s.length-1)),this.beforeSeekableWindow_(s,a)){const gt=s.start(0);c=gt+(gt===s.end(0)?0:SAFE_TIME_DELTA)}if(typeof c<"u")return this.logger_(`Trying to seek outside of seekable at time ${a} with seekable range ${printableRange(s)}. Seeking to ${c}.`),this.tech_.setCurrentTime(c),!0;const d=this.playlistController_.sourceUpdater_,h=this.tech_.buffered(),b=d.audioBuffer?d.audioBuffered():null,tt=d.videoBuffer?d.videoBuffered():null,nt=this.media(),ft=nt.partTargetDuration?nt.partTargetDuration:(nt.targetDuration-TIME_FUDGE_FACTOR)*2,yt=[b,tt];for(let gt=0;gt<yt.length;gt++){if(!yt[gt])continue;if(timeAheadOf(yt[gt],a)<ft)return!1}const Tt=findNextRange(h,a);return Tt.length===0?!1:(c=Tt.start(0)+SAFE_TIME_DELTA,this.logger_(`Buffered region starts (${Tt.start(0)})  just beyond seek point (${a}). Seeking to ${c}.`),this.tech_.setCurrentTime(c),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),s=this.tech_.buffered(),a=findRange(s,e);if(a.length&&e+3<=a.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${a.start(0)} -> ${a.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),s=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,s)){const h=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${s}. Seeking to live point (seekable end) ${h}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(h),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const a=this.tech_.vhs.playlistController_.sourceUpdater_,o=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:s}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const d=findNextRange(o,s);return d.length>0?(this.logger_(`Stopped at ${s} and seeking to ${d.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(s),!0):!1}afterSeekableWindow_(e,s,a,o=!1){if(!e.length)return!1;let c=e.end(e.length-1)+SAFE_TIME_DELTA;const d=!a.endList,h=typeof a.partTargetDuration=="number";return d&&(h||o)&&(c=e.end(e.length-1)+a.targetDuration*3),s>c}beforeSeekableWindow_(e,s){return!!(e.length&&e.start(0)>0&&s<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:s,currentTime:a}){if(!e)return;let o;if(e.length&&s.length){const c=findRange(e,a-3),d=findRange(e,a),h=findRange(s,a);h.length&&!d.length&&c.length&&(o={start:c.end(0),end:h.end(0)})}else findNextRange(e,a).length||(o=this.gapFromVideoUnderflow_(e,a));return o?(this.logger_(`Encountered a gap in video from ${o.start} to ${o.end}. Seeking to current time ${a}`),!0):!1}skipTheGap_(e){const s=this.tech_.buffered(),a=this.tech_.currentTime(),o=findNextRange(s,a);this.resetTimeUpdate_(),!(o.length===0||a!==e)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",e,"nextRange start:",o.start(0)),this.tech_.setCurrentTime(o.start(0)+TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,s){const a=findGaps(e);for(let o=0;o<a.length;o++){const c=a.start(o),d=a.end(o);if(s-c<4&&s-c>2)return{start:c,end:d}}return null}}const defaultOptions={errorInterval:30,getSource(i){const s=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return i(s)}},initPlugin=function(i,e){let s=0,a=0;const o=merge(defaultOptions,e);i.ready(()=>{i.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const c=function(){a&&i.currentTime(a)},d=function(nt){nt!=null&&(a=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",c),i.src(nt),i.trigger({type:"usage",name:"vhs-error-reload"}),i.play())},h=function(){if(Date.now()-s<o.errorInterval*1e3){i.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!o.getSource||typeof o.getSource!="function"){videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return s=Date.now(),o.getSource.call(i,d)},b=function(){i.off("loadedmetadata",c),i.off("error",h),i.off("dispose",b)},tt=function(nt){b(),initPlugin(i,nt)};i.on("error",h),i.on("dispose",b),i.reloadSourceOnError=tt},reloadSourceOnError=function(i){initPlugin(this,i)};var version$4="3.12.1",version$3="7.0.3",version$2="1.3.0",version$1="7.1.0",version="4.0.1";const Vhs={PlaylistLoader,Playlist,utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,lastBandwidthSelector,movingAverageBandwidthSelector,comparePlaylistBandwidth,comparePlaylistResolution,xhr:xhrFactory()};Object.keys(Config).forEach(i=>{Object.defineProperty(Vhs,i,{get(){return videojs.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),Config[i]},set(e){if(videojs.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){videojs.log.warn(`value of Vhs.${i} must be greater than or equal to 0`);return}Config[i]=e}})});const LOCAL_STORAGE_KEY="videojs-vhs",handleVhsMediaChange=function(i,e){const s=e.media();let a=-1;for(let o=0;o<i.length;o++)if(i[o].id===s.id){a=o;break}i.selectedIndex_=a,i.trigger({selectedIndex:a,type:"change"})},handleVhsLoadedMetadata=function(i,e){e.representations().forEach(s=>{i.addQualityLevel(s)}),handleVhsMediaChange(i,e.playlists)};Vhs.canPlaySource=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const emeKeySystems=(i,e,s)=>{if(!i)return i;let a={};e&&e.attributes&&e.attributes.CODECS&&(a=unwrapCodecList(parseCodecs(e.attributes.CODECS))),s&&s.attributes&&s.attributes.CODECS&&(a.audio=s.attributes.CODECS);const o=getMimeForCodec(a.video),c=getMimeForCodec(a.audio),d={};for(const h in i)d[h]={},c&&(d[h].audioContentType=c),o&&(d[h].videoContentType=o),e.contentProtection&&e.contentProtection[h]&&e.contentProtection[h].pssh&&(d[h].pssh=e.contentProtection[h].pssh),typeof i[h]=="string"&&(d[h].url=i[h]);return merge(i,d)},getAllPsshKeySystemsOptions=(i,e)=>i.reduce((s,a)=>{if(!a.contentProtection)return s;const o=e.reduce((c,d)=>{const h=a.contentProtection[d];return h&&h.pssh&&(c[d]={pssh:h.pssh}),c},{});return Object.keys(o).length&&s.push(o),s},[]),waitForKeySessionCreation=({player:i,sourceKeySystems:e,audioMedia:s,mainPlaylists:a})=>{if(!i.eme.initializeMediaKeys)return Promise.resolve();const o=s?a.concat([s]):a,c=getAllPsshKeySystemsOptions(o,Object.keys(e)),d=[],h=[];return c.forEach(b=>{h.push(new Promise((tt,nt)=>{i.tech_.one("keysessioncreated",tt)})),d.push(new Promise((tt,nt)=>{i.eme.initializeMediaKeys({keySystems:b},ft=>{if(ft){nt(ft);return}tt()})}))}),Promise.race([Promise.all(d),Promise.race(h)])},setupEmeOptions=({player:i,sourceKeySystems:e,media:s,audioMedia:a})=>{const o=emeKeySystems(e,s,a);return o?(i.currentSource().keySystems=o,o&&!i.eme?(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},getVhsLocalStorage=()=>{if(!window$1$1.localStorage)return null;const i=window$1$1.localStorage.getItem(LOCAL_STORAGE_KEY);if(!i)return null;try{return JSON.parse(i)}catch{return null}},updateVhsLocalStorage=i=>{if(!window$1$1.localStorage)return!1;let e=getVhsLocalStorage();e=e?merge(e,i):i;try{window$1$1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(e))}catch{return!1}return e},expandDataUri=i=>i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,addOnRequestHook=(i,e)=>{i._requestCallbackSet||(i._requestCallbackSet=new Set),i._requestCallbackSet.add(e)},addOnResponseHook=(i,e)=>{i._responseCallbackSet||(i._responseCallbackSet=new Set),i._responseCallbackSet.add(e)},removeOnRequestHook=(i,e)=>{i._requestCallbackSet&&(i._requestCallbackSet.delete(e),i._requestCallbackSet.size||delete i._requestCallbackSet)},removeOnResponseHook=(i,e)=>{i._responseCallbackSet&&(i._responseCallbackSet.delete(e),i._responseCallbackSet.size||delete i._responseCallbackSet)};Vhs.supportsNativeHls=function(){if(!document$2||!document$2.createElement)return!1;const i=document$2.createElement("video");return videojs.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(s){return/maybe|probably/i.test(i.canPlayType(s))}):!1}();Vhs.supportsNativeDash=function(){return!document$2||!document$2.createElement||!videojs.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(document$2.createElement("video").canPlayType("application/dash+xml"))}();Vhs.supportsTypeNatively=i=>i==="hls"?Vhs.supportsNativeHls:i==="dash"?Vhs.supportsNativeDash:!1;Vhs.isSupported=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Vhs.xhr.onRequest=function(i){addOnRequestHook(Vhs.xhr,i)};Vhs.xhr.onResponse=function(i){addOnResponseHook(Vhs.xhr,i)};Vhs.xhr.offRequest=function(i){removeOnRequestHook(Vhs.xhr,i)};Vhs.xhr.offResponse=function(i){removeOnResponseHook(Vhs.xhr,i)};const Component=videojs.getComponent("Component");class VhsHandler extends Component{constructor(e,s,a){if(super(s,a.vhs),typeof a.initialBandwidth=="number"&&(this.options_.bandwidth=a.initialBandwidth),this.logger_=logger("VhsHandler"),s.options_&&s.options_.playerId){const o=videojs.getPlayer(s.options_.playerId);this.player_=o}if(this.tech_=s,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&s.overrideNativeAudioTracks&&s.overrideNativeVideoTracks)s.overrideNativeAudioTracks(!0),s.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(s.featuresNativeVideoTracks||s.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document$2,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],o=>{const c=document$2.fullscreenElement||document$2.webkitFullscreenElement||document$2.mozFullScreenElement||document$2.msFullscreenElement;c&&c.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=merge(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const a=getVhsLocalStorage();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Config.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(a=>{typeof this.source_[a]<"u"&&(this.options_[a]=this.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const s=this.options_.customPixelRatio;typeof s=="number"&&s>=0&&(this.customPixelRatio=s)}setOptions(e={}){this.setOptions_(e)}src(e,s){if(!e)return;this.setOptions_(),this.options_.src=expandDataUri(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Vhs,this.options_.sourceType=simpleTypeFromSourceType(s),this.options_.seekTo=c=>{this.tech_.setCurrentTime(c)},this.playlistController_=new PlaylistController(this.options_);const a=merge({liveRangeSafeTimeDelta:SAFE_TIME_DELTA},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new PlaybackWatcher(a),this.playlistController_.on("error",()=>{const c=videojs.players[this.tech_.options_.playerId];let d=this.playlistController_.error;typeof d=="object"&&!d.code?d.code=3:typeof d=="string"&&(d={message:d,code:3}),c.error(d)});const o=this.options_.bufferBasedABR?Vhs.movingAverageBandwidthSelector(.55):Vhs.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):o.bind(this),this.playlistController_.selectInitialPlaylist=Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(c){this.playlistController_.selectPlaylist=c.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(c){this.playlistController_.mainSegmentLoader_.throughput.rate=c,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let c=this.playlistController_.mainSegmentLoader_.bandwidth;const d=window$1$1.navigator.connection||window$1$1.navigator.mozConnection||window$1$1.navigator.webkitConnection,h=1e7;if(this.options_.useNetworkInformationApi&&d){const b=d.downlink*1e3*1e3;b>=h&&c>=h?c=Math.max(c,b):c=b}return c},set(c){this.playlistController_.mainSegmentLoader_.bandwidth=c,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const c=1/(this.bandwidth||1);let d;return this.throughput>0?d=1/this.throughput:d=0,Math.floor(1/(c+d))},set(){videojs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>timeRangesToArray(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>timeRangesToArray(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&updateVhsLocalStorage({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{renditionSelectionMixin(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window$1$1.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),waitForKeySessionCreation({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(s=>{this.logger_("error while creating EME key session",s),this.player_.error({message:"Failed to initialize media keys for EME",code:3,metadata:{errorType:videojs.Error.EMEKeySessionCreationError}})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=setupEmeOptions({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",a=>{this.playlistController_.updatePlaylistByKeyStatus(a.keyId,a.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!s){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=videojs.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{handleVhsLoadedMetadata(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{handleVhsMediaChange(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":version$4,"mux.js":version$3,"mpd-parser":version$2,"m3u8-parser":version$1,"aes-decrypter":version}}version(){return this.constructor.version()}canChangeType(){return SourceUpdater.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window$1$1.URL.revokeObjectURL&&(window$1$1.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,s){return getProgramTime({playlist:this.playlistController_.media(),time:e,callback:s})}seekToProgramTime(e,s,a=!0,o=2){return seekToProgramTime({programTime:e,playlist:this.playlistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})}setupXhrHooks_(){this.xhr.onRequest=e=>{addOnRequestHook(this.xhr,e)},this.xhr.onResponse=e=>{addOnResponseHook(this.xhr,e)},this.xhr.offRequest=e=>{removeOnRequestHook(this.xhr,e)},this.xhr.offResponse=e=>{removeOnResponseHook(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const VhsSourceHandler={name:"videojs-http-streaming",VERSION:version$4,canHandleSource(i,e={}){const s=merge(videojs.options,e);return VhsSourceHandler.canPlayType(i.type,s)},handleSource(i,e,s={}){const a=merge(videojs.options,s);return e.vhs=new VhsHandler(i,e,a),e.vhs.xhr=xhrFactory(),e.vhs.setupXhrHooks_(),e.vhs.src(i.src,i.type),e.vhs},canPlayType(i,e){const s=simpleTypeFromSourceType(i);if(!s)return"";const a=VhsSourceHandler.getOverrideNative(e);return!Vhs.supportsTypeNatively(s)||a?"maybe":""},getOverrideNative(i={}){const{vhs:e={}}=i,s=!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS),{overrideNative:a=s}=e;return a}},supportsNativeMediaSources=()=>browserSupportsCodec("avc1.4d400d,mp4a.40.2");supportsNativeMediaSources()&&videojs.getTech("Html5").registerSourceHandler(VhsSourceHandler,0);videojs.VhsHandler=VhsHandler;videojs.VhsSourceHandler=VhsSourceHandler;videojs.Vhs=Vhs;videojs.use||videojs.registerComponent("Vhs",Vhs);videojs.options.vhs=videojs.options.vhs||{};(!videojs.getPlugin||!videojs.getPlugin("reloadSourceOnError"))&&videojs.registerPlugin("reloadSourceOnError",reloadSourceOnError);const video_es=Object.freeze(Object.defineProperty({__proto__:null,default:videojs},Symbol.toStringTag,{value:"Module"}));var Youtube={exports:{}};const require$$0=getAugmentedNamespace(video_es);(function(i,e){(function(s,a){{var o=require$$0;i.exports=a(o.default||o)}})(commonjsGlobal,function(s){var a=s.browser.IS_IOS||s.browser.IS_NATIVE_ANDROID,o=s.getTech("Tech");class c extends o{constructor(nt,ft){super(nt,ft),this.setPoster(nt.poster),this.setSrc(this.options_.source,!0),this.setTimeout((function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",a&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),c.isApiReady?this.initYTPlayer():c.apiReadyQueue.push(this))}).bind(this))}dispose(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var nt=c.apiReadyQueue.indexOf(this);nt!==-1&&c.apiReadyQueue.splice(nt,1)}this.ytPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",""),this.el_.parentNode.removeChild(this.el_),o.prototype.dispose.call(this)}createEl(){var nt=document.createElement("div");nt.setAttribute("id",this.options_.techId),nt.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute"),nt.setAttribute("class","vjs-tech");var ft=document.createElement("div");if(ft.appendChild(nt),!a&&!this.options_.ytControls){var yt=document.createElement("div");yt.setAttribute("class","vjs-iframe-blocker"),yt.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),yt.onclick=(function(){this.pause()}).bind(this),ft.appendChild(yt)}return ft}initYTPlayer(){var nt={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};if(typeof this.options_.autohide<"u"&&(nt.autohide=this.options_.autohide),typeof this.options_.cc_load_policy<"u"&&(nt.cc_load_policy=this.options_.cc_load_policy),typeof this.options_.ytControls<"u"&&(nt.controls=this.options_.ytControls),typeof this.options_.disablekb<"u"&&(nt.disablekb=this.options_.disablekb),typeof this.options_.color<"u"&&(nt.color=this.options_.color),nt.controls?typeof this.options_.fs<"u"&&(nt.fs=this.options_.fs):nt.fs=0,this.options_.source.src.indexOf("end=")!==-1){var ft=this.options_.source.src.match(/end=([0-9]*)/);this.options_.end=parseInt(ft[1])}if(typeof this.options_.end<"u"&&(nt.end=this.options_.end),typeof this.options_.hl<"u"?nt.hl=this.options_.hl:typeof this.options_.language<"u"&&(nt.hl=this.options_.language.substr(0,2)),typeof this.options_.iv_load_policy<"u"&&(nt.iv_load_policy=this.options_.iv_load_policy),typeof this.options_.list<"u"?nt.list=this.options_.list:this.url&&typeof this.url.listId<"u"&&(nt.list=this.url.listId),typeof this.options_.listType<"u"&&(nt.listType=this.options_.listType),typeof this.options_.modestbranding<"u"&&(nt.modestbranding=this.options_.modestbranding),typeof this.options_.playlist<"u"&&(nt.playlist=this.options_.playlist),typeof this.options_.playsinline<"u"&&(nt.playsinline=this.options_.playsinline),typeof this.options_.rel<"u"&&(nt.rel=this.options_.rel),typeof this.options_.showinfo<"u"&&(nt.showinfo=this.options_.showinfo),this.options_.source.src.indexOf("start=")!==-1){var yt=this.options_.source.src.match(/start=([0-9]*)/);this.options_.start=parseInt(yt[1])}if(typeof this.options_.start<"u"&&(nt.start=this.options_.start),typeof this.options_.theme<"u"&&(nt.theme=this.options_.theme),typeof this.options_.customVars<"u"){var Tt=this.options_.customVars;Object.keys(Tt).forEach(function(St){nt[St]=Tt[St]})}this.activeVideoId=this.url?this.url.videoId:null,this.activeList=nt.list;var gt={videoId:this.activeVideoId,playerVars:nt,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};typeof this.options_.enablePrivacyEnhancedMode<"u"&&this.options_.enablePrivacyEnhancedMode&&(gt.host="https://www.youtube-nocookie.com"),this.ytPlayer=new YT.Player(this.options_.techId,gt)}onPlayerReady(){this.options_.muted&&this.ytPlayer.mute();var nt=this.ytPlayer.getAvailablePlaybackRates();nt.length>1&&(this.featuresPlaybackRate=!0),this.playerReady_=!0,this.triggerReady(),this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)}onPlayerPlaybackQualityChange(){}onPlayerPlaybackRateChange(){this.trigger("ratechange")}onPlayerStateChange(nt){var ft=nt.data;if(!(ft===this.lastState||this.errorNumber))switch(this.lastState=ft,ft){case-1:this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("durationchange"),this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate"),this.trigger("durationchange"),this.trigger("playing"),this.trigger("play"),this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay"),this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting");break}}onPlayerVolumeChange(){this.trigger("volumechange")}onPlayerError(nt){this.errorNumber=nt.data,this.trigger("pause"),this.trigger("error")}error(){var nt=1e3+this.errorNumber;switch(this.errorNumber){case 5:return{code:nt,message:"Error while trying to play the video"};case 2:case 100:return{code:nt,message:"Unable to find the video"};case 101:case 150:return{code:nt,message:"Playback on other Websites has been disabled by the video owner."}}return{code:nt,message:"YouTube unknown error ("+this.errorNumber+")"}}loadVideoById_(nt){var ft={videoId:nt};this.options_.start&&(ft.startSeconds=this.options_.start),this.options_.end&&(ft.endSeconds=this.options_.end),this.ytPlayer.loadVideoById(ft)}cueVideoById_(nt){var ft={videoId:nt};this.options_.start&&(ft.startSeconds=this.options_.start),this.options_.end&&(ft.endSeconds=this.options_.end),this.ytPlayer.cueVideoById(ft)}src(nt){return nt&&this.setSrc({src:nt}),this.source}poster(){return a?null:this.poster_}setPoster(nt){this.poster_=nt}setSrc(nt){!nt||!nt.src||(delete this.errorNumber,this.source=nt,this.url=c.parseUrl(nt.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!a?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))}autoplay(){return this.options_.autoplay}setAutoplay(nt){this.options_.autoplay=nt}loop(){return this.options_.loop}setLoop(nt){this.options_.loop=nt}play(){!this.url||!this.url.videoId||(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))}pause(){this.ytPlayer&&this.ytPlayer.pauseVideo()}paused(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0}currentTime(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0}setCurrentTime(nt){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime()),this.isSeeking||(this.wasPausedBeforeSeek=this.paused()),this.ytPlayer.seekTo(nt,!0),this.trigger("timeupdate"),this.trigger("seeking"),this.isSeeking=!0,this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==nt&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval((function(){this.lastState!==YT.PlayerState.PAUSED||!this.isSeeking?clearInterval(this.checkSeekedInPauseInterval):this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked())}).bind(this),250))}seeking(){return this.isSeeking}seekable(){return this.ytPlayer?s.createTimeRange(0,this.ytPlayer.getDuration()):s.createTimeRange()}onSeeked(){clearInterval(this.checkSeekedInPauseInterval),this.isSeeking=!1,this.wasPausedBeforeSeek&&this.pause(),this.trigger("seeked")}playbackRate(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1}setPlaybackRate(nt){this.ytPlayer&&this.ytPlayer.setPlaybackRate(nt)}duration(){return this.ytPlayer?this.ytPlayer.getDuration():0}currentSrc(){return this.source&&this.source.src}ended(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1}volume(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1}setVolume(nt){this.ytPlayer&&this.ytPlayer.setVolume(nt*100)}muted(){return this.ytPlayer?this.ytPlayer.isMuted():!1}setMuted(nt){if(this.ytPlayer)this.muted(!0);else return;nt?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50)}buffered(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return s.createTimeRange();var nt=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return s.createTimeRange(0,nt)}preload(){}load(){}reset(){}networkState(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 3:return 2;default:return 1}}readyState(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 5:return 1;case 3:return 2;default:return 4}}supportsFullScreen(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}checkHighResPoster(){var nt="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var ft=new Image;ft.onload=(function(){if("naturalHeight"in ft){if(ft.naturalHeight<=90||ft.naturalWidth<=120)return}else if(ft.height<=90||ft.width<=120)return;this.poster_=nt,this.trigger("posterchange")}).bind(this),ft.onerror=function(){},ft.src=nt}catch{}}}c.isSupported=function(){return!0},c.canPlaySource=function(tt){return c.canPlayType(tt.type)},c.canPlayType=function(tt){return tt==="video/youtube"},c.parseUrl=function(tt){var nt={videoId:null},ft=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,yt=tt.match(ft);yt&&yt[2].length===11&&(nt.videoId=yt[2]);var Tt=/[?&]list=([^#\&\?]+)/;return yt=tt.match(Tt),yt&&yt[1]&&(nt.listId=yt[1]),nt};function d(){YT.ready(function(){c.isApiReady=!0;for(var tt=0;tt<c.apiReadyQueue.length;++tt)c.apiReadyQueue[tt].initYTPlayer()})}function h(tt,nt){var ft=!1,yt=document.createElement("script"),Tt=document.getElementsByTagName("script")[0];Tt&&(Tt.parentNode.insertBefore(yt,Tt),yt.onload=function(){ft||(ft=!0,nt())},yt.onreadystatechange=function(){!ft&&(this.readyState==="complete"||this.readyState==="loaded")&&(ft=!0,nt())},yt.src=tt)}function b(){var tt=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }",nt=document.head||document.getElementsByTagName("head")[0],ft=document.createElement("style");ft.type="text/css",ft.styleSheet?ft.styleSheet.cssText=tt:ft.appendChild(document.createTextNode(tt)),nt.appendChild(ft)}c.apiReadyQueue=[],typeof document<"u"&&(h("https://www.youtube.com/iframe_api",d),b()),typeof s.registerTech<"u"?s.registerTech("Youtube",c):s.registerComponent("Youtube",c)})})(Youtube);const MenuElements=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),VideoPlayerContainer=pt.div`
  position: relative;
  height: 650px;

  @media (max-width: 1620px) {
    height: 561px;
  }

  @media (max-width: 1220px) {
    height: 477px;
  }

  @media (max-width: 1025px) {
    height: 337px;
  }

  @media (max-width: 769px) {
    height: 252px;
  }

  @media (max-width: 481px) {
    height: 168px;
  }

  @media (max-width: 361px) {
    height: 157px;
  }
`,VideoElement=pt.video`
  width: 1158px;
  height: 650px;

  @media (max-width: 1620px) {
    width: 1000px;
    height: 561px;
  }

  @media (max-width: 1220px) {
    width: 850px;
    height: 477px;
  }

  @media (max-width: 1025px) {
    width: 600px;
    height: 337px;
  }

  @media (max-width: 769px) {
    width: 450px;
    height: 252px;
  }

  @media (max-width: 481px) {
    width: 300px;
    height: 168px;
  }

  @media (max-width: 361px) {
    width: 280px;
    height: 157px;
  }
`,getOverlayStyle=i=>i<=361?{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"157px"}:i<=481?{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"168px"}:i<=769?{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"252px"}:i<=1025?{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"337px"}:i<=1220?{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"477px"}:i<=1620?{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"561px"}:{position:"absolute",top:0,left:0,width:"100%",justifyContent:"center",alignItems:"center",fontWeight:"bold",zIndex:11,backgroundColor:"black",display:"none",height:"650px"},getControlBarHeight=i=>i<=361||i<=481||i<=769?"55px":(i<=1025||i<=1220||i<=1620,"56px");function VideoPlayer(i){const e=reactExports.useRef(null),s=reactExports.useRef(null),[a,o]=reactExports.useState(!1),c=getControlBarHeight(window.innerWidth),[d,h]=reactExports.useState({height:"100%",pointerEvents:"none",backgroundColor:"rgba(255, 165, 0, 0)"}),b=()=>{console.log("Initializing video.js player"),s.current=videojs(e.current,{...i.options,poster:i.activeThumbnail}),s.current.on("play",()=>{h({height:`calc(100% - ${c}px)`,pointerEvents:"auto",backgroundColor:"rgba(255, 165, 0, 0)"}),tt()}),s.current.on("ended",()=>{Tt()}),nt(!i.firstTime)},tt=()=>{const wt=e.current;wt.requestFullscreen?wt.requestFullscreen():wt.mozRequestFullScreen?wt.mozRequestFullScreen():wt.webkitRequestFullscreen?wt.webkitRequestFullscreen():wt.msRequestFullscreen&&wt.msRequestFullscreen()},nt=wt=>{s.current&&s.current.autoplay(wt)},ft=()=>{s.current&&(console.log("Updating video source"),o(!1),s.current.src(i.options.sources),nt(!i.firstTime))},yt=()=>{s.current&&(console.log("Disposing video.js player"),s.current.dispose(),s.current=null)},Tt=()=>{s.current&&(console.log("Resetting video poster to thumbnail"),s.current.poster(i.activeThumbnail),o(!0))};reactExports.useEffect(()=>(b(),()=>{yt()}),[]),reactExports.useEffect(()=>{ft()},[i.options.sources]),reactExports.useEffect(()=>{s.current&&(console.log("Updating video poster to: "+i.activeThumbnail),s.current.poster(i.activeThumbnail))},[i.activeThumbnail]);const gt=window.innerWidth,St=getOverlayStyle(gt);return jsxRuntimeExports.jsx("div",{className:"video-window-videos",children:jsxRuntimeExports.jsxs(VideoPlayerContainer,{"data-vjs-player":!0,children:[jsxRuntimeExports.jsx("div",{style:St}),jsxRuntimeExports.jsx(VideoElement,{ref:e,className:"video-js"}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"0",height:c,width:"100%",backgroundColor:"black",opacity:"0"}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"0",height:c,width:"100%",right:"0",backgroundColor:"black",opacity:"0"}})]})})}function WatchFilm(){const[i,e]=reactExports.useState(""),[s,a]=reactExports.useState(!1),[o,c]=reactExports.useState(""),[d,h]=reactExports.useState(!1);function b(){const Tt=`vnd.youtube://${"https://www.youtube.com/watch?v=lfOxA7NPJDg".split("watch?v=")[1]}`;window.location=Tt}const tt=yt=>{yt.preventDefault(),console.log("inside handleSubmit"),fetch("https://api.fairyfolkthefilm.com/passwords/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:i})}).then(gt=>gt.ok?gt.json():gt.json().then(St=>{throw new Error(St.message||"Unknown Error")})).then(gt=>{console.log(gt.message),a(!0)}).catch(gt=>{c(gt.message),console.log("This is the error.message content:",gt.message),h(!0)})};function nt(){h(yt=>!yt),e("")}const ft=React$1.useMemo(()=>({techOrder:["youtube"],autoplay:!0,controls:!0,sources:[{src:"https://www.youtube.com/watch?v=lfOxA7NPJDg",type:"video/youtube"}]}),[]);return jsxRuntimeExports.jsxs("div",{className:"fairyfolkthefilm",children:[jsxRuntimeExports.jsxs("div",{className:"all-page-headings",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin",children:"WATCH THE "})," ",jsxRuntimeExports.jsx("h1",{className:"heading-thick folk-text",children:"FILM"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-fairyfolk"})]}),jsxRuntimeExports.jsxs("div",{className:`casting ${s?"casting-show":""}`,children:[jsxRuntimeExports.jsx("p",{className:"cast-instruct",children:"Click here -         - to watch the film on your TV screen. Once the YouTube app launches, you'll find the same icon on the top-right of the YouTube video - click it. If it doesn't work, ensure your phone and your TV have the YouTube app installed, and are on the same WiFi network."}),jsxRuntimeExports.jsx("img",{src:cast,className:`cast-icon ${s&&"cast-icon-active"}`,style:{cursor:s?"pointer":"none"},onClick:s?b:""})]}),s&&jsxRuntimeExports.jsx(VideoPlayer,{options:ft,firstTime:!0}),jsxRuntimeExports.jsxs("div",{className:"video-window-fairyfolk",style:{display:s?"none":"flex"},children:[jsxRuntimeExports.jsx("div",{className:"no-app-notice",style:{display:d?"flex":"none",marginTop:"15px"},onClick:nt,children:jsxRuntimeExports.jsx("h1",{children:o})}),jsxRuntimeExports.jsxs("div",{className:"enter-pass",style:{filter:d?"blur(3px)":""},children:["ENTER PASSWORD",jsxRuntimeExports.jsxs("form",{onSubmit:tt,className:"submit-button-div",children:[jsxRuntimeExports.jsx("input",{type:"password",className:"password",value:i,onChange:yt=>e(yt.target.value)}),jsxRuntimeExports.jsx("button",{type:"submit",className:"pass-submit-button button"}),jsxRuntimeExports.jsx("p",{className:"pass-submit-text oswald",children:"SUBMIT"})]})]})]})]})}function About(){return jsxRuntimeExports.jsxs("div",{className:"about",children:[jsxRuntimeExports.jsxs("div",{className:"all-page-headings",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin",children:"ABOUT"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-about"})]}),jsxRuntimeExports.jsx("p",{className:"logline",children:"Thorny questions of love and sexuality take centre stage in this magical realist drama in which a genderless woodland being crashes into the lives of a jaded couple"}),jsxRuntimeExports.jsxs("p",{className:"main-text-about",children:['"Fairy Folk" presents a captivating modern fairytale where Ritika, played by Rasika Dugal ',jsxRuntimeExports.jsx("i",{children:"(Mirzapur, Delhi Crime, Out of Love)"})," and Mohit, played by Mukul Chadda ",jsxRuntimeExports.jsx("i",{children:"(The Office, Sherni, Sunflower)"}),", isolated in a remote location, encounter a mysterious being capable of profound transformations. This being forms unique bonds with those who show it kindness, initiating a series of experiences that complicate their relationship dynamics. Directed by Karan Gour, the film eschews traditional dialogues, allowing the narrative to unfold through spontaneous interactions among the cast. This improvisational approach enriches the film with authenticity and dynamic interactions, effectively exploring themes of identity, connection, and the complexities of human relationships. ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'Critically acclaimed for its innovative storytelling, "Fairy Folk" blends fantasy elements with a deep examination of personal and relational evolution. According to NDTV, the absence of scripted dialogues adds a layer of realism that heightens the emotional impact, adding it’s “unlike anything you would’ve seen before”. Similarly, Film Companion praises the film as "playful and poignant," particularly highlighting its fresh perspective on personal relationships. This combination of fantasy and emotional depth offers audiences a unique and thought-provoking cinematic experience, marking it as a significant work in modern filmmaking.']}),jsxRuntimeExports.jsxs("p",{className:"credits",children:[jsxRuntimeExports.jsxs("p",{className:"credits-large",children:["empatheia films bala wala cinema awe studios timbuktu triforce cinema & entertainment accord equips"," "]})," ",jsxRuntimeExports.jsx("p",{className:"credits-small",children:"a film by "})," ",jsxRuntimeExports.jsx("p",{className:"credits-large",children:"karan gour "})," ",jsxRuntimeExports.jsx("p",{className:"credits-small",children:"produced by "}),jsxRuntimeExports.jsxs("p",{className:"credits-large",children:["annukampa harsh karan gour siddharth bhatia tejash shah"," "]}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"director of photography "})," ",jsxRuntimeExports.jsxs("p",{className:"credits-large",children:["abhinay khoparzi mukul chadda rasika dugal nikhil desai asmit pathare chandrachoor rai"," "]})," ",jsxRuntimeExports.jsx("p",{className:"credits-small",children:"casting by "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"annukampa harsh "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"executive producers "})," ",jsxRuntimeExports.jsxs("p",{className:"credits-large",children:["amit sharma quasar hamirani alekh sangal nakuul mehta ajay singh gaurav monga tanuj bhramar karan singh manisha panwar mukul chadda rasika dugal isha mohindar madhu sharma radhika sinha ram krishna sinha aarti sinha"," "]}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"art director "})," ",jsxRuntimeExports.jsx("p",{className:"credits-large",children:"mohini nirmal "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"vfx "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"pix elation studios karan gour "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"make up "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"sheetal sohoni "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"prosthetics "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"saloni rambhiya "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"legal advisor "})," ",jsxRuntimeExports.jsx("p",{className:"credits-large",children:"romika chawla "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"re-recording mixer "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"kaushal bhadkamkar "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"chief assistant cinematographer "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"vrushab sansgiri "}),jsxRuntimeExports.jsx("p",{className:"credits-small",children:"chief assistant director "})," ",jsxRuntimeExports.jsx("p",{className:"credits-large",children:"himanshu sharma "})," ",jsxRuntimeExports.jsx("p",{className:"credits-small",children:"on-location recordist "}),jsxRuntimeExports.jsx("p",{className:"credits-large",children:"prapul P. Betapudi "})," ",jsxRuntimeExports.jsx("p",{className:"credits-small",children:"colorist "})," ",jsxRuntimeExports.jsx("p",{className:"credits-large",children:"prashant sharma"})]})]})}function VidThumbnail(i){const[e,s]=reactExports.useState(null);function a(){const o=i.id-1;i.thisTitle(o)}return jsxRuntimeExports.jsxs("div",{className:`thumbnail-container ${e===i.id?"hovered":""}`,onMouseOver:()=>s(i.id),onMouseOut:()=>s(null),onClick:a,children:[jsxRuntimeExports.jsx("h1",{className:"thumbnail-title",children:i.title}),jsxRuntimeExports.jsx("div",{className:"title-bg"}),jsxRuntimeExports.jsx("img",{src:i.thumbnail,className:"thumbnail"})]})}function Videos(){const[i,e]=reactExports.useState([]),[s,a]=reactExports.useState(""),[o,c]=reactExports.useState("https://www.youtube.com/watch?v=lfOxA7NPJDg"),[d,h]=reactExports.useState(""),[b,tt]=reactExports.useState(!0),[nt,ft]=reactExports.useState(!0),[yt,Tt]=reactExports.useState(null),gt="https://api.fairyfolkthefilm.com";reactExports.useEffect(()=>{fetch(`${gt}/assets/vid_thumbnails`).then(vt=>{if(!vt.ok)throw new Error("Network response was not ok");return vt.json()}).then(vt=>{e(vt),c(vt[0].location),h(vt[0].thumbnail),ft(!1)}).catch(vt=>{console.error("Error fetching thumbnails:",vt),Tt(vt.message),ft(!1)})},[]);const St=React$1.useMemo(()=>({techOrder:["youtube"],autoplay:!1,controls:!0,sources:[{src:o,type:"video/youtube"}]}),[o]);function wt(vt){i.length>0&&i[vt]&&(a(i[vt].title),c(i[vt].location),h(i[vt].thumbnail),tt(!1))}const Et=i.map((vt,xt)=>jsxRuntimeExports.jsx(VidThumbnail,{...vt,thisTitle:()=>wt(xt)},vt.id));return console.log("active thumbnail:"+d),jsxRuntimeExports.jsxs("div",{className:"videos",children:[jsxRuntimeExports.jsxs("div",{className:"all-page-headings",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin",children:"VIDEOS"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-videos"})]}),jsxRuntimeExports.jsx("h1",{className:"title-main-video",children:i.length>0?b?i[0].title:s:"Loading videos..."}),jsxRuntimeExports.jsx(VideoPlayer,{options:St,firstTime:b}),jsxRuntimeExports.jsx("div",{className:"video-thumbnails",children:Et})]})}const right="/assets/RightArrow-DKbFEPQE.png",left="/assets/LeftArrow-BFBh9ApY.png";function Gallery(){const[i,e]=reactExports.useState([]),[s,a]=reactExports.useState(0),[o,c]=reactExports.useState(!1),[d,h]=reactExports.useState(!0),[b,tt]=reactExports.useState(null);reactExports.useEffect(()=>{fetch("https://api.fairyfolkthefilm.com/assets/gallery").then(St=>{if(!St.ok)throw new Error("Network response was not ok");return St.json()}).then(St=>{e(St),h(!1)}).catch(St=>{console.error("Error fetching images:",St),tt(St.message),h(!1)})},[]),reactExports.useEffect(()=>{i.length>0&&console.log("I don't know what this is:",i[s].img)},[i,s]);function nt(){return c(gt=>!gt)}function ft(){return c(!1)}function yt(){if(s!=0)return a(gt=>gt-1)}function Tt(){if(s!=i.length-1)return a(gt=>gt+1)}return jsxRuntimeExports.jsxs("div",{className:"gallery",children:[jsxRuntimeExports.jsxs("div",{className:"all-page-headings",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin",children:"GALLERY"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-gallery"})]}),jsxRuntimeExports.jsxs("div",{className:"gallery-window",onMouseOver:nt,onMouseOut:ft,children:[jsxRuntimeExports.jsxs("div",{className:`arrow-div ${o?"show-arrows":""}`,children:[jsxRuntimeExports.jsx("img",{src:left,className:"arrow left-arrow",onClick:yt}),jsxRuntimeExports.jsx("img",{src:right,className:"arrow right-arrow",onClick:Tt})]}),i.length>0&&jsxRuntimeExports.jsx("img",{src:i[s].img,alt:`Image ${s+1}`,className:"gallery-image"})]})]})}function GetInTouch(){const[i,e]=reactExports.useState({name:"",email:"",subject:"",message:""}),[s,a]=reactExports.useState(!1),[o,c]=reactExports.useState(!1),[d,h]=reactExports.useState(!1);function b(nt){nt.preventDefault(),fetch("https://api.fairyfolkthefilm.com/email",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(ft=>ft.json()).then(ft=>{console.log(ft.message),a(!0),h(!1),setTimeout(()=>{a(!1),e({name:"",email:"",subject:"",message:""}),c(!1)},3e3)}).catch(ft=>console.log("Error:",ft.message))}function tt(nt){const{name:ft,value:yt}=nt.target;e(Tt=>({...Tt,[ft]:yt})),ft==="message"&&c(yt.trim().length>0)}return jsxRuntimeExports.jsxs("div",{className:"getintouch",children:[jsxRuntimeExports.jsxs("div",{className:"all-page-headings",children:[jsxRuntimeExports.jsx("h1",{className:"heading-thin",children:"GET IN"}),jsxRuntimeExports.jsx("h1",{className:"heading-thick",children:" TOUCH"}),jsxRuntimeExports.jsx("hr",{className:"underline-heading-getintouch"})]}),jsxRuntimeExports.jsx("p",{className:"getintouch-description oswald",children:"Need support? Loved the film? Not so much? We'd love to know:"}),jsxRuntimeExports.jsxs("form",{className:"getintouch-form",onSubmit:nt=>o&&b(nt),children:[jsxRuntimeExports.jsx("img",{className:`loading ${d?"loading-show":""}`,src:load_animation}),jsxRuntimeExports.jsx("div",{className:`msg-sent-notice ${s?"msg-sent-notice-show":""}`,children:jsxRuntimeExports.jsx("h1",{children:"Message sent!"})}),jsxRuntimeExports.jsxs("div",{className:"message-box",style:{filter:s||d?"blur(3px)":"",transition:"filter 1s ease"},children:[jsxRuntimeExports.jsxs("label",{className:"standard-flex",children:[jsxRuntimeExports.jsx("p",{className:"label",children:"Name"}),jsxRuntimeExports.jsx("input",{className:"input-format",name:"name",onChange:tt,value:i.name})]}),jsxRuntimeExports.jsxs("label",{className:"standard-flex",children:[jsxRuntimeExports.jsx("p",{className:"label",children:"Email"}),jsxRuntimeExports.jsx("input",{className:"input-format",name:"email",onChange:tt,value:i.email})]}),jsxRuntimeExports.jsxs("label",{className:"standard-flex",children:[jsxRuntimeExports.jsx("p",{className:"label subject-getintouch",children:"Subject"}),jsxRuntimeExports.jsx("input",{className:"input-format",name:"subject",onChange:tt,value:i.subject})]}),jsxRuntimeExports.jsxs("label",{className:"message-body",children:[jsxRuntimeExports.jsx("p",{className:"label message-getintouch",style:{display:o?"none":""},children:"Message"}),jsxRuntimeExports.jsx("textarea",{className:"message-input",name:"message",onChange:tt,value:i.message})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:`getintouch-submit-button ${o?"getintouch-submit-button-show getintouch-submit-button-active":""}`,disabled:!o,style:{filter:s||d?"blur(3px)":"",transition:"filter 1s ease"},onClick:()=>h(!0),children:"SEND"})]})]})}function App(){return jsxRuntimeExports.jsxs("div",{className:"everything",id:"scroll-landing-home",children:[jsxRuntimeExports.jsx("div",{className:"footers",children:jsxRuntimeExports.jsxs("div",{className:"footer-width-control",children:[jsxRuntimeExports.jsx("a",{className:"privacy-policy",href:"/privacy-policy.pdf",target:"_blank",rel:"noopener noreferrer",children:"-PRIVACY POLICY-"}),jsxRuntimeExports.jsx("p",{className:"rights-notice",children:"© 2024 EMPATHEIA FILMS ALL RIGHTS RESERVED"}),jsxRuntimeExports.jsx("a",{className:"terms-of-use",href:"/terms-of-use.pdf",target:"_blank",rel:"noopener noreferrer",children:"-TERMS OF USE-"})]})}),jsxRuntimeExports.jsxs("div",{className:"poster-things",children:[jsxRuntimeExports.jsx("img",{src:poster,className:"poster",alt:"Fairy Folk Poster"}),jsxRuntimeExports.jsx("img",{src:poster2,className:"poster2",alt:"Fairy Folk Poster 2"}),jsxRuntimeExports.jsx(MenuElements$1,{}),jsxRuntimeExports.jsx(Home,{})]}),jsxRuntimeExports.jsxs("div",{className:"parent-container",children:[jsxRuntimeExports.jsx("div",{id:"scroll-landing-payasyoulike"}),jsxRuntimeExports.jsx(PayAsYouLike,{}),jsxRuntimeExports.jsx("div",{id:"scroll-landing-watchfilm"}),jsxRuntimeExports.jsx(WatchFilm,{}),jsxRuntimeExports.jsx("div",{id:"scroll-landing-about"}),jsxRuntimeExports.jsx(About,{}),jsxRuntimeExports.jsx("div",{id:"scroll-landing-videos"}),jsxRuntimeExports.jsx(Videos,{}),jsxRuntimeExports.jsx("div",{id:"scroll-landing-gallery"}),jsxRuntimeExports.jsx(Gallery,{}),jsxRuntimeExports.jsx("div",{id:"scroll-landing-getintouch"}),jsxRuntimeExports.jsx(GetInTouch,{}),jsxRuntimeExports.jsx("div",{className:"placeholder"})]})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
